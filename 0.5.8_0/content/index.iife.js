var f3=Object.defineProperty;var g3=(rl,us,Ga)=>us in rl?f3(rl,us,{enumerable:!0,configurable:!0,writable:!0,value:Ga}):rl[us]=Ga;var z=(rl,us,Ga)=>g3(rl,typeof us!="symbol"?us+"":us,Ga);(function(){"use strict";var _y,qC,GC;var rl=typeof document<"u"?document.currentScript:null;function us(f,l){for(var n=0;n<l.length;n++){const r=l[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in f)){const d=Object.getOwnPropertyDescriptor(r,s);d&&Object.defineProperty(f,s,d.get?d:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}))}var Ga=(f=>(f[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR",f[f.NONE=4]="NONE",f))(Ga||{});const qT="mcp_logger_config";class GT{constructor(l=qT){z(this,"storageKey");this.storageKey=l}async getLevel(){try{if(typeof chrome>"u"||!chrome.storage)return null;const n=(await chrome.storage.local.get(this.storageKey))[this.storageKey];return n&&typeof n.level=="number"?n.level:null}catch(l){return console.error("[LoggerStorage] Failed to get level:",l),null}}async setLevel(l){try{if(typeof chrome>"u"||!chrome.storage)return;const r=(await chrome.storage.local.get(this.storageKey))[this.storageKey]||{};r.level=l,await chrome.storage.local.set({[this.storageKey]:r})}catch(n){console.error("[LoggerStorage] Failed to set level:",n)}}async getComponentLevels(){try{if(typeof chrome>"u"||!chrome.storage)return{};const n=(await chrome.storage.local.get(this.storageKey))[this.storageKey];return n&&n.componentLevels?n.componentLevels:{}}catch(l){return console.error("[LoggerStorage] Failed to get component levels:",l),{}}}async setComponentLevel(l,n){try{if(typeof chrome>"u"||!chrome.storage)return;const s=(await chrome.storage.local.get(this.storageKey))[this.storageKey]||{};s.componentLevels||(s.componentLevels={}),s.componentLevels[l]=n,await chrome.storage.local.set({[this.storageKey]:s})}catch(r){console.error("[LoggerStorage] Failed to set component level:",r)}}async clear(){try{if(typeof chrome>"u"||!chrome.storage)return;await chrome.storage.local.remove(this.storageKey)}catch(l){console.error("[LoggerStorage] Failed to clear storage:",l)}}}const VT={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Kw(f){return typeof f=="number"?f:Ga[f]}class Jv{constructor(l="",n){z(this,"level");z(this,"componentLevels");z(this,"namespace");z(this,"storage");z(this,"defaultLevel");z(this,"isInitialized",!1);this.namespace=l,this.componentLevels=new Map;const r=this.isProductionEnvironment();this.defaultLevel=r?Ga.ERROR:Ga.DEBUG,this.level=Ga.ERROR,n!=null&&n.componentLevels&&Object.entries(n.componentLevels).forEach(([s,d])=>{this.componentLevels.set(s,d)}),this.storage=(n==null?void 0:n.persist)!==!1?new GT(n==null?void 0:n.storageKey):null,this.storage&&this.initializeFromStorage()}isProductionEnvironment(){try{if(typeof{url:rl&&rl.tagName.toUpperCase()==="SCRIPT"&&rl.src||new URL("index.iife.js",document.baseURI).href}<"u"&&VT)return!0}catch{}if(typeof chrome<"u"&&chrome.runtime)try{return!chrome.runtime.getURL("").includes("dev")}catch{}return!0}async initializeFromStorage(){if(this.storage)try{const l=await this.storage.getLevel();l!==null&&(this.level=l);const n=await this.storage.getComponentLevels();Object.entries(n).forEach(([r,s])=>{this.componentLevels.set(r,s)}),this.isInitialized=!0}catch(l){console.error("[Logger] Failed to initialize from storage:",l)}}getEffectiveLevel(){return this.namespace&&this.componentLevels.has(this.namespace)?this.componentLevels.get(this.namespace):this.level}shouldLog(l){return l>=this.getEffectiveLevel()}formatMessage(...l){return this.namespace?[`[${this.namespace}]`,...l]:l}debug(...l){this.shouldLog(Ga.DEBUG)&&console.debug(...this.formatMessage(...l))}info(...l){this.shouldLog(Ga.INFO)&&console.info(...this.formatMessage(...l))}warn(...l){this.shouldLog(Ga.WARN)&&console.warn(...this.formatMessage(...l))}error(...l){this.shouldLog(Ga.ERROR)&&console.error(...this.formatMessage(...l))}setLevel(l){this.level=Kw(l),this.storage&&this.storage.setLevel(this.level).catch(n=>{console.error("[Logger] Failed to persist level:",n)})}getLevel(){return this.level}setComponentLevel(l,n){const r=Kw(n);this.componentLevels.set(l,r),this.storage&&this.storage.setComponentLevel(l,r).catch(s=>{console.error("[Logger] Failed to persist component level:",s)})}getComponentLevel(l){return this.componentLevels.get(l)}resetToDefaults(){this.level=this.defaultLevel,this.componentLevels.clear(),this.storage&&this.storage.clear().catch(l=>{console.error("[Logger] Failed to clear storage:",l)})}child(l){return new Jv(l,{level:this.level,componentLevels:Object.fromEntries(this.componentLevels),persist:!1})}async waitForInitialization(){if(!this.storage)return;const l=2e3,n=Date.now();for(;!this.isInitialized&&Date.now()-n<l;)await new Promise(r=>setTimeout(r,50))}}let Xf=null;function YT(f){return Xf||(Xf=new Jv("",f)),Xf}function nt(f,l){return Xf||(Xf=new Jv("",l)),Xf.child(f)}function ZT(f){return YT(f)}const XT=nt("logMessage"),R=f=>{XT.debug(`: ${f}`)};var Wv={};const ds=nt("EventBus");class QT{constructor(l,n){z(this,"wildcardListeners",new Set);z(this,"eventHistory",[]);z(this,"maxHistorySize",100);z(this,"isEnabled",!0);z(this,"listeners",new Map);z(this,"onceListeners",new Map);z(this,"maxListeners",50);z(this,"isEmittingErrorEvent",!1);l!==void 0&&(this.maxListeners=l),n!==void 0&&(this.maxHistorySize=n)}emit(l,n){if(!this.isEnabled)return;const r=Date.now();this.eventHistory.push({event:l,data:n,timestamp:r}),this.eventHistory.length>this.maxHistorySize&&this.eventHistory.shift();const s=this.listeners.get(l);s&&[...s].forEach(h=>{try{h(n)}catch(v){if(ds.error(`Error in listener for event "${String(l)}":`,v),!this.isEmittingErrorEvent&&l!=="error:unhandled"){this.isEmittingErrorEvent=!0;try{this.emit("error:unhandled",{error:v,context:`event-listener-${String(l)}`})}finally{this.isEmittingErrorEvent=!1}}}});const d=this.onceListeners.get(l);if(d){const h=[...d];this.onceListeners.delete(l),h.forEach(v=>{try{v(n)}catch(S){if(ds.error(`Error in once listener for event "${String(l)}":`,S),!this.isEmittingErrorEvent&&l!=="error:unhandled"){this.isEmittingErrorEvent=!0;try{this.emit("error:unhandled",{error:S,context:`once-event-listener-${String(l)}`})}finally{this.isEmittingErrorEvent=!1}}}})}[...this.wildcardListeners].forEach(h=>{try{h({event:l,data:n})}catch(v){if(ds.error("Error in wildcard event listener:",v),!this.isEmittingErrorEvent&&l!=="error:unhandled"){this.isEmittingErrorEvent=!0;try{this.emit("error:unhandled",{error:v,context:"wildcard-event-listener"})}finally{this.isEmittingErrorEvent=!1}}}}),typeof process<"u"&&Wv&&Wv.NODE_ENV==="development"&&ds.debug(`Emitted "${String(l)}":`,n)}on(l,n){this.listeners.has(l)||this.listeners.set(l,new Set);const r=this.listeners.get(l);return r.size>=this.maxListeners&&ds.warn(`Max listeners (${this.maxListeners}) reached for event "${String(l)}". This might indicate a memory leak.`),r.add(n),()=>this.off(l,n)}once(l,n){this.onceListeners.has(l)||this.onceListeners.set(l,new Set);const r=this.onceListeners.get(l);return r.size>=this.maxListeners&&ds.warn(`Max listeners (${this.maxListeners}) reached for event (once) "${String(l)}". This might indicate a memory leak.`),r.add(n),()=>{const s=this.onceListeners.get(l);s&&(s.delete(n),s.size===0&&this.onceListeners.delete(l))}}off(l,n){const r=this.listeners.get(l);r&&(r.delete(n),r.size===0&&this.listeners.delete(l));const s=this.onceListeners.get(l);s&&(s.delete(n),s.size===0&&this.onceListeners.delete(l))}removeAllListeners(l){l?(this.listeners.delete(l),this.onceListeners.delete(l)):(this.listeners.clear(),this.onceListeners.clear())}getListenerCount(l){var s,d;const n=((s=this.listeners.get(l))==null?void 0:s.size)||0,r=((d=this.onceListeners.get(l))==null?void 0:d.size)||0;return n+r}setMaxListeners(l){l>0?this.maxListeners=l:ds.warn("[EventBus] Max listeners must be a positive number.")}onAny(l){return this.wildcardListeners.add(l),()=>{this.wildcardListeners.delete(l)}}getEventHistory(){return[...this.eventHistory]}getEventNames(){const l=new Set;return this.listeners.forEach((n,r)=>l.add(r)),this.onceListeners.forEach((n,r)=>l.add(r)),Array.from(l)}enable(){this.isEnabled=!0,ds.debug("[EventBus] Enabled.")}disable(){this.isEnabled=!1,ds.debug("[EventBus] Disabled.")}debugInfo(){const l={};this.listeners.forEach((r,s)=>{l[String(s)]=r.size});const n={};return this.onceListeners.forEach((r,s)=>{n[String(s)]=r.size}),{isEnabled:this.isEnabled,maxListeners:this.maxListeners,activeListeners:l,onceListeners:n,wildcardListenerCount:this.wildcardListeners.size,eventHistorySize:this.eventHistory.length,maxHistorySize:this.maxHistorySize,totalListenerRegistrations:Array.from(this.listeners.values()).reduce((r,s)=>r+s.size,0)+Array.from(this.onceListeners.values()).reduce((r,s)=>r+s.size,0)+this.wildcardListeners.size}}}const ue=new QT;typeof process<"u"&&Wv&&Wv.NODE_ENV==="development"&&typeof window<"u"&&(window.__eventBus=ue,window.__eventBusDebug=()=>ue.debugInfo());async function KT(){ds.debug("[MCPSuperAssistant] Event bus initialized.")}var JT={};const jn=nt("ContextBridge");class WT{constructor(l={}){z(this,"initialized",!1);z(this,"messageListeners",new Map);z(this,"pendingRequests",new Map);z(this,"config");z(this,"isExtensionContextValid",!0);z(this,"lastHealthCheck",0);z(this,"HEALTH_CHECK_INTERVAL",3e4);this.config={enableLogging:JT.NODE_ENV==="development",maxRetries:3,retryDelay:1e3,...l}}initialize(){if(this.initialized){jn.warn("[ContextBridge] Already initialized");return}try{if(!this.validateExtensionContext())throw new Error("Chrome extension context is not available");chrome.runtime.onMessage.addListener(this.handleChromeMessage.bind(this)),chrome.tabs&&chrome.tabs.onUpdated&&chrome.tabs.onUpdated.addListener(this.handleTabUpdated.bind(this)),this.setupEventBusIntegration(),this.startHealthCheck(),this.initialized=!0,jn.debug("[ContextBridge] Initialized successfully"),ue.emit("context:bridge-initialized",{timestamp:Date.now()})}catch(l){const n=l instanceof Error?l.message:String(l);throw jn.error("[ContextBridge] Initialization failed:",n),this.isExtensionContextValid=!1,l}}validateExtensionContext(){try{return typeof chrome>"u"||!chrome.runtime?(jn.error("[ContextBridge] Chrome runtime API not available"),this.isExtensionContextValid=!1,!1):chrome.runtime.id?typeof chrome.runtime.sendMessage!="function"?(jn.error("[ContextBridge] Chrome runtime.sendMessage not available"),this.isExtensionContextValid=!1,!1):(chrome.runtime.getManifest(),this.isExtensionContextValid=!0,!0):(jn.error("[ContextBridge] Chrome extension ID not available"),this.isExtensionContextValid=!1,!1)}catch(l){return jn.error("[ContextBridge] Extension context validation failed:",l),this.isExtensionContextValid=!1,ue.emit("context:bridge-invalidated",{timestamp:Date.now(),error:l instanceof Error?l.message:String(l)}),!1}}startHealthCheck(){const l=()=>{const n=Date.now();if(!(n-this.lastHealthCheck<this.HEALTH_CHECK_INTERVAL)){this.lastHealthCheck=n;try{if(!chrome.runtime||!chrome.runtime.id)throw new Error("Extension context invalidated");this.isExtensionContextValid||(this.isExtensionContextValid=!0,jn.debug("[ContextBridge] Extension context restored"),ue.emit("context:bridge-restored",{timestamp:n}))}catch(r){this.isExtensionContextValid&&(this.isExtensionContextValid=!1,jn.error("[ContextBridge] Extension context invalidated:",r),ue.emit("context:bridge-invalidated",{timestamp:n,error:r instanceof Error?r.message:String(r)}))}}};l(),setInterval(l,this.HEALTH_CHECK_INTERVAL)}handleChromeMessage(l,n,r){try{if(this.config.enableLogging&&jn.debug("[ContextBridge] Received Chrome message:",l,"from:",n),!l||typeof l!="object")return jn.warn("[ContextBridge] Invalid message received:",l),r({error:"Invalid message format"}),!1;const s={type:l.type||l.command||"unknown",payload:l.payload,origin:l.origin||this.inferOrigin(n),timestamp:l.timestamp||Date.now(),id:l.id};if(l.id&&this.pendingRequests.has(l.id)){const h=this.pendingRequests.get(l.id);return clearTimeout(h.timeout),this.pendingRequests.delete(l.id),this.config.enableLogging&&jn.debug(`Resolving pending request ${l.id}`),l.error?h.reject(new Error(l.error)):h.resolve(l.payload!==void 0?l.payload:l),!1}this.config.enableLogging&&jn.debug("[ContextBridge] Processed ContextMessage:",s),ue.emit("context:message-received",{message:s,sender:n});const d=this.messageListeners.get(s.type);return d&&d.length>0&&d.forEach(h=>{try{h(s)}catch(v){jn.error("[ContextBridge] Error in message listener:",v)}}),l.expectResponse?!0:(r({received:!0,timestamp:Date.now()}),!1)}catch(s){return jn.error("[ContextBridge] Error handling Chrome message:",s),r({error:s instanceof Error?s.message:String(s)}),!1}}handleTabUpdated(l,n,r){n.status==="complete"&&r.url&&ue.emit("context:tab-updated",{tabId:l,url:r.url,changeInfo:n})}inferOrigin(l){var n,r;return l.tab?"content":(n=l.url)!=null&&n.includes("popup.html")?"popup":(r=l.url)!=null&&r.includes("options.html")?"options":"background"}setupEventBusIntegration(){ue.on("context:broadcast",({event:l,data:n,excludeOrigin:r})=>{this.broadcast(l,n,r)}),ue.on("connection:status-changed",l=>{this.broadcast("connection:status-changed",l)}),ue.on("adapter:activated",l=>{this.broadcast("adapter:activated",l)}),ue.on("tool:execution-completed",l=>{this.broadcast("tool:execution-completed",l)})}async sendMessage(l,n,r,s={}){if(!this.isExtensionContextValid)throw new Error("Extension context is invalid - cannot send message");if(!this.initialized)throw new Error("ContextBridge not initialized");const d=s.retries??this.config.maxRetries??3,h=s.timeout||5e3;let v=null;for(let S=0;S<=d;S++)try{return await this.attemptSendMessage(l,n,r,h)}catch(w){if(v=w instanceof Error?w:new Error(String(w)),this.isNonRetryableError(v))throw v;if(S<d){const M=this.config.retryDelay*Math.pow(2,S);this.config.enableLogging&&jn.debug(`Retry ${S+1}/${d} for ${n} in ${M}ms`),await new Promise(N=>setTimeout(N,M))}}throw new Error(`Failed to send message after ${d} retries: ${v==null?void 0:v.message}`)}async attemptSendMessage(l,n,r,s=5e3){const d=this.generateMessageId(),h={type:n,payload:r,origin:"content",timestamp:Date.now(),id:d};return this.config.enableLogging&&jn.debug("[ContextBridge] Sending message:",h,"to:",l),new Promise((v,S)=>{const w=setTimeout(()=>{this.pendingRequests.delete(d),S(new Error(`Message timeout after ${s}ms for ${n} to ${l}`))},s);this.pendingRequests.set(d,{resolve:v,reject:S,timeout:w});try{if(!chrome.runtime||!chrome.runtime.sendMessage)throw new Error("Chrome runtime not available");l==="background"?chrome.runtime.sendMessage({...h,expectResponse:!0},M=>{if(clearTimeout(w),this.pendingRequests.delete(d),chrome.runtime.lastError){const N=`Chrome runtime error: ${chrome.runtime.lastError.message}`;this.config.enableLogging&&jn.error(N),S(new Error(N));return}M?M.error?S(new Error(M.error)):v(M.payload!==void 0?M.payload:M):v(null)}):chrome.runtime.sendMessage({...h,target:l,expectResponse:!0},M=>{if(clearTimeout(w),this.pendingRequests.delete(d),chrome.runtime.lastError){const N=`Chrome runtime error: ${chrome.runtime.lastError.message}`;this.config.enableLogging&&jn.error(N),S(new Error(N));return}M?M.error?S(new Error(M.error)):v(M.payload!==void 0?M.payload:M):v(null)})}catch(M){clearTimeout(w),this.pendingRequests.delete(d),M instanceof Error&&M.message.includes("Extension context invalidated")&&(this.isExtensionContextValid=!1,ue.emit("context:bridge-invalidated",{timestamp:Date.now(),error:M.message})),this.config.enableLogging&&jn.error("[ContextBridge] Error sending message:",M),S(M)}})}isNonRetryableError(l){const n=l.message.toLowerCase();return n.includes("extension context invalidated")||n.includes("chrome runtime not available")||n.includes("invalid arguments")||n.includes("permission denied")}broadcast(l,n,r){if(!this.isExtensionContextValid){this.config.enableLogging&&jn.warn("[ContextBridge] Cannot broadcast - extension context is invalid");return}const s={type:l,payload:n,origin:"content",timestamp:Date.now()};this.config.enableLogging&&jn.debug("[ContextBridge] Broadcasting message:",s);try{if(!chrome.runtime||!chrome.runtime.sendMessage)throw new Error("Chrome runtime not available");chrome.runtime.sendMessage({...s,broadcast:!0,excludeOrigin:r})}catch(d){jn.error("[ContextBridge] Error broadcasting message:",d),d instanceof Error&&(d.message.includes("Extension context invalidated")||d.message.includes("Chrome runtime not available"))&&(this.isExtensionContextValid=!1,ue.emit("context:bridge-invalidated",{timestamp:Date.now(),error:d.message}))}}onMessage(l,n){return this.messageListeners.has(l)||this.messageListeners.set(l,[]),this.messageListeners.get(l).push(n),()=>{const r=this.messageListeners.get(l);if(r){const s=r.indexOf(n);s>-1&&r.splice(s,1),r.length===0&&this.messageListeners.delete(l)}}}syncStore(l,n){this.broadcast("store:sync",{storeName:l,state:n})}async requestStoreState(l,n="background"){return this.sendMessage(n,"store:request",{storeName:l})}generateMessageId(){return`msg_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}async getConnectionStatus(){const l={};try{const n=await this.sendMessage("background","ping",{},{timeout:2e3});l.background=!!n}catch{l.background=!1}return l}cleanup(){for(const[,l]of this.pendingRequests)clearTimeout(l.timeout),l.reject(new Error("Context bridge cleanup"));this.pendingRequests.clear(),this.messageListeners.clear(),this.initialized=!1,jn.debug("[ContextBridge] Cleaned up")}}const Aa=new WT,Jw=f=>{let l;const n=new Set,r=(w,M)=>{const N=typeof w=="function"?w(l):w;if(!Object.is(N,l)){const k=l;l=M??(typeof N!="object"||N===null)?N:Object.assign({},l,N),n.forEach(A=>A(l,k))}},s=()=>l,v={setState:r,getState:s,getInitialState:()=>S,subscribe:w=>(n.add(w),()=>n.delete(w))},S=l=f(r,s,v);return v},ek=f=>f?Jw(f):Jw;function Ww(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var ey={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function tk(){if(eE)return _t;eE=1;var f=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.iterator;function k(_){return _===null||typeof _!="object"?null:(_=N&&_[N]||_["@@iterator"],typeof _=="function"?_:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,B={};function Z(_,P,ge){this.props=_,this.context=P,this.refs=B,this.updater=ge||A}Z.prototype.isReactComponent={},Z.prototype.setState=function(_,P){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,P,"setState")},Z.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function Y(){}Y.prototype=Z.prototype;function ie(_,P,ge){this.props=_,this.context=P,this.refs=B,this.updater=ge||A}var pe=ie.prototype=new Y;pe.constructor=ie,$(pe,Z.prototype),pe.isPureReactComponent=!0;var oe=Array.isArray,me={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function he(_,P,ge,re,Oe,He){return ge=He.ref,{$$typeof:f,type:_,key:P,ref:ge!==void 0?ge:null,props:He}}function ne(_,P){return he(_.type,P,void 0,void 0,void 0,_.props)}function Ce(_){return typeof _=="object"&&_!==null&&_.$$typeof===f}function de(_){var P={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ge){return P[ge]})}var Ue=/\/+/g;function De(_,P){return typeof _=="object"&&_!==null&&_.key!=null?de(""+_.key):P.toString(36)}function Ze(){}function Je(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(Ze,Ze):(_.status="pending",_.then(function(P){_.status==="pending"&&(_.status="fulfilled",_.value=P)},function(P){_.status==="pending"&&(_.status="rejected",_.reason=P)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function ct(_,P,ge,re,Oe){var He=typeof _;(He==="undefined"||He==="boolean")&&(_=null);var ke=!1;if(_===null)ke=!0;else switch(He){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(_.$$typeof){case f:case l:ke=!0;break;case M:return ke=_._init,ct(ke(_._payload),P,ge,re,Oe)}}if(ke)return Oe=Oe(_),ke=re===""?"."+De(_,0):re,oe(Oe)?(ge="",ke!=null&&(ge=ke.replace(Ue,"$&/")+"/"),ct(Oe,P,ge,"",function(_e){return _e})):Oe!=null&&(Ce(Oe)&&(Oe=ne(Oe,ge+(Oe.key==null||_&&_.key===Oe.key?"":(""+Oe.key).replace(Ue,"$&/")+"/")+ke)),P.push(Oe)),1;ke=0;var Pe=re===""?".":re+":";if(oe(_))for(var Me=0;Me<_.length;Me++)re=_[Me],He=Pe+De(re,Me),ke+=ct(re,P,ge,He,Oe);else if(Me=k(_),typeof Me=="function")for(_=Me.call(_),Me=0;!(re=_.next()).done;)re=re.value,He=Pe+De(re,Me++),ke+=ct(re,P,ge,He,Oe);else if(He==="object"){if(typeof _.then=="function")return ct(Je(_),P,ge,re,Oe);throw P=String(_),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ke}function F(_,P,ge){if(_==null)return _;var re=[],Oe=0;return ct(_,re,"","",function(He){return P.call(ge,He,Oe++)}),re}function q(_){if(_._status===-1){var P=_._result;P=P(),P.then(function(ge){(_._status===0||_._status===-1)&&(_._status=1,_._result=ge)},function(ge){(_._status===0||_._status===-1)&&(_._status=2,_._result=ge)}),_._status===-1&&(_._status=0,_._result=P)}if(_._status===1)return _._result.default;throw _._result}var W=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)};function Re(){}return _t.Children={map:F,forEach:function(_,P,ge){F(_,function(){P.apply(this,arguments)},ge)},count:function(_){var P=0;return F(_,function(){P++}),P},toArray:function(_){return F(_,function(P){return P})||[]},only:function(_){if(!Ce(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},_t.Component=Z,_t.Fragment=n,_t.Profiler=s,_t.PureComponent=ie,_t.StrictMode=r,_t.Suspense=S,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me,_t.__COMPILER_RUNTIME={__proto__:null,c:function(_){return me.H.useMemoCache(_)}},_t.cache=function(_){return function(){return _.apply(null,arguments)}},_t.cloneElement=function(_,P,ge){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var re=$({},_.props),Oe=_.key,He=void 0;if(P!=null)for(ke in P.ref!==void 0&&(He=void 0),P.key!==void 0&&(Oe=""+P.key),P)!J.call(P,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&P.ref===void 0||(re[ke]=P[ke]);var ke=arguments.length-2;if(ke===1)re.children=ge;else if(1<ke){for(var Pe=Array(ke),Me=0;Me<ke;Me++)Pe[Me]=arguments[Me+2];re.children=Pe}return he(_.type,Oe,void 0,void 0,He,re)},_t.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},_t.createElement=function(_,P,ge){var re,Oe={},He=null;if(P!=null)for(re in P.key!==void 0&&(He=""+P.key),P)J.call(P,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Oe[re]=P[re]);var ke=arguments.length-2;if(ke===1)Oe.children=ge;else if(1<ke){for(var Pe=Array(ke),Me=0;Me<ke;Me++)Pe[Me]=arguments[Me+2];Oe.children=Pe}if(_&&_.defaultProps)for(re in ke=_.defaultProps,ke)Oe[re]===void 0&&(Oe[re]=ke[re]);return he(_,He,void 0,void 0,null,Oe)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(_){return{$$typeof:v,render:_}},_t.isValidElement=Ce,_t.lazy=function(_){return{$$typeof:M,_payload:{_status:-1,_result:_},_init:q}},_t.memo=function(_,P){return{$$typeof:w,type:_,compare:P===void 0?null:P}},_t.startTransition=function(_){var P=me.T,ge={};me.T=ge;try{var re=_(),Oe=me.S;Oe!==null&&Oe(ge,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Re,W)}catch(He){W(He)}finally{me.T=P}},_t.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()},_t.use=function(_){return me.H.use(_)},_t.useActionState=function(_,P,ge){return me.H.useActionState(_,P,ge)},_t.useCallback=function(_,P){return me.H.useCallback(_,P)},_t.useContext=function(_){return me.H.useContext(_)},_t.useDebugValue=function(){},_t.useDeferredValue=function(_,P){return me.H.useDeferredValue(_,P)},_t.useEffect=function(_,P,ge){var re=me.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(_,P)},_t.useId=function(){return me.H.useId()},_t.useImperativeHandle=function(_,P,ge){return me.H.useImperativeHandle(_,P,ge)},_t.useInsertionEffect=function(_,P){return me.H.useInsertionEffect(_,P)},_t.useLayoutEffect=function(_,P){return me.H.useLayoutEffect(_,P)},_t.useMemo=function(_,P){return me.H.useMemo(_,P)},_t.useOptimistic=function(_,P){return me.H.useOptimistic(_,P)},_t.useReducer=function(_,P,ge){return me.H.useReducer(_,P,ge)},_t.useRef=function(_){return me.H.useRef(_)},_t.useState=function(_){return me.H.useState(_)},_t.useSyncExternalStore=function(_,P,ge){return me.H.useSyncExternalStore(_,P,ge)},_t.useTransition=function(){return me.H.useTransition()},_t.version="19.1.0",_t}var Hh={exports:{}};Hh.exports;var tE;function nk(){return tE||(tE=1,function(f,l){var n={};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */n.NODE_ENV!=="production"&&function(){function r(I,X){Object.defineProperty(h.prototype,I,{get:function(){console.warn("%s(...) is deprecated in plain JavaScript React classes. %s",X[0],X[1])}})}function s(I){return I===null||typeof I!="object"?null:(I=ft&&I[ft]||I["@@iterator"],typeof I=="function"?I:null)}function d(I,X){I=(I=I.constructor)&&(I.displayName||I.name)||"ReactClass";var ze=I+"."+X;yt[ze]||(console.error("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",X,I),yt[ze]=!0)}function h(I,X,ze){this.props=I,this.context=X,this.refs=Un,this.updater=ze||nn}function v(){}function S(I,X,ze){this.props=I,this.context=X,this.refs=Un,this.updater=ze||nn}function w(I){return""+I}function M(I){try{w(I);var X=!1}catch{X=!0}if(X){X=console;var ze=X.error,je=typeof Symbol=="function"&&Symbol.toStringTag&&I[Symbol.toStringTag]||I.constructor.name||"Object";return ze.call(X,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",je),w(I)}}function N(I){if(I==null)return null;if(typeof I=="function")return I.$$typeof===Gt?null:I.displayName||I.name||null;if(typeof I=="string")return I;switch(I){case P:return"Fragment";case re:return"Profiler";case ge:return"StrictMode";case Pe:return"Suspense";case Me:return"SuspenseList";case Xe:return"Activity"}if(typeof I=="object")switch(typeof I.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),I.$$typeof){case _:return"Portal";case He:return(I.displayName||"Context")+".Provider";case Oe:return(I._context.displayName||"Context")+".Consumer";case ke:var X=I.render;return I=I.displayName,I||(I=X.displayName||X.name||"",I=I!==""?"ForwardRef("+I+")":"ForwardRef"),I;case _e:return X=I.displayName||null,X!==null?X:N(I.type)||"Memo";case at:X=I._payload,I=I._init;try{return N(I(X))}catch{}}return null}function k(I){if(I===P)return"<>";if(typeof I=="object"&&I!==null&&I.$$typeof===at)return"<...>";try{var X=N(I);return X?"<"+X+">":"<...>"}catch{return"<...>"}}function A(){var I=Ae.A;return I===null?null:I.getOwner()}function $(){return Error("react-stack-top-frame")}function B(I){if(st.call(I,"key")){var X=Object.getOwnPropertyDescriptor(I,"key").get;if(X&&X.isReactWarning)return!1}return I.key!==void 0}function Z(I,X){function ze(){Be||(Be=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",X))}ze.isReactWarning=!0,Object.defineProperty(I,"key",{get:ze,configurable:!0})}function Y(){var I=N(this.type);return $e[I]||($e[I]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),I=this.props.ref,I!==void 0?I:null}function ie(I,X,ze,je,Ve,Pt,Et,Yt){return ze=Pt.ref,I={$$typeof:Re,type:I,key:X,props:Pt,_owner:Ve},(ze!==void 0?ze:null)!==null?Object.defineProperty(I,"ref",{enumerable:!1,get:Y}):Object.defineProperty(I,"ref",{enumerable:!1,value:null}),I._store={},Object.defineProperty(I._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(I,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(I,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:Et}),Object.defineProperty(I,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Yt}),Object.freeze&&(Object.freeze(I.props),Object.freeze(I)),I}function pe(I,X){return X=ie(I.type,X,void 0,void 0,I._owner,I.props,I._debugStack,I._debugTask),I._store&&(X._store.validated=I._store.validated),X}function oe(I){return typeof I=="object"&&I!==null&&I.$$typeof===Re}function me(I){var X={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ze){return X[ze]})}function J(I,X){return typeof I=="object"&&I!==null&&I.key!=null?(M(I.key),me(""+I.key)):X.toString(36)}function he(){}function ne(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(he,he):(I.status="pending",I.then(function(X){I.status==="pending"&&(I.status="fulfilled",I.value=X)},function(X){I.status==="pending"&&(I.status="rejected",I.reason=X)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function Ce(I,X,ze,je,Ve){var Pt=typeof I;(Pt==="undefined"||Pt==="boolean")&&(I=null);var Et=!1;if(I===null)Et=!0;else switch(Pt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(I.$$typeof){case Re:case _:Et=!0;break;case at:return Et=I._init,Ce(Et(I._payload),X,ze,je,Ve)}}if(Et){Et=I,Ve=Ve(Et);var Yt=je===""?"."+J(Et,0):je;return Ne(Ve)?(ze="",Yt!=null&&(ze=Yt.replace(hl,"$&/")+"/"),Ce(Ve,X,ze,"",function(Jn){return Jn})):Ve!=null&&(oe(Ve)&&(Ve.key!=null&&(Et&&Et.key===Ve.key||M(Ve.key)),ze=pe(Ve,ze+(Ve.key==null||Et&&Et.key===Ve.key?"":(""+Ve.key).replace(hl,"$&/")+"/")+Yt),je!==""&&Et!=null&&oe(Et)&&Et.key==null&&Et._store&&!Et._store.validated&&(ze._store.validated=2),Ve=ze),X.push(Ve)),1}if(Et=0,Yt=je===""?".":je+":",Ne(I))for(var xt=0;xt<I.length;xt++)je=I[xt],Pt=Yt+J(je,xt),Et+=Ce(je,X,ze,Pt,Ve);else if(xt=s(I),typeof xt=="function")for(xt===I.entries&&(Vn||console.warn("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Vn=!0),I=xt.call(I),xt=0;!(je=I.next()).done;)je=je.value,Pt=Yt+J(je,xt++),Et+=Ce(je,X,ze,Pt,Ve);else if(Pt==="object"){if(typeof I.then=="function")return Ce(ne(I),X,ze,je,Ve);throw X=String(I),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Et}function de(I,X,ze){if(I==null)return I;var je=[],Ve=0;return Ce(I,je,"","",function(Pt){return X.call(ze,Pt,Ve++)}),je}function Ue(I){if(I._status===-1){var X=I._result;X=X(),X.then(function(ze){(I._status===0||I._status===-1)&&(I._status=1,I._result=ze)},function(ze){(I._status===0||I._status===-1)&&(I._status=2,I._result=ze)}),I._status===-1&&(I._status=0,I._result=X)}if(I._status===1)return X=I._result,X===void 0&&console.error(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,X),"default"in X||console.error(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,X),X.default;throw I._result}function De(){var I=Ae.H;return I===null&&console.error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`),I}function Ze(){}function Je(I){if(kr===null)try{var X=("require"+Math.random()).slice(0,7);kr=(f&&f[X]).call(f,"timers").setImmediate}catch{kr=function(je){ml===!1&&(ml=!0,typeof MessageChannel>"u"&&console.error("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var Ve=new MessageChannel;Ve.port1.onmessage=je,Ve.port2.postMessage(void 0)}}return kr(I)}function ct(I){return 1<I.length&&typeof AggregateError=="function"?new AggregateError(I):I[0]}function F(I,X){X!==yo-1&&console.error("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),yo=X}function q(I,X,ze){var je=Ae.actQueue;if(je!==null)if(je.length!==0)try{W(je),Je(function(){return q(I,X,ze)});return}catch(Ve){Ae.thrownErrors.push(Ve)}else Ae.actQueue=null;0<Ae.thrownErrors.length?(je=ct(Ae.thrownErrors),Ae.thrownErrors.length=0,ze(je)):X(I)}function W(I){if(!sa){sa=!0;var X=0;try{for(;X<I.length;X++){var ze=I[X];do{Ae.didUsePromise=!1;var je=ze(!1);if(je!==null){if(Ae.didUsePromise){I[X]=ze,I.splice(0,X);return}ze=je}else break}while(!0)}I.length=0}catch(Ve){I.splice(0,X+1),Ae.thrownErrors.push(Ve)}finally{sa=!1}}}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var Re=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),Oe=Symbol.for("react.consumer"),He=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Xe=Symbol.for("react.activity"),ft=Symbol.iterator,yt={},nn={isMounted:function(){return!1},enqueueForceUpdate:function(I){d(I,"forceUpdate")},enqueueReplaceState:function(I){d(I,"replaceState")},enqueueSetState:function(I){d(I,"setState")}},Ei=Object.assign,Un={};Object.freeze(Un),h.prototype.isReactComponent={},h.prototype.setState=function(I,X){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,X,"setState")},h.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};var Tt={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},En;for(En in Tt)Tt.hasOwnProperty(En)&&r(En,Tt[En]);v.prototype=h.prototype,Tt=S.prototype=new v,Tt.constructor=S,Ei(Tt,h.prototype),Tt.isPureReactComponent=!0;var Ne=Array.isArray,Gt=Symbol.for("react.client.reference"),Ae={H:null,A:null,T:null,S:null,V:null,actQueue:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1,didUsePromise:!1,thrownErrors:[],getCurrentStack:null,recentlyCreatedOwnerStacks:0},st=Object.prototype.hasOwnProperty,kt=console.createTask?console.createTask:function(){return null};Tt={"react-stack-bottom-frame":function(I){return I()}};var Be,it,$e={},ut=Tt["react-stack-bottom-frame"].bind(Tt,$)(),Pn=kt(k($)),Vn=!1,hl=/\/+/g,Cn=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ml=!1,kr=null,yo=0,Ci=!1,sa=!1,Za=typeof queueMicrotask=="function"?function(I){queueMicrotask(function(){return queueMicrotask(I)})}:Je;Tt=Object.freeze({__proto__:null,c:function(I){return De().useMemoCache(I)}}),l.Children={map:de,forEach:function(I,X,ze){de(I,function(){X.apply(this,arguments)},ze)},count:function(I){var X=0;return de(I,function(){X++}),X},toArray:function(I){return de(I,function(X){return X})||[]},only:function(I){if(!oe(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},l.Component=h,l.Fragment=P,l.Profiler=re,l.PureComponent=S,l.StrictMode=ge,l.Suspense=Pe,l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae,l.__COMPILER_RUNTIME=Tt,l.act=function(I){var X=Ae.actQueue,ze=yo;yo++;var je=Ae.actQueue=X!==null?X:[],Ve=!1;try{var Pt=I()}catch(xt){Ae.thrownErrors.push(xt)}if(0<Ae.thrownErrors.length)throw F(X,ze),I=ct(Ae.thrownErrors),Ae.thrownErrors.length=0,I;if(Pt!==null&&typeof Pt=="object"&&typeof Pt.then=="function"){var Et=Pt;return Za(function(){Ve||Ci||(Ci=!0,console.error("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),{then:function(xt,Jn){Ve=!0,Et.then(function(Zo){if(F(X,ze),ze===0){try{W(je),Je(function(){return q(Zo,xt,Jn)})}catch(Xo){Ae.thrownErrors.push(Xo)}if(0<Ae.thrownErrors.length){var om=ct(Ae.thrownErrors);Ae.thrownErrors.length=0,Jn(om)}}else xt(Zo)},function(Zo){F(X,ze),0<Ae.thrownErrors.length&&(Zo=ct(Ae.thrownErrors),Ae.thrownErrors.length=0),Jn(Zo)})}}}var Yt=Pt;if(F(X,ze),ze===0&&(W(je),je.length!==0&&Za(function(){Ve||Ci||(Ci=!0,console.error("A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"))}),Ae.actQueue=null),0<Ae.thrownErrors.length)throw I=ct(Ae.thrownErrors),Ae.thrownErrors.length=0,I;return{then:function(xt,Jn){Ve=!0,ze===0?(Ae.actQueue=je,Je(function(){return q(Yt,xt,Jn)})):xt(Yt)}}},l.cache=function(I){return function(){return I.apply(null,arguments)}},l.captureOwnerStack=function(){var I=Ae.getCurrentStack;return I===null?null:I()},l.cloneElement=function(I,X,ze){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var je=Ei({},I.props),Ve=I.key,Pt=I._owner;if(X!=null){var Et;e:{if(st.call(X,"ref")&&(Et=Object.getOwnPropertyDescriptor(X,"ref").get)&&Et.isReactWarning){Et=!1;break e}Et=X.ref!==void 0}Et&&(Pt=A()),B(X)&&(M(X.key),Ve=""+X.key);for(Yt in X)!st.call(X,Yt)||Yt==="key"||Yt==="__self"||Yt==="__source"||Yt==="ref"&&X.ref===void 0||(je[Yt]=X[Yt])}var Yt=arguments.length-2;if(Yt===1)je.children=ze;else if(1<Yt){Et=Array(Yt);for(var xt=0;xt<Yt;xt++)Et[xt]=arguments[xt+2];je.children=Et}for(je=ie(I.type,Ve,void 0,void 0,Pt,je,I._debugStack,I._debugTask),Ve=2;Ve<arguments.length;Ve++)Pt=arguments[Ve],oe(Pt)&&Pt._store&&(Pt._store.validated=1);return je},l.createContext=function(I){return I={$$typeof:He,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:Oe,_context:I},I._currentRenderer=null,I._currentRenderer2=null,I},l.createElement=function(I,X,ze){for(var je=2;je<arguments.length;je++){var Ve=arguments[je];oe(Ve)&&Ve._store&&(Ve._store.validated=1)}if(je={},Ve=null,X!=null)for(xt in it||!("__self"in X)||"key"in X||(it=!0,console.warn("Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform")),B(X)&&(M(X.key),Ve=""+X.key),X)st.call(X,xt)&&xt!=="key"&&xt!=="__self"&&xt!=="__source"&&(je[xt]=X[xt]);var Pt=arguments.length-2;if(Pt===1)je.children=ze;else if(1<Pt){for(var Et=Array(Pt),Yt=0;Yt<Pt;Yt++)Et[Yt]=arguments[Yt+2];Object.freeze&&Object.freeze(Et),je.children=Et}if(I&&I.defaultProps)for(xt in Pt=I.defaultProps,Pt)je[xt]===void 0&&(je[xt]=Pt[xt]);Ve&&Z(je,typeof I=="function"?I.displayName||I.name||"Unknown":I);var xt=1e4>Ae.recentlyCreatedOwnerStacks++;return ie(I,Ve,void 0,void 0,A(),je,xt?Error("react-stack-top-frame"):ut,xt?kt(k(I)):Pn)},l.createRef=function(){var I={current:null};return Object.seal(I),I},l.forwardRef=function(I){I!=null&&I.$$typeof===_e?console.error("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof I!="function"?console.error("forwardRef requires a render function but was given %s.",I===null?"null":typeof I):I.length!==0&&I.length!==2&&console.error("forwardRef render functions accept exactly two parameters: props and ref. %s",I.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),I!=null&&I.defaultProps!=null&&console.error("forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?");var X={$$typeof:ke,render:I},ze;return Object.defineProperty(X,"displayName",{enumerable:!1,configurable:!0,get:function(){return ze},set:function(je){ze=je,I.name||I.displayName||(Object.defineProperty(I,"name",{value:je}),I.displayName=je)}}),X},l.isValidElement=oe,l.lazy=function(I){return{$$typeof:at,_payload:{_status:-1,_result:I},_init:Ue}},l.memo=function(I,X){I==null&&console.error("memo: The first argument must be a component. Instead received: %s",I===null?"null":typeof I),X={$$typeof:_e,type:I,compare:X===void 0?null:X};var ze;return Object.defineProperty(X,"displayName",{enumerable:!1,configurable:!0,get:function(){return ze},set:function(je){ze=je,I.name||I.displayName||(Object.defineProperty(I,"name",{value:je}),I.displayName=je)}}),X},l.startTransition=function(I){var X=Ae.T,ze={};Ae.T=ze,ze._updatedFibers=new Set;try{var je=I(),Ve=Ae.S;Ve!==null&&Ve(ze,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Ze,Cn)}catch(Pt){Cn(Pt)}finally{X===null&&ze._updatedFibers&&(I=ze._updatedFibers.size,ze._updatedFibers.clear(),10<I&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table.")),Ae.T=X}},l.unstable_useCacheRefresh=function(){return De().useCacheRefresh()},l.use=function(I){return De().use(I)},l.useActionState=function(I,X,ze){return De().useActionState(I,X,ze)},l.useCallback=function(I,X){return De().useCallback(I,X)},l.useContext=function(I){var X=De();return I.$$typeof===Oe&&console.error("Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"),X.useContext(I)},l.useDebugValue=function(I,X){return De().useDebugValue(I,X)},l.useDeferredValue=function(I,X){return De().useDeferredValue(I,X)},l.useEffect=function(I,X,ze){I==null&&console.warn("React Hook useEffect requires an effect callback. Did you forget to pass a callback to the hook?");var je=De();if(typeof ze=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return je.useEffect(I,X)},l.useId=function(){return De().useId()},l.useImperativeHandle=function(I,X,ze){return De().useImperativeHandle(I,X,ze)},l.useInsertionEffect=function(I,X){return I==null&&console.warn("React Hook useInsertionEffect requires an effect callback. Did you forget to pass a callback to the hook?"),De().useInsertionEffect(I,X)},l.useLayoutEffect=function(I,X){return I==null&&console.warn("React Hook useLayoutEffect requires an effect callback. Did you forget to pass a callback to the hook?"),De().useLayoutEffect(I,X)},l.useMemo=function(I,X){return De().useMemo(I,X)},l.useOptimistic=function(I,X){return De().useOptimistic(I,X)},l.useReducer=function(I,X,ze){return De().useReducer(I,X,ze)},l.useRef=function(I){return De().useRef(I)},l.useState=function(I){return De().useState(I)},l.useSyncExternalStore=function(I,X,ze){return De().useSyncExternalStore(I,X,ze)},l.useTransition=function(){return De().useTransition()},l.version="19.1.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()}(Hh,Hh.exports)),Hh.exports}var nE;function Qf(){if(nE)return ey.exports;nE=1;var f={};return f.NODE_ENV==="production"?ey.exports=tk():ey.exports=nk(),ey.exports}var K=Qf();const Zu=Ww(K),fo=us({__proto__:null,default:Zu},[K]),ik=f=>f;function ak(f,l=ik){const n=Zu.useSyncExternalStore(f.subscribe,()=>l(f.getState()),()=>l(f.getInitialState()));return Zu.useDebugValue(n),n}const ok=f=>{const l=ek(f),n=r=>ak(l,r);return Object.assign(n,l),n},Kf=f=>ok,iE={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Fh=new Map,ty=f=>{const l=Fh.get(f);return l?Object.fromEntries(Object.entries(l.stores).map(([n,r])=>[n,r.getState()])):{}},rk=(f,l,n)=>{if(f===void 0)return{type:"untracked",connection:l.connect(n)};const r=Fh.get(n.name);if(r)return{type:"tracked",store:f,...r};const s={connection:l.connect(n),stores:{}};return Fh.set(n.name,s),{type:"tracked",store:f,...s}},sk=(f,l)=>{if(l===void 0)return;const n=Fh.get(f);n&&(delete n.stores[l],Object.keys(n.stores).length===0&&Fh.delete(f))},lk=f=>{var l,n;if(!f)return;const r=f.split(`
`),s=r.findIndex(h=>h.includes("api.setState"));if(s<0)return;const d=((l=r[s+1])==null?void 0:l.trim())||"";return(n=/.+ (.+) .+/.exec(d))==null?void 0:n[1]},Jf=(f,l={})=>(n,r,s)=>{const{enabled:d,anonymousActionType:h,store:v,...S}=l;let w;try{w=(d??(iE?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!w)return f(n,r,s);const{connection:M,...N}=rk(v,w,S);let k=!0;s.setState=(B,Z,Y)=>{const ie=n(B,Z);if(!k)return ie;const pe=lk(new Error().stack),oe=Y===void 0?{type:h||pe||"anonymous"}:typeof Y=="string"?{type:Y}:Y;return v===void 0?(M==null||M.send(oe,r()),ie):(M==null||M.send({...oe,type:`${v}/${oe.type}`},{...ty(S.name),[v]:s.getState()}),ie)},s.devtools={cleanup:()=>{M&&typeof M.unsubscribe=="function"&&M.unsubscribe(),sk(S.name,v)}};const A=(...B)=>{const Z=k;k=!1,n(...B),k=Z},$=f(s.setState,r,s);if(N.type==="untracked"?M==null||M.init($):(N.stores[N.store]=s,M==null||M.init(Object.fromEntries(Object.entries(N.stores).map(([B,Z])=>[B,B===N.store?$:Z.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let B=!1;const Z=s.dispatch;s.dispatch=(...Y)=>{(iE?"production":void 0)!=="production"&&Y[0].type==="__setState"&&!B&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),B=!0),Z(...Y)}}return M.subscribe(B=>{var Z;switch(B.type){case"ACTION":if(typeof B.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Mx(B.payload,Y=>{if(Y.type==="__setState"){if(v===void 0){A(Y.state);return}Object.keys(Y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const ie=Y.state[v];if(ie==null)return;JSON.stringify(s.getState())!==JSON.stringify(ie)&&A(ie);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(Y)});case"DISPATCH":switch(B.payload.type){case"RESET":return A($),v===void 0?M==null?void 0:M.init(s.getState()):M==null?void 0:M.init(ty(S.name));case"COMMIT":if(v===void 0){M==null||M.init(s.getState());return}return M==null?void 0:M.init(ty(S.name));case"ROLLBACK":return Mx(B.state,Y=>{if(v===void 0){A(Y),M==null||M.init(s.getState());return}A(Y[v]),M==null||M.init(ty(S.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Mx(B.state,Y=>{if(v===void 0){A(Y);return}JSON.stringify(s.getState())!==JSON.stringify(Y[v])&&A(Y[v])});case"IMPORT_STATE":{const{nextLiftedState:Y}=B.payload,ie=(Z=Y.computedStates.slice(-1)[0])==null?void 0:Z.state;if(!ie)return;A(v===void 0?ie:ie[v]),M==null||M.send(null,Y);return}case"PAUSE_RECORDING":return k=!k}return}}),$},Mx=(f,l)=>{let n;try{n=JSON.parse(f)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&l(n)};function ny(f,l){let n;try{n=f()}catch{return}return{getItem:s=>{var d;const h=S=>S===null?null:JSON.parse(S,void 0),v=(d=n.getItem(s))!=null?d:null;return v instanceof Promise?v.then(h):h(v)},setItem:(s,d)=>n.setItem(s,JSON.stringify(d,void 0)),removeItem:s=>n.removeItem(s)}}const Ax=f=>l=>{try{const n=f(l);return n instanceof Promise?n:{then(r){return Ax(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ax(r)(n)}}}},Ox=(f,l)=>(n,r,s)=>{let d={storage:ny(()=>localStorage),partialize:B=>B,version:0,merge:(B,Z)=>({...Z,...B}),...l},h=!1;const v=new Set,S=new Set;let w=d.storage;if(!w)return f((...B)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...B)},r,s);const M=()=>{const B=d.partialize({...r()});return w.setItem(d.name,{state:B,version:d.version})},N=s.setState;s.setState=(B,Z)=>{N(B,Z),M()};const k=f((...B)=>{n(...B),M()},r,s);s.getInitialState=()=>k;let A;const $=()=>{var B,Z;if(!w)return;h=!1,v.forEach(ie=>{var pe;return ie((pe=r())!=null?pe:k)});const Y=((Z=d.onRehydrateStorage)==null?void 0:Z.call(d,(B=r())!=null?B:k))||void 0;return Ax(w.getItem.bind(w))(d.name).then(ie=>{if(ie)if(typeof ie.version=="number"&&ie.version!==d.version){if(d.migrate){const pe=d.migrate(ie.state,ie.version);return pe instanceof Promise?pe.then(oe=>[!0,oe]):[!0,pe]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,ie.state];return[!1,void 0]}).then(ie=>{var pe;const[oe,me]=ie;if(A=d.merge(me,(pe=r())!=null?pe:k),n(A,!0),oe)return M()}).then(()=>{Y==null||Y(A,void 0),A=r(),h=!0,S.forEach(ie=>ie(A))}).catch(ie=>{Y==null||Y(void 0,ie)})};return s.persist={setOptions:B=>{d={...d,...B},B.storage&&(w=B.storage)},clearStorage:()=>{w==null||w.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>$(),hasHydrated:()=>h,onHydrate:B=>(v.add(B),()=>{v.delete(B)}),onFinishHydration:B=>(S.add(B),()=>{S.delete(B)})},d.skipHydration||$(),A||k};var ck={};const Xu=nt("GlobalEventHandlers");class uk{constructor(){z(this,"unsubscribeFunctions",[])}_logEvent(l){return n=>{ck.NODE_ENV==="development"&&Xu.debug(`Event "${String(l)}":`,n)}}init(){this.destroy(),Xu.debug("[GlobalEventHandlers] Initializing global event handlers..."),this.unsubscribeFunctions.push(ue.on("app:initialized",this._logEvent("app:initialized"))),this.unsubscribeFunctions.push(ue.on("app:shutdown",this._logEvent("app:shutdown"))),this.unsubscribeFunctions.push(ue.on("app:site-changed",this._logEvent("app:site-changed"))),this.unsubscribeFunctions.push(ue.on("app:settings-updated",this._logEvent("app:settings-updated"))),this.unsubscribeFunctions.push(ue.on("connection:status-changed",this._logEvent("connection:status-changed"))),this.unsubscribeFunctions.push(ue.on("connection:error",this._logEvent("connection:error"))),this.unsubscribeFunctions.push(ue.on("adapter:activated",this._logEvent("adapter:activated"))),this.unsubscribeFunctions.push(ue.on("adapter:deactivated",this._logEvent("adapter:deactivated"))),this.unsubscribeFunctions.push(ue.on("adapter:error",this._logEvent("adapter:error"))),this.unsubscribeFunctions.push(ue.on("plugin:registered",this._logEvent("plugin:registered"))),this.unsubscribeFunctions.push(ue.on("plugin:unregistered",this._logEvent("plugin:unregistered"))),this.unsubscribeFunctions.push(ue.on("plugin:activation-failed",this._logEvent("plugin:activation-failed"))),this.unsubscribeFunctions.push(ue.on("error:unhandled",l=>{var n;try{Xu.error('[GlobalEventHandlers] Event "error:unhandled":',l.error,"Context:",l.context,"Stack:",(n=l.error)==null?void 0:n.stack)}catch(r){Xu.error("[GlobalEventHandlers] Error in error:unhandled handler:",r)}})),this.unsubscribeFunctions.push(ue.on("error:circuit-breaker-opened",this._logEvent("error:circuit-breaker-opened"))),this.unsubscribeFunctions.push(ue.on("error:circuit-breaker-closed",this._logEvent("error:circuit-breaker-closed"))),this.unsubscribeFunctions.push(ue.on("performance:measurement",this._logEvent("performance:measurement"))),Xu.debug("[GlobalEventHandlers] Global event handlers initialized.")}destroy(){Xu.debug("[GlobalEventHandlers] Destroying global event handlers..."),this.unsubscribeFunctions.forEach(l=>l()),this.unsubscribeFunctions=[],Xu.debug("[GlobalEventHandlers] Global event handlers destroyed.")}}const aE=new uk,dk=()=>{aE.init()},fk=()=>{aE.destroy()},sl=nt("useConnectionStore"),gk={status:"disconnected",serverConfig:{uri:"http://localhost:3006/sse",connectionType:"sse",timeout:5e3,retryAttempts:3,retryDelay:2e3},lastConnectedAt:null,connectionAttempts:0,error:null,isReconnecting:!1},Gi=Kf()(Jf((f,l)=>({...gk,setStatus:n=>{const r=l().status;f({status:n}),sl.debug(`Status changed from ${r} to: ${n}`),ue.emit("connection:status-changed",{status:n,error:l().error||void 0})},setServerConfig:n=>{f(r=>({serverConfig:{...r.serverConfig,...n}})),sl.debug("[ConnectionStore] Server config updated:",l().serverConfig)},setLastError:n=>{f({error:n}),n&&(sl.error("[ConnectionStore] Error set:",n),ue.emit("connection:error",{error:n}))},incrementAttempts:()=>{const n=l().connectionAttempts+1;f({connectionAttempts:n}),sl.debug(`Connection attempts: ${n}`),ue.emit("connection:attempt",{attempt:n,maxAttempts:l().serverConfig.retryAttempts})},resetAttempts:()=>{f({connectionAttempts:0}),sl.debug("[ConnectionStore] Connection attempts reset.")},setConnected:n=>{f({status:"connected",lastConnectedAt:n,connectionAttempts:0,error:null,isReconnecting:!1}),sl.debug(`Connected at: ${new Date(n).toISOString()}`),ue.emit("connection:status-changed",{status:"connected"})},setDisconnected:n=>{f(r=>({status:n?"error":"disconnected",error:n||r.error,isReconnecting:!1})),sl.debug(`Disconnected. ${n?"Error: "+n:""}`),ue.emit("connection:status-changed",{status:l().status,error:n||l().error||void 0})},startReconnecting:()=>{l().status!=="connected"&&(f({isReconnecting:!0,status:"reconnecting"}),sl.debug("[ConnectionStore] Reconnecting started..."),ue.emit("connection:status-changed",{status:"reconnecting"}))},stopReconnecting:()=>{if(l().isReconnecting){const n=l().error?"error":"disconnected";f({isReconnecting:!1,status:n}),sl.debug("[ConnectionStore] Reconnecting stopped.")}}}),{name:"ConnectionStore",store:"connection"})),Rx="mcp_tool_enablement",pk=async()=>{try{if(!chrome.storage||!chrome.storage.local)return R("[Storage] Chrome storage API not available"),new Set;const f=await chrome.storage.local.get(Rx),l=f&&typeof f=="object"?f[Rx]:void 0;return!l||!Array.isArray(l)?(R("[Storage] No stored tool enablement state found, returning empty set"),new Set):(R(`[Storage] Retrieved tool enablement state: ${l.length} enabled tools`),new Set(l))}catch(f){return R(`[Storage] Error retrieving tool enablement state: ${f instanceof Error?f.message:String(f)}`),new Set}},qh=async f=>{try{if(!chrome.storage||!chrome.storage.local){R("[Storage] Chrome storage API not available");return}const l=Array.from(f);await chrome.storage.local.set({[Rx]:l}),R(`[Storage] Saved tool enablement state: ${l.length} enabled tools`)}catch(l){R(`[Storage] Error saving tool enablement state: ${l instanceof Error?l.message:String(l)}`)}},xi=nt("useToolStore"),hk={availableTools:[],detectedTools:[],toolExecutions:{},isExecuting:!1,lastExecutionId:null,enabledTools:new Set,isLoadingEnablement:!1},go=Kf()(Jf((f,l)=>({...hk,setAvailableTools:n=>{f({availableTools:n}),xi.debug("[ToolStore] Available tools updated:",n),ue.emit("tool:list-updated",{tools:n}),l().loadToolEnablementState()},addDetectedTool:n=>{f(r=>({detectedTools:[...r.detectedTools,n]})),xi.debug("[ToolStore] Tool detected:",n),ue.emit("tool:detected",{tools:[n],source:n.source||"unknown"})},clearDetectedTools:()=>{f({detectedTools:[]}),xi.debug("[ToolStore] Detected tools cleared.")},startToolExecution:(n,r)=>{const s=`exec_${n}_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,d={id:s,toolName:n,parameters:r,status:"pending",timestamp:Date.now(),result:null};return f(h=>({toolExecutions:{...h.toolExecutions,[s]:d},isExecuting:!0,lastExecutionId:s})),xi.debug(`Starting execution for ${n} (ID: ${s})`,r),ue.emit("tool:execution-started",{toolName:n,callId:s}),s},updateToolExecution:n=>{const{id:r,...s}=n,d=l().toolExecutions[r];if(d){const h={...d,...s,timestamp:Date.now()};f(v=>({toolExecutions:{...v.toolExecutions,[r]:h},isExecuting:h.status==="pending"})),xi.debug(`Execution updated (ID: ${r}):`,h),(h.status==="success"||h.status==="error")&&ue.emit("tool:execution-completed",{execution:h})}else xi.warn(`Attempted to update non-existent execution (ID: ${r})`)},completeToolExecution:(n,r,s,d)=>{const h=l().toolExecutions[n];if(h){const v={...h,result:r,status:s,error:d,timestamp:Date.now()};f(S=>({toolExecutions:{...S.toolExecutions,[n]:v},isExecuting:Object.values(S.toolExecutions).some(w=>w.id!==n&&w.status==="pending")})),xi.debug(`Execution ${s} (ID: ${n}):`,v),ue.emit("tool:execution-completed",{execution:v}),s==="error"&&ue.emit("tool:execution-failed",{toolName:h.toolName,error:d||"Unknown execution error",callId:n})}else xi.warn(`Attempted to complete non-existent execution (ID: ${n})`)},getToolExecution:n=>l().toolExecutions[n],enableTool:n=>{f(r=>{const s=new Set([...r.enabledTools,n]);return qh(s).catch(d=>xi.error("[ToolStore] Failed to save tool enablement state:",d)),{enabledTools:s}}),xi.debug(`Tool enabled: ${n}`)},disableTool:n=>{f(r=>{const s=new Set(r.enabledTools);return s.delete(n),qh(s).catch(d=>xi.error("[ToolStore] Failed to save tool enablement state:",d)),{enabledTools:s}}),xi.debug(`Tool disabled: ${n}`)},enableAllTools:()=>{f(n=>{const r=new Set(n.availableTools.map(s=>s.name));return qh(r).catch(s=>xi.error("[ToolStore] Failed to save tool enablement state:",s)),{enabledTools:r}}),xi.debug("[ToolStore] All tools enabled")},disableAllTools:()=>{const n=new Set;f({enabledTools:n}),qh(n).catch(r=>xi.error("[ToolStore] Failed to save tool enablement state:",r)),xi.debug("[ToolStore] All tools disabled")},isToolEnabled:n=>l().enabledTools.has(n),loadToolEnablementState:async()=>{f({isLoadingEnablement:!0});try{const n=await pk(),r=l();if(n.size===0&&r.availableTools.length>0){const s=new Set(r.availableTools.map(d=>d.name));f({enabledTools:s,isLoadingEnablement:!1}),await qh(s),xi.debug("[ToolStore] No stored state found, enabled all tools by default")}else f({enabledTools:n,isLoadingEnablement:!1}),xi.debug(`Tool enablement state loaded: ${n.size} tools enabled`)}catch(n){xi.error("[ToolStore] Failed to load tool enablement state:",n),f({isLoadingEnablement:!1})}}}),{name:"ToolStore",store:"tool"})),gc=nt("PerformanceMonitor");class mk{constructor(){z(this,"initialized",!1);z(this,"measurements",[]);z(this,"memorySnapshots",[]);z(this,"maxMeasurements",1e3);z(this,"slowThreshold",1e3);z(this,"memoryCheckInterval");z(this,"performanceObserver")}initialize(l){if(this.initialized){gc.warn("[PerformanceMonitor] Already initialized");return}this.setupPerformanceObserver(),this.setupMemoryMonitoring(),this.setupEventBusIntegration(),this.initialized=!0,gc.debug("[PerformanceMonitor] Initialized successfully")}setupPerformanceObserver(){if(typeof PerformanceObserver<"u")try{this.performanceObserver=new PerformanceObserver(l=>{l.getEntries().forEach(r=>{r.duration>0&&this.recordMeasurement({name:r.name||"browser-performance",duration:r.duration,timestamp:r.startTime+performance.timeOrigin,type:"async",context:{entryType:r.entryType,startTime:r.startTime}})})}),this.performanceObserver.observe({entryTypes:["measure","navigation","resource"]})}catch(l){gc.warn("[PerformanceMonitor] Failed to set up PerformanceObserver:",l)}}setupMemoryMonitoring(){typeof performance<"u"&&"memory"in performance&&(this.memoryCheckInterval=setInterval(()=>{this.captureMemorySnapshot()},3e4))}setupEventBusIntegration(){ue.on("error:unhandled",({error:l,context:n})=>{this.mark("error-occurred",{error:l.message,context:n})}),ue.on("plugin:activation-failed",({name:l,error:n})=>{this.mark("plugin-activation-failed",{plugin:l,error:String(n)})})}time(l,n,r){const s=performance.now();try{const d=n();if(d instanceof Promise)return d.finally(()=>{const h=performance.now()-s;this.recordMeasurement({name:l,duration:h,timestamp:Date.now(),type:"async",context:r})});{const h=performance.now()-s;return this.recordMeasurement({name:l,duration:h,timestamp:Date.now(),type:"sync",context:r}),d}}catch(d){const h=performance.now()-s;throw this.recordMeasurement({name:`${l}_error`,duration:h,timestamp:Date.now(),type:"sync",context:{...r,error:String(d)}}),d}}mark(l,n){this.recordMeasurement({name:l,duration:0,timestamp:Date.now(),type:"sync",context:n})}measure(l,n,r){const s=this.measurements,d=s.find(S=>S.name===n);if(!d)return gc.warn(`Start mark '${n}' not found`),null;const h=r?s.find(S=>S.name===r):{timestamp:Date.now()};if(!h)return gc.warn(`End mark '${r}' not found`),null;const v={name:l,duration:h.timestamp-d.timestamp,timestamp:d.timestamp,type:"sync",context:{startMark:n,endMark:r}};return this.recordMeasurement(v),v}getMemoryUsage(){if(typeof performance<"u"&&"memory"in performance){const l=performance.memory;return{usedJSHeapSize:l.usedJSHeapSize,totalJSHeapSize:l.totalJSHeapSize,jsHeapSizeLimit:l.jsHeapSizeLimit,timestamp:Date.now()}}return null}captureMemorySnapshot(){const l=this.getMemoryUsage();l&&(this.memorySnapshots.push(l),this.memorySnapshots.length>100&&this.memorySnapshots.shift(),ue.emit("performance:memory-usage",l),this.checkMemoryLeaks())}checkMemoryLeaks(){if(this.memorySnapshots.length<5)return;const l=this.memorySnapshots.slice(-5),n=l.map(s=>s.usedJSHeapSize);let r=0;for(let s=1;s<n.length;s++)n[s]>n[s-1]&&r++;r>=4&&(gc.warn("[PerformanceMonitor] Potential memory leak detected"),ue.emit("performance:memory-leak-detected",{snapshots:l,trend:n}))}recordMeasurement(l){this.measurements.push(l),this.measurements.length>this.maxMeasurements&&this.measurements.shift(),ue.emit("performance:measurement",l),l.duration>this.slowThreshold&&ue.emit("performance:slow-operation",l)}getStats(){const l=this.measurements.filter(s=>s.duration>this.slowThreshold),n={},r=this.measurements.reduce((s,d)=>(s[d.name]||(s[d.name]=[]),s[d.name].push(d.duration),s),{});return Object.entries(r).forEach(([s,d])=>{d.length>0&&(n[s]=d.reduce((h,v)=>h+v,0)/d.length)}),{measurements:[...this.measurements],memorySnapshots:[...this.memorySnapshots],slowOperations:l,averageDurations:n}}clear(){this.measurements=[],this.memorySnapshots=[],gc.debug("[PerformanceMonitor] Performance data cleared")}getReport(){const l=this.getStats(),n=l.measurements.length,r=l.slowOperations.length,s=n>0?(r/n*100).toFixed(2):"0";let d=`Performance Report:
`;return d+=`Total measurements: ${n}
`,d+=`Slow operations: ${r} (${s}%)
`,d+=`Memory snapshots: ${l.memorySnapshots.length}

`,Object.keys(l.averageDurations).length>0&&(d+=`Average durations:
`,Object.entries(l.averageDurations).sort(([,h],[,v])=>v-h).slice(0,10).forEach(([h,v])=>{d+=`  ${h}: ${v.toFixed(2)}ms
`})),d}cleanup(){this.memoryCheckInterval&&clearInterval(this.memoryCheckInterval),this.performanceObserver&&this.performanceObserver.disconnect(),this.measurements=[],this.memorySnapshots=[],this.initialized=!1,gc.debug("[PerformanceMonitor] Cleaned up")}}const Qn=new mk,fs=nt("GlobalErrorHandler");class bk{constructor(){z(this,"initialized",!1);z(this,"errorReports",[]);z(this,"maxReports",100);z(this,"circuitBreaker");z(this,"errorCounts",new Map)}initialize(l,n){if(this.initialized){fs.warn("[GlobalErrorHandler] Already initialized");return}this.circuitBreaker=n,this.setupGlobalHandlers(),this.setupEventBusIntegration(),this.initialized=!0,fs.debug("[GlobalErrorHandler] Initialized successfully")}setupGlobalHandlers(){window.addEventListener("error",l=>{this.handleError(l.error||new Error(l.message),{component:"window",operation:"global-error",metadata:{filename:l.filename,lineno:l.lineno,colno:l.colno}})}),window.addEventListener("unhandledrejection",l=>{const n=l.reason instanceof Error?l.reason:new Error(String(l.reason));this.handleError(n,{component:"window",operation:"unhandled-promise-rejection"})}),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage.addListener((l,n,r)=>!1)}setupEventBusIntegration(){ue.on("error:unhandled",({error:l,context:n})=>{try{const r=typeof n=="string"?{operation:n,fromEventBus:!0}:{...n,fromEventBus:!0};this.handleError(l,r)}catch(r){fs.error("[GlobalErrorHandler] Error in error:unhandled handler:",r)}}),ue.on("plugin:activation-failed",({name:l,error:n})=>{const r=n instanceof Error?n:new Error(String(n));this.handleError(r,{component:"plugin-system",operation:"plugin-activation",metadata:{pluginName:l}})}),ue.on("connection:error",({error:l})=>{this.handleError(new Error(l),{component:"connection",operation:"mcp-connection"})})}handleError(l,n={},r="medium"){const s=this.generateErrorId(),d={error:l,context:n,timestamp:Date.now(),id:s,severity:r,handled:!0};this.addErrorReport(d),this.updateErrorCounts(l,n),this.logError(d),!n.fromEventBus&&n.operation!=="event-listener-error:unhandled"&&n.operation!=="once-event-listener-error:unhandled"&&n.operation!=="wildcard-event-listener"&&ue.emit("error:unhandled",{error:l,context:n}),this.circuitBreaker&&r==="critical"&&this.attemptRecovery(l,n),this.checkErrorPatterns(l,n)}captureException(l,n={},r="low"){this.handleError(l,n,r)}addBreadcrumb(l,n="default",r){ue.emit("error:breadcrumb",{message:l,category:n,data:r,timestamp:Date.now()})}getErrorStats(){const l={},n={};return this.errorReports.forEach(r=>{const s=r.context.component||"unknown";l[s]=(l[s]||0)+1,n[r.severity]=(n[r.severity]||0)+1}),{totalErrors:this.errorReports.length,errorsByComponent:l,errorsBySeverity:n,recentErrors:this.errorReports.slice(-10)}}clearErrorReports(){this.errorReports=[],this.errorCounts.clear(),fs.debug("[GlobalErrorHandler] Error reports cleared")}addErrorReport(l){this.errorReports.push(l),this.errorReports.length>this.maxReports&&this.errorReports.shift()}updateErrorCounts(l,n){const r=`${l.name}:${n.component||"unknown"}:${n.operation||"unknown"}`,s=this.errorCounts.get(r)||{count:0};this.errorCounts.set(r,{count:s.count+1,lastSeen:Date.now()})}logError(l){(l.severity==="critical"||l.severity==="high"?console.error:l.severity==="medium"?console.warn:console.log)(`[GlobalErrorHandler] ${l.severity.toUpperCase()} Error [${l.id}]:`,l.error.message,`
Context:`,l.context,`
Stack:`,l.error.stack)}attemptRecovery(l,n){const r=this.determineRecoveryStrategy(l,n);switch(ue.emit("error:recovery-attempted",{error:l,strategy:r}),r){case"reload-page":fs.warn("[GlobalErrorHandler] Attempting page reload recovery"),setTimeout(()=>window.location.reload(),1e3);break;case"reset-component":fs.warn("[GlobalErrorHandler] Attempting component reset recovery"),ue.emit("component:reset",{component:n.component});break;case"fallback-mode":fs.warn("[GlobalErrorHandler] Switching to fallback mode"),ue.emit("app:fallback-mode",{reason:l.message});break;default:fs.warn("[GlobalErrorHandler] No recovery strategy available")}}determineRecoveryStrategy(l,n){return l.message.includes("Extension context invalidated")?"reload-page":n.component==="sidebar"||n.component==="ui"?"reset-component":n.component==="plugin-system"?"fallback-mode":"none"}checkErrorPatterns(l,n){const r=`${l.name}:${n.component||"unknown"}:${n.operation||"unknown"}`,s=this.errorCounts.get(r);s&&s.count>=5&&(fs.warn(`Error pattern detected: ${r} occurred ${s.count} times`),ue.emit("error:pattern-detected",{pattern:r,count:s.count,error:l,context:n}))}generateErrorId(){return`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}cleanup(){this.errorReports=[],this.errorCounts.clear(),this.initialized=!1,fs.debug("[GlobalErrorHandler] Cleaned up")}}const Va=new bk,Si=nt("useAdapterStore"),vk={registeredPlugins:{},activeAdapterName:null,currentCapabilities:[],lastAdapterError:null},po=Kf()(Jf((f,l)=>({...vk,registerPlugin:async(n,r)=>{if(l().registeredPlugins[n.name])return Si.warn(`Plugin "${n.name}" already registered.`),!1;const s={plugin:n,config:r,registeredAt:Date.now(),status:"registered"};return f(d=>({registeredPlugins:{...d.registeredPlugins,[n.name]:s}})),Si.debug(`Plugin "${n.name}" registered.`),ue.emit("plugin:registered",{name:n.name,version:n.version}),!0},unregisterPlugin:async n=>{const r=l().registeredPlugins[n];if(!r){Si.warn(`Plugin "${n}" not found for unregistration.`);return}if(l().activeAdapterName===n&&r.instance)try{await r.instance.deactivate(),await r.instance.cleanup()}catch(h){Si.error(`Error deactivating/cleaning up plugin "${n}" during unregistration:`,h)}const{[n]:s,...d}=l().registeredPlugins;f({registeredPlugins:d,activeAdapterName:l().activeAdapterName===n?null:l().activeAdapterName,currentCapabilities:l().activeAdapterName===n?[]:l().currentCapabilities}),Si.debug(`Plugin "${n}" unregistered.`),ue.emit("plugin:unregistered",{name:n})},activateAdapter:async n=>{var d;const r=l().registeredPlugins[n];if(!r)return Si.error(`Cannot activate: Plugin "${n}" not registered.`),l().setPluginError(n,`Plugin "${n}" not registered.`),!1;if(!r.config.enabled)return Si.warn(`Cannot activate: Plugin "${n}" is disabled by config.`),l().setPluginError(n,`Plugin "${n}" is disabled.`),!1;const s=l().getActiveAdapter();if(s&&s.plugin.name!==n)if(s.plugin.name!=="sidebar-plugin")try{Si.debug(`Deactivating current adapter "${s.plugin.name}".`),await((d=s.instance)==null?void 0:d.deactivate()),ue.emit("adapter:deactivated",{pluginName:s.plugin.name,reason:"switching adapter",timestamp:Date.now()})}catch(h){Si.error(`Error deactivating previous adapter "${s.plugin.name}":`,h)}else Si.debug("Skipping deactivation of sidebar-plugin - it persists alongside site adapters.");try{if(!r.instance){const h={eventBus:ue,stores:{},utils:{},chrome,logger:console};await r.plugin.initialize(h),r.instance=r.plugin,r.status="initialized",ue.emit("plugin:initialization-complete",{name:n})}return Si.debug(`Activating adapter "${n}".`),await r.instance.activate(),r.status="active",r.lastUsedAt=Date.now(),f({activeAdapterName:n!=="sidebar-plugin"?n:l().activeAdapterName,currentCapabilities:r.plugin.capabilities,lastAdapterError:null,registeredPlugins:{...l().registeredPlugins,[n]:r}}),Si.debug(`Adapter "${n}" activated with capabilities:`,r.plugin.capabilities),ue.emit("adapter:activated",{pluginName:n,timestamp:Date.now()}),ue.emit("adapter:capability-changed",{name:n,capabilities:r.plugin.capabilities}),!0}catch(h){return h instanceof Error?h.message:String(h),Si.error(`Error activating adapter "${n}":`,h),r.status="error",r.error=h,f({lastAdapterError:{name:n,error:h},registeredPlugins:{...l().registeredPlugins,[n]:r}}),ue.emit("plugin:activation-failed",{name:n,error:h}),ue.emit("adapter:error",{name:n,error:h}),!1}},deactivateAdapter:async(n,r)=>{var d;const s=l().registeredPlugins[n];if(!s||l().activeAdapterName!==n){Si.warn(`Adapter "${n}" is not active or not registered.`);return}try{await((d=s.instance)==null?void 0:d.deactivate()),s.status="inactive",f({activeAdapterName:null,currentCapabilities:[],registeredPlugins:{...l().registeredPlugins,[n]:s}}),Si.debug(`Adapter "${n}" deactivated. Reason: ${r||"user action"}`),ue.emit("adapter:deactivated",{pluginName:n,reason:r||"user action",timestamp:Date.now()})}catch(h){h instanceof Error?h.message:String(h),Si.error(`Error deactivating adapter "${n}":`,h),s.status="error",s.error=h,f({lastAdapterError:{name:n,error:h},registeredPlugins:{...l().registeredPlugins,[n]:s}}),ue.emit("adapter:error",{name:n,error:h})}},getPlugin:n=>l().registeredPlugins[n],getActiveAdapter:()=>{const n=l().activeAdapterName;return n?l().registeredPlugins[n]:void 0},updatePluginConfig:(n,r)=>{const s=l().registeredPlugins[n];s?(s.config={...s.config,...r},f(d=>({registeredPlugins:{...d.registeredPlugins,[n]:s}})),Si.debug(`Config updated for plugin "${n}":`,s.config),n===l().activeAdapterName&&s.config.enabled===!1&&l().deactivateAdapter(n,"disabled by config update")):Si.warn(`Cannot update config: Plugin "${n}" not found.`)},setPluginError:(n,r)=>{const s=l().registeredPlugins[n];s?(s.status="error",s.error=r,f(d=>({registeredPlugins:{...d.registeredPlugins,[n]:s},lastAdapterError:{name:n,error:r}}))):f({lastAdapterError:{name:n,error:r}}),Si.error(`Error set for plugin/adapter "${n}":`,r),ue.emit("adapter:error",{name:n,error:r})}}),{name:"AdapterStore",store:"adapter"})),yk=Object.freeze(Object.defineProperty({__proto__:null,useAdapterStore:po},Symbol.toStringTag,{value:"Module"})),pc=nt("initializePluginRegistry"),xk=async()=>pc.debug("Plugin registry initialized (placeholder)"),oE={isInitialized:!1,initializationError:null,currentSite:window.location.href,currentHost:window.location.hostname,globalSettings:{theme:"system",autoSubmit:!1,debugMode:!1,sidebarWidth:320,isPushMode:!1,language:navigator.language||"en-US",notifications:!0}},Er=Kf()(Jf(Ox((f,l)=>({...oE,initialize:async()=>{if(l().isInitialized){pc.debug("[AppStore] Already initialized.");return}pc.debug("[AppStore] Initializing...");try{f({initializationError:null}),await xk(),f({isInitialized:!0,initializationError:null}),pc.debug("[AppStore] Initialization complete."),ue.emit("app:initialized",{version:"0.1.0",timestamp:Date.now()})}catch(n){const r=n instanceof Error?n.message:"Unknown initialization error";pc.error("[AppStore] Initialization failed:",r,n),f({isInitialized:!1,initializationError:r})}},setCurrentSite:n=>{f({currentSite:n.site,currentHost:n.host}),pc.debug(`Site changed to: ${n.site}`),ue.emit("app:site-changed",{site:n.site,hostname:n.host})},updateSettings:n=>{f(r=>({globalSettings:{...r.globalSettings,...n}})),pc.debug("[AppStore] Settings updated:",n),ue.emit("app:settings-updated",{settings:n})},resetState:()=>{pc.debug("[AppStore] Resetting state."),f(oE)}}),{name:"mcp-super-assistant-app-store",storage:ny(()=>localStorage),partialize:f=>({globalSettings:f.globalSettings})}),{name:"AppStore",store:"app"}));typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((f,l,n)=>{if(f.type==="NAVIGATION_COMPLETED"&&f.url){const r=new URL(f.url),s=Er.getState().currentHost;r.hostname!==s&&Er.getState().setCurrentSite({site:f.url,host:r.hostname})}return!1});const Ui=nt("useUIStore"),Sk={isVisible:!0,isMinimized:!1,position:"left",width:320},rE={autoSubmit:!1,autoInsert:!1,autoExecute:!1,notifications:!0,theme:"system",language:navigator.language||"en-US",isPushMode:!1,sidebarWidth:320,isMinimized:!1,customInstructions:"",customInstructionsEnabled:!1,autoInsertDelay:2,autoExecuteDelay:2,autoSubmitDelay:2},wk={sidebar:Sk,preferences:rE,notifications:[],activeModal:null,isLoading:!1,theme:rE.theme,mcpEnabled:!0},ia=Kf()(Jf(Ox((f,l)=>({...wk,toggleSidebar:n=>{const r=!l().sidebar.isVisible;f(s=>({sidebar:{...s.sidebar,isVisible:r}})),Ui.debug(`Sidebar toggled to ${r?"visible":"hidden"}. Reason: ${n||"user action"}`),ue.emit("ui:sidebar-toggle",{visible:r,reason:n||"user action"})},toggleMinimize:n=>{const r=!l().sidebar.isMinimized;f(s=>({sidebar:{...s.sidebar,isMinimized:r},preferences:{...s.preferences,isMinimized:r}})),Ui.debug(`Sidebar ${r?"minimized":"expanded"}. Reason: ${n||"user action"}`),ue.emit("ui:sidebar-minimize",{minimized:r,reason:n||"user action"})},resizeSidebar:n=>{f(r=>({sidebar:{...r.sidebar,width:n}})),Ui.debug(`Sidebar resized to: ${n}px`),ue.emit("ui:sidebar-resize",{width:n})},setSidebarVisibility:(n,r)=>{f(s=>({sidebar:{...s.sidebar,isVisible:n}})),Ui.debug(`Sidebar visibility set to ${n}. Reason: ${r||"programmatic"}`),ue.emit("ui:sidebar-toggle",{visible:n,reason:r||"programmatic"})},updatePreferences:n=>{const r=l().preferences,s={...r,...n};f({preferences:s}),Ui.debug("[UIStore] Preferences updated:",s),ue.emit("ui:preferences-updated",{preferences:s}),n.theme&&n.theme!==r.theme&&l().setTheme(n.theme)},addNotification:n=>{const r={...n,id:`notif_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,timestamp:Date.now()};return f(s=>({notifications:[...s.notifications,r]})),Ui.debug("[UIStore] Notification added:",r),ue.emit("ui:notification-added",{notification:r}),r.id},addRemoteNotification:n=>{const{useConfigStore:r}=require("./config.store"),s=r.getState();if(!s.notificationConfig.enabled)return Ui.debug("[UIStore] Remote notifications disabled, ignoring:",n.id),"";const d=new Date().toDateString();if(l().notifications.filter(S=>new Date(S.timestamp).toDateString()===d&&S.source==="remote").length>=s.notificationConfig.maxPerDay)return Ui.debug("[UIStore] Daily notification limit reached, ignoring:",n.id),ue.emit("notification:frequency-limited",{notificationId:n.id,reason:"Daily limit exceeded"}),"";const v={id:n.id||`remote_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,type:n.type,title:n.title,message:n.message,duration:n.duration,timestamp:Date.now(),source:"remote",campaignId:n.campaignId,actions:n.actions,priority:n.priority||1};return f(S=>({notifications:[...S.notifications,v].sort((w,M)=>(M.priority||1)-(w.priority||1))})),s.markNotificationShown(v.id),s.addNotificationToHistory(v.id),ue.emit("ui:notification-added",{notification:v}),ue.emit("notification:shown",{notificationId:v.id,source:"remote",timestamp:Date.now()}),ue.emit("analytics:track",{event:"notification_shown",parameters:{notification_id:v.id,campaign_id:n.campaignId,type:n.type,source:"remote"}}),Ui.debug("[UIStore] Remote notification added:",v),v.id},removeNotification:n=>{f(r=>({notifications:r.notifications.filter(s=>s.id!==n)})),Ui.debug(`Notification removed: ${n}`),ue.emit("ui:notification-removed",{id:n})},dismissNotification:(n,r)=>{const s=l().notifications.find(d=>d.id===n);s&&s.source==="remote"&&(ue.emit("notification:dismissed",{notificationId:n,reason:r||"user_dismissed",timestamp:Date.now()}),ue.emit("analytics:track",{event:"notification_dismissed",parameters:{notification_id:n,campaign_id:s.campaignId,reason:r||"user_dismissed",source:"remote"}})),l().removeNotification(n)},clearNotifications:()=>{l().notifications.forEach(n=>ue.emit("ui:notification-removed",{id:n.id})),f({notifications:[]}),Ui.debug("[UIStore] All notifications cleared.")},openModal:n=>{f({activeModal:n}),Ui.debug(`Modal opened: ${n}`)},closeModal:()=>{Ui.debug(`Modal closed: ${l().activeModal}`),f({activeModal:null})},setGlobalLoading:n=>{f({isLoading:n}),Ui.debug(`Global loading state: ${n}`)},setTheme:n=>{f({theme:n}),Ui.debug(`Theme changed to: ${n}`),ue.emit("ui:theme-changed",{theme:n}),l().preferences.theme!==n&&(f(r=>({preferences:{...r.preferences,theme:n}})),ue.emit("ui:preferences-updated",{preferences:l().preferences}))},setMCPEnabled:(n,r)=>{const s=l().mcpEnabled;f({mcpEnabled:n}),Ui.debug(`MCP toggle set to ${n}. Reason: ${r||"user action"}`),n!==s&&!n&&l().setSidebarVisibility(!1,r||"mcp-toggle"),ue.emit("ui:mcp-toggle",{enabled:n,reason:r||"user action",previousState:s})}}),{name:"mcp-super-assistant-ui-store",storage:ny(()=>localStorage),partialize:f=>({sidebar:{width:f.sidebar.width,position:f.sidebar.position,isVisible:f.sidebar.isVisible,isMinimized:f.sidebar.isMinimized},preferences:f.preferences,theme:f.theme,mcpEnabled:f.mcpEnabled})}),{name:"UIStore",store:"ui"}));Er.subscribe((f,l)=>{const n=f.globalSettings.theme,r=l.globalSettings.theme;n&&n!==r&&n!==ia.getState().theme&&(Ui.debug("[UIStore] Theme changed in AppStore, syncing to UIStore:",n),ia.getState().setTheme(n)),f.globalSettings.sidebarWidth!==l.globalSettings.sidebarWidth&&ia.getState().sidebar.width!==f.globalSettings.sidebarWidth&&(Ui.debug("[UIStore] Syncing sidebar width from AppStore globalSettings:",f.globalSettings.sidebarWidth),ia.getState().resizeSidebar(f.globalSettings.sidebarWidth))});const sE=Object.freeze(Object.defineProperty({__proto__:null,useUIStore:ia},Symbol.toStringTag,{value:"Module"})),Ek={extensionVersion:((GC=(qC=(_y=chrome==null?void 0:chrome.runtime)==null?void 0:_y.getManifest)==null?void 0:qC.call(_y))==null?void 0:GC.version)||"0.0.0",installDate:new Date().toISOString(),usageDays:0,featuresUsed:[],userSegment:"new",sessionCount:0,lastActiveDate:new Date().toISOString(),browserVersion:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},lE={featureFlags:{},lastFetchTime:null,lastUpdateTime:null,isLoading:!1,error:null,userProperties:Ek,userSegment:"new",notificationConfig:{enabled:!0,maxPerDay:3,cooldownHours:4,respectDoNotDisturb:!0,channels:["in-app"]},shownNotifications:[],notificationHistory:[]};function Ck(f){const l=JSON.stringify({version:f.extensionVersion,install:f.installDate.split("T")[0],segment:f.userSegment,platform:f.platform,language:f.language});let n=0;for(let r=0;r<l.length;r++){const s=l.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n)}const Wf=Kf()(Jf(Ox((f,l)=>({...lE,updateFeatureFlags:n=>{f(r=>({featureFlags:{...r.featureFlags,...n},lastUpdateTime:Date.now()}))},setUserProperties:n=>{f(r=>{const s={...r.userProperties,...n};let d="new";return s.usageDays>30?d="power":s.usageDays>7?d="regular":s.sessionCount>5&&(d="engaged"),{userProperties:s,userSegment:d}})},setUserSegment:n=>{f({userSegment:n})},updateNotificationConfig:n=>{f(r=>({notificationConfig:{...r.notificationConfig,...n}}))},markNotificationShown:n=>{f(r=>({shownNotifications:[...r.shownNotifications,n]}))},addNotificationToHistory:(n,r)=>{f(s=>({notificationHistory:[...s.notificationHistory,{id:n,shownAt:Date.now(),action:r}].slice(-100)}))},isFeatureEnabled:n=>{const r=l(),s=r.featureFlags[n];if(!s||!s.enabled)return!1;if(s.rollout<100){const d=Ck(r.userProperties),h=s.rollout/100*100;if(d%100>=h)return!1}if(s.targeting){const{userProperties:d,userSegment:h}=r;if(s.targeting.versions&&s.targeting.versions.length>0){const v=d.extensionVersion;if(!s.targeting.versions.some(w=>v.startsWith(w)))return!1}if(s.targeting.userSegments&&s.targeting.userSegments.length>0&&!s.targeting.userSegments.includes(h))return!1}return!0},getFeatureConfig:n=>l().featureFlags[n],setLoading:n=>{f({isLoading:n})},setError:n=>{f({error:n})},updateLastFetchTime:n=>{f({lastFetchTime:n})},canShowNotification:n=>{const r=l(),{notificationConfig:s,shownNotifications:d,notificationHistory:h}=r;if(!s.enabled||d.includes(n.id)||n.expiresAt&&new Date(n.expiresAt)<new Date)return!1;const v=new Date().toDateString();if(h.filter(N=>new Date(N.shownAt).toDateString()===v).length>=s.maxPerDay)return!1;const w=Math.max(...h.map(N=>N.shownAt),0),M=s.cooldownHours*60*60*1e3;if(Date.now()-w<M)return!1;if(n.targeting){const{userProperties:N,userSegment:k}=r;if(n.targeting.versions&&n.targeting.versions.length>0&&!n.targeting.versions.some($=>N.extensionVersion.startsWith($))||n.targeting.userSegments&&n.targeting.userSegments.length>0&&!n.targeting.userSegments.includes(k))return!1;if(n.targeting.installDateRange){const A=new Date(N.installDate),{start:$,end:B}=n.targeting.installDateRange;if($&&A<new Date($)||B&&A>new Date(B))return!1}}return!0},resetState:()=>{f(lE)}}),{name:"config-store",storage:ny(()=>localStorage),partialize:f=>({featureFlags:f.featureFlags,userProperties:f.userProperties,userSegment:f.userSegment,notificationConfig:f.notificationConfig,shownNotifications:f.shownNotifications,notificationHistory:f.notificationHistory,lastFetchTime:f.lastFetchTime})}),{name:"ConfigStore"}));class ho{constructor(){z(this,"context");z(this,"currentStatus","pending")}async initialize(l){this.context=l,this.currentStatus="initializing",this.context.logger.debug("Initializing (Base)"),this.currentStatus="inactive"}async activate(){this.context.logger.debug("Activating (Base)"),this.currentStatus="active"}async deactivate(){this.context.logger.debug("Deactivating (Base)"),this.currentStatus="inactive"}async cleanup(){this.context.logger.debug("Cleaning up (Base)"),this.currentStatus="disabled"}async insertText(l,n){return this.context.logger.warn("insertText not implemented by this adapter."),!1}async submitForm(l){return this.context.logger.warn("submitForm not implemented by this adapter."),!1}async attachFile(l,n){return this.context.logger.warn("attachFile not implemented by this adapter."),!1}async captureScreenshot(){throw this.context.logger.warn("captureScreenshot not implemented by this adapter."),new Error("Not implemented")}async selectElement(l){return this.context.logger.warn("selectElement not implemented by this adapter."),null}async navigateToUrl(l){return this.context.logger.warn("navigateToUrl not implemented by this adapter."),!1}async executeScript(l){return this.context.logger.warn("executeScript not implemented by this adapter."),null}isSupported(){return!0}getStatus(){return this.currentStatus}setStatus(l,n){this.currentStatus=l,l==="error"&&n&&this.context.logger.error("Status set to error:",n)}onToolDetected(l){this.context.logger.debug("onToolDetected (Base):",l)}onPageChanged(l,n){this.context.logger.debug(`onPageChanged (Base): from ${n||"N/A"} to ${l}`)}onHostChanged(l,n){this.context.logger.debug(`onHostChanged (Base): from ${n||"N/A"} to ${l}`)}shouldHandleEvents(){if(this.currentStatus!=="active")return!1;try{const l=this.isSupported();return typeof l=="boolean"?l:!0}catch(l){return this.context.logger.error("Error checking if site is supported:",l),!1}}}const cE={selectors:{chatInput:'div.ql-editor.textarea.new-input-ui p, .ql-editor p, div[contenteditable="true"]',submitButton:'button.mat-mdc-icon-button.send-button, button[aria-label*="Send"], button[data-testid="send-button"]',fileUploadButton:'button[aria-label="Add files"], button[aria-label*="attach"]',fileInput:'input[type="file"]',mainPanel:".chat-web, .main-content, .conversation-container",dropZone:"div[xapfileselectordropzone], .text-input-field, .input-area, .ql-editor, .chat-input-container",filePreview:".file-preview, .xap-filed-upload-preview, .attachment-preview",buttonInsertionContainer:".leading-actions-wrapper, .input-area .actions, .chat-input-actions",fallbackInsertion:".input-area, .chat-input-container, .conversation-input",newChatButton:'button[aria-label*="New chat"], .new-chat-button',conversationHistory:".conversation-history, .chat-history, .sidebar-content",conversationItem:".conversation-item, .chat-item, .history-item",messageContainer:".message-container, .chat-message, .conversation-turn",userMessage:'.user-message, .human-message, [data-role="user"]',aiMessage:'.ai-message, .assistant-message, [data-role="assistant"]',loadingIndicator:".loading-indicator, .spinner, .progress-indicator",typingIndicator:".typing-indicator, .thinking-indicator, .generating",errorMessage:".error-message, .error-banner, .alert-error",retryButton:'button[aria-label*="Retry"], .retry-button'},ui:{typing:{minDelay:50,maxDelay:150,characterDelay:10},animations:{fadeIn:300,slideIn:250,buttonPress:150},retry:{maxAttempts:3,baseDelay:1e3,maxDelay:5e3},fileUpload:{maxSize:52428800,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","text/plain","text/csv","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],timeout:3e4},polling:{elementWait:100,statusCheck:1e3,configRefresh:3e5}},features:{textInsertion:!0,formSubmission:!0,fileAttachment:!0,enhancedUi:!0,animations:!0,lazyLoading:!0,caching:!0,darkModeSupport:!0,highContrast:!0,screenReader:!0,keyboardNavigation:!0,voiceInput:!1,smartRetry:!1,aiAssistance:!1,contextAwareness:!1,multimodalSupport:!1,preloading:!1,customThemes:!1},version:"2.0.0",lastUpdated:new Date().toISOString(),schemaVersion:1},Tk={selectors:{chatInput:'#prompt-textarea, div[contenteditable="true"][role="textbox"]',submitButton:'button[data-testid="send-button"], button:has(svg[data-testid="send-icon"])',fileUploadButton:'button[aria-label*="Attach"], input[type="file"] + button',fileInput:'input[type="file"]',mainPanel:".chat-main, .conversation-container, main",dropZone:"#prompt-textarea, .composer-text-area, .input-area",filePreview:".file-preview, .attachment-item",buttonInsertionContainer:".composer-buttons, .input-actions",fallbackInsertion:".composer-parent, .input-container",newChatButton:'a[href="/"], button[aria-label*="New chat"]',conversationHistory:".conversation-list, .chat-history",conversationItem:".conversation-item, .chat-item",messageContainer:".message, .conversation-turn",userMessage:'.user-message, [data-role="user"]',aiMessage:'.assistant-message, [data-role="assistant"]',loadingIndicator:".loading, .spinner",typingIndicator:".typing-indicator, .thinking",errorMessage:".error-message, .alert-error",retryButton:'button[aria-label*="Retry"], .retry-button'},ui:{typing:{minDelay:30,maxDelay:120,characterDelay:8},animations:{fadeIn:250,slideIn:200,buttonPress:100},retry:{maxAttempts:3,baseDelay:1e3,maxDelay:5e3},fileUpload:{maxSize:52428800,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","text/plain","text/csv","application/pdf"],timeout:3e4},polling:{elementWait:100,statusCheck:1e3,configRefresh:3e5}},features:{textInsertion:!0,formSubmission:!0,fileAttachment:!0,enhancedUi:!0,animations:!0,lazyLoading:!0,caching:!0,darkModeSupport:!0,highContrast:!0,screenReader:!0,keyboardNavigation:!0,voiceInput:!1,smartRetry:!1,aiAssistance:!1,contextAwareness:!1,multimodalSupport:!1,preloading:!1,customThemes:!1},version:"2.0.0",lastUpdated:new Date().toISOString(),schemaVersion:1},Qt=nt("AdapterConfigManager"),ld=class ld{constructor(){z(this,"configCache",new Map);z(this,"context",null)}static getInstance(){return ld.instance||(ld.instance=new ld),ld.instance}initialize(l){this.context=l,this.setupEventListeners()}setupEventListeners(){var l;(l=this.context)!=null&&l.eventBus&&(this.context.eventBus.on("remote-config:adapter-configs-updated",n=>{Qt.debug("[AdapterConfigManager] Received adapter config updates from existing system"),Qt.debug(n),this.handleAdapterConfigUpdate(n.adapterConfigs)}),this.context.eventBus.on("remote-config:updated",n=>{n.changes.some(r=>r.includes("adapter"))&&(Qt.debug("[AdapterConfigManager] Detected adapter-related config changes, clearing cache"),this.clearCache())}))}handleAdapterConfigUpdate(l){Qt.debug("[AdapterConfigManager] Processing adapter config update:",l),this.clearCache(),Object.entries(l).forEach(([n,r])=>{const s=`${n}_adapter_config`;Qt.debug(`Caching config for ${n}:`,r),this.configCache.set(s,r)}),Qt.debug(`Updated cache for ${Object.keys(l).length} adapters`),Qt.debug("[AdapterConfigManager] Current cache keys:",Array.from(this.configCache.keys()))}async getAdapterConfig(l,n){const r=`${l}_adapter_config${n?`_${n}`:""}`;if(Qt.debug(`Getting adapter config for ${l} (${n||"default"})`),Qt.debug(`Cache key: ${r}`),Qt.debug("Current cache keys:",Array.from(this.configCache.keys())),this.configCache.has(r))return Qt.debug(`Using cached config for ${l} (${n||"default"})`),this.configCache.get(r);let s;try{const d=await this.getRemoteConfig(r);d?(Qt.debug(`Loaded remote config for ${l} (${n||"default"}):`,d),s=this.mergeWithDefaults(d,l)):(Qt.debug(`No remote config found for ${l}, using defaults`),s=this.getDefaultConfig(l))}catch(d){Qt.warn(`Failed to load remote config for ${l}:`,d),s=this.getDefaultConfig(l)}return this.configCache.set(r,s),Qt.debug(`Returning Final config for ${l} (${n||"default"}): ${JSON.stringify(s)}`),s}async getSelector(l,n,r){return(await this.getAdapterConfig(l,r)).selectors[n]||""}async isFeatureEnabled(l,n,r){return(await this.getAdapterConfig(l,r)).features[n]||!1}async getUIConfig(l,n){return(await this.getAdapterConfig(l,n)).ui}clearCache(l){l?Array.from(this.configCache.keys()).filter(r=>r.startsWith(`${l}_adapter_config`)).forEach(r=>this.configCache.delete(r)):this.configCache.clear()}async getRemoteConfig(l){try{Qt.debug(`Requesting remote config for key: ${l}`);const n=await chrome.runtime.sendMessage({type:"remote-config:get-config",payload:{key:l}});if(Qt.debug(`Chrome runtime response for ${l}:`,n),n&&n.success&&n.data){if(n.data[l]){const r=n.data[l];return Qt.debug(`Found remote config for ${l}:`,r),r&&typeof r=="object"&&(r.selectors||r.ui||r.features)?r:r===null?(Qt.debug(`No remote config set for ${l}`),null):(Qt.warn(`Invalid adapter config structure for ${l}:`,r),null)}else if(l.includes("_adapter_config")&&n.data.adapter_configs){const r=l.replace("_adapter_config",""),s=n.data.adapter_configs;if(s[r])return Qt.debug(`Found unified remote config for ${r}:`,s[r]),s[r]}else if(typeof n.data=="object"&&(n.data.selectors||n.data.ui||n.data.features))return Qt.debug(`Found direct remote config object for ${l}:`,n.data),n.data}return Qt.debug(`No valid remote config found for ${l}`),null}catch(n){return Qt.error(`Error fetching remote config for ${l}:`,n),null}}getDefaultConfig(l){switch(l.toLowerCase()){case"gemini":return{...cE};case"chatgpt":return{...Tk};default:return Qt.warn(`No default config found for ${l}, using Gemini defaults`),{...cE}}}mergeWithDefaults(l,n){var k,A,$,B,Z,Y,ie,pe,oe,me,J;const r=this.getDefaultConfig(n),s=l.overrides,d=(s==null?void 0:s.selectors)===!0,h=(s==null?void 0:s.features)===!0,v=((k=s==null?void 0:s.ui)==null?void 0:k.all)===!0,S=d&&l.selectors?this.validateAndSanitizeSelectors(l.selectors,r.selectors):{...r.selectors,...l.selectors},w=v&&l.ui?this.validateAndSanitizeUI(l.ui,r.ui):{...r.ui,...l.ui,typing:this.mergeUISection("typing",r.ui.typing,(A=l.ui)==null?void 0:A.typing,($=s==null?void 0:s.ui)==null?void 0:$.typing),animations:this.mergeUISection("animations",r.ui.animations,(B=l.ui)==null?void 0:B.animations,(Z=s==null?void 0:s.ui)==null?void 0:Z.animations),retry:this.mergeUISection("retry",r.ui.retry,(Y=l.ui)==null?void 0:Y.retry,(ie=s==null?void 0:s.ui)==null?void 0:ie.retry),fileUpload:this.mergeUISection("fileUpload",r.ui.fileUpload,(pe=l.ui)==null?void 0:pe.fileUpload,(oe=s==null?void 0:s.ui)==null?void 0:oe.fileUpload),polling:this.mergeUISection("polling",r.ui.polling,(me=l.ui)==null?void 0:me.polling,(J=s==null?void 0:s.ui)==null?void 0:J.polling)},M=h&&l.features?this.validateAndSanitizeFeatures(l.features,r.features):{...r.features,...l.features};let N={...r,...l,selectors:S,ui:w,features:M};return s!=null&&s.keys&&Array.isArray(s.keys)&&(N=this.applyKeyOverrides(N,l,s.keys)),N}mergeUISection(l,n,r,s){return s&&r?this.validateUISection(l,r,n)?{...n,...r}:(Qt.warn(`Override failed for ${l} - missing required properties, using merged config`),{...n,...r}):{...n,...r}}applyKeyOverrides(l,n,r){const s={...l};for(const d of r)if(d in n&&n[d]!==void 0){const h=n[d];h!=null?(s[d]=h,Qt.debug(`Applied key override for: ${d}`)):Qt.warn(`Skipping key override for ${d} - remote value is null/undefined`)}else Qt.warn(`Skipping key override for ${d} - not found in remote config`);return s}validateUISection(l,n,r){if(!n||typeof n!="object")return!1;const s=Object.keys(r),d=Object.keys(n),h=Math.ceil(s.length*.5),v=s.filter(w=>d.includes(w)).length,S=v>=h;return S||Qt.warn(`UI section ${l} validation failed: ${v}/${s.length} keys present (required: ${h})`),S}validateAndSanitizeSelectors(l,n){return!l||typeof l!="object"?(Qt.warn("[AdapterConfigManager] Invalid remote selectors for override, using defaults"),n):["chatInput","submitButton"].every(d=>d in l&&typeof l[d]=="string"&&l[d].trim().length>0)?{...n,...l}:(Qt.warn("[AdapterConfigManager] Remote selectors missing core selectors, merging with defaults"),{...n,...l})}validateAndSanitizeFeatures(l,n){if(!l||typeof l!="object")return Qt.warn("[AdapterConfigManager] Invalid remote features for override, using defaults"),n;const r={...n};for(const[s,d]of Object.entries(l))typeof d=="boolean"?r[s]=d:Qt.warn(`Invalid feature value for ${s}: ${d}, keeping default`);return r}validateAndSanitizeUI(l,n){return!l||typeof l!="object"?(Qt.warn("[AdapterConfigManager] Invalid remote UI config for override, using defaults"),n):{...n,...l,typing:l.typing||n.typing,animations:l.animations||n.animations,retry:l.retry||n.retry,fileUpload:l.fileUpload||n.fileUpload,polling:l.polling||n.polling}}};z(ld,"instance");let Ix=ld;const iy=Ix.getInstance(),kk=nt("GeminiAdapter"),pg=class pg extends ho{constructor(){super();z(this,"name","GeminiAdapter");z(this,"version","2.0.0");z(this,"hostnames",["gemini.google.com"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"config",null);z(this,"fallbackSelectors",{CHAT_INPUT:'div.ql-editor.textarea.new-input-ui p, .ql-editor p, div[contenteditable="true"]',SUBMIT_BUTTON:'button.mat-mdc-icon-button.send-button, button[aria-label*="Send"], button[data-testid="send-button"]',FILE_UPLOAD_BUTTON:'button[aria-label="Add files"], button[aria-label*="attach"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-web, .main-content, .conversation-container",DROP_ZONE:"div[xapfileselectordropzone], .text-input-field, .input-area, .ql-editor, .chat-input-container",FILE_PREVIEW:".file-preview, .xap-filed-upload-preview, .attachment-preview",BUTTON_INSERTION_CONTAINER:".leading-actions-wrapper, .input-area .actions, .chat-input-actions",FALLBACK_INSERTION:".input-area, .chat-input-container, .conversation-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"geminiStylesInjected",!1);pg.instanceCount++,this.instanceId=pg.instanceCount,kk.debug(`Instance #${this.instanceId} created. Total instances: ${pg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Gemini adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Gemini adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners(),await this.initializeConfig(),this.setupConfigUpdateListener()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Gemini adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Gemini adapter instance #${this.instanceId}...`),this.injectGeminiButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Gemini adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Gemini adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Gemini adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers();const n=document.getElementById("mcp-gemini-button-styles");n&&(n.remove(),this.geminiStylesInjected=!1),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.geminiStylesInjected=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Gemini chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.getSelector("chatInput").split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Gemini chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=s.textContent||"";s.focus();const h=d?d+`
`+n:n;return s.textContent=h,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:d.length,newLength:n.length,totalLength:h.length}),this.context.logger.debug(`Text inserted successfully. Original: ${d.length}, Added: ${n.length}, Total: ${h.length}`),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Gemini chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Gemini chat input");let r=null;const s=this.getSelector("submitButton").split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.error("Could not find Gemini submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("Gemini submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("Gemini submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Gemini chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting Gemini chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;if(!await this.injectFileDropListener())return this.emitExecutionFailed("attachFile","Failed to inject file drop listener"),!1;const h=await this.readFileAsDataURL(n);return window.postMessage({type:"MCP_DROP_FILE",fileName:n.name,fileType:n.type,fileSize:n.size,lastModified:n.lastModified,fileData:h},"*"),await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:!0,method:"drag-drop-simulation"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0):(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!1,method:"drag-drop-simulation"}),this.context.logger.debug(`File attachment initiated (preview not confirmed): ${n.name}`),!0)}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to Gemini: ${h}`),this.emitExecutionFailed("attachFile",h),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Gemini adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Gemini adapter`),!1;const h=[/^https:\/\/gemini\.google\.com\/u\/\d+\/app\/.*/,/^https:\/\/gemini\.google\.com\/.*/,/^https:\/\/gemini\.google\.com\/chat\/.*/,/^https:\/\/gemini\.google\.com\/u\/\d+\/chat\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`Gemini adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Gemini");const n=this.getSelector("dropZone").split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.getSelector("fileUploadButton").split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.getSelector("fileInput"))?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}getGeminiButtonStyles(){return`
      /* Gemini MCP Button Styles - Matching toolbox-drawer-item style */
      .mcp-gemini-button-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-sizing: border-box;
        min-width: 40px;
        height: 40px;
        padding: 8px 12px;
        margin: 0 2px;
        border: none;
        border-radius: 20px;
        background: transparent;
        color: #3c4043;
        font-family: 'Google Sans', Roboto, Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.2, 0.0, 0.2, 1);
        overflow: hidden;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        outline: none;
        /* Match toolbox drawer item appearance */
        letter-spacing: 0.0178571429em;
      }

      /* Hover state - matches Material Design ripple */
      .mcp-gemini-button-base:hover {
        background-color: rgba(60, 64, 67, 0.04);
      }

      /* Active/pressed state */
      .mcp-gemini-button-base:active {
        background-color: rgba(60, 64, 67, 0.08);
        transform: scale(0.98);
      }

      /* Focus state for accessibility */
      .mcp-gemini-button-base:focus-visible {
        outline: 2px solid #1a73e8;
        outline-offset: 2px;
      }

      /* Active toggle state - matches Gemini's toolbox drawer pressed state */
      .mcp-gemini-button-base.mcp-button-active {
        background-color: rgba(138, 180, 248, 0.2);
        color: #1557c0;
      }

      .mcp-gemini-button-base.mcp-button-active:hover {
        background-color: rgba(138, 180, 248, 0.24);
      }

      /* Button content container */
      .mcp-gemini-button-content {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        position: relative;
        z-index: 1;
      }

      /* Text styling to match GDS label */
      .mcp-gemini-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        letter-spacing: 0.0178571429em;
        white-space: nowrap;
      }

      /* Material ripple effect overlay */
      .mcp-gemini-button-base::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: currentColor;
        opacity: 0;
        border-radius: inherit;
        transition: opacity 0.15s cubic-bezier(0.2, 0.0, 0.2, 1);
        pointer-events: none;
      }

      .mcp-gemini-button-base:hover::before {
        opacity: 0.04;
      }

      .mcp-gemini-button-base:active::before {
        opacity: 0.08;
      }

      /* Icon styling matching Google Material Symbols */
      .mcp-gemini-button-base .mcp-button-icon {
        width: 20px;
        height: 20px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 1;
        font-family: 'Material Symbols Outlined', 'Google Material Icons';
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-gemini-button-base {
          color: #e8eaed;
        }

        .mcp-gemini-button-base:hover {
          background-color: rgba(232, 234, 237, 0.04);
        }

        .mcp-gemini-button-base:active {
          background-color: rgba(232, 234, 237, 0.08);
        }

        .mcp-gemini-button-base.mcp-button-active {
          background-color: rgba(138, 180, 248, 0.12);
          color: #8ab4f8;
        }

        .mcp-gemini-button-base.mcp-button-active:hover {
          background-color: rgba(138, 180, 248, 0.16);
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        .mcp-gemini-button-base {
          border: 1px solid currentColor;
        }

        .mcp-gemini-button-base:focus-visible {
          outline-width: 3px;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        .mcp-gemini-button-base {
          transition: none;
        }

        .mcp-gemini-button-base:active {
          transform: none;
        }

        .mcp-gemini-button-base::before {
          transition: none;
        }
      }

      /* Integration with Gemini's toolbox drawer layout */
      .leading-actions-wrapper .mcp-gemini-button-base,
      .input-area .mcp-gemini-button-base,
      .chat-input-actions .mcp-gemini-button-base {
        margin: 0 2px;
      }

      /* Ensure proper stacking with Gemini's UI elements */
      .mcp-gemini-button-base {
        position: relative;
        z-index: 1;
      }

      /* Match the exact styling of toolbox drawer items when in sidebar */
      .toolbox-drawer-item-button .mcp-gemini-button-base,
      .mcp-gemini-button-base.toolbox-style {
        width: 100%;
        height: 48px;
        padding: 12px 16px;
        margin: 0;
        border-radius: 0;
        justify-content: flex-start;
        gap: 12px;
        font-size: 14px;
        line-height: 20px;
      }

      .toolbox-drawer-item-button .mcp-gemini-button-base .mcp-button-icon,
      .mcp-gemini-button-base.toolbox-style .mcp-button-icon {
        width: 24px;
        height: 24px;
        font-size: 24px;
        margin-right: 12px;
      }

      .toolbox-drawer-item-button .mcp-gemini-button-base .mcp-gemini-button-text,
      .mcp-gemini-button-base.toolbox-style .mcp-gemini-button-text {
        text-align: left;
        flex: 1;
      }
    `}injectGeminiButtonStyles(){if(this.geminiStylesInjected){this.context.logger.debug("Gemini button styles already injected, skipping");return}try{const n="mcp-gemini-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getGeminiButtonStyles(),document.head.appendChild(s),this.geminiStylesInjected=!0,this.context.logger.debug("Gemini button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Gemini button styles:",n)}}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Gemini adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Gemini adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Gemini adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.error("Failed to wait for page ready for MCP popover injection:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=15,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug(`Page ready for MCP popover injection (attempt ${s}/${d})`),n()):s>=d?(this.context.logger.warn(`Failed to find button insertion point after ${d} attempts, giving up`),r(new Error(`Could not find insertion point after ${d} attempts`))):(this.context.logger.debug(`Button insertion point not found, retrying... (attempt ${s}/${d})`),setTimeout(h,500))};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Gemini adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Gemini adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Gemini adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Gemini adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const r=this.getSelector("buttonInsertionContainer").split(", ");for(const d of r){const h=document.querySelector(d.trim());if(h){this.context.logger.debug(`Found insertion point: ${d.trim()}`);const v=h.querySelectorAll("button"),S=v.length>1?v[1]:v.length>0?v[0]:null;return{container:h,insertAfter:S}}}const s=[".input-area .actions",".chat-input-actions",".conversation-input .actions"];for(const d of s){const h=document.querySelector(d);if(h)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:h,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Gemini interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-gemini-button-base",contentClassName:"mcp-gemini-button-content",textClassName:"mcp-gemini-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context,r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}getSelector(n){var s;return(s=this.config)!=null&&s.selectors[n]?this.config.selectors[n]:{chatInput:this.fallbackSelectors.CHAT_INPUT,submitButton:this.fallbackSelectors.SUBMIT_BUTTON,fileUploadButton:this.fallbackSelectors.FILE_UPLOAD_BUTTON,fileInput:this.fallbackSelectors.FILE_INPUT,mainPanel:this.fallbackSelectors.MAIN_PANEL,dropZone:this.fallbackSelectors.DROP_ZONE,filePreview:this.fallbackSelectors.FILE_PREVIEW,buttonInsertionContainer:this.fallbackSelectors.BUTTON_INSERTION_CONTAINER,fallbackInsertion:this.fallbackSelectors.FALLBACK_INSERTION,newChatButton:"",conversationHistory:"",conversationItem:"",messageContainer:"",userMessage:"",aiMessage:"",loadingIndicator:"",typingIndicator:"",toolbar:"",toolbarActions:"",settingsButton:"",optionsMenu:"",voiceInputButton:"",modelSelector:"",responseActions:"",copyButton:"",regenerateButton:"",shareButton:"",errorMessage:"",retryButton:""}[n]||""}async initializeConfig(){var n,r;try{iy.initialize(this.context),this.config=await iy.getAdapterConfig("gemini"),(n=this.context)==null||n.logger.debug("[GeminiAdapter] Configuration loaded successfully")}catch(s){(r=this.context)==null||r.logger.warn("[GeminiAdapter] Failed to load configuration, using defaults:",s),this.config=null}}setupConfigUpdateListener(){var n;(n=this.context)==null||n.eventBus.on("remote-config:updated",r=>{var s;r.changes.includes("gemini_adapter_config")&&((s=this.context)==null||s.logger.debug("[GeminiAdapter] Remote config updated, refreshing configuration"),this.refreshConfig())})}async refreshConfig(){var n,r;try{iy.clearCache("gemini"),this.config=await iy.getAdapterConfig("gemini"),(n=this.context)==null||n.logger.debug("[GeminiAdapter] Configuration refreshed successfully")}catch(s){(r=this.context)==null||r.logger.warn("[GeminiAdapter] Failed to refresh configuration:",s)}}async injectFileDropListener(){try{const n=this.context.chrome.runtime.getURL("dragDropListener.js"),r=document.createElement("script");return r.src=n,await new Promise((s,d)=>{r.onload=()=>s(),r.onerror=()=>d(new Error("Failed to load drop listener script")),(document.head||document.documentElement).appendChild(r)}),r.remove(),!0}catch(n){return this.context.logger.error("Failed to inject file drop listener:",n),!1}}readFileAsDataURL(n){return new Promise((r,s)=>{const d=new FileReader;d.onload=()=>r(d.result),d.onerror=()=>s(d.error),d.readAsDataURL(n)})}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.getSelector("filePreview"))?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`gemini-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Gemini page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.injectGeminiButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Gemini host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Gemini adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Gemini adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};z(pg,"instanceCount",0);let Dx=pg;const Mk=nt("GitHubCopilotAdapter"),hg=class hg extends ho{constructor(){super();z(this,"name","GitHubCopilotAdapter");z(this,"version","2.0.0");z(this,"hostnames",["github.com/copilot"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'#copilot-chat-textarea, .ChatInput-module__input--iApWs, textarea[placeholder*="How can I help"]',SUBMIT_BUTTON:'button[aria-labelledby*="Send"], button:has(.octicon-paper-airplane), .ChatInput-module__toolbarRight--PiQJn button[type="button"]:last-child',FILE_UPLOAD_BUTTON:'button[data-testid="attachment-menu-button"], button[aria-label*="Attach"], button:has(.octicon-paperclip)',FILE_INPUT:'#image-uploader, input[type="file"][accept*=".md"], input[type="file"][accept*=".txt"], input[type="file"][hidden], input[type="file"][multiple]',MAIN_PANEL:".Layout-module__chatInputContainer--DXrKy, .ChatInput-module__container--NFzCy, main",DROP_ZONE:".ChatInput-module__inputContainer--BcExV, .Layout-module__chatInputContainer--DXrKy, #copilot-chat-textarea",FILE_PREVIEW:".file-preview, .attachment-preview, .ChatInput-module__attachment",BUTTON_INSERTION_CONTAINER:".ChatInput-module__toolbarLeft--cjV2H, .ChatInput-module__toolbar--ZtCiG, .ChatInput-module__toolbarRight--PiQJn",FALLBACK_INSERTION:".ChatInput-module__container--NFzCy, .Layout-module__chatInputContainer--DXrKy"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"adapterStylesInjected",!1);hg.instanceCount++,this.instanceId=hg.instanceCount,Mk.debug(`Instance #${this.instanceId} created. Total instances: ${hg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`GitHub Copilot adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing GitHub Copilot adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners(),this.injectGitHubButtonStyles()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`GitHub Copilot adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating GitHub Copilot adapter instance #${this.instanceId}...`),this.injectGitHubButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("GitHub Copilot adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating GitHub Copilot adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up GitHub Copilot adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-github-copilot-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1,this.context.logger.debug("GitHub Copilot button styles removed")),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){var d;this.context.logger.debug(`Attempting to insert text into GitHub Copilot chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const h=this.selectors.CHAT_INPUT.split(", ");for(const v of h)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found chat input using selector: ${v.trim()}`);break}}if(!s)return this.context.logger.error("Could not find GitHub Copilot chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const h=s.value||"";s.focus();const v=h?h+`
`+n:n;s.value=v,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0}));const S=(d=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))==null?void 0:d.set;if(S){S.call(s,v);const w=new Event("input",{bubbles:!0});s.dispatchEvent(w)}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:h.length,newLength:n.length,totalLength:v.length}),this.context.logger.debug(`Text inserted successfully. Original: ${h.length}, Added: ${n.length}, Total: ${v.length}`),!0}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error inserting text into GitHub Copilot chat input: ${v}`),this.emitExecutionFailed("insertText",v),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit GitHub Copilot chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.error("Could not find GitHub Copilot submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("GitHub Copilot submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("GitHub Copilot submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("GitHub Copilot chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting GitHub Copilot chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let s=r==null?void 0:r.inputElement;if(!s){const h=this.selectors.FILE_INPUT.split(", ");for(const v of h)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found file input using selector: ${v.trim()}`);break}}if(s&&await this.tryDirectFileInput(s,n))return!0;const d=document.querySelector(this.selectors.FILE_UPLOAD_BUTTON);return d&&await this.tryAttachmentButtonApproach(d,n)?!0:(this.emitExecutionFailed("attachFile","Could not find file input or upload button"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to GitHub Copilot: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if GitHub Copilot adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by GitHub Copilot adapter`),!1;const h=[/^https:\/\/github\.com\/copilot$/,/^https:\/\/github\.com\/copilot\/.*$/,/^https:\/\/github\.com\/features\/copilot.*$/,/^https:\/\/copilot\.github\.com\/.*$/].some(v=>v.test(r));return h?this.context.logger.debug(`GitHub Copilot adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for GitHub Copilot");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}async tryDirectFileInput(n,r){var s;try{this.context.logger.debug(`Using file input: ${n.id||n.className}`);const d=new DataTransfer;d.items.add(r);const h=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"files");h&&h.set?h.set.call(n,d.files):Object.defineProperty(n,"files",{value:d.files,writable:!1});const v=(s=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"files"))==null?void 0:s.set;v&&v.call(n,d.files);const S=new Event("change",{bubbles:!0,cancelable:!0});Object.defineProperty(S,"target",{writable:!1,value:n}),Object.defineProperty(S,"currentTarget",{writable:!1,value:n}),n.dispatchEvent(S);const w=new Event("input",{bubbles:!0,cancelable:!0});return Object.defineProperty(w,"target",{writable:!1,value:n}),n.dispatchEvent(w),this.emitExecutionCompleted("attachFile",{fileName:r.name,fileType:r.type,fileSize:r.size,inputElement:n.tagName},{success:!0,method:"direct-file-input"}),this.context.logger.debug(`File attached successfully via input element: ${r.name}`),!0}catch(d){return this.context.logger.warn(`Direct file input method failed: ${d}`),!1}}async tryAttachmentButtonApproach(n,r){try{const s=document.querySelector("#copilot-chat-textarea");return s&&(this.context.logger.debug("Simulating drag and drop on chat textarea"),await new Promise(d=>{setTimeout(()=>{this.simulateFileDrop(s,r),d()},200)})),this.emitExecutionCompleted("attachFile",{fileName:r.name,fileType:r.type,fileSize:r.size},{success:!0,method:"upload-button-trigger"}),this.context.logger.debug(`File attachment initiated via upload button: ${r.name}`),!0}catch(s){return this.context.logger.warn(`Upload button method failed: ${s}`),!1}}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for GitHub Copilot adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for GitHub Copilot adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for GitHub Copilot adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for GitHub Copilot adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for GitHub Copilot adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in GitHub Copilot adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("GitHub Copilot adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('button[data-testid="attachment-menu-button"]');if(n){this.context.logger.debug("Found insertion point: div#copilot-chat-textarea-preview");const d=n.querySelector('button[data-testid="attachment-menu-button"]');return{container:n,insertAfter:d}}const r=document.querySelector(".ChatInput-module__toolbar--ZtCiG");if(r)return this.context.logger.debug("Found fallback insertion point: .ChatInput-module__toolbar--ZtCiG"),{container:r,insertAfter:null};const s=[".ChatInput-module__container--NFzCy",".Layout-module__chatInputContainer--DXrKy"];for(const d of s){const h=document.querySelector(d);if(h)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:h,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into GitHub Copilot interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-gh-button-base",contentClassName:"mcp-gh-button-content",textClassName:"mcp-gh-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with GitHub styling")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`github-copilot-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`GitHub Copilot page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.injectGitHubButtonStyles()},500),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`GitHub Copilot host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("GitHub Copilot adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in GitHub Copilot adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}getGitHubCopilotButtonStyles(){return`
/* GitHub Copilot MCP Button Styles - Matches Primer React Components */
.mcp-gh-button-base {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
  font-size: 14px;
  font-weight: 500;
  line-height: 20px;
  white-space: nowrap;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  border-radius: 6px;
  appearance: none;
  text-decoration: none;
  text-align: center;
  border: 0;
  transition: 80ms cubic-bezier(0.65, 0, 0.35, 1);
  transition-property: color, fill, background-color, border-color;
  
  /* Medium size styling */
  height: 32px;
  padding: 0 12px;
  gap: 8px;
  min-width: max-content;
  
  /* Invisible variant - matches GitHub's invisible button style */
  color: var(--fgColor-muted, #656d76);
  background-color: transparent;
  border: 1px solid transparent;
  box-shadow: none;
}

.mcp-gh-button-base:hover:not(:disabled) {
  background-color: var(--control-transparent-bgColor-hover, rgba(175, 184, 193, 0.2));
  color: var(--fgColor-default, #1f2328);
  text-decoration: none;
  transition-duration: 80ms;
}

.mcp-gh-button-base:active:not(:disabled) {
  background-color: var(--control-transparent-bgColor-active, rgba(175, 184, 193, 0.3));
  transition: none;
}

.mcp-gh-button-base:focus:not(:disabled) {
  outline: 2px solid var(--focus-outlineColor, #0969da);
  outline-offset: -2px;
  box-shadow: none;
}

.mcp-gh-button-base:disabled {
  color: var(--control-fgColor-disabled, #8c959f);
  cursor: not-allowed;
}

.mcp-gh-button-base.mcp-button-active {
  background-color: var(--control-transparent-bgColor-selected, rgba(175, 184, 193, 0.15));
  color: var(--fgColor-accent, #0969da);
}

.mcp-gh-button-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex: 1 1 auto;
}

.mcp-gh-button-text {
  flex: 1 1 auto;
  font-weight: 500;
  font-size: 14px;
  line-height: 20px;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .mcp-gh-button-base {
    color: var(--fgColor-muted, #8b949e);
  }
  
  .mcp-gh-button-base:hover:not(:disabled) {
    background-color: var(--control-transparent-bgColor-hover, rgba(177, 186, 196, 0.12));
    color: var(--fgColor-default, #e6edf3);
  }
  
  .mcp-gh-button-base:active:not(:disabled) {
    background-color: var(--control-transparent-bgColor-active, rgba(177, 186, 196, 0.2));
  }
  
  .mcp-gh-button-base:focus:not(:disabled) {
    outline-color: var(--focus-outlineColor, #2f81f7);
  }
  
  .mcp-gh-button-base:disabled {
    color: var(--control-fgColor-disabled, #484f58);
  }
  
  .mcp-gh-button-base.mcp-button-active {
    background-color: var(--control-transparent-bgColor-selected, rgba(177, 186, 196, 0.08));
    color: var(--fgColor-accent, #2f81f7);
  }
}

/* Ensure button looks consistent with GitHub's toolbar */
.ChatInput-module__toolbarLeft--cjV2H .mcp-gh-button-base,
.ChatInput-module__toolbar--ZtCiG .mcp-gh-button-base {
  margin: 0 2px;
}

/* Additional refinements for better integration */
.mcp-gh-button-base svg {
  flex-shrink: 0;
  vertical-align: text-bottom;
}

.mcp-gh-button-base:focus-visible {
  outline: 2px solid var(--focus-outlineColor, #0969da);
  outline-offset: -2px;
}

.mcp-gh-button-base:not(:focus-visible) {
  outline: none;
}
`}injectGitHubButtonStyles(){if(this.adapterStylesInjected){this.context.logger.debug("GitHub button styles already injected, skipping");return}try{const n="mcp-github-copilot-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getGitHubCopilotButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("GitHub Copilot button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject GitHub button styles:",n)}}simulateFileDrop(n,r){this.context.logger.debug(`Simulating file drop for: ${r.name} on element:`,n);try{const s=new DataTransfer;s.items.add(r);const d=new DragEvent("dragenter",{bubbles:!0,cancelable:!0,dataTransfer:s}),h=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),v=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});n.dispatchEvent(d),n.dispatchEvent(h),n.dispatchEvent(v),this.context.logger.debug("File drop simulation completed")}catch(s){this.context.logger.error("Error simulating file drop:",s)}}};z(hg,"instanceCount",0);let zx=hg;const Ak=nt("DeepSeekAdapter"),mg=class mg extends ho{constructor(){super();z(this,"name","DeepSeekAdapter");z(this,"version","2.0.0");z(this,"hostnames",["chat.deepseek.com"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'textarea[spellcheck="false"], textarea[data-gramm="false"], textarea[placeholder*="Ask"], textarea[placeholder*="Message DeepSeek"], textarea.chat-input, div[contenteditable="true"]',SUBMIT_BUTTON:'button[aria-label*="Send"], button[data-testid="send-button"], button.send-button, svg.send-icon',FILE_UPLOAD_BUTTON:'button[aria-label*="attach"], button[aria-label*="file"], input[type="file"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .main-content, .conversation-container, .chat-interface",DROP_ZONE:".chat-input-container, .input-area, .message-input, .chat-input, .file-drop-area",FILE_PREVIEW:".file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:".ec4f5d61, .chat-input-actions, .input-actions, .actions-wrapper",FALLBACK_INSERTION:".input-area, .chat-input-container, ._24fad49, .bf38813a, .aaff8b8f"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"deepseekButtonStyles",`
    /* DeepSeek MCP Button Styling - matches native ds-atom-button */
    .mcp-ds-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 0 12px;
      height: 34px;
      border-radius: 17px;
      background-color: var(--dsw-alias-bg-secondary, #f5f5f5);
      border: 1px solid transparent;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: inherit;
      font-size: 14px;
      font-weight: 500;
      color: var(--dsw-alias-label-primary, #0f1115);
      white-space: nowrap;
      user-select: none;
      -webkit-user-select: none;
      outline: none;
      box-sizing: border-box;
      vertical-align: middle;
      margin-left: 8px;
    }

    .mcp-ds-button:hover {
      background-color: var(--dsw-alias-bg-tertiary, #e8e8e8);
      transform: translateY(-1px);
    }

    .mcp-ds-button:active {
      transform: translateY(0);
      background-color: var(--dsw-alias-bg-quaternary, #d8d8d8);
    }

    .mcp-ds-button:focus-visible {
      outline: 2px solid var(--dsw-alias-border-focus, #4a9eff);
      outline-offset: 2px;
    }

    .mcp-ds-button.mcp-button-active {
      background-color: var(--dsw-alias-bg-brand-secondary, #e8f0fe);
      color: var(--dsw-alias-label-brand, #1a73e8);
      border-color: var(--dsw-alias-border-brand, #1a73e8);
    }

    .mcp-ds-button.mcp-button-active:hover {
      background-color: var(--dsw-alias-bg-brand-tertiary, #d2e3fc);
    }

    .mcp-ds-button-content {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .mcp-ds-button-icon {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .mcp-ds-button-text {
      font-size: 14px;
      font-weight: 500;
      line-height: 1;
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      .mcp-ds-button {
        background-color: var(--dsw-alias-bg-secondary-dark, #2a2a2a);
        color: var(--dsw-alias-label-primary-dark, #e8eaed);
      }

      .mcp-ds-button:hover {
        background-color: var(--dsw-alias-bg-tertiary-dark, #3a3a3a);
      }

      .mcp-ds-button:active {
        background-color: var(--dsw-alias-bg-quaternary-dark, #4a4a4a);
      }

      .mcp-ds-button.mcp-button-active {
        background-color: var(--dsw-alias-bg-brand-secondary-dark, #1a3a5a);
        color: var(--dsw-alias-label-brand-dark, #8ab4f8);
        border-color: var(--dsw-alias-border-brand-dark, #8ab4f8);
      }

      .mcp-ds-button.mcp-button-active:hover {
        background-color: var(--dsw-alias-bg-brand-tertiary-dark, #2a4a6a);
      }
    }
  `);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");mg.instanceCount++,this.instanceId=mg.instanceCount,Ak.debug(`Instance #${this.instanceId} created. Total instances: ${mg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`DeepSeek adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing DeepSeek adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`DeepSeek adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating DeepSeek adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("DeepSeek adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating DeepSeek adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up DeepSeek adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into DeepSeek chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find DeepSeek chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,h=d.value,v=h?h+`

`+n:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),d.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`Text inserted into textarea successfully. Original: ${h.length}, Added: ${n.length}, Total: ${v.length}`)}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",h=window.getSelection(),v=document.createRange();v.selectNodeContents(s),v.collapse(!1),h==null||h.removeAllRanges(),h==null||h.addRange(v),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted into contenteditable successfully")}else{const d=s.value||s.textContent||"",h=d?d+`

`+n:n;"value"in s?s.value=h:s.textContent=h,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted using fallback method")}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,targetElementType:s.tagName,insertedLength:n.length}),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into DeepSeek chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit DeepSeek chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.warn("Could not find DeepSeek submit button, trying Enter key press"),this.tryEnterKeySubmission();try{if(r.disabled)return this.context.logger.warn("DeepSeek submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("DeepSeek submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("DeepSeek chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting DeepSeek chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async tryEnterKeySubmission(){try{const n=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0].trim());if(!n)return this.context.logger.error("Cannot find chat input for Enter key submission"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key submission"),!1;const r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return n.focus(),n.dispatchEvent(r),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey",fallback:!0}),this.context.logger.debug("DeepSeek chat input submitted using Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting DeepSeek chat input via Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let s=null;return r!=null&&r.inputElement?s=r.inputElement:s=document.querySelector(this.selectors.FILE_INPUT),s&&await this.attachFileToInput(n,s)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"fileInput"},{success:!0,attachmentMethod:"direct-input"}),!0):await this.simulateFileDrop(n)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"dragDrop"},{success:!0,attachmentMethod:"drag-drop-simulation"}),!0):(this.emitExecutionFailed("attachFile","All file attachment methods failed"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to DeepSeek: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileToInput(n,r){try{const s=new DataTransfer;return s.items.add(n),r.files=s.files,r.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`File attached directly to input: ${n.name}`),!0}catch(s){return this.context.logger.error("Error attaching file to input:",s),!1}}async simulateFileDrop(n){try{const r=this.selectors.DROP_ZONE.split(", ");let s=null;for(const w of r)if(s=document.querySelector(w.trim()),s)break;if(!s)return this.context.logger.warn("No drop zone found for file drop simulation"),!1;const d=new DataTransfer;d.items.add(n);const h=new DragEvent("dragenter",{bubbles:!0,dataTransfer:d}),v=new DragEvent("dragover",{bubbles:!0,dataTransfer:d}),S=new DragEvent("drop",{bubbles:!0,dataTransfer:d});return s.dispatchEvent(h),s.dispatchEvent(v),s.dispatchEvent(S),this.context.logger.debug(`File drop simulated for: ${n.name}`),!0}catch(r){return this.context.logger.error("Error simulating file drop:",r),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if DeepSeek adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by DeepSeek adapter`),!1;const h=[/^https?:\/\/(?:www\.)?chat\.deepseek\.com\/.*/,/^https?:\/\/(?:www\.)?chat\.deepseek\.com$/].some(v=>v.test(r));return h?this.context.logger.debug(`DeepSeek adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for DeepSeek");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for DeepSeek adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for DeepSeek adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for DeepSeek adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for DeepSeek adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for DeepSeek adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in DeepSeek adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("DeepSeek adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){var s;this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".ec4f5d61");if(n){if(this.context.logger.debug("Found DeepSeek button container (.ec4f5d61)"),n.querySelector(".bf38813a")){this.context.logger.debug("Found attach button container, will insert before it");const S=n.querySelectorAll(".ds-toggle-button");if(S.length>0){const w=S[S.length-1];return this.context.logger.debug("Will insert after last toggle button (Search)"),{container:n,insertAfter:w}}return{container:n,insertAfter:null}}const h=n.querySelectorAll(".ds-button");for(const S of Array.from(h))if(((s=S.textContent)==null?void 0:s.trim())==="Search")return this.context.logger.debug("Found search button, will insert after it"),{container:n,insertAfter:S};const v=n.querySelector(".ds-button:last-child");if(v)return this.context.logger.debug("Using last button as insertion point"),{container:n,insertAfter:v}}const r=["._24fad49",".bf38813a",".aaff8b8f",".chat-input-actions",".input-actions",".actions-wrapper"];for(const d of r){const h=document.querySelector(d);if(h)return this.context.logger.debug(`Found fallback insertion point: ${d}`),h.parentElement?{container:h.parentElement,insertAfter:h}:{container:h,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into DeepSeek interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}if(!document.getElementById("mcp-deepseek-button-styles")){const h=document.createElement("style");h.id="mcp-deepseek-button-styles",h.textContent=this.deepseekButtonStyles,document.head.appendChild(h),this.context.logger.debug("DeepSeek button styles injected")}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-ds-button",contentClassName:"mcp-ds-button-content",textClassName:"mcp-ds-button-text",iconClassName:"mcp-ds-button-icon",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:"DeepSeekAdapter"})),this.context.logger.debug("MCP popover rendered successfully with DeepSeek styling")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`deepseek-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`DeepSeek page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`DeepSeek host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("DeepSeek adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in DeepSeek adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};z(mg,"instanceCount",0);let Nx=mg;const Ok=nt("GrokAdapter"),bg=class bg extends ho{constructor(){super();z(this,"name","GrokAdapter");z(this,"version","2.0.0");z(this,"hostnames",["x.com","grok.com"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'textarea[aria-label="Ask Grok anything"], textarea[placeholder="Ask anything"], textarea[placeholder], textarea[spellcheck="false"], textarea[data-gramm="false"], div.css-146c3p1 textarea, textarea.r-30o5oe, div[contenteditable="true"]',SUBMIT_BUTTON:'button[aria-label="Submit"], button.send-button, button[aria-label="Send message"], button.chat-submit, button[data-testid="send-button"], svg.send-icon, button.submit-button',FILE_UPLOAD_BUTTON:'button[aria-label*="attach"], button[aria-label*="file"], button[data-testid="file-upload"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .grok-chat, .main-content",DROP_ZONE:'.chat-input-container, .input-area, textarea, div[contenteditable="true"]',FILE_PREVIEW:".file-preview, .attachment-preview, .file-attachment",BUTTON_INSERTION_CONTAINER:".chat-input-actions, .input-actions, .chat-controls",FALLBACK_INSERTION:".chat-input-container, .input-area, .chat-interface"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"adapterStylesInjected",!1);z(this,"instanceId");bg.instanceCount++,this.instanceId=bg.instanceCount,Ok.debug(`Instance #${this.instanceId} created. Total instances: ${bg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Grok adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Grok adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Grok adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Grok adapter instance #${this.instanceId}...`),this.injectGrokButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Grok adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Grok adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Grok adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-grok-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Grok chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Grok chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,h=d.value,v=h?h+`

`+n:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),d.dispatchEvent(new Event("change",{bubbles:!0}))}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",h=window.getSelection(),v=document.createRange();v.selectNodeContents(s),v.collapse(!1),h==null||h.removeAllRanges(),h==null||h.addRange(v),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}else{const d=s.textContent||"",h=d?d+`

`+n:n;s.textContent=h,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0}))}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,textLength:n.length,elementType:s.tagName.toLowerCase()}),this.context.logger.debug("Text inserted successfully into Grok chat input"),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Grok chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Grok chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(r)try{if(r.disabled)return this.context.logger.warn("Grok submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("Grok submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Grok chat input submitted successfully via button click"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error clicking Grok submit button: ${v}`),this.emitExecutionFailed("submitForm",v),!1}this.context.logger.debug("No submit button found, trying Enter key press");try{const h=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0]);if(h){h.focus();const v=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return h.dispatchEvent(v),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey",fallback:!0}),this.context.logger.debug("Grok chat input submitted successfully via Enter key"),!0}else return this.context.logger.error("Could not find chat input for Enter key fallback"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key fallback"),!1}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error with Enter key fallback: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let d=null;if(r!=null&&r.inputElement?d=r.inputElement:d=document.querySelector(this.selectors.FILE_INPUT),!d)return this.context.logger.error("Could not find file input element"),this.emitExecutionFailed("attachFile","File input element not found"),!1;const h=new DataTransfer;h.items.add(n),d.files=h.files;const v=new Event("change",{bubbles:!0});return d.dispatchEvent(v),await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:!0,method:"file-input"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0):(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!1,method:"file-input"}),this.context.logger.debug(`File attachment initiated (preview not confirmed): ${n.name}`),!0)}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to Grok: ${h}`),this.emitExecutionFailed("attachFile",h),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Grok adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Grok adapter`),!1;const h=[/^https?:\/\/(?:www\.)?(?:twitter\.com|x\.com)\/i\/grok/,/^https?:\/\/(?:www\.)?grok\.com/].some(v=>v.test(r));return h?this.context.logger.debug(`Grok adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){if(this.context.logger.debug("Checking file upload support for Grok"),document.querySelector(this.selectors.FILE_INPUT))return this.context.logger.debug("Found file input element"),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;const s=this.selectors.DROP_ZONE.split(", ");for(const d of s)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;return this.context.logger.debug("No file upload support detected"),!1}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}getGrokButtonStyles(){return`
      .mcp-grok-button-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        white-space: nowrap;
        font-weight: 500;
        cursor: pointer;
        border: 1px solid var(--border-l2, #e5e7eb);
        border-radius: 9999px;
        height: 40px;
        min-height: 40px;
        padding: 8px 14px;
        font-size: 14px;
        line-height: 1.2;
        background-color: transparent;
        color: var(--fg-primary, #111827);
        transition: all 100ms ease-in-out;
        position: relative;
        overflow: hidden;
        user-select: none;
        font-family: inherit;
        vertical-align: middle;
        box-sizing: border-box;
        flex-direction: row;
        flex-wrap: nowrap;
      }

      .mcp-grok-button-content {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        flex-direction: row;
        flex-wrap: nowrap;
      }

      .mcp-grok-button-base:focus-visible {
        outline: none;
        box-shadow: 0 0 0 1px var(--ring, #3b82f6);
      }

      .mcp-grok-button-base:hover {
        background-color: var(--button-ghost-hover, rgba(0, 0, 0, 0.05));
      }

      .mcp-grok-button-base:hover .mcp-grok-button-icon {
        color: var(--fg-primary, #111827);
      }

      .mcp-grok-button-base:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .mcp-grok-button-base:disabled:hover {
        background-color: transparent;
      }

      .mcp-grok-button-icon {
        width: 18px;
        height: 18px;
        min-width: 18px;
        min-height: 18px;
        stroke-width: 2;
        color: var(--fg-secondary, #6b7280);
        transition: color 100ms ease-in-out;
        flex-shrink: 0;
        flex-grow: 0;
        align-self: center;
      }

      .mcp-grok-button-text {
        font-size: 14px;
        font-weight: 500;
        color: inherit;
        line-height: 1.2;
        flex-shrink: 0;
        flex-grow: 0;
        align-self: center;
        margin: 0;
        padding: 0;
      }

      .mcp-button-active {
        background-color: var(--button-ghost-hover, rgba(0, 0, 0, 0.1));
        border-color: var(--border-l1, #d1d5db);
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-grok-button-base {
          border-color: var(--border-l2-dark, #374151);
          color: var(--fg-primary-dark, #f9fafb);
          background-color: transparent;
        }

        .mcp-grok-button-base:hover {
          background-color: var(--button-ghost-hover-dark, rgba(255, 255, 255, 0.05));
        }

        .mcp-grok-button-base:hover .mcp-grok-button-icon {
          color: var(--fg-primary-dark, #f9fafb);
        }

        .mcp-grok-button-icon {
          color: var(--fg-secondary-dark, #9ca3af);
        }

        .mcp-button-active {
          background-color: var(--button-ghost-hover-dark, rgba(255, 255, 255, 0.1));
          border-color: var(--border-l1-dark, #4b5563);
        }
      }

      /* Integration with Grok's existing button group styles */
      .mcp-grok-button-base + .mcp-grok-button-base {
        margin-left: 4px;
      }

      /* Ensure proper stacking context - higher than Grok's z-20 elements */
      .mcp-grok-button-base {
        z-index: 25;
      }

      /* Match Grok's button focus ring exactly */
      .mcp-grok-button-base:focus-visible {
        outline: none;
        box-shadow: 0 0 0 1px var(--ring, #3b82f6);
      }

      /* Additional hover states for better UX */
      .mcp-grok-button-base:active {
        transform: scale(0.98);
        transition: transform 50ms ease-in-out;
      }
    `}injectGrokButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-grok-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getGrokButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("Grok button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Grok button styles:",n)}}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Grok adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Grok adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Grok adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Grok adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Grok adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Grok adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Grok adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('button[aria-label="Submit"], button[type="submit"], button[aria-label="Enter voice mode"]');if(n){const h=n.closest(".ml-auto.flex.flex-row.items-end.gap-1")||n.closest(".flex.flex-row.items-end")||n.closest(".flex.items-end")||n.parentElement;if(h)return this.context.logger.debug("Found insertion point: submit button container"),{container:h,insertAfter:null}}const r=document.querySelector('button[aria-label="Think"]');if(r&&r.parentElement)return this.context.logger.debug("Found insertion point relative to Think button"),{container:r.parentElement,insertAfter:r};const s=this.selectors.BUTTON_INSERTION_CONTAINER.split(", ");for(const h of s){const v=document.querySelector(h.trim());if(v){this.context.logger.debug(`Found insertion point: ${h.trim()}`);const S=v.querySelectorAll("button"),w=S.length>0?S[S.length-1]:null;return{container:v,insertAfter:w}}}const d=this.selectors.FALLBACK_INSERTION.split(", ");for(const h of d){const v=document.querySelector(h.trim());if(v)return this.context.logger.debug(`Found fallback insertion point: ${h.trim()}`),{container:v,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Grok interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;if(d===null){const h=s.firstChild;h?(s.insertBefore(r,h),this.context.logger.debug("Inserted popover container at beginning (before submit button)")):(s.appendChild(r),this.context.logger.debug("Appended popover container to empty container"))}else d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element"));this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-grok-button-base",contentClassName:"mcp-grok-button-content",textClassName:"mcp-grok-button-text",iconClassName:"mcp-grok-button-icon",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Grok page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,setTimeout(()=>{this.injectGrokButtonStyles()},500),this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Grok host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Grok adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Grok adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}emitExecutionCompleted(n,r,s){if(this.context.eventBus)try{this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}catch(d){this.context.logger.warn("Failed to emit execution completed event:",d)}}emitExecutionFailed(n,r){if(this.context.eventBus)try{this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}catch(s){this.context.logger.warn("Failed to emit execution failed event:",s)}}generateCallId(){return`grok-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}};z(bg,"instanceCount",0);let Ux=bg;const vg=class vg extends ho{constructor(){super();z(this,"name","PerplexityAdapter");z(this,"version","2.0.0");z(this,"hostnames",["perplexity.ai","www.perplexity.ai"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'#ask-input[contenteditable="true"], #ask-input[role="textbox"], div[role="textbox"][contenteditable="true"], textarea[placeholder="Ask anything..."], textarea[placeholder="Ask follow-up"], textarea[placeholder*="Ask"], div[contenteditable="true"][data-lexical-editor="true"]',SUBMIT_BUTTON:'button[aria-label="Submit"], button[aria-label="Send"], button[type="submit"]',FILE_UPLOAD_BUTTON:'button[aria-label*="Attach"], button[aria-label*="attach"]',FILE_INPUT:'input[type="file"][multiple][accept*=".pdf"], input[type="file"][multiple]',MAIN_PANEL:".main-content, .chat-container, .conversation-container",DROP_ZONE:'textarea[placeholder*="Ask"], .input-area, .chat-input-container',FILE_PREVIEW:".file-preview, .attachment-preview, .file-upload-preview",BUTTON_INSERTION_CONTAINER:'div[role="radiogroup"].group.relative.isolate.flex, .flex.items-center, div.flex.items-end.gap-sm',FALLBACK_INSERTION:".input-area, .chat-input-container, .conversation-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"adapterStylesInjected",!1);vg.instanceCount++,this.instanceId=vg.instanceCount,console.debug(`[PerplexityAdapter] Instance #${this.instanceId} created. Total instances: ${vg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Perplexity adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Perplexity adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Perplexity adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Perplexity adapter instance #${this.instanceId}...`),this.injectPerplexityButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Perplexity adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Perplexity adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Perplexity adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-perplexity-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Perplexity chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Perplexity chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=window.location.href;return this.context.logger.debug("Using InputEvent method for text insertion for all pages"),await this.insertTextViaInputEvent(s,n)}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Perplexity chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async insertTextViaInputEvent(n,r){try{const s=this.getElementContent(n);n.focus();const d=document.createRange();d.selectNodeContents(n);const h=window.getSelection();h&&(h.removeAllRanges(),h.addRange(d));const v=s?s+`

`+r:r;return n.dispatchEvent(new InputEvent("input",{inputType:"insertText",data:v,bubbles:!0,cancelable:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:r},{success:!0,originalLength:s.length,newLength:r.length,totalLength:v.length,method:"InputEvent-homepage"}),this.context.logger.debug(`Text inserted successfully via InputEvent on homepage. Original: ${s.length}, Added: ${r.length}, Total: ${v.length}`),!0}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`InputEvent method failed: ${d}`),this.emitExecutionFailed("insertText",`InputEvent method failed: ${d}`),!1}}isContentEditableElement(n){return n.isContentEditable||n.getAttribute("contenteditable")==="true"||n.hasAttribute("contenteditable")}getElementContent(n){return this.isContentEditableElement(n)?n.textContent||n.innerText||"":n.value||""}async submitForm(n){var d,h;this.context.logger.debug("Attempting to submit Perplexity chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const v of s)if(r=document.querySelector(v.trim()),r){this.context.logger.debug(`Found submit button using selector: ${v.trim()}`);break}if(!r){const v=document.querySelector(this.selectors.CHAT_INPUT);v&&(r=(d=v.parentElement)==null?void 0:d.querySelector("button"),r&&this.context.logger.debug("Found submit button near chat input"))}if(r)try{if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled")){this.context.logger.warn("Perplexity submit button is disabled, waiting for it to be enabled");const w=5e3,M=Date.now();for(;Date.now()-M<w&&(await new Promise(A=>setTimeout(A,300)),!!(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))););if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))return this.context.logger.warn("Submit button remained disabled, falling back to Enter key"),this.submitWithEnterKey()}const S=r.getBoundingClientRect();return S.width===0||S.height===0?(this.context.logger.warn("Perplexity submit button is not visible, falling back to Enter key"),this.submitWithEnterKey()):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((h=n==null?void 0:n.formElement)==null?void 0:h.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(w=>document.querySelector(w.trim())===r)}),this.context.logger.debug("Perplexity chat input submitted successfully via button click"),!0)}catch(v){const S=v instanceof Error?v.message:String(v);return this.context.logger.error(`Error clicking submit button: ${S}, falling back to Enter key`),this.submitWithEnterKey()}else return this.context.logger.warn("Could not find Perplexity submit button, falling back to Enter key"),this.submitWithEnterKey()}async submitWithEnterKey(){try{const n=document.querySelector(this.selectors.CHAT_INPUT);if(!n)return this.emitExecutionFailed("submitForm","Chat input element not found for Enter key fallback"),!1;n.focus();const r=["keydown","keypress","keyup"];for(const d of r)n.dispatchEvent(new KeyboardEvent(d,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}));const s=n.closest("form");return s&&(this.context.logger.debug("Submitting form as additional fallback"),s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey+formSubmit"}),this.context.logger.debug("Perplexity chat input submitted successfully via Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting with Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;if(await this.attachFileViaInput(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"file-input"}),this.context.logger.debug(`File attached successfully via input: ${n.name}`),!0;if(await this.attachFileViaDragDrop(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"drag-drop"}),this.context.logger.debug(`File attached successfully via drag-drop: ${n.name}`),!0;const h=await this.attachFileViaClipboard(n);return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:h,method:"clipboard"}),h?this.context.logger.debug(`File copied to clipboard for manual paste: ${n.name}`):this.context.logger.warn(`All file attachment methods failed for: ${n.name}`),h}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to Perplexity: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileViaInput(n){try{const r=this.selectors.FILE_INPUT.split(", ");let s=null;for(const v of r)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found file input using selector: ${v.trim()}`);break}if(!s)return this.context.logger.debug("No file input element found"),!1;const d=new DataTransfer;d.items.add(n),s.files=d.files;const h=new Event("change",{bubbles:!0});return s.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`File input method failed: ${r}`),!1}}async attachFileViaDragDrop(n){try{const r=document.querySelector(this.selectors.CHAT_INPUT);if(!r)return this.context.logger.debug("No chat input found for drag-drop"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),h=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.addEventListener("dragover",v=>v.preventDefault(),{once:!0}),r.dispatchEvent(d),r.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`Drag-drop method failed: ${r}`),!1}}async attachFileViaClipboard(n){try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})]);const r=document.querySelector(this.selectors.CHAT_INPUT);return r&&r.focus(),!0}catch(r){return this.context.logger.debug(`Clipboard method failed: ${r}`),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Perplexity adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Perplexity adapter`),!1;const h=[/^https:\/\/(?:www\.)?perplexity\.ai\/search\/.*/,/^https:\/\/(?:www\.)?perplexity\.ai\/$/,/^https:\/\/(?:www\.)?perplexity\.ai\/library\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`Perplexity adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Perplexity");const n=this.selectors.FILE_INPUT.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found file input with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;const s=this.selectors.DROP_ZONE.split(", ");for(const d of s)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;return this.context.logger.debug("No file upload support detected"),!1}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Perplexity adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Perplexity adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Perplexity adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Perplexity adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Perplexity adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Perplexity adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Perplexity adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('div[role="radiogroup"].group.relative.isolate.flex');if(n){const d=n.closest(".flex.items-center");if(d){this.context.logger.debug("Found search/research toggle container, placing MCP button next to it");const h=n.parentElement;return{container:d,insertAfter:h}}}const r=document.querySelector("div.flex.items-end.gap-sm");if(r){this.context.logger.debug("Found actions container (fallback)");const d=r.querySelector('button[aria-label*="Attach"]');return{container:r,insertAfter:d}}const s=[".input-area .actions",".chat-input-actions",".conversation-input .actions"];for(const d of s){const h=document.querySelector(d);if(h)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:h,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Perplexity interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-perplexity-button-base",contentClassName:"mcp-perplexity-button-content",textClassName:"mcp-perplexity-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`perplexity-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Perplexity page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.adapterStylesInjected=!1,this.injectPerplexityButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Perplexity host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Perplexity adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Perplexity adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}getPerplexityButtonStyles(){return`
      .mcp-perplexity-button-base {
        /* Base button styling matching Perplexity's segmented-control design */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        outline: none;
        cursor: pointer;
        white-space: nowrap;
        user-select: none;
        border-radius: 8px;
        height: 32px;
        min-width: 36px;
        padding: 0 0px;
        gap: 6px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        background: transparent;
        transition: all 300ms ease-out;
        
        /* Default colors - using Perplexity's actual theme colors */
        color: oklch(var(--text-color-200, 50.2% 0.008 106.677)); /* Inactive text */
        
        /* Focus states */
        &:focus {
          outline: none;
        }
        
        /* Hover states */
        &:hover {
          color: oklch(var(--text-color-100, 30.4% 0.04 213.681)); /* Active text on hover */
        }
        
        /* Active/selected state - matches the checked segmented control */
        &.mcp-button-active {
          color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538)); /* Super color for active state */
        }
        
        /* Active button overlay styling (matches data-state="checked" div) */
        &.mcp-button-active::before {
          content: '';
          position: absolute;
          inset: 0;
          pointer-events: none;
          border-radius: 8px;
          border: 1px solid oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
          background-color: oklch(0.963 0.007 106.523); /* Light background */
          box-shadow: 0 1px 3px 0 oklch(var(--text-super-color-100, 55.3% 0.086 208.538) / 0.3);
          transition: all 300ms ease-out;
          opacity: 1;
        }
      }
      
      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-perplexity-button-base {
          color: oklch(var(--dark-text-color-200, 65.3% 0.005 197.042)); /* Dark mode inactive text */
          
          &:hover {
            color: oklch(var(--dark-text-color-100, 93% 0.003 106.451)); /* Dark mode hover text */
          }
          
          &.mcp-button-active {
            color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538)); /* Keep super color in dark mode */
          }
          
          &.mcp-button-active::before {
            background-color: oklch(var(--lt-color-text-dark, 0.113 0.005 247.858)); /* Dark background equivalent */
            border-color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
            box-shadow: 0 1px 3px 0 oklch(var(--text-super-color-100, 55.3% 0.086 208.538) / 0.2);
          }
        }
      }
      
      .mcp-perplexity-button-content {
        /* Content container styling - matches the inner div structure */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        min-width: 0;
        font-weight: 500;
        position: relative;
        z-index: 10; /* matches relative z-10 */
        height: 32px;
        min-width: 36px;
        padding: 4px 10px; /* matches py-xs px-2.5 equivalent */
      }
      
      .mcp-perplexity-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 1.2;
        color: inherit; /* Inherit color from parent */
      }
      
      /* Icon styling within button */
      .mcp-perplexity-button-base svg,
      .mcp-perplexity-button-base img {
        width: 16px;
        height: 16px;
        transition: all 300ms ease-out;
        flex-shrink: 0;
      }
      
      .mcp-perplexity-button-base img {
        border-radius: 50%;
        margin-right: 1px;
      }
      
      /* Integration with Perplexity's button group layout */
      .gap-xs .mcp-perplexity-button-base,
      .gap-sm .mcp-perplexity-button-base,
      .flex.items-center .mcp-perplexity-button-base {
        margin: 0 2px;
      }
      
      /* Special styling for group context (matches p-two flex items-center structure) */
      .p-two .mcp-perplexity-button-base,
      [class*="p-"] .mcp-perplexity-button-base {
        margin: 0 1px;
      }
      
      /* Focus-visible styling for accessibility */
      .mcp-perplexity-button-base:focus-visible {
        outline: 2px solid oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
        outline-offset: 2px;
        outline-style: dashed;
      }
      
      .mcp-perplexity-button-base:focus-visible::before {
        border-style: dashed !important;
      }
      
      /* Responsive adjustments */
      @media (max-width: 640px) {
        .mcp-perplexity-button-base {
          height: 28px;
          min-width: 32px;
          padding: 0 8px;
          font-size: 13px;
        }
        
        .mcp-perplexity-button-content {
          height: 28px;
          min-width: 32px;
          padding: 2px 8px;
        }
        
        .mcp-perplexity-button-base svg,
        .mcp-perplexity-button-base img {
          width: 14px;
          height: 14px;
        }
        
        /* Adjust ring size for mobile */
        .mcp-perplexity-button-base.mcp-button-active::before {
          border-width: 1px; /* Keep consistent border width on mobile */
        }
      }
      
    `}injectPerplexityButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-perplexity-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getPerplexityButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("Perplexity button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Perplexity button styles:",n)}}};z(vg,"instanceCount",0);let Px=vg;const Rt=nt("AIStudioAdapter"),yg=class yg extends ho{constructor(){super();z(this,"name","AIStudioAdapter");z(this,"version","2.0.0");z(this,"hostnames",["aistudio.google.com"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{BUTTON_INSERTION_CONTAINER:".prompt-input-wrapper, .actions-container, footer .actions-container",FALLBACK_INSERTION:".input-area, .chat-input-container, .conversation-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"adapterStylesInjected",!1);yg.instanceCount++,this.instanceId=yg.instanceCount,Rt.debug(`Instance #${this.instanceId} created. Total instances: ${yg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`AI Studio adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing AI Studio adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`AI Studio adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating AI Studio adapter instance #${this.instanceId}...`),this.injectAIStudioButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var r;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(r=this.context)==null||r.logger.warn("AI Studio adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating AI Studio adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers();const n=document.getElementById("mcp-aistudio-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up AI Studio adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-aistudio-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}getAIStudioButtonStyles(){return`
      .mcp-aistudio-button-base {
        /* Base Material Design button styling */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        border: none;
        outline: none;
        line-height: inherit;
        user-select: none;
        appearance: none;
        overflow: visible;
        vertical-align: middle;
        background: transparent;
        
        /* AI Studio Color System */
        color: var(--color-on-surface);
        background-color: transparent;
        
        /* Typography */
        font-family: 'Google Sans', Roboto, 'Helvetica Neue', Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.0892857143em;
        text-decoration: none;
        text-transform: none;
        
        /* Spacing and sizing */
        padding: 8px 16px;
        min-width: 64px;
        height: 36px;
        border-radius: 18px;
        
        /* Transitions */
        transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,
                    box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,
                    border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,
                    color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
        
        /* Focus and active states */
        position: relative;
        cursor: pointer;
        margin: 0 4px;
      }
      
      .mcp-aistudio-button-base:hover {
        background-color: var(--color-surface-container);
        color: var(--color-primary);
      }
      
      .mcp-aistudio-button-base:focus {
        outline: none;
        box-shadow: 0 0 0 2px var(--color-primary-container);
      }
      
      .mcp-aistudio-button-base:active {
        background-color: var(--color-surface-container-high);
        transform: translateY(1px);
      }
      
      .mcp-aistudio-button-base.inactive {
        color: var(--color-on-surface-variant);
        background-color: var(--color-run-button-disabled-background-transparent, rgba(226, 226, 229, 0.9));
        border: 1px solid var(--color-outline-variant);
      }
      
      .mcp-aistudio-button-base.inactive:hover {
        background-color: var(--color-surface-container);
        color: var(--color-on-surface);
      }
      
      .mcp-aistudio-button-base.active {
        background-color: var(--color-primary);
        color: var(--color-on-primary);
      }
      
      .mcp-aistudio-button-base.active:hover {
        background-color: var(--color-primary-container);
        color: var(--color-on-primary-container);
      }
      
      /* Content styling */
      .mcp-aistudio-button-content {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .mcp-aistudio-button-text {
        font-weight: 500;
        font-size: 14px;
      }
      
      /* Dark mode support - now handled by CSS variables */
      :root .dark-theme .mcp-aistudio-button-base,
      @media (prefers-color-scheme: dark) {
        .mcp-aistudio-button-base {
          /* Colors automatically handled by CSS variables */
        }
      }
      
      /* Integration with AI Studio's button wrapper */
      .button-wrapper .mcp-aistudio-button-base {
        margin: 0;
        height: 40px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      /* Ensure the MCP button wrapper behaves like other button wrappers */
      #mcp-button-wrapper {
        display: flex;
        align-items: center;
      }
      
      /* Ripple effect (simplified) - using AI Studio colors */
      .mcp-aistudio-button-base::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background-color: var(--color-primary);
        opacity: 0;
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s, opacity 0.6s;
        pointer-events: none;
      }
      
      .mcp-aistudio-button-base:active::after {
        width: 100px;
        height: 100px;
        opacity: 0.1;
        transition: 0s;
      }
    `}injectAIStudioButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-aistudio-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getAIStudioButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("AI Studio button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject AI Studio button styles:",n)}}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into AI Studio chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);try{return Rk(n)?(this.emitExecutionCompleted("insertText",{text:n},{success:!0,method:"chatInputHandler",textLength:n.length}),this.context.logger.debug(`Text inserted successfully using chatInputHandler. Length: ${n.length}`),!0):(this.context.logger.error("Failed to insert text using chatInputHandler"),this.emitExecutionFailed("insertText","chatInputHandler failed to insert text"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error inserting text into AI Studio chat input: ${d}`),this.emitExecutionFailed("insertText",d),!1}}async submitForm(n){var r;this.context.logger.debug("Attempting to submit AI Studio chat input");try{return await Dk()?(this.emitExecutionCompleted("submitForm",{formElement:((r=n==null?void 0:n.formElement)==null?void 0:r.tagName)||"unknown"},{success:!0,method:"chatInputHandler"}),this.context.logger.debug("AI Studio chat input submitted successfully via chatInputHandler"),!0):(this.context.logger.error("Failed to submit using chatInputHandler"),this.emitExecutionFailed("submitForm","chatInputHandler failed to submit"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error submitting AI Studio chat input: ${d}`),this.emitExecutionFailed("submitForm",d),!1}}async submitWithEnterKey(){try{const n=Qu();if(!n)return this.emitExecutionFailed("submitForm","Chat input element not found for Enter key fallback"),!1;n.focus();const r=["keydown","keypress","keyup"];for(const d of r)n.dispatchEvent(new KeyboardEvent(d,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}));const s=n.closest("form");return s&&(this.context.logger.debug("Submitting form as additional fallback"),s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey+formSubmit"}),this.context.logger.debug("AI Studio chat input submitted successfully via Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting with Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{return!n||n.size===0?(this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1):this.supportsFileUpload()?await Ik(n)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"chatInputHandler"}),this.context.logger.debug(`File attached successfully via chatInputHandler: ${n.name}`),!0):(this.context.logger.warn(`File attachment failed via chatInputHandler for: ${n.name}`),this.emitExecutionFailed("attachFile","chatInputHandler failed to attach file"),!1):(this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to AI Studio: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileViaDragDrop(n){try{const r=Qu();if(!r)return this.context.logger.debug("No chat input found for drag-drop"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),h=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.addEventListener("dragover",v=>v.preventDefault(),{once:!0}),r.dispatchEvent(d),r.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`Drag-drop method failed: ${r}`),!1}}async attachFileViaInput(n){try{const r=document.querySelector('input[type="file"]');if(!r)return Rt.debug("No file input element found"),!1;const s=new DataTransfer;s.items.add(n),r.files=s.files;const d=new Event("change",{bubbles:!0});return r.dispatchEvent(d),Rt.debug(`File attached via input element: ${n.name}`),!0}catch(r){return Rt.debug(`File input method failed: ${r}`),!1}}async attachFileViaClipboard(n){try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})]);const r=Qu();return r&&r.focus(),!0}catch(r){return this.context.logger.debug(`Clipboard method failed: ${r}`),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if AI Studio adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by AI Studio adapter`),!1;const h=[/^https:\/\/aistudio\.google\.com\/app\/.*/,/^https:\/\/aistudio\.google\.com\/$/,/^https:\/\/aistudio\.google\.com\/prompts\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`AI Studio adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){return this.context.logger.debug("Checking file upload support for AI Studio"),Qu()?(this.context.logger.debug("Found chat input element, file upload should be supported"),!0):(this.context.logger.debug("Could not find chat input element"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for AI Studio adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for AI Studio adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for AI Studio adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-button-wrapper")||document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for AI Studio adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for AI Studio adapter");const n=document.getElementById("mcp-button-wrapper");n&&n.remove();const r=document.getElementById("mcp-popover-container");r&&r.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in AI Studio adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("AI Studio adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".prompt-input-wrapper-container");if(n){this.context.logger.debug("Found prompt input wrapper container");const d=n.querySelectorAll(".button-wrapper");if(d.length>0){const h=d[0].parentElement;if(h){const v=d[d.length-1];return this.context.logger.debug("Found button container, placing MCP button after the Run button"),{container:h,insertAfter:v}}}}const r=document.querySelector(".prompt-input-wrapper");if(r){this.context.logger.debug("Found prompt input wrapper (fallback)");const d=r.querySelectorAll(".button-wrapper");if(d.length>0){const h=d[d.length-1];return{container:r,insertAfter:h}}return{container:r,insertAfter:null}}const s=document.querySelector("footer .actions-container, .actions-container");return s?(this.context.logger.debug("Found actions container (final fallback)"),{container:s,insertAfter:null}):(this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null)}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into AI Studio interface");try{if(document.getElementById("mcp-button-wrapper")||document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.className="button-wrapper",r.id="mcp-button-wrapper";const s=document.createElement("div");s.id="mcp-popover-container",s.style.display="contents",r.appendChild(s);const{container:d,insertAfter:h}=n;h&&h.parentNode===d?(d.insertBefore(r,h.nextSibling),this.context.logger.debug("Inserted MCP button wrapper after specified element")):(d.appendChild(r),this.context.logger.debug("Appended MCP button wrapper to container element")),this.mcpPopoverContainer=s,this.renderMCPPopover(s),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-aistudio-button-base",contentClassName:"mcp-aistudio-button-content",textClassName:"mcp-aistudio-button-text",activeClassName:"active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with AI Studio styling")}).catch(d=>{this.context.logger.error("Failed to load MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to load ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to load React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-button-wrapper")||!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`aistudio-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`AI Studio page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.injectAIStudioButtonStyles(),this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`AI Studio host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("AI Studio adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in AI Studio adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};z(yg,"instanceCount",0);let _x=yg;const Qu=()=>{let f=document.querySelector('textarea.textarea[placeholder="Type something"]');return f?(Rt.debug('Found AiStudio main input with "Type something" placeholder'),f):(f=document.querySelector('textarea.textarea[aria-label="Type something or pick one from prompt gallery"]'),f?(Rt.debug('Found AiStudio main input with "Type something or pick one from prompt gallery" placeholder'),f):(f=document.querySelector('textarea[placeholder="Ask follow-up"]'),f?(Rt.debug('Found AiStudio follow-up input with "Ask follow-up" placeholder'),f):(f=document.querySelector("textarea.textarea[aria-label='Type something or tab to choose an example prompt']"),f?(Rt.debug('Found AiStudio input with "Type something or tab to choose an example prompt" aria-label'),f):(f=document.querySelector("textarea.textarea[aria-label='Start typing a prompt']"),f?(Rt.debug('Found AiStudio input with "Start typing a prompt" aria-label'),f):(f=document.querySelector('textarea[placeholder*="Ask"]'),f?(Rt.debug(`Found AiStudio input with generic "Ask" in placeholder: ${f.placeholder}`),f):(Rt.debug("Could not find any AiStudio chat input textarea"),null))))))},Rk=f=>{try{const l=Qu();if(l){const n=l.value,r=n?`${n}

${f}`:f;l.value=r;const s=new Event("input",{bubbles:!0});return l.dispatchEvent(s),l.focus(),Rt.debug("Appended text to AiStudio chat input"),!0}else return Rt.debug("Could not find AiStudio chat input"),Rt.error("Could not find AiStudio chat input textarea"),!1}catch(l){const n=l instanceof Error?l.message:String(l);return Rt.debug(`Error inserting text into chat input: ${n}`),Rt.error("Error inserting text into chat input:",l),!1}},Ik=async f=>{try{if(navigator.userAgent.toLowerCase().includes("firefox")){Rt.debug("Firefox detected: Using file input method");let n=document.querySelector('input[type="file"]');if(!n){Rt.debug("No file input found, attempting to click Add button to create it");const r=document.querySelector('button[aria-label*="Insert assets"], button[iconname="add_circle"]');r&&(r.click(),Rt.debug("Clicked Add button, waiting for file input to appear"),await new Promise(s=>setTimeout(s,300)),n=document.querySelector('input[type="file"]'))}if(n){const r=new DataTransfer;return r.items.add(f),n.files=r.files,n.dispatchEvent(new Event("change",{bubbles:!0})),Rt.debug(`File attached via input element (Firefox): ${f.name}`),!0}return Rt.debug("Firefox file input method failed: No file input element found"),!1}else{Rt.debug("Chrome/Other browser detected: Using drag-and-drop method");const n=Qu();if(!n)return Rt.debug("Could not find AiStudio input element for file attachment"),!1;const r=new DataTransfer;r.items.add(f);const s=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:r}),d=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:r});n.addEventListener("dragover",h=>h.preventDefault(),{once:!0}),n.dispatchEvent(s),n.dispatchEvent(d);try{await navigator.clipboard.write([new ClipboardItem({[f.type]:f})]),n.focus(),Rt.debug("File copied to clipboard, user can now paste manually if needed")}catch(h){Rt.debug(`Could not copy to clipboard: ${h}`)}return Rt.debug(`Attached file ${f.name} to AiStudio input (Chrome)`),!0}}catch(l){const n=l instanceof Error?l.message:String(l);return Rt.debug(`Error attaching file to AiStudio input: ${n}`),Rt.error("Error attaching file to AiStudio input:",l),!1}},Dk=(f=5e3)=>new Promise(l=>{try{const n=Qu();if(!n){Rt.debug("Could not find chat input to submit"),l(!1);return}const r=()=>{var h,v;return document.querySelector('button[aria-label="Submit"]')||document.querySelector('button[aria-label="Send"]')||document.querySelector('button[type="submit"]')||((h=n.parentElement)==null?void 0:h.querySelector("button"))||((v=document.querySelector('button svg[stroke="currentColor"]'))==null?void 0:v.closest("button"))},s=r();if(s){Rt.debug(`Found submit button (${s.getAttribute("aria-label")||"unknown"})`);const d=()=>{const w=r();if(!w){Rt.debug("Submit button no longer found"),l(!1);return}w.disabled||w.getAttribute("disabled")!==null||w.getAttribute("aria-disabled")==="true"||w.classList.contains("disabled")?Rt.debug("Submit button is disabled, waiting..."):(Rt.debug("Submit button is enabled, clicking it"),w.click(),l(!0))};let h=0;const v=200,S=setInterval(()=>{if(h+=v,d(),h>=f){clearInterval(S),Rt.debug(`Button remained disabled for ${f}ms, trying alternative methods`),Rt.debug("Simulating Enter key press as fallback"),n.focus();const w=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),M=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),N=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});n.dispatchEvent(w),n.dispatchEvent(M),n.dispatchEvent(N);const k=n.closest("form");k&&(Rt.debug("Found form element, submitting it"),k.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),Rt.debug("Attempted all fallback methods to submit chat input"),l(!0)}},v);d(),s&&!s.disabled&&clearInterval(S)}else{Rt.debug("No submit button found, trying alternative methods"),Rt.debug("Simulating Enter key press as fallback"),n.focus();const d=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),h=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),v=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});n.dispatchEvent(d),n.dispatchEvent(h),n.dispatchEvent(v);const S=n.closest("form");S&&(Rt.debug("Found form element, submitting it"),S.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),Rt.debug("Attempted all methods to submit chat input"),l(!0)}}catch(n){const r=n instanceof Error?n.message:String(n);Rt.debug(`Error submitting chat input: ${r}`),Rt.error("Error submitting chat input:",n),l(!1)}}),zk=nt("OpenRouterAdapter"),xg=class xg extends ho{constructor(){super();z(this,"name","OpenRouterAdapter");z(this,"version","2.0.0");z(this,"hostnames",["openrouter.ai"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'textarea[placeholder="Start a new message..."], textarea[placeholder="Start a new message..."].w-full, div[contenteditable="true"]',SUBMIT_BUTTON:'button[data-state="closed"] svg[stroke="currentColor"] path[d*="M4.5 10.5"], button[aria-label="Send message"], button[data-testid="send-button"], button[aria-label="Send prompt"]',FILE_UPLOAD_BUTTON:'button svg[fill="currentColor"] path[fill-rule="evenodd"][d*="M18.97 3.659"], button[aria-label="Attach file"], button[aria-label*="attach"], input[type="file"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".rounded-xl.overflow-hidden.p-2.border.border-slate-4, .chat-container, .main-content, .conversation-container",DROP_ZONE:'.rounded-xl.overflow-hidden.p-2.border.border-slate-4, .rounded-lg.w-full.focus-within\\:bg-accent, textarea[placeholder="Start a new message..."], .chat-input-area, .input-container',FILE_PREVIEW:".duration-200.bg-accent\\/80.flex.w-full.shadow-inner.p-2, .bg-background.relative.h-32.w-48, .group.relative.flex.shrink-0, .file-preview, .attachment-preview, .file-attachment",BUTTON_INSERTION_CONTAINER:".relative.flex.w-full.min-w-0.items-center.gap-1, .flex.gap-1, .input-actions, .chat-input-actions",FALLBACK_INSERTION:".flex.gap-1, .input-area, .chat-input-container, .conversation-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");xg.instanceCount++,this.instanceId=xg.instanceCount,zk.debug(`Instance #${this.instanceId} created. Total instances: ${xg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`OpenRouter adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing OpenRouter adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`OpenRouter adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating OpenRouter adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("OpenRouter adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating OpenRouter adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up OpenRouter adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into OpenRouter chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find OpenRouter chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,h=d.value,v=h?`${h}

${n}`:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0}))}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",h=d?`${d}

${n}`:n;if(d){const v=window.getSelection(),S=document.createRange();S.selectNodeContents(s),S.collapse(!1),v==null||v.removeAllRanges(),v==null||v.addRange(S),document.execCommand("insertText",!1,`

${n}`)}else document.execCommand("insertText",!1,n);s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}else{const d=s.textContent||"",h=d?`${d}

${n}`:n;s.textContent=h,s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}return s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:n},{success:!0,textLength:n.length,elementType:s.tagName}),this.context.logger.debug("Text inserted successfully into OpenRouter chat input"),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into OpenRouter chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var r;this.context.logger.debug("Attempting to submit OpenRouter chat input");try{let s=null;const d=this.selectors.SUBMIT_BUTTON.split(", ");for(const v of d){const S=document.querySelector(v.trim());if(S&&(S.tagName==="svg"||S.tagName==="path"?s=S.closest("button"):s=S,s)){this.context.logger.debug(`Found submit button using selector: ${v.trim()}`);break}}if(!s){const v=document.querySelectorAll("button");for(let S=0;S<v.length;S++){const w=v[S],M=w.querySelector('svg[stroke="currentColor"]');if((M==null?void 0:M.querySelector('path[d*="M4.5 10.5"]'))&&M){s=w,this.context.logger.debug("Found submit button by SVG path structure");break}}}if(s)if(s.disabled||s.getAttribute("aria-disabled")==="true")this.context.logger.warn("OpenRouter submit button is disabled, trying alternative methods");else return s.click(),this.emitExecutionCompleted("submitForm",{formElement:((r=n==null?void 0:n.formElement)==null?void 0:r.tagName)||"unknown"},{success:!0,method:"submitButton.click"}),this.context.logger.debug("OpenRouter chat input submitted successfully via button click"),!0;const h=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0]);if(h){const v=h.closest("form");if(v){const S=new SubmitEvent("submit",{bubbles:!0,cancelable:!0});return v.dispatchEvent(S),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"form.submit"}),this.context.logger.debug("OpenRouter chat input submitted successfully via form submission"),!0}}return h?(h.focus(),[new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0}),new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0}),new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0})].forEach(S=>h.dispatchEvent(S)),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enter-key-simulation"}),this.context.logger.debug("OpenRouter chat input submitted successfully via Enter key simulation"),!0):(this.emitExecutionFailed("submitForm","No submission method available"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error submitting OpenRouter chat input: ${d}`),this.emitExecutionFailed("submitForm",d),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{return!n||n.size===0?(this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1):this.supportsFileUpload()?await this.tryCopyPasteAttachment(n)?!0:(this.emitExecutionFailed("attachFile","All attachment methods failed"),!1):(this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to OpenRouter: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}findAttachmentButton(){var s;const n=document.querySelectorAll("button");for(let d=0;d<n.length;d++){const h=n[d],v=h.querySelector('svg[fill="currentColor"]');if((v==null?void 0:v.querySelector('path[fill-rule="evenodd"][d*="M18.97 3.659"]'))&&v)return this.context.logger.debug("Found attachment button by SVG path structure"),h}const r=['button[aria-label="Attach file"]','button[aria-label*="attach"]','input[type="file"]'];for(const d of r){const h=document.querySelector(d);if(h)if(h.tagName==="INPUT"){const v=h.closest("button")||((s=h.parentElement)==null?void 0:s.querySelector("button"));if(v)return v}else return h}return this.context.logger.debug("No attachment button found"),null}async tryCopyPasteAttachment(n){try{this.context.logger.debug(`Attempting copy-paste attachment for file: ${n.name}`);const r=document.querySelector('textarea[placeholder="Start a new message..."]');return r?(r.focus(),r.click(),await new Promise(S=>setTimeout(S,200)),this.context.logger.debug("Method 1: Direct paste event simulation"),await this.tryDirectPasteEvent(n,r)||(this.context.logger.debug("Method 2: Keyboard shortcut simulation"),await this.tryKeyboardPasteSimulation(n,r))||(this.context.logger.debug("Method 3: Clipboard API approach"),await this.tryClipboardAPIApproach(n,r))||(this.context.logger.debug("Method 4: Firefox-specific input event simulation"),await this.tryFirefoxInputSimulation(n,r))?!0:(this.context.logger.debug("All copy-paste methods failed"),!1)):(this.context.logger.debug("Chat input textarea not found"),!1)}catch(r){return this.context.logger.error("Error in copy-paste attachment:",r),!1}}async tryDirectPasteEvent(n,r){try{const s=new DataTransfer;s.items.add(n);const d=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:s,composed:!0});Object.defineProperty(d,"clipboardData",{value:s,writable:!1,configurable:!0});const h=[r,r.parentElement,r.closest(".rounded-lg.w-full"),r.closest(".rounded-xl.overflow-hidden.p-2.border.border-slate-4"),document.activeElement].filter(Boolean);for(const v of h)if(v&&(this.context.logger.debug(`Dispatching paste event on: ${v.tagName}.${v.className||"no-class"}`),v.dispatchEvent(d),await new Promise(w=>setTimeout(w,200)),await this.checkFilePreview()))return this.context.logger.debug("Direct paste event succeeded"),this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!0,method:"direct-paste-event"}),!0;return!1}catch(s){return this.context.logger.error("Error in direct paste event:",s),!1}}async tryKeyboardPasteSimulation(n,r){try{const s=new DataTransfer;s.items.add(n),window.__mcpClipboardData=s;const d=M=>{const N=new KeyboardEvent(M,{key:"v",code:"KeyV",keyCode:86,which:86,ctrlKey:!0,bubbles:!0,cancelable:!0,composed:!0,view:window});return Object.defineProperty(N,"ctrlKey",{value:!0,writable:!1}),Object.defineProperty(N,"metaKey",{value:!1,writable:!1}),N},h=d("keydown"),v=d("keypress"),S=d("keyup"),w=[r,r.parentElement,document.activeElement,document,window].filter(Boolean);for(const M of w)if(M){this.context.logger.debug(`Trying keyboard simulation on: ${M.constructor.name}`),M.dispatchEvent(h),await new Promise(A=>setTimeout(A,50)),M.dispatchEvent(v),await new Promise(A=>setTimeout(A,50)),M.dispatchEvent(S),await new Promise(A=>setTimeout(A,100));const N=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:s,composed:!0});if(Object.defineProperty(N,"clipboardData",{value:s,writable:!1,configurable:!0}),M.dispatchEvent(N),await new Promise(A=>setTimeout(A,300)),await this.checkFilePreview())return this.context.logger.debug("Keyboard paste simulation succeeded"),delete window.__mcpClipboardData,this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!0,method:"keyboard-paste-simulation"}),!0}return delete window.__mcpClipboardData,!1}catch(s){return this.context.logger.error("Error in keyboard paste simulation:",s),delete window.__mcpClipboardData,!1}}async tryClipboardAPIApproach(n,r){try{if(!navigator.clipboard||!navigator.clipboard.write)return this.context.logger.debug("Clipboard API not available, skipping"),!1;this.context.logger.debug("Using Clipboard API to write file");const s=[n.type,"application/octet-stream","text/plain"];for(const d of s)try{this.context.logger.debug(`Attempting Clipboard API with MIME type: ${d}`);const h=d===n.type?n:new File([n],n.name,{type:d}),v=new ClipboardItem({[d]:h});await navigator.clipboard.write([v]),this.context.logger.debug(`Successfully wrote to clipboard with MIME type: ${d}`),await new Promise(N=>setTimeout(N,300));const S=new DataTransfer;S.items.add(h);const w=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:S,composed:!0});Object.defineProperty(w,"clipboardData",{value:S,writable:!1,configurable:!0});const M=[r,r.parentElement,r.closest(".rounded-xl.overflow-hidden.p-2.border.border-slate-4"),document.activeElement].filter(Boolean);for(const N of M)if(N&&(N.dispatchEvent(w),await new Promise(A=>setTimeout(A,200)),await this.checkFilePreview()))return this.context.logger.debug(`Clipboard API approach succeeded with MIME type: ${d}`),this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!0,method:"clipboard-api"}),!0}catch(h){const v=h instanceof Error?h.message:String(h);this.context.logger.debug(`MIME type ${d} failed:`,v)}return!1}catch(s){return this.context.logger.error("Error in Clipboard API approach:",s),!1}}async tryFirefoxInputSimulation(n,r){try{this.context.logger.debug("Attempting Firefox-specific input simulation");const s=new DataTransfer;s.items.add(n);const d=new InputEvent("input",{bubbles:!0,cancelable:!0,composed:!0,data:null,inputType:"insertFromPaste"});Object.defineProperty(d,"dataTransfer",{value:s,writable:!1,configurable:!0});const h=new InputEvent("beforeinput",{bubbles:!0,cancelable:!0,composed:!0,data:null,inputType:"insertFromPaste"});Object.defineProperty(h,"dataTransfer",{value:s,writable:!1,configurable:!0});const v=[r,r.parentElement,r.closest(".rounded-lg.w-full"),r.closest(".rounded-xl.overflow-hidden.p-2.border.border-slate-4")].filter(Boolean);for(const S of v)if(S){this.context.logger.debug(`Trying Firefox input simulation on: ${S.tagName}.${S.className||"no-class"}`),S.dispatchEvent(h),await new Promise(N=>setTimeout(N,100)),S.dispatchEvent(d),await new Promise(N=>setTimeout(N,200));const w=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:s,composed:!0});if(Object.defineProperty(w,"clipboardData",{value:s,writable:!1,configurable:!0}),S.dispatchEvent(w),await new Promise(N=>setTimeout(N,300)),await this.checkFilePreview())return this.context.logger.debug("Firefox input simulation succeeded"),this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!0,method:"firefox-input-simulation"}),!0}return!1}catch(s){return this.context.logger.error("Error in Firefox input simulation:",s),!1}}isSupported(){const n=window.location.href;this.context.logger.debug(`Checking if OpenRouter adapter supports: ${n}`);const s=[/^https:\/\/openrouter\.ai\/chat.*$/].some(d=>d.test(n));return s?this.context.logger.debug(`OpenRouter adapter supports current page: ${n}`):this.context.logger.debug(`URL pattern not supported: ${n}`),s}supportsFileUpload(){if(this.context.logger.debug("Checking file upload support for OpenRouter"),this.findAttachmentButton())return this.context.logger.debug("Found attachment button - file upload supported"),!0;const r=this.selectors.DROP_ZONE.split(", ");for(const h of r)if(document.querySelector(h.trim()))return this.context.logger.debug(`Found drop zone with selector: ${h.trim()}`),!0;const s=[...this.selectors.FILE_UPLOAD_BUTTON.split(", "),this.selectors.FILE_INPUT];for(const h of s)if(document.querySelector(h.trim()))return this.context.logger.debug(`Found upload element with selector: ${h.trim()}`),!0;return window.location.href.includes("/chat")?(this.context.logger.debug("On chat page - assuming file upload is supported"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for OpenRouter adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for OpenRouter adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&window.location.href.includes("/chat")&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for OpenRouter adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),!window.location.href.includes("/chat")||!this.isSupported()){this.context.logger.debug("Not on a supported chat page, skipping MCP popover injection");return}if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const h=this.findButtonInsertionPoint();h?this.injectMCPPopover(h):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for OpenRouter adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for OpenRouter adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in OpenRouter adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("OpenRouter adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){var s,d;this.context.logger.debug("Finding button insertion point for MCP popover");const n=this.selectors.BUTTON_INSERTION_CONTAINER.split(", ");for(const h of n){const v=document.querySelector(h.trim());if(v){this.context.logger.debug(`Found insertion point: ${h.trim()}`);let S=null;const w=v.querySelectorAll("div.inline-flex.items-center");for(let M=0;M<w.length;M++){const N=w[M];if((s=N.textContent)!=null&&s.includes("Web search")){S=N;break}}return S||(S=((d=v.querySelector('div.inline-flex.items-center svg[stroke="currentColor"] path[d*="M12 21a9.004"]'))==null?void 0:d.closest("div.inline-flex.items-center"))||null),{container:v,insertAfter:S}}}const r=this.selectors.FALLBACK_INSERTION.split(", ");for(const h of r){const v=document.querySelector(h.trim());if(v)return this.context.logger.debug(`Found fallback insertion point: ${h.trim()}`),{container:v,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into OpenRouter interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:h})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{var d;const r=document.querySelector(".rounded-xl.overflow-hidden.p-2.border.border-slate-4");if(r){if(r.querySelector(".duration-200.bg-accent\\/80.flex.w-full.shadow-inner.p-2")){this.context.logger.debug("Found OpenRouter file preview area"),n(!0);return}const v=r.querySelectorAll(".bg-background.relative.h-32.w-48");if(v.length>0){this.context.logger.debug(`Found ${v.length} file attachment(s)`),n(!0);return}const S=r.querySelectorAll(".w-40.truncate.pl-2");for(let M=0;M<S.length;M++){const N=S[M];if(N.textContent&&N.textContent.trim().length>0){this.context.logger.debug(`Found file with name: ${N.textContent.trim()}`),n(!0);return}}const w=r.querySelector("[data-radix-scroll-area-viewport]");if(w&&w.children.length>0){this.context.logger.debug("Found content in scroll area - likely file preview"),n(!0);return}}const s=[this.selectors.FILE_PREVIEW,".file-attachment",".attachment-preview",".file-upload-preview",'[data-testid*="file"]','[data-testid*="attachment"]',".uploaded-file",".file-item",'[class*="file"]','[class*="attachment"]','[class*="upload"]',".group.relative.flex.shrink-0",".bg-background.relative.h-32"];for(const h of s){const v=document.querySelectorAll(h);for(let S=0;S<v.length;S++){const w=v[S];if(w&&w.offsetHeight>0&&w.offsetWidth>0&&((d=w.textContent)!=null&&d.trim()||w.querySelector("img, svg, pre"))){this.context.logger.debug(`File preview found with selector: ${h}`),n(!0);return}}}this.context.logger.debug("No file preview found"),n(!1)},1500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`openrouter-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}onPageChanged(n,r){this.context.logger.debug(`OpenRouter page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`OpenRouter host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("OpenRouter adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in OpenRouter adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}};z(xg,"instanceCount",0);let $x=xg;const Sg=class Sg extends ho{constructor(){super();z(this,"name","T3ChatAdapter");z(this,"version","2.0.0");z(this,"hostnames",["t3.chat"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'textarea#chat-input, textarea[placeholder*="Type your message"], textarea.resize-none, div[contenteditable="true"]',SUBMIT_BUTTON:'button[type="submit"], button[aria-label*="Submit"], button[aria-label*="Send"], button.send-button',FILE_UPLOAD_BUTTON:'button[aria-label="Add files"], button[aria-label*="attach"], input[type="file"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .main-content, .conversation-container",DROP_ZONE:".chat-input-container, .text-input-field, .input-area, textarea#chat-input",FILE_PREVIEW:".file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:'div[aria-label="Message actions"], .message-actions, .chat-input-actions, .-mb-px.mt-2.flex.w-full.flex-row-reverse.justify-between',FALLBACK_INSERTION:".chat-input-container, .input-area, .conversation-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");Sg.instanceCount++,this.instanceId=Sg.instanceCount,console.debug(`[T3ChatAdapter] Instance #${this.instanceId} created. Total instances: ${Sg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`T3Chat adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing T3Chat adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`T3Chat adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating T3Chat adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("T3Chat adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating T3Chat adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up T3Chat adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into T3Chat chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find T3Chat chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,h=d.value,v=h?`${h}

${n}`:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.context.logger.debug("Text inserted into textarea element")}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",h=window.getSelection(),v=document.createRange();v.selectNodeContents(s),v.collapse(!1),h==null||h.removeAllRanges(),h==null||h.addRange(v),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),s.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.context.logger.debug("Text inserted into contenteditable element")}else{const d=s.textContent||"",h=d?d+`

`+n:n;s.textContent=h,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted using fallback method")}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,elementType:s.tagName,method:s.tagName==="TEXTAREA"?"textarea.value":s.getAttribute("contenteditable")==="true"?"execCommand":"textContent"}),this.context.logger.debug("Text inserted successfully into T3Chat"),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into T3Chat chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit T3Chat chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.debug("Submit button not found, trying Enter key simulation"),this.simulateEnterKeyPress();try{if(r.disabled)return this.context.logger.warn("T3Chat submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("T3Chat submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("T3Chat chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting T3Chat chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async simulateEnterKeyPress(){try{const n=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0]);if(!n)return this.context.logger.error("Could not find chat input for Enter key simulation"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key simulation"),!1;const r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return n.dispatchEvent(r),setTimeout(()=>{const s=n.closest("form");s&&s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))},100),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKeySimulation"}),this.context.logger.debug("T3Chat form submitted via Enter key simulation"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error simulating Enter key press: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;const d=document.querySelector(this.selectors.FILE_INPUT);if(!d)return this.context.logger.error("Could not find file input element"),this.emitExecutionFailed("attachFile","File input element not found"),!1;const h=new DataTransfer;h.items.add(n),d.files=h.files;const v=new Event("change",{bubbles:!0});d.dispatchEvent(v);const S=await this.checkFilePreview();return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:S,method:"fileInput.files"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to T3Chat: ${h}`),this.emitExecutionFailed("attachFile",h),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if T3Chat adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by T3Chat adapter`),!1;const h=[/^https?:\/\/(?:www\.)?t3\.chat\/.*/,/^https?:\/\/t3\.chat\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`T3Chat adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for T3Chat");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for T3Chat adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for T3Chat adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for T3Chat adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for T3Chat adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for T3Chat adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in T3Chat adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("T3Chat adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('div[aria-label="Message actions"]');if(n){this.context.logger.debug('Found insertion point: div[aria-label="Message actions"]');const h=n.querySelector('button[type="submit"]');return{container:n,insertAfter:h||null}}const r=document.querySelector(".-mb-px.mt-2.flex.w-full.flex-row-reverse.justify-between");if(r){this.context.logger.debug("Found insertion point: T3Chat flex container");const h=r.querySelector("div");return{container:r,insertAfter:h||null}}const s=[".chat-input-actions",".message-actions",".input-area .actions"];for(const h of s){const v=document.querySelector(h);if(v)return this.context.logger.debug(`Found fallback insertion point: ${h}`),{container:v,insertAfter:null}}const d=document.querySelector("#chat-input");if(d){const h=d.closest("div");if(h)return this.context.logger.debug("Found insertion point: near chat input"),{container:h,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into T3Chat interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:h})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`t3chat-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`T3Chat page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`T3Chat host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("T3Chat adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in T3Chat adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};z(Sg,"instanceCount",0);let jx=Sg;const Vi=nt("MistralAdapter"),wg=class wg extends ho{constructor(){super();z(this,"name","MistralAdapter");z(this,"version","2.0.1");z(this,"hostnames",["chat.mistral.ai"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'textarea[name="message.text"], textarea[placeholder="Ask Le Chat anything"], div.ProseMirror[contenteditable="true"][data-placeholder="Ask Le Chat anything"], div.ProseMirror[contenteditable="true"]',SUBMIT_BUTTON:'button[aria-label="Dictation"], .ms-auto .flex.gap-2 button[type="submit"], button.bg-state-primary',FILE_UPLOAD_BUTTON:'button[data-testid="attach-file-button"], button[aria-label="Add files"]',FILE_INPUT:'input[name="file-upload"], input[type="file"][multiple]',MAIN_PANEL:".relative.flex.w-full.flex-col.px-4.pt-3.pb-4",DROP_ZONE:'div.ProseMirror[contenteditable="true"][data-placeholder="Ask Le Chat anything"], div.ProseMirror[contenteditable="true"], div[data-radix-scroll-area-viewport], .relative.flex.w-full.flex-col.px-4.pt-3.pb-4, textarea[name="message.text"]',FILE_PREVIEW:"div.relative.rounded-md.border.border-default.bg-muted, .file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:".flex.w-full.max-w-full.items-center.justify-start.gap-3, .flex.gap-2.ms-auto",TOOLS_BUTTON:'button[data-testid="tools-selection-button"]',FALLBACK_INSERTION:".relative.flex.w-full.flex-col.px-4.pt-3.pb-4, .chat-input-container"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");wg.instanceCount++,this.instanceId=wg.instanceCount,Vi.debug(`Instance #${this.instanceId} created. Total instances: ${wg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Mistral adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Mistral adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Mistral adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Mistral adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Mistral adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Mistral adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Mistral adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Mistral chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Mistral chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=s.tagName.toLowerCase()==="textarea",h=s.classList.contains("ProseMirror");let v="";if(d?v=s.value||"":h&&(v=s.textContent||""),s.focus(),d){const w=v?v+`
`+n:n;s.value=w,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0}))}else if(h){const w=s.querySelectorAll("p"),M=w.length>1||w.length===1&&w[0].textContent&&w[0].textContent.trim()!=="",N=n.split(`
`);if(M){let A=null;for(let $=w.length-1;$>=0;$--){const B=w[$];if(B.textContent&&B.textContent.trim()!==""){A=B;break}}if(A){const $=A.querySelector("br.ProseMirror-trailingBreak");if($&&$.remove(),N.length>0){A.appendChild(document.createElement("br")),A.appendChild(document.createTextNode(N[0]));for(let B=1;B<N.length;B++){const Z=document.createElement("p");if(N[B].trim()===""){const Y=document.createElement("br");Y.className="ProseMirror-trailingBreak",Z.appendChild(Y)}else Z.textContent=N[B];s.insertBefore(Z,s.lastElementChild)}}}}else{s.innerHTML="",N.forEach(B=>{const Z=document.createElement("p");if(B.trim()===""){const Y=document.createElement("br");Y.className="ProseMirror-trailingBreak",Z.appendChild(Y)}else Z.textContent=B;s.appendChild(Z)});const A=document.createElement("p"),$=document.createElement("br");$.className="ProseMirror-trailingBreak",A.appendChild($),s.appendChild(A)}s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0}));const k=window.getSelection();if(k){k.removeAllRanges();const A=document.createRange();A.selectNodeContents(s),A.collapse(!1),k.addRange(A)}}const S=d?s.value||"":s.textContent||"";return this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:v.length,newLength:n.length,totalLength:S.length,editorType:d?"textarea":h?"ProseMirror":"unknown"}),this.context.logger.debug(`Text inserted successfully into ${d?"textarea":h?"ProseMirror":"unknown"} editor`),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Mistral chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Mistral chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.error("Could not find Mistral submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("Mistral submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("Mistral submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Mistral chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting Mistral chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let d=await this.attachFileDirectly(n);if(d||(d=await this.attachFileViaDragDrop(n)),d){const h=await this.checkFilePreview();return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:h,method:"direct-input"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0}else return this.emitExecutionFailed("attachFile","All attachment methods failed"),!1}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to Mistral: ${h}`),this.emitExecutionFailed("attachFile",h),!1}}async attachFileDirectly(n){try{Vi.debug("[system] Attempting direct file attachment via drag simulation");let r=document.querySelector('div.ProseMirror[contenteditable="true"]');if(r||(r=document.querySelector("div[data-radix-scroll-area-viewport]")),!r)return Vi.warn("[system] Drop zone not found"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragenter",{bubbles:!0,cancelable:!0,dataTransfer:s});r.dispatchEvent(d);const h=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s});r.dispatchEvent(h);const v=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.dispatchEvent(v),Vi.debug(`Direct drag simulation completed on ${r.classList.contains("ProseMirror")?"ProseMirror":"scroll area"} drop zone`),!0}catch(r){return Vi.error("[system] Direct drag simulation failed:",r),!1}}async attachFileViaDragDrop(n){try{if(Vi.debug("[system] Attempting file attachment via drag-drop simulation"),!await this.injectFileDropListener())return Vi.warn("[system] Failed to inject file drop listener"),!1;const s=await this.readFileAsDataURL(n);return window.postMessage({type:"MCP_DROP_FILE",fileName:n.name,fileType:n.type,fileSize:n.size,lastModified:n.lastModified,fileData:s},"*"),Vi.debug("[system] Drag-drop simulation message sent"),!0}catch(r){return Vi.error("[system] Drag-drop simulation failed:",r),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Mistral adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Mistral adapter`),!1;const h=[/^https:\/\/chat\.mistral\.ai\/.*/,/^https:\/\/chat\.mistral\.ai\/chat\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`Mistral adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Mistral");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Mistral adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Mistral adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Mistral adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Mistral adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Mistral adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Mistral adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Mistral adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(this.selectors.TOOLS_BUTTON);if(n&&n.parentElement)return this.context.logger.debug("Found Tools button, placing MCP popover next to it"),{container:n.parentElement,insertAfter:n};const r=document.querySelector('button:has(p:contains("Tools")), button[aria-label*="Tools"], button[title*="Tools"]');if(r&&r.parentElement)return this.context.logger.debug("Found Tools button (alternative selector), placing MCP popover next to it"),{container:r.parentElement,insertAfter:r};const s=document.querySelector(".flex.w-full.max-w-full.items-center.justify-start.gap-3");if(s){this.context.logger.debug("Found button container: .flex.w-full.max-w-full.items-center.justify-start.gap-3");const h=s.querySelectorAll("button"),v=h.length>1?h[1]:h.length>0?h[0]:null;return{container:s,insertAfter:v}}const d=[".input-actions",".chat-actions",".message-actions",".input-area .actions",".chat-input-actions",".conversation-input .actions",".chat-input-container",".input-area"];for(const h of d){const v=document.querySelector(h);if(v)return this.context.logger.debug(`Found fallback insertion point: ${h}`),{container:v,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Mistral interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:h})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async injectFileDropListener(){try{if(!await this.validateDropZone())return Vi.warn("[system] Drop zone validation failed, skipping file drop listener injection"),!1;const r=this.context.chrome.runtime.getURL("dragDropListener.js"),s=document.createElement("script");return s.src=r,await new Promise((d,h)=>{s.onload=()=>d(),s.onerror=()=>h(new Error("Failed to load drop listener script")),(document.head||document.documentElement).appendChild(s)}),s.remove(),Vi.debug("[system] File drop listener injected successfully for Mistral"),!0}catch(n){return this.context.logger.error("Failed to inject file drop listener:",n),!1}}readFileAsDataURL(n){return new Promise((r,s)=>{const d=new FileReader;d.onload=()=>r(d.result),d.onerror=()=>s(d.error),d.readAsDataURL(n)})}async checkFilePreview(){return new Promise(n=>{const r=[500,1e3,1500];let s=0;const d=()=>{var v,S,w,M,N;const h=document.querySelector(this.selectors.FILE_PREVIEW);if(h&&(((v=h.textContent)==null?void 0:v.includes(".md"))||((S=h.textContent)==null?void 0:S.includes(".pdf"))||((w=h.textContent)==null?void 0:w.includes(".txt"))||((M=h.textContent)==null?void 0:M.includes(".doc"))||h.querySelector(".text-sm.leading-6.font-medium"))){Vi.debug(`File preview found after ${r[s]}ms:`,(N=h.textContent)==null?void 0:N.trim()),this.context.logger.debug("File preview element found after attachment"),n(!0);return}s++,s<r.length?setTimeout(d,r[s]):(Vi.warn("[system] File preview element not found after all attempts"),this.context.logger.warn("File preview element not found after attachment"),n(!1))};setTimeout(d,r[0])})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`mistral-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Mistral page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Mistral host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Mistral adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Mistral adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}async validateDropZone(){try{Vi.debug("[system] Validating drop zone availability before injection");const n=this.selectors.DROP_ZONE.split(", ").map(r=>r.trim());for(const r of n)if(document.querySelector(r))return Vi.debug(`Drop zone validated with selector: ${r}`),window.mistralDropZoneSelector=r,!0;return Vi.warn("[system] No drop zone found during validation"),!1}catch(n){return Vi.error("[system] Error validating drop zone:",n),!1}}};z(wg,"instanceCount",0);let Lx=wg;var ay={exports:{}},Gh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function Nk(){if(uE)return Gh;uE=1;var f=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function n(r,s,d){var h=null;if(d!==void 0&&(h=""+d),s.key!==void 0&&(h=""+s.key),"key"in s){d={};for(var v in s)v!=="key"&&(d[v]=s[v])}else d=s;return s=d.ref,{$$typeof:f,type:r,key:h,ref:s!==void 0?s:null,props:d}}return Gh.Fragment=l,Gh.jsx=n,Gh.jsxs=n,Gh}var Vh={},dE;function Uk(){if(dE)return Vh;dE=1;var f={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return f.NODE_ENV!=="production"&&function(){function l(P){if(P==null)return null;if(typeof P=="function")return P.$$typeof===Ue?null:P.displayName||P.name||null;if(typeof P=="string")return P;switch(P){case Z:return"Fragment";case ie:return"Profiler";case Y:return"StrictMode";case J:return"Suspense";case he:return"SuspenseList";case de:return"Activity"}if(typeof P=="object")switch(typeof P.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),P.$$typeof){case B:return"Portal";case oe:return(P.displayName||"Context")+".Provider";case pe:return(P._context.displayName||"Context")+".Consumer";case me:var ge=P.render;return P=P.displayName,P||(P=ge.displayName||ge.name||"",P=P!==""?"ForwardRef("+P+")":"ForwardRef"),P;case ne:return ge=P.displayName||null,ge!==null?ge:l(P.type)||"Memo";case Ce:ge=P._payload,P=P._init;try{return l(P(ge))}catch{}}return null}function n(P){return""+P}function r(P){try{n(P);var ge=!1}catch{ge=!0}if(ge){ge=console;var re=ge.error,Oe=typeof Symbol=="function"&&Symbol.toStringTag&&P[Symbol.toStringTag]||P.constructor.name||"Object";return re.call(ge,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",Oe),n(P)}}function s(P){if(P===Z)return"<>";if(typeof P=="object"&&P!==null&&P.$$typeof===Ce)return"<...>";try{var ge=l(P);return ge?"<"+ge+">":"<...>"}catch{return"<...>"}}function d(){var P=De.A;return P===null?null:P.getOwner()}function h(){return Error("react-stack-top-frame")}function v(P){if(Ze.call(P,"key")){var ge=Object.getOwnPropertyDescriptor(P,"key").get;if(ge&&ge.isReactWarning)return!1}return P.key!==void 0}function S(P,ge){function re(){F||(F=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",ge))}re.isReactWarning=!0,Object.defineProperty(P,"key",{get:re,configurable:!0})}function w(){var P=l(this.type);return q[P]||(q[P]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),P=this.props.ref,P!==void 0?P:null}function M(P,ge,re,Oe,He,ke,Pe,Me){return re=ke.ref,P={$$typeof:$,type:P,key:ge,props:ke,_owner:He},(re!==void 0?re:null)!==null?Object.defineProperty(P,"ref",{enumerable:!1,get:w}):Object.defineProperty(P,"ref",{enumerable:!1,value:null}),P._store={},Object.defineProperty(P._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(P,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(P,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:Pe}),Object.defineProperty(P,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Me}),Object.freeze&&(Object.freeze(P.props),Object.freeze(P)),P}function N(P,ge,re,Oe,He,ke,Pe,Me){var _e=ge.children;if(_e!==void 0)if(Oe)if(Je(_e)){for(Oe=0;Oe<_e.length;Oe++)k(_e[Oe]);Object.freeze&&Object.freeze(_e)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else k(_e);if(Ze.call(ge,"key")){_e=l(P);var at=Object.keys(ge).filter(function(ft){return ft!=="key"});Oe=0<at.length?"{key: someKey, "+at.join(": ..., ")+": ...}":"{key: someKey}",_[_e+Oe]||(at=0<at.length?"{"+at.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Oe,_e,at,_e),_[_e+Oe]=!0)}if(_e=null,re!==void 0&&(r(re),_e=""+re),v(ge)&&(r(ge.key),_e=""+ge.key),"key"in ge){re={};for(var Xe in ge)Xe!=="key"&&(re[Xe]=ge[Xe])}else re=ge;return _e&&S(re,typeof P=="function"?P.displayName||P.name||"Unknown":P),M(P,_e,ke,He,d(),re,Pe,Me)}function k(P){typeof P=="object"&&P!==null&&P.$$typeof===$&&P._store&&(P._store.validated=1)}var A=Qf(),$=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),Ue=Symbol.for("react.client.reference"),De=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze=Object.prototype.hasOwnProperty,Je=Array.isArray,ct=console.createTask?console.createTask:function(){return null};A={"react-stack-bottom-frame":function(P){return P()}};var F,q={},W=A["react-stack-bottom-frame"].bind(A,h)(),Re=ct(s(h)),_={};Vh.Fragment=Z,Vh.jsx=function(P,ge,re,Oe,He){var ke=1e4>De.recentlyCreatedOwnerStacks++;return N(P,ge,re,!1,Oe,He,ke?Error("react-stack-top-frame"):W,ke?ct(s(P)):Re)},Vh.jsxs=function(P,ge,re,Oe,He){var ke=1e4>De.recentlyCreatedOwnerStacks++;return N(P,ge,re,!0,Oe,He,ke?Error("react-stack-top-frame"):W,ke?ct(s(P)):Re)}}(),Vh}var fE;function Pk(){if(fE)return ay.exports;fE=1;var f={};return f.NODE_ENV==="production"?ay.exports=Nk():ay.exports=Uk(),ay.exports}var T=Pk(),oy={exports:{}},Yh={},ry={exports:{}},Bx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function _k(){return gE||(gE=1,function(f){function l(F,q){var W=F.length;F.push(q);e:for(;0<W;){var Re=W-1>>>1,_=F[Re];if(0<s(_,q))F[Re]=q,F[W]=_,W=Re;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],W=F.pop();if(W!==q){F[0]=W;e:for(var Re=0,_=F.length,P=_>>>1;Re<P;){var ge=2*(Re+1)-1,re=F[ge],Oe=ge+1,He=F[Oe];if(0>s(re,W))Oe<_&&0>s(He,re)?(F[Re]=He,F[Oe]=W,Re=Oe):(F[Re]=re,F[ge]=W,Re=ge);else if(Oe<_&&0>s(He,W))F[Re]=He,F[Oe]=W,Re=Oe;else break e}}return q}function s(F,q){var W=F.sortIndex-q.sortIndex;return W!==0?W:F.id-q.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;f.unstable_now=function(){return d.now()}}else{var h=Date,v=h.now();f.unstable_now=function(){return h.now()-v}}var S=[],w=[],M=1,N=null,k=3,A=!1,$=!1,B=!1,Z=!1,Y=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function oe(F){for(var q=n(w);q!==null;){if(q.callback===null)r(w);else if(q.startTime<=F)r(w),q.sortIndex=q.expirationTime,l(S,q);else break;q=n(w)}}function me(F){if(B=!1,oe(F),!$)if(n(S)!==null)$=!0,J||(J=!0,De());else{var q=n(w);q!==null&&ct(me,q.startTime-F)}}var J=!1,he=-1,ne=5,Ce=-1;function de(){return Z?!0:!(f.unstable_now()-Ce<ne)}function Ue(){if(Z=!1,J){var F=f.unstable_now();Ce=F;var q=!0;try{e:{$=!1,B&&(B=!1,ie(he),he=-1),A=!0;var W=k;try{t:{for(oe(F),N=n(S);N!==null&&!(N.expirationTime>F&&de());){var Re=N.callback;if(typeof Re=="function"){N.callback=null,k=N.priorityLevel;var _=Re(N.expirationTime<=F);if(F=f.unstable_now(),typeof _=="function"){N.callback=_,oe(F),q=!0;break t}N===n(S)&&r(S),oe(F)}else r(S);N=n(S)}if(N!==null)q=!0;else{var P=n(w);P!==null&&ct(me,P.startTime-F),q=!1}}break e}finally{N=null,k=W,A=!1}q=void 0}}finally{q?De():J=!1}}}var De;if(typeof pe=="function")De=function(){pe(Ue)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Je=Ze.port2;Ze.port1.onmessage=Ue,De=function(){Je.postMessage(null)}}else De=function(){Y(Ue,0)};function ct(F,q){he=Y(function(){F(f.unstable_now())},q)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(F){F.callback=null},f.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<F?Math.floor(1e3/F):5},f.unstable_getCurrentPriorityLevel=function(){return k},f.unstable_next=function(F){switch(k){case 1:case 2:case 3:var q=3;break;default:q=k}var W=k;k=q;try{return F()}finally{k=W}},f.unstable_requestPaint=function(){Z=!0},f.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=k;k=F;try{return q()}finally{k=W}},f.unstable_scheduleCallback=function(F,q,W){var Re=f.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Re+W:Re):W=Re,F){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=W+_,F={id:M++,callback:q,priorityLevel:F,startTime:W,expirationTime:_,sortIndex:-1},W>Re?(F.sortIndex=W,l(w,F),n(S)===null&&F===n(w)&&(B?(ie(he),he=-1):B=!0,ct(me,W-Re))):(F.sortIndex=_,l(S,F),$||A||($=!0,J||(J=!0,De()))),F},f.unstable_shouldYield=de,f.unstable_wrapCallback=function(F){var q=k;return function(){var W=k;k=q;try{return F.apply(this,arguments)}finally{k=W}}}}(Bx)),Bx}var Hx={},pE;function $k(){return pE||(pE=1,function(f){var l={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */l.NODE_ENV!=="production"&&function(){function n(){if(J=!1,de){var q=f.unstable_now();Ze=q;var W=!0;try{e:{oe=!1,me&&(me=!1,ne(Ue),Ue=-1),pe=!0;var Re=ie;try{t:{for(v(q),Y=s($);Y!==null&&!(Y.expirationTime>q&&w());){var _=Y.callback;if(typeof _=="function"){Y.callback=null,ie=Y.priorityLevel;var P=_(Y.expirationTime<=q);if(q=f.unstable_now(),typeof P=="function"){Y.callback=P,v(q),W=!0;break t}Y===s($)&&d($),v(q)}else d($);Y=s($)}if(Y!==null)W=!0;else{var ge=s(B);ge!==null&&M(S,ge.startTime-q),W=!1}}break e}finally{Y=null,ie=Re,pe=!1}W=void 0}}finally{W?Je():de=!1}}}function r(q,W){var Re=q.length;q.push(W);e:for(;0<Re;){var _=Re-1>>>1,P=q[_];if(0<h(P,W))q[_]=W,q[Re]=P,Re=_;else break e}}function s(q){return q.length===0?null:q[0]}function d(q){if(q.length===0)return null;var W=q[0],Re=q.pop();if(Re!==W){q[0]=Re;e:for(var _=0,P=q.length,ge=P>>>1;_<ge;){var re=2*(_+1)-1,Oe=q[re],He=re+1,ke=q[He];if(0>h(Oe,Re))He<P&&0>h(ke,Oe)?(q[_]=ke,q[He]=Re,_=He):(q[_]=Oe,q[re]=Re,_=re);else if(He<P&&0>h(ke,Re))q[_]=ke,q[He]=Re,_=He;else break e}}return W}function h(q,W){var Re=q.sortIndex-W.sortIndex;return Re!==0?Re:q.id-W.id}function v(q){for(var W=s(B);W!==null;){if(W.callback===null)d(B);else if(W.startTime<=q)d(B),W.sortIndex=W.expirationTime,r($,W);else break;W=s(B)}}function S(q){if(me=!1,v(q),!oe)if(s($)!==null)oe=!0,de||(de=!0,Je());else{var W=s(B);W!==null&&M(S,W.startTime-q)}}function w(){return J?!0:!(f.unstable_now()-Ze<De)}function M(q,W){Ue=he(function(){q(f.unstable_now())},W)}if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error()),f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var N=performance;f.unstable_now=function(){return N.now()}}else{var k=Date,A=k.now();f.unstable_now=function(){return k.now()-A}}var $=[],B=[],Z=1,Y=null,ie=3,pe=!1,oe=!1,me=!1,J=!1,he=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Ce=typeof setImmediate<"u"?setImmediate:null,de=!1,Ue=-1,De=5,Ze=-1;if(typeof Ce=="function")var Je=function(){Ce(n)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,F=ct.port2;ct.port1.onmessage=n,Je=function(){F.postMessage(null)}}else Je=function(){he(n,0)};f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(q){q.callback=null},f.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<q?Math.floor(1e3/q):5},f.unstable_getCurrentPriorityLevel=function(){return ie},f.unstable_next=function(q){switch(ie){case 1:case 2:case 3:var W=3;break;default:W=ie}var Re=ie;ie=W;try{return q()}finally{ie=Re}},f.unstable_requestPaint=function(){J=!0},f.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Re=ie;ie=q;try{return W()}finally{ie=Re}},f.unstable_scheduleCallback=function(q,W,Re){var _=f.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?_+Re:_):Re=_,q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Re+P,q={id:Z++,callback:W,priorityLevel:q,startTime:Re,expirationTime:P,sortIndex:-1},Re>_?(q.sortIndex=Re,r(B,q),s($)===null&&q===s(B)&&(me?(ne(Ue),Ue=-1):me=!0,M(S,Re-_))):(q.sortIndex=P,r($,q),oe||pe||(oe=!0,de||(de=!0,Je()))),q},f.unstable_shouldYield=w,f.unstable_wrapCallback=function(q){var W=ie;return function(){var Re=ie;ie=W;try{return q.apply(this,arguments)}finally{ie=Re}}},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()}(Hx)),Hx}var hE;function mE(){if(hE)return ry.exports;hE=1;var f={};return f.NODE_ENV==="production"?ry.exports=_k():ry.exports=$k(),ry.exports}var sy={exports:{}},aa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function jk(){if(bE)return aa;bE=1;var f=Qf();function l(S){var w="https://react.dev/errors/"+S;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)w+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+S+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(l(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function d(S,w,M){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:N==null?null:""+N,children:S,containerInfo:w,implementation:M}}var h=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(S,w){if(S==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,aa.createPortal=function(S,w){var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(l(299));return d(S,w,null,M)},aa.flushSync=function(S){var w=h.T,M=r.p;try{if(h.T=null,r.p=2,S)return S()}finally{h.T=w,r.p=M,r.d.f()}},aa.preconnect=function(S,w){typeof S=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,r.d.C(S,w))},aa.prefetchDNS=function(S){typeof S=="string"&&r.d.D(S)},aa.preinit=function(S,w){if(typeof S=="string"&&w&&typeof w.as=="string"){var M=w.as,N=v(M,w.crossOrigin),k=typeof w.integrity=="string"?w.integrity:void 0,A=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;M==="style"?r.d.S(S,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:N,integrity:k,fetchPriority:A}):M==="script"&&r.d.X(S,{crossOrigin:N,integrity:k,fetchPriority:A,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},aa.preinitModule=function(S,w){if(typeof S=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var M=v(w.as,w.crossOrigin);r.d.M(S,{crossOrigin:M,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&r.d.M(S)},aa.preload=function(S,w){if(typeof S=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var M=w.as,N=v(M,w.crossOrigin);r.d.L(S,M,{crossOrigin:N,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},aa.preloadModule=function(S,w){if(typeof S=="string")if(w){var M=v(w.as,w.crossOrigin);r.d.m(S,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:M,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else r.d.m(S)},aa.requestFormReset=function(S){r.d.r(S)},aa.unstable_batchedUpdates=function(S,w){return S(w)},aa.useFormState=function(S,w,M){return h.H.useFormState(S,w,M)},aa.useFormStatus=function(){return h.H.useHostTransitionStatus()},aa.version="19.1.0",aa}var oa={},vE;function Lk(){if(vE)return oa;vE=1;var f={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return f.NODE_ENV!=="production"&&function(){function l(){}function n(k){return""+k}function r(k,A,$){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;try{n(B);var Z=!1}catch{Z=!0}return Z&&(console.error("The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",typeof Symbol=="function"&&Symbol.toStringTag&&B[Symbol.toStringTag]||B.constructor.name||"Object"),n(B)),{$$typeof:M,key:B==null?null:""+B,children:k,containerInfo:A,implementation:$}}function s(k,A){if(k==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}function d(k){return k===null?"`null`":k===void 0?"`undefined`":k===""?"an empty string":'something with type "'+typeof k+'"'}function h(k){return k===null?"`null`":k===void 0?"`undefined`":k===""?"an empty string":typeof k=="string"?JSON.stringify(k):typeof k=="number"?"`"+k+"`":'something with type "'+typeof k+'"'}function v(){var k=N.H;return k===null&&console.error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`),k}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var S=Qf(),w={d:{f:l,r:function(){throw Error("Invalid form element. requestFormReset must be passed a form that was rendered by React.")},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},M=Symbol.for("react.portal"),N=S.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;typeof Map=="function"&&Map.prototype!=null&&typeof Map.prototype.forEach=="function"&&typeof Set=="function"&&Set.prototype!=null&&typeof Set.prototype.clear=="function"&&typeof Set.prototype.forEach=="function"||console.error("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),oa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,oa.createPortal=function(k,A){var $=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error("Target container is not a DOM element.");return r(k,A,null,$)},oa.flushSync=function(k){var A=N.T,$=w.p;try{if(N.T=null,w.p=2,k)return k()}finally{N.T=A,w.p=$,w.d.f()&&console.error("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task.")}},oa.preconnect=function(k,A){typeof k=="string"&&k?A!=null&&typeof A!="object"?console.error("ReactDOM.preconnect(): Expected the `options` argument (second) to be an object but encountered %s instead. The only supported option at this time is `crossOrigin` which accepts a string.",h(A)):A!=null&&typeof A.crossOrigin!="string"&&console.error("ReactDOM.preconnect(): Expected the `crossOrigin` option (second argument) to be a string but encountered %s instead. Try removing this option or passing a string value instead.",d(A.crossOrigin)):console.error("ReactDOM.preconnect(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",d(k)),typeof k=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,w.d.C(k,A))},oa.prefetchDNS=function(k){if(typeof k!="string"||!k)console.error("ReactDOM.prefetchDNS(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",d(k));else if(1<arguments.length){var A=arguments[1];typeof A=="object"&&A.hasOwnProperty("crossOrigin")?console.error("ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. It looks like the you are attempting to set a crossOrigin property for this DNS lookup hint. Browsers do not perform DNS queries using CORS and setting this attribute on the resource hint has no effect. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.",h(A)):console.error("ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.",h(A))}typeof k=="string"&&w.d.D(k)},oa.preinit=function(k,A){if(typeof k=="string"&&k?A==null||typeof A!="object"?console.error("ReactDOM.preinit(): Expected the `options` argument (second) to be an object with an `as` property describing the type of resource to be preinitialized but encountered %s instead.",h(A)):A.as!=="style"&&A.as!=="script"&&console.error('ReactDOM.preinit(): Expected the `as` property in the `options` argument (second) to contain a valid value describing the type of resource to be preinitialized but encountered %s instead. Valid values for `as` are "style" and "script".',h(A.as)):console.error("ReactDOM.preinit(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",d(k)),typeof k=="string"&&A&&typeof A.as=="string"){var $=A.as,B=s($,A.crossOrigin),Z=typeof A.integrity=="string"?A.integrity:void 0,Y=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;$==="style"?w.d.S(k,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:B,integrity:Z,fetchPriority:Y}):$==="script"&&w.d.X(k,{crossOrigin:B,integrity:Z,fetchPriority:Y,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},oa.preinitModule=function(k,A){var $="";if(typeof k=="string"&&k||($+=" The `href` argument encountered was "+d(k)+"."),A!==void 0&&typeof A!="object"?$+=" The `options` argument encountered was "+d(A)+".":A&&"as"in A&&A.as!=="script"&&($+=" The `as` option encountered was "+h(A.as)+"."),$)console.error("ReactDOM.preinitModule(): Expected up to two arguments, a non-empty `href` string and, optionally, an `options` object with a valid `as` property.%s",$);else switch($=A&&typeof A.as=="string"?A.as:"script",$){case"script":break;default:$=h($),console.error('ReactDOM.preinitModule(): Currently the only supported "as" type for this function is "script" but received "%s" instead. This warning was generated for `href` "%s". In the future other module types will be supported, aligning with the import-attributes proposal. Learn more here: (https://github.com/tc39/proposal-import-attributes)',$,k)}typeof k=="string"&&(typeof A=="object"&&A!==null?(A.as==null||A.as==="script")&&($=s(A.as,A.crossOrigin),w.d.M(k,{crossOrigin:$,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})):A==null&&w.d.M(k))},oa.preload=function(k,A){var $="";if(typeof k=="string"&&k||($+=" The `href` argument encountered was "+d(k)+"."),A==null||typeof A!="object"?$+=" The `options` argument encountered was "+d(A)+".":typeof A.as=="string"&&A.as||($+=" The `as` option encountered was "+d(A.as)+"."),$&&console.error('ReactDOM.preload(): Expected two arguments, a non-empty `href` string and an `options` object with an `as` property valid for a `<link rel="preload" as="..." />` tag.%s',$),typeof k=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){$=A.as;var B=s($,A.crossOrigin);w.d.L(k,$,{crossOrigin:B,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},oa.preloadModule=function(k,A){var $="";typeof k=="string"&&k||($+=" The `href` argument encountered was "+d(k)+"."),A!==void 0&&typeof A!="object"?$+=" The `options` argument encountered was "+d(A)+".":A&&"as"in A&&typeof A.as!="string"&&($+=" The `as` option encountered was "+d(A.as)+"."),$&&console.error('ReactDOM.preloadModule(): Expected two arguments, a non-empty `href` string and, optionally, an `options` object with an `as` property valid for a `<link rel="modulepreload" as="..." />` tag.%s',$),typeof k=="string"&&(A?($=s(A.as,A.crossOrigin),w.d.m(k,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:$,integrity:typeof A.integrity=="string"?A.integrity:void 0})):w.d.m(k))},oa.requestFormReset=function(k){w.d.r(k)},oa.unstable_batchedUpdates=function(k,A){return k(A)},oa.useFormState=function(k,A,$){return v().useFormState(k,A,$)},oa.useFormStatus=function(){return v().useHostTransitionStatus()},oa.version="19.1.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}(),oa}var yE;function Fx(){if(yE)return sy.exports;yE=1;var f={};function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(f.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}}return f.NODE_ENV==="production"?(l(),sy.exports=jk()):sy.exports=Lk(),sy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function Bk(){if(xE)return Yh;xE=1;var f=mE(),l=Qf(),n=Fx();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function d(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function h(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function v(i){if(d(i)!==i)throw Error(r(188))}function S(i){var o=i.alternate;if(!o){if(o=d(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,g=o;;){var b=c.return;if(b===null)break;var y=b.alternate;if(y===null){if(g=b.return,g!==null){c=g;continue}break}if(b.child===y.child){for(y=b.child;y;){if(y===c)return v(b),i;if(y===g)return v(b),o;y=y.sibling}throw Error(r(188))}if(c.return!==g.return)c=b,g=y;else{for(var C=!1,O=b.child;O;){if(O===c){C=!0,c=b,g=y;break}if(O===g){C=!0,g=b,c=y;break}O=O.sibling}if(!C){for(O=y.child;O;){if(O===c){C=!0,c=y,g=b;break}if(O===g){C=!0,g=y,c=b;break}O=O.sibling}if(!C)throw Error(r(189))}}if(c.alternate!==g)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function w(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=w(i),o!==null)return o;i=i.sibling}return null}var M=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function De(i){return i===null||typeof i!="object"?null:(i=Ue&&i[Ue]||i["@@iterator"],typeof i=="function"?i:null)}var Ze=Symbol.for("react.client.reference");function Je(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Ze?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case $:return"Fragment";case Z:return"Profiler";case B:return"StrictMode";case me:return"Suspense";case J:return"SuspenseList";case Ce:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case pe:return(i.displayName||"Context")+".Provider";case ie:return(i._context.displayName||"Context")+".Consumer";case oe:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case he:return o=i.displayName||null,o!==null?o:Je(i.type)||"Memo";case ne:o=i._payload,i=i._init;try{return Je(i(o))}catch{}}return null}var ct=Array.isArray,F=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Re=[],_=-1;function P(i){return{current:i}}function ge(i){0>_||(i.current=Re[_],Re[_]=null,_--)}function re(i,o){_++,Re[_]=i.current,i.current=o}var Oe=P(null),He=P(null),ke=P(null),Pe=P(null);function Me(i,o){switch(re(ke,o),re(He,i),re(Oe,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?ar(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=ar(o),i=Wr(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ge(Oe),re(Oe,i)}function _e(){ge(Oe),ge(He),ge(ke)}function at(i){i.memoizedState!==null&&re(Pe,i);var o=Oe.current,c=Wr(o,i.type);o!==c&&(re(He,i),re(Oe,c))}function Xe(i){He.current===i&&(ge(Oe),ge(He)),Pe.current===i&&(ge(Pe),Ii._currentValue=W)}var ft=Object.prototype.hasOwnProperty,yt=f.unstable_scheduleCallback,nn=f.unstable_cancelCallback,Ei=f.unstable_shouldYield,Un=f.unstable_requestPaint,Tt=f.unstable_now,En=f.unstable_getCurrentPriorityLevel,Ne=f.unstable_ImmediatePriority,Gt=f.unstable_UserBlockingPriority,Ae=f.unstable_NormalPriority,st=f.unstable_LowPriority,kt=f.unstable_IdlePriority,Be=f.log,it=f.unstable_setDisableYieldValue,$e=null,ut=null;function Pn(i){if(typeof Be=="function"&&it(i),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode($e,i)}catch{}}var Vn=Math.clz32?Math.clz32:ml,hl=Math.log,Cn=Math.LN2;function ml(i){return i>>>=0,i===0?32:31-(hl(i)/Cn|0)|0}var kr=256,yo=4194304;function Ci(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function sa(i,o,c){var g=i.pendingLanes;if(g===0)return 0;var b=0,y=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var O=g&134217727;return O!==0?(g=O&~y,g!==0?b=Ci(g):(C&=O,C!==0?b=Ci(C):c||(c=O&~i,c!==0&&(b=Ci(c))))):(O=g&~y,O!==0?b=Ci(O):C!==0?b=Ci(C):c||(c=g&~i,c!==0&&(b=Ci(c)))),b===0?0:o!==0&&o!==b&&!(o&y)&&(y=b&-b,c=o&-o,y>=c||y===32&&(c&4194048)!==0)?o:b}function Za(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function I(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X(){var i=kr;return kr<<=1,!(kr&4194048)&&(kr=256),i}function ze(){var i=yo;return yo<<=1,!(yo&62914560)&&(yo=4194304),i}function je(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Ve(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Pt(i,o,c,g,b,y){var C=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var O=i.entanglements,j=i.expirationTimes,ee=i.hiddenUpdates;for(c=C&~c;0<c;){var we=31-Vn(c),Te=1<<we;O[we]=0,j[we]=-1;var ae=ee[we];if(ae!==null)for(ee[we]=null,we=0;we<ae.length;we++){var fe=ae[we];fe!==null&&(fe.lane&=-536870913)}c&=~Te}g!==0&&Et(i,g,0),y!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=y&~(C&~o))}function Et(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var g=31-Vn(o);i.entangledLanes|=o,i.entanglements[g]=i.entanglements[g]|1073741824|c&4194090}function Yt(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var g=31-Vn(c),b=1<<g;b&o|i[g]&o&&(i[g]|=o),c&=~b}}function xt(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Jn(i){return i&=-i,2<i?8<i?i&134217727?32:268435456:8:2}function Zo(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:F0(i.type))}function om(i,o){var c=q.p;try{return q.p=i,o()}finally{q.p=c}}var Xo=Math.random().toString(36).slice(2),vn="__reactFiber$"+Xo,_i="__reactProps$"+Xo,bl="__reactContainer$"+Xo,rm="__reactEvents$"+Xo,$y="__reactListeners$"+Xo,jy="__reactHandles$"+Xo,dd="__reactResources$"+Xo,fd="__reactMarker$"+Xo;function tt(i){delete i[vn],delete i[_i],delete i[rm],delete i[$y],delete i[jy]}function ys(i){var o=i[vn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[bl]||c[vn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=ec(i);i!==null;){if(c=i[vn])return c;i=ec(i)}return o}i=c,c=i.parentNode}return null}function Ti(i){if(i=i[vn]||i[bl]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Tc(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function kc(i){var o=i[dd];return o||(o=i[dd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Yn(i){i[fd]=!0}var sm=new Set,gd={};function di(i,o){vl(i,o),vl(i+"Capture",o)}function vl(i,o){for(gd[i]=o,i=0;i<o.length;i++)sm.add(o[i])}var lm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cm={},Mg={};function Ly(i){return ft.call(Mg,i)?!0:ft.call(cm,i)?!1:lm.test(i)?Mg[i]=!0:(cm[i]=!0,!1)}function pd(i,o,c){if(Ly(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var g=o.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Mr(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Qo(i,o,c,g){if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+g)}}var Ag,um;function yl(i){if(Ag===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Ag=o&&o[1]||"",um=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ag+i+um}var Og=!1;function Xi(i,o){if(!i||Og)return"";Og=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(o){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(fe){var ae=fe}Reflect.construct(i,[],Te)}else{try{Te.call()}catch(fe){ae=fe}i.call(Te.prototype)}}else{try{throw Error()}catch(fe){ae=fe}(Te=i())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(fe){if(fe&&ae&&typeof fe.stack=="string")return[fe.stack,ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=g.DetermineComponentFrameRoot(),C=y[0],O=y[1];if(C&&O){var j=C.split(`
`),ee=O.split(`
`);for(b=g=0;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ee.length&&!ee[b].includes("DetermineComponentFrameRoot");)b++;if(g===j.length||b===ee.length)for(g=j.length-1,b=ee.length-1;1<=g&&0<=b&&j[g]!==ee[b];)b--;for(;1<=g&&0<=b;g--,b--)if(j[g]!==ee[b]){if(g!==1||b!==1)do if(g--,b--,0>b||j[g]!==ee[b]){var we=`
`+j[g].replace(" at new "," at ");return i.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",i.displayName)),we}while(1<=g&&0<=b);break}}}finally{Og=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?yl(c):""}function Mc(i){switch(i.tag){case 26:case 27:case 5:return yl(i.type);case 16:return yl("Lazy");case 13:return yl("Suspense");case 19:return yl("SuspenseList");case 0:case 15:return Xi(i.type,!1);case 11:return Xi(i.type.render,!1);case 1:return Xi(i.type,!0);case 31:return yl("Activity");default:return""}}function xs(i){try{var o="";do o+=Mc(i),i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Oa(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ac(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rg(i){var o=Ac(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,y=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(C){g=""+C,y.call(this,C)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(C){g=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Oc(i){i._valueTracker||(i._valueTracker=Rg(i))}function Rc(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),g="";return i&&(g=Ac(i)?i.checked?"true":"false":i.value),i=g,i!==c?(o.setValue(i),!0):!1}function Ar(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var dm=/[\n"\\]/g;function Xa(i){return i.replace(dm,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fm(i,o,c,g,b,y,C,O){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Oa(o)):i.value!==""+Oa(o)&&(i.value=""+Oa(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?hd(i,C,Oa(o)):c!=null?hd(i,C,Oa(c)):g!=null&&i.removeAttribute("value"),b==null&&y!=null&&(i.defaultChecked=!!y),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+Oa(O):i.removeAttribute("name")}function gm(i,o,c,g,b,y,C,O){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;c=c!=null?""+Oa(c):"",o=o!=null?""+Oa(o):c,O||o===i.value||(i.value=o),i.defaultValue=o}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=O?i.checked:!!g,i.defaultChecked=!!g,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C)}function hd(i,o,c){o==="number"&&Ar(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Ss(i,o,c,g){if(i=i.options,o){o={};for(var b=0;b<c.length;b++)o["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=o.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&g&&(i[c].defaultSelected=!0)}else{for(c=""+Oa(c),o=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,g&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function pm(i,o,c){if(o!=null&&(o=""+Oa(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Oa(c):""}function hm(i,o,c,g){if(o==null){if(g!=null){if(c!=null)throw Error(r(92));if(ct(g)){if(1<g.length)throw Error(r(93));g=g[0]}c=g}c==null&&(c=""),o=c}c=Oa(o),i.defaultValue=c,g=i.textContent,g===c&&g!==""&&g!==null&&(i.value=g)}function xl(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var IS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mm(i,o,c){var g=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":g?i.setProperty(o,c):typeof c!="number"||c===0||IS.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function Ig(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||o!=null&&o.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var b in o)g=o[b],o.hasOwnProperty(b)&&c[b]!==g&&mm(i,b,g)}else for(var y in o)o.hasOwnProperty(y)&&mm(i,y,o[y])}function Ic(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bd(i){return DS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Dg=null;function Sl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var wl=null,Dc=null;function By(i){var o=Ti(i);if(o&&(i=o.stateNode)){var c=i[_i]||null;e:switch(i=o.stateNode,o.type){case"input":if(fm(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Xa(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var g=c[o];if(g!==i&&g.form===i.form){var b=g[_i]||null;if(!b)throw Error(r(90));fm(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<c.length;o++)g=c[o],g.form===i.form&&Rc(g)}break e;case"textarea":pm(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Ss(i,!!c.multiple,o,!1)}}}var bm=!1;function Hy(i,o,c){if(bm)return i(o,c);bm=!0;try{var g=i(o);return g}finally{if(bm=!1,(wl!==null||Dc!==null)&&(cf(),wl&&(o=wl,i=Dc,Dc=wl=null,By(o),i)))for(o=0;o<i.length;o++)By(i[o])}}function Or(i,o){var c=i.stateNode;if(c===null)return null;var g=c[_i]||null;if(g===null)return null;c=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zg=!1;if(xo)try{var zc={};Object.defineProperty(zc,"passive",{get:function(){zg=!0}}),window.addEventListener("test",zc,zc),window.removeEventListener("test",zc,zc)}catch{zg=!1}var Qa=null,Ng=null,El=null;function vd(){if(El)return El;var i,o=Ng,c=o.length,g,b="value"in Qa?Qa.value:Qa.textContent,y=b.length;for(i=0;i<c&&o[i]===b[i];i++);var C=c-i;for(g=1;g<=C&&o[c-g]===b[y-g];g++);return El=b.slice(i,1<g?1-g:void 0)}function yd(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ki(){return!0}function Fy(){return!1}function $i(i){function o(c,g,b,y,C){this._reactName=c,this._targetInst=b,this.type=g,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(c=i[O],this[O]=c?c(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ki:Fy,this.isPropagationStopped=Fy,this}return M(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),o}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xd=$i(ws),Sd=M({},ws,{view:0,detail:0}),zS=$i(Sd),Ug,vm,Nc,Pg=M({},Sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_g,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Nc&&(Nc&&i.type==="mousemove"?(Ug=i.screenX-Nc.screenX,vm=i.screenY-Nc.screenY):vm=Ug=0,Nc=i),Ug)},movementY:function(i){return"movementY"in i?i.movementY:vm}}),wd=$i(Pg),qy=M({},Pg,{dataTransfer:0}),Gy=$i(qy),Vy=M({},Sd,{relatedTarget:0}),ym=$i(Vy),NS=M({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),US=$i(NS),PS=M({},ws,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_S=$i(PS),Ed=M({},ws,{data:0}),xm=$i(Ed),Yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sm(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Xy[i])?!!o[i]:!1}function _g(){return Sm}var Cl=M({},Sd,{key:function(i){if(i.key){var o=Yy[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=yd(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Zy[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_g,charCode:function(i){return i.type==="keypress"?yd(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yd(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Tl=$i(Cl),So=M({},Pg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),la=$i(So),$g=M({},Sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_g}),jg=$i($g),wm=M({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),ca=$i(wm),Qy=M({},Pg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Lg=$i(Qy),kl=M({},ws,{newState:0,oldState:0}),Em=$i(kl),Ky=[9,13,27,32],Bg=xo&&"CompositionEvent"in window,Ml=null;xo&&"documentMode"in document&&(Ml=document.documentMode);var $S=xo&&"TextEvent"in window&&!Ml,Hg=xo&&(!Bg||Ml&&8<Ml&&11>=Ml),Ko=" ",Cm=!1;function Fg(i,o){switch(i){case"keyup":return Ky.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ka=!1;function Tm(i,o){switch(i){case"compositionend":return Cd(o);case"keypress":return o.which!==32?null:(Cm=!0,Ko);case"textInput":return i=o.data,i===Ko&&Cm?null:i;default:return null}}function km(i,o){if(Ka)return i==="compositionend"||!Bg&&Fg(i,o)?(i=vd(),El=Ng=Qa=null,Ka=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Hg&&o.locale!=="ko"?null:o.data;default:return null}}var Al={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Al[i.type]:o==="textarea"}function qg(i,o,c,g){wl?Dc?Dc.push(g):Dc=[g]:wl=g,o=Qs(o,"onChange"),0<o.length&&(c=new xd("onChange","change",null,c,g),i.push({event:c,listeners:o}))}var Ol=null,wo=null;function Rl(i){Jr(i,0)}function Uc(i){var o=Tc(i);if(Rc(o))return i}function Es(i,o){if(i==="change")return o}var Am=!1;if(xo){var Gg;if(xo){var Il="oninput"in document;if(!Il){var Pc=document.createElement("div");Pc.setAttribute("oninput","return;"),Il=typeof Pc.oninput=="function"}Gg=Il}else Gg=!1;Am=Gg&&(!document.documentMode||9<document.documentMode)}function Om(){Ol&&(Ol.detachEvent("onpropertychange",_c),wo=Ol=null)}function _c(i){if(i.propertyName==="value"&&Uc(wo)){var o=[];qg(o,wo,i,Sl(i)),Hy(Rl,o)}}function Jy(i,o,c){i==="focusin"?(Om(),Ol=o,wo=c,Ol.attachEvent("onpropertychange",_c)):i==="focusout"&&Om()}function Vg(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Uc(wo)}function Cs(i,o){if(i==="click")return Uc(o)}function Rr(i,o){if(i==="input"||i==="change")return Uc(o)}function Rm(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Qi=typeof Object.is=="function"?Object.is:Rm;function Ir(i,o){if(Qi(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),g=Object.keys(o);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var b=c[g];if(!ft.call(o,b)||!Qi(i[b],o[b]))return!1}return!0}function Td(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ts(i,o){var c=Td(i);i=0;for(var g;c;){if(c.nodeType===3){if(g=i+c.textContent.length,i<=o&&g>=o)return{node:c,offset:o-i};i=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Td(c)}}function Tn(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Tn(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function kd(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ar(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Ar(i.document)}return o}function Yg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Im=xo&&"documentMode"in document&&11>=document.documentMode,Ja=null,Dl=null,Ra=null,$c=!1;function jc(i,o,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$c||Ja==null||Ja!==Ar(g)||(g=Ja,"selectionStart"in g&&Yg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ra&&Ir(Ra,g)||(Ra=g,g=Qs(Dl,"onSelect"),0<g.length&&(o=new xd("onSelect","select",null,o,c),i.push({event:o,listeners:g}),o.target=Ja)))}function Dr(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ks={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},Zg={},Eo={};xo&&(Eo=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function ji(i){if(Zg[i])return Zg[i];if(!ks[i])return i;var o=ks[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Eo)return Zg[i]=o[c];return i}var Md=ji("animationend"),Wy=ji("animationiteration"),Dm=ji("animationstart"),jS=ji("transitionrun"),zm=ji("transitionstart"),Xg=ji("transitioncancel"),Nm=ji("transitionend"),Um=new Map,Qg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qg.push("scrollEnd");function ua(i,o){Um.set(i,o),di(o,[i])}var Pm=new WeakMap;function Ia(i,o){if(typeof i=="object"&&i!==null){var c=Pm.get(i);return c!==void 0?c:(o={value:i,source:o,stack:xs(o)},Pm.set(i,o),o)}return{value:i,source:o,stack:xs(o)}}var Da=[],Ms=0,Ad=0;function Co(){for(var i=Ms,o=Ad=Ms=0;o<i;){var c=Da[o];Da[o++]=null;var g=Da[o];Da[o++]=null;var b=Da[o];Da[o++]=null;var y=Da[o];if(Da[o++]=null,g!==null&&b!==null){var C=g.pending;C===null?b.next=b:(b.next=C.next,C.next=b),g.pending=b}y!==0&&Lc(c,b,y)}}function To(i,o,c,g){Da[Ms++]=i,Da[Ms++]=o,Da[Ms++]=c,Da[Ms++]=g,Ad|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function zl(i,o,c,g){return To(i,o,c,g),As(i)}function zr(i,o){return To(i,null,null,o),As(i)}function Lc(i,o,c){i.lanes|=c;var g=i.alternate;g!==null&&(g.lanes|=c);for(var b=!1,y=i.return;y!==null;)y.childLanes|=c,g=y.alternate,g!==null&&(g.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(b=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,b&&o!==null&&(b=31-Vn(c),i=y.hiddenUpdates,g=i[b],g===null?i[b]=[o]:g.push(o),o.lane=c|536870912),y):null}function As(i){if(50<yu)throw yu=0,_p=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Nl={};function LS(i,o,c,g){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function da(i,o,c,g){return new LS(i,o,c,g)}function Kg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ko(i,o){var c=i.alternate;return c===null?(c=da(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Jg(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Dt(i,o,c,g,b,y){var C=0;if(g=i,typeof i=="function")Kg(i)&&(C=1);else if(typeof i=="string")C=P0(i,c,Oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Ce:return i=da(31,c,o,b),i.elementType=Ce,i.lanes=y,i;case $:return Ie(c.children,b,y,o);case B:C=8,b|=24;break;case Z:return i=da(12,c,o,b|2),i.elementType=Z,i.lanes=y,i;case me:return i=da(13,c,o,b),i.elementType=me,i.lanes=y,i;case J:return i=da(19,c,o,b),i.elementType=J,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Y:case pe:C=10;break e;case ie:C=9;break e;case oe:C=11;break e;case he:C=14;break e;case ne:C=16,g=null;break e}C=29,c=Error(r(130,i===null?"null":typeof i,"")),g=null}return o=da(C,c,o,b),o.elementType=i,o.type=g,o.lanes=y,o}function Ie(i,o,c,g){return i=da(7,i,g,o),i.lanes=c,i}function Os(i,o,c){return i=da(6,i,null,o),i.lanes=c,i}function Bc(i,o,c){return o=da(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Sn=[],Rs=0,Hc=null,Od=0,fa=[],Wa=0,Nr=null,Mo=1,Ao="";function Wn(i,o){Sn[Rs++]=Od,Sn[Rs++]=Hc,Hc=i,Od=o}function sn(i,o,c){fa[Wa++]=Mo,fa[Wa++]=Ao,fa[Wa++]=Nr,Nr=i;var g=Mo;i=Ao;var b=32-Vn(g)-1;g&=~(1<<b),c+=1;var y=32-Vn(o)+b;if(30<y){var C=b-b%5;y=(g&(1<<C)-1).toString(32),g>>=C,b-=C,Mo=1<<32-Vn(o)+b|c<<b|g,Ao=y+i}else Mo=1<<y|c<<b|g,Ao=i}function Rd(i){i.return!==null&&(Wn(i,1),sn(i,1,0))}function Ul(i){for(;i===Hc;)Hc=Sn[--Rs],Sn[Rs]=null,Od=Sn[--Rs],Sn[Rs]=null;for(;i===Nr;)Nr=fa[--Wa],fa[Wa]=null,Ao=fa[--Wa],fa[Wa]=null,Mo=fa[--Wa],fa[Wa]=null}var Bn=null,fn=null,zt=!1,Ur=null,Ki=!1,Id=Error(r(519));function Oo(i){var o=Error(r(418,""));throw Gc(Ia(o,i)),Id}function Wg(i){var o=i.stateNode,c=i.type,g=i.memoizedProps;switch(o[vn]=i,o[_i]=g,c){case"dialog":Mt("cancel",o),Mt("close",o);break;case"iframe":case"object":case"embed":Mt("load",o);break;case"video":case"audio":for(c=0;c<St.length;c++)Mt(St[c],o);break;case"source":Mt("error",o);break;case"img":case"image":case"link":Mt("error",o),Mt("load",o);break;case"details":Mt("toggle",o);break;case"input":Mt("invalid",o),gm(o,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Oc(o);break;case"select":Mt("invalid",o);break;case"textarea":Mt("invalid",o),hm(o,g.value,g.defaultValue,g.children),Oc(o)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||g.suppressHydrationWarning===!0||z0(o.textContent,c)?(g.popover!=null&&(Mt("beforetoggle",o),Mt("toggle",o)),g.onScroll!=null&&Mt("scroll",o),g.onScrollEnd!=null&&Mt("scrollend",o),g.onClick!=null&&(o.onclick=bf),o=!0):o=!1,o||Oo(i)}function Dd(i){for(Bn=i.return;Bn;)switch(Bn.tag){case 5:case 13:Ki=!1;return;case 27:case 3:Ki=!0;return;default:Bn=Bn.return}}function Fc(i){if(i!==Bn)return!1;if(!zt)return Dd(i),zt=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Wl(i.type,i.memoizedProps)),c=!c),c&&fn&&Oo(i),Dd(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(o===0){fn=Ho(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;i=i.nextSibling}fn=null}}else o===27?(o=fn,Oi(i.type)?(i=nv,nv=null,fn=i):fn=o):fn=Bn?Ho(i.stateNode.nextSibling):null;return!0}function qc(){fn=Bn=null,zt=!1}function _m(){var i=Ur;return i!==null&&(Wi===null?Wi=i:Wi.push.apply(Wi,i),Ur=null),i}function Gc(i){Ur===null?Ur=[i]:Ur.push(i)}var ep=P(null),Pr=null,Ro=null;function Jo(i,o,c){re(ep,o._currentValue),o._currentValue=c}function Wo(i){i._currentValue=ep.current,ge(ep)}function tp(i,o,c){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===c)break;i=i.return}}function np(i,o,c,g){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var y=b.dependencies;if(y!==null){var C=b.child;y=y.firstContext;e:for(;y!==null;){var O=y;y=b;for(var j=0;j<o.length;j++)if(O.context===o[j]){y.lanes|=c,O=y.alternate,O!==null&&(O.lanes|=c),tp(y.return,c,i),g||(C=null);break e}y=O.next}}else if(b.tag===18){if(C=b.return,C===null)throw Error(r(341));C.lanes|=c,y=C.alternate,y!==null&&(y.lanes|=c),tp(C,c,i),C=null}else C=b.child;if(C!==null)C.return=b;else for(C=b;C!==null;){if(C===i){C=null;break}if(b=C.sibling,b!==null){b.return=C.return,C=b;break}C=C.return}b=C}}function zd(i,o,c,g){i=null;for(var b=o,y=!1;b!==null;){if(!y){if(b.flags&524288)y=!0;else if(b.flags&262144)break}if(b.tag===10){var C=b.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var O=b.type;Qi(b.pendingProps.value,C.value)||(i!==null?i.push(O):i=[O])}}else if(b===Pe.current){if(C=b.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Ii):i=[Ii])}b=b.return}i!==null&&np(o,i,c,g),o.flags|=262144}function Nd(i){for(i=i.firstContext;i!==null;){if(!Qi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Is(i){Pr=i,Ro=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Mi(i){return $m(Pr,i)}function Vc(i,o){return Pr===null&&Is(i),$m(i,o)}function $m(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ro===null){if(i===null)throw Error(r(308));Ro=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Ro=Ro.next=o;return c}var e0=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,g){i.push(g)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},Yc=f.unstable_scheduleCallback,ip=f.unstable_NormalPriority,ei={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new e0,data:new Map,refCount:0}}function Ds(i){i.refCount--,i.refCount===0&&Yc(ip,function(){i.controller.abort()})}var er=null,Zc=0,zs=0,eo=null;function ga(i,o){if(er===null){var c=er=[];Zc=0,zs=Yp(),eo={status:"pending",value:void 0,then:function(g){c.push(g)}}}return Zc++,o.then(Ud,Ud),o}function Ud(){if(--Zc===0&&er!==null){eo!==null&&(eo.status="fulfilled");var i=er;er=null,zs=0,eo=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Lm(i,o){var c=[],g={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){g.status="fulfilled",g.value=o;for(var b=0;b<c.length;b++)(0,c[b])(o)},function(b){for(g.status="rejected",g.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),g}var Bm=F.S;F.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&ga(i,o),Bm!==null&&Bm(i,o)};var _r=P(null);function Xc(){var i=_r.current;return i!==null?i:pn.pooledCache}function Qc(i,o){o===null?re(_r,_r.current):re(_r,o.pool)}function Pd(){var i=Xc();return i===null?null:{parent:ei._currentValue,pool:i}}var Pl=Error(r(460)),_d=Error(r(474)),Kc=Error(r(542)),ap={then:function(){}};function Hm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Jc(){}function Fm(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Jc,Jc),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,qm(i),i;default:if(typeof o.status=="string")o.then(Jc,Jc);else{if(i=pn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(g){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=g}},function(g){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=g}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,qm(i),i}throw Wc=o,Pl}}var Wc=null;function op(){if(Wc===null)throw Error(r(459));var i=Wc;return Wc=null,i}function qm(i){if(i===Pl||i===Kc)throw Error(r(483))}var $r=!1;function $d(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function jr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function pa(i,o,c){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,ln&2){var b=g.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),g.pending=o,o=As(i),Lc(i,null,c),o}return To(i,g,o,c),As(i)}function _l(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var g=o.lanes;g&=i.pendingLanes,c|=g,o.lanes=c,Yt(i,c)}}function jd(i,o){var c=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var b=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?b=y=C:y=y.next=C,c=c.next}while(c!==null);y===null?b=y=o:y=y.next=o}else b=y=o;c={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:y,shared:g.shared,callbacks:g.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var Gm=!1;function Ld(){if(Gm){var i=eo;if(i!==null)throw i}}function eu(i,o,c,g){Gm=!1;var b=i.updateQueue;$r=!1;var y=b.firstBaseUpdate,C=b.lastBaseUpdate,O=b.shared.pending;if(O!==null){b.shared.pending=null;var j=O,ee=j.next;j.next=null,C===null?y=ee:C.next=ee,C=j;var we=i.alternate;we!==null&&(we=we.updateQueue,O=we.lastBaseUpdate,O!==C&&(O===null?we.firstBaseUpdate=ee:O.next=ee,we.lastBaseUpdate=j))}if(y!==null){var Te=b.baseState;C=0,we=ee=j=null,O=y;do{var ae=O.lane&-536870913,fe=ae!==O.lane;if(fe?(Xt&ae)===ae:(g&ae)===ae){ae!==0&&ae===zs&&(Gm=!0),we!==null&&(we=we.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var gt=i,lt=O;ae=o;var rn=c;switch(lt.tag){case 1:if(gt=lt.payload,typeof gt=="function"){Te=gt.call(rn,Te,ae);break e}Te=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=lt.payload,ae=typeof gt=="function"?gt.call(rn,Te,ae):gt,ae==null)break e;Te=M({},Te,ae);break e;case 2:$r=!0}}ae=O.callback,ae!==null&&(i.flags|=64,fe&&(i.flags|=8192),fe=b.callbacks,fe===null?b.callbacks=[ae]:fe.push(ae))}else fe={lane:ae,tag:O.tag,payload:O.payload,callback:O.callback,next:null},we===null?(ee=we=fe,j=Te):we=we.next=fe,C|=ae;if(O=O.next,O===null){if(O=b.shared.pending,O===null)break;fe=O,O=fe.next,fe.next=null,b.lastBaseUpdate=fe,b.shared.pending=null}}while(!0);we===null&&(j=Te),b.baseState=j,b.firstBaseUpdate=ee,b.lastBaseUpdate=we,y===null&&(b.shared.lanes=0),Fs|=C,i.lanes=C,i.memoizedState=Te}}function tu(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function sp(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)tu(c[i],o)}var Lr=P(null),Bd=P(0);function Vm(i,o){i=Xr,re(Bd,i),re(Lr,o),Xr=i|o.baseLanes}function oi(){re(Bd,Xr),re(Lr,Lr.current)}function nu(){Xr=Bd.current,ge(Lr),ge(Bd)}var Io=0,Ct=null,an=null,_n=null,$l=!1,jl=!1,ha=!1,Hd=0,to=0,ma=null,lp=0;function $n(){throw Error(r(321))}function Fd(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Qi(i[c],o[c]))return!1;return!0}function cp(i,o,c,g,b,y){return Io=y,Ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=i===null||i.memoizedState===null?l0:db,ha=!1,y=c(g,b),ha=!1,jl&&(y=Ns(o,c,g,b)),Ym(i),y}function Ym(i){F.H=Wd;var o=an!==null&&an.next!==null;if(Io=0,_n=an=Ct=null,$l=!1,to=0,ma=null,o)throw Error(r(300));i===null||jt||(i=i.dependencies,i!==null&&Nd(i)&&(jt=!0))}function Ns(i,o,c,g){Ct=i;var b=0;do{if(jl&&(ma=null),to=0,jl=!1,25<=b)throw Error(r(301));if(b+=1,_n=an=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}F.H=c0,y=o(c,g)}while(jl);return y}function t0(){var i=F.H,o=i.useState()[0];return o=typeof o.then=="function"?Ll(o):o,i=i.useState()[0],(an!==null?an.memoizedState:null)!==i&&(Ct.flags|=1024),o}function up(){var i=Hd!==0;return Hd=0,i}function dp(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function iu(i){if($l){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}$l=!1}Io=0,_n=an=Ct=null,jl=!1,to=Hd=0,ma=null}function Ji(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Ct.memoizedState=_n=i:_n=_n.next=i,_n}function Hn(){if(an===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=an.next;var o=_n===null?Ct.memoizedState:_n.next;if(o!==null)_n=o,an=i;else{if(i===null)throw Ct.alternate===null?Error(r(467)):Error(r(310));an=i,i={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},_n===null?Ct.memoizedState=_n=i:_n=_n.next=i}return _n}function qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(i){var o=to;return to+=1,ma===null&&(ma=[]),i=Fm(ma,i,o),o=Ct,(_n===null?o.memoizedState:_n.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?l0:db),i}function fp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ll(i);if(i.$$typeof===pe)return Mi(i)}throw Error(r(438,String(i)))}function ri(i){var o=null,c=Ct.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var g=Ct.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(o={data:g.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=qd(),Ct.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),g=0;g<i;g++)c[g]=de;return o.index++,c}function tr(i,o){return typeof o=="function"?o(i):o}function Gd(i){var o=Hn();return gp(o,an,i)}function gp(i,o,c){var g=i.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var b=i.baseQueue,y=g.pending;if(y!==null){if(b!==null){var C=b.next;b.next=y.next,y.next=C}o.baseQueue=b=y,g.pending=null}if(y=i.baseState,b===null)i.memoizedState=y;else{o=b.next;var O=C=null,j=null,ee=o,we=!1;do{var Te=ee.lane&-536870913;if(Te!==ee.lane?(Xt&Te)===Te:(Io&Te)===Te){var ae=ee.revertLane;if(ae===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),Te===zs&&(we=!0);else if((Io&ae)===ae){ee=ee.next,ae===zs&&(we=!0);continue}else Te={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},j===null?(O=j=Te,C=y):j=j.next=Te,Ct.lanes|=ae,Fs|=ae;Te=ee.action,ha&&c(y,Te),y=ee.hasEagerState?ee.eagerState:c(y,Te)}else ae={lane:Te,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},j===null?(O=j=ae,C=y):j=j.next=ae,Ct.lanes|=Te,Fs|=Te;ee=ee.next}while(ee!==null&&ee!==o);if(j===null?C=y:j.next=O,!Qi(y,i.memoizedState)&&(jt=!0,we&&(c=eo,c!==null)))throw c;i.memoizedState=y,i.baseState=C,i.baseQueue=j,g.lastRenderedState=y}return b===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function pp(i){var o=Hn(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var g=c.dispatch,b=c.pending,y=o.memoizedState;if(b!==null){c.pending=null;var C=b=b.next;do y=i(y,C.action),C=C.next;while(C!==b);Qi(y,o.memoizedState)||(jt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,g]}function Zm(i,o,c){var g=Ct,b=Hn(),y=zt;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=o();var C=!Qi((an||b).memoizedState,c);C&&(b.memoizedState=c,jt=!0),b=b.queue;var O=Xm.bind(null,g,b,i);if(Br(2048,8,O,[i]),b.getSnapshot!==o||C||_n!==null&&_n.memoizedState.tag&1){if(g.flags|=2048,Us(9,no(),hp.bind(null,g,b,c,o),null),pn===null)throw Error(r(349));y||Io&124||Vd(g,o,c)}return c}function Vd(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Ct.updateQueue,o===null?(o=qd(),Ct.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function hp(i,o,c,g){o.value=c,o.getSnapshot=g,Qm(o)&&Km(i)}function Xm(i,o,c){return c(function(){Qm(o)&&Km(i)})}function Qm(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Qi(i,c)}catch{return!0}}function Km(i){var o=zr(i,2);o!==null&&Ca(o,i,2)}function Yd(i){var o=Ji();if(typeof i=="function"){var c=i;if(i=c(),ha){Pn(!0);try{c()}finally{Pn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:i},o}function mp(i,o,c,g){return i.baseState=c,gp(i,an,typeof g=="function"?g:tr)}function Jm(i,o,c,g,b){if(ru(i))throw Error(r(485));if(i=o.action,i!==null){var y={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};F.T!==null?c(!0):y.isTransition=!1,g(y),c=o.pending,c===null?(y.next=o.pending=y,Wm(o,y)):(y.next=c.next,o.pending=c.next=y)}}function Wm(i,o){var c=o.action,g=o.payload,b=i.state;if(o.isTransition){var y=F.T,C={};F.T=C;try{var O=c(b,g),j=F.S;j!==null&&j(C,O),bp(i,o,O)}catch(ee){Xd(i,o,ee)}finally{F.T=y}}else try{y=c(b,g),bp(i,o,y)}catch(ee){Xd(i,o,ee)}}function bp(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Zd(i,o,g)},function(g){return Xd(i,o,g)}):Zd(i,o,c)}function Zd(i,o,c){o.status="fulfilled",o.value=c,eb(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,Wm(i,c)))}function Xd(i,o,c){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do o.status="rejected",o.reason=c,eb(o),o=o.next;while(o!==g)}i.action=null}function eb(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function tb(i,o){return o}function vp(i,o){if(zt){var c=pn.formState;if(c!==null){e:{var g=Ct;if(zt){if(fn){t:{for(var b=fn,y=Ki;b.nodeType!==8;){if(!y){b=null;break t}if(b=Ho(b.nextSibling),b===null){b=null;break t}}y=b.data,b=y==="F!"||y==="F"?b:null}if(b){fn=Ho(b.nextSibling),g=b.data==="F!";break e}}Oo(g)}g=!1}g&&(o=c[0])}}return c=Ji(),c.memoizedState=c.baseState=o,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tb,lastRenderedState:o},c.queue=g,c=Sp.bind(null,Ct,g),g.dispatch=c,g=Yd(!1),y=Kd.bind(null,Ct,!1,g.queue),g=Ji(),b={state:o,dispatch:null,action:i,pending:null},g.queue=b,c=Jm.bind(null,Ct,b,y,c),b.dispatch=c,g.memoizedState=i,[o,c,!1]}function nb(i){var o=Hn();return nr(o,an,i)}function nr(i,o,c){if(o=gp(i,o,tb)[0],i=Gd(tr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var g=Ll(o)}catch(C){throw C===Pl?Kc:C}else g=o;o=Hn();var b=o.queue,y=b.dispatch;return c!==o.memoizedState&&(Ct.flags|=2048,Us(9,no(),ib.bind(null,b,c),null)),[g,y,i]}function ib(i,o){i.action=o}function n0(i){var o=Hn(),c=an;if(c!==null)return nr(o,c,i);Hn(),o=o.memoizedState,c=Hn();var g=c.queue.dispatch;return c.memoizedState=i,[o,g,!1]}function Us(i,o,c,g){return i={tag:i,create:c,deps:g,inst:o,next:null},o=Ct.updateQueue,o===null&&(o=qd(),Ct.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(g=c.next,c.next=i,i.next=g,o.lastEffect=i),i}function no(){return{destroy:void 0,resource:void 0}}function ab(){return Hn().memoizedState}function Bl(i,o,c,g){var b=Ji();g=g===void 0?null:g,Ct.flags|=i,b.memoizedState=Us(1|o,no(),c,g)}function Br(i,o,c,g){var b=Hn();g=g===void 0?null:g;var y=b.memoizedState.inst;an!==null&&g!==null&&Fd(g,an.memoizedState.deps)?b.memoizedState=Us(o,y,c,g):(Ct.flags|=i,b.memoizedState=Us(1|o,y,c,g))}function kn(i,o){Bl(8390656,8,i,o)}function i0(i,o){Br(2048,8,i,o)}function a0(i,o){return Br(4,2,i,o)}function ob(i,o){return Br(4,4,i,o)}function Do(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function rb(i,o,c){c=c!=null?c.concat([i]):null,Br(4,4,Do.bind(null,o,i),c)}function Qd(){}function au(i,o){var c=Hn();o=o===void 0?null:o;var g=c.memoizedState;return o!==null&&Fd(o,g[1])?g[0]:(c.memoizedState=[i,o],i)}function Hl(i,o){var c=Hn();o=o===void 0?null:o;var g=c.memoizedState;if(o!==null&&Fd(o,g[1]))return g[0];if(g=i(),ha){Pn(!0);try{i()}finally{Pn(!1)}}return c.memoizedState=[g,o],g}function yp(i,o,c){return c===void 0||Io&1073741824?i.memoizedState=o:(i.memoizedState=c,i=S0(),Ct.lanes|=i,Fs|=i,c)}function xp(i,o,c,g){return Qi(c,o)?c:Lr.current!==null?(i=yp(i,c,g),Qi(i,o)||(jt=!0),i):Io&42?(i=S0(),Ct.lanes|=i,Fs|=i,o):(jt=!0,i.memoizedState=c)}function sb(i,o,c,g,b){var y=q.p;q.p=y!==0&&8>y?y:8;var C=F.T,O={};F.T=O,Kd(i,!1,o,c);try{var j=b(),ee=F.S;if(ee!==null&&ee(O,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var we=Lm(j,g);ou(i,o,we,_a(i))}else ou(i,o,g,_a(i))}catch(Te){ou(i,o,{then:function(){},status:"rejected",reason:Te},_a())}finally{q.p=y,F.T=C}}function BS(){}function lb(i,o,c,g){if(i.tag!==5)throw Error(r(476));var b=cb(i).queue;sb(i,b,o,W,c===null?BS:function(){return o0(i),c(g)})}function cb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:W},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function o0(i){var o=cb(i).next.queue;ou(i,o,{},_a())}function Fl(){return Mi(Ii)}function zo(){return Hn().memoizedState}function ub(){return Hn().memoizedState}function HS(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=_a();i=jr(c);var g=pa(o,i,c);g!==null&&(Ca(g,o,c),_l(g,o,c)),o={cache:jm()},i.payload=o;return}o=o.return}}function r0(i,o,c){var g=_a();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},ru(i)?Jd(o,c):(c=zl(i,o,c,g),c!==null&&(Ca(c,i,g),s0(c,o,g)))}function Sp(i,o,c){var g=_a();ou(i,o,c,g)}function ou(i,o,c,g){var b={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(ru(i))Jd(o,b);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var C=o.lastRenderedState,O=y(C,c);if(b.hasEagerState=!0,b.eagerState=O,Qi(O,C))return To(i,o,b,0),pn===null&&Co(),!1}catch{}finally{}if(c=zl(i,o,b,g),c!==null)return Ca(c,i,g),s0(c,o,g),!0}return!1}function Kd(i,o,c,g){if(g={lane:2,revertLane:Yp(),action:g,hasEagerState:!1,eagerState:null,next:null},ru(i)){if(o)throw Error(r(479))}else o=zl(i,c,g,2),o!==null&&Ca(o,i,2)}function ru(i){var o=i.alternate;return i===Ct||o!==null&&o===Ct}function Jd(i,o){jl=$l=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function s0(i,o,c){if(c&4194048){var g=o.lanes;g&=i.pendingLanes,c|=g,o.lanes=c,Yt(i,c)}}var Wd={readContext:Mi,use:fp,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n},l0={readContext:Mi,use:fp,useCallback:function(i,o){return Ji().memoizedState=[i,o===void 0?null:o],i},useContext:Mi,useEffect:kn,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Bl(4194308,4,Do.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Bl(4194308,4,i,o)},useInsertionEffect:function(i,o){Bl(4,2,i,o)},useMemo:function(i,o){var c=Ji();o=o===void 0?null:o;var g=i();if(ha){Pn(!0);try{i()}finally{Pn(!1)}}return c.memoizedState=[g,o],g},useReducer:function(i,o,c){var g=Ji();if(c!==void 0){var b=c(o);if(ha){Pn(!0);try{c(o)}finally{Pn(!1)}}}else b=o;return g.memoizedState=g.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},g.queue=i,i=i.dispatch=r0.bind(null,Ct,i),[g.memoizedState,i]},useRef:function(i){var o=Ji();return i={current:i},o.memoizedState=i},useState:function(i){i=Yd(i);var o=i.queue,c=Sp.bind(null,Ct,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Qd,useDeferredValue:function(i,o){var c=Ji();return yp(c,i,o)},useTransition:function(){var i=Yd(!1);return i=sb.bind(null,Ct,i.queue,!0,!1),Ji().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var g=Ct,b=Ji();if(zt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),pn===null)throw Error(r(349));Xt&124||Vd(g,o,c)}b.memoizedState=c;var y={value:c,getSnapshot:o};return b.queue=y,kn(Xm.bind(null,g,y,i),[i]),g.flags|=2048,Us(9,no(),hp.bind(null,g,y,c,o),null),c},useId:function(){var i=Ji(),o=pn.identifierPrefix;if(zt){var c=Ao,g=Mo;c=(g&~(1<<32-Vn(g)-1)).toString(32)+c,o=""+o+"R"+c,c=Hd++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=lp++,o=""+o+"r"+c.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:Fl,useFormState:vp,useActionState:vp,useOptimistic:function(i){var o=Ji();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Kd.bind(null,Ct,!0,c),c.dispatch=o,[i,o]},useMemoCache:ri,useCacheRefresh:function(){return Ji().memoizedState=HS.bind(null,Ct)}},db={readContext:Mi,use:fp,useCallback:au,useContext:Mi,useEffect:i0,useImperativeHandle:rb,useInsertionEffect:a0,useLayoutEffect:ob,useMemo:Hl,useReducer:Gd,useRef:ab,useState:function(){return Gd(tr)},useDebugValue:Qd,useDeferredValue:function(i,o){var c=Hn();return xp(c,an.memoizedState,i,o)},useTransition:function(){var i=Gd(tr)[0],o=Hn().memoizedState;return[typeof i=="boolean"?i:Ll(i),o]},useSyncExternalStore:Zm,useId:zo,useHostTransitionStatus:Fl,useFormState:nb,useActionState:nb,useOptimistic:function(i,o){var c=Hn();return mp(c,an,i,o)},useMemoCache:ri,useCacheRefresh:ub},c0={readContext:Mi,use:fp,useCallback:au,useContext:Mi,useEffect:i0,useImperativeHandle:rb,useInsertionEffect:a0,useLayoutEffect:ob,useMemo:Hl,useReducer:pp,useRef:ab,useState:function(){return pp(tr)},useDebugValue:Qd,useDeferredValue:function(i,o){var c=Hn();return an===null?yp(c,i,o):xp(c,an.memoizedState,i,o)},useTransition:function(){var i=pp(tr)[0],o=Hn().memoizedState;return[typeof i=="boolean"?i:Ll(i),o]},useSyncExternalStore:Zm,useId:zo,useHostTransitionStatus:Fl,useFormState:n0,useActionState:n0,useOptimistic:function(i,o){var c=Hn();return an!==null?mp(c,an,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:ri,useCacheRefresh:ub},ba=null,su=0;function ef(i){var o=su;return su+=1,ba===null&&(ba=[]),Fm(ba,i,o)}function tf(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function lu(i,o){throw o.$$typeof===N?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function va(i){var o=i._init;return o(i._payload)}function fb(i){function o(Q,V){if(i){var te=Q.deletions;te===null?(Q.deletions=[V],Q.flags|=16):te.push(V)}}function c(Q,V){if(!i)return null;for(;V!==null;)o(Q,V),V=V.sibling;return null}function g(Q){for(var V=new Map;Q!==null;)Q.key!==null?V.set(Q.key,Q):V.set(Q.index,Q),Q=Q.sibling;return V}function b(Q,V){return Q=ko(Q,V),Q.index=0,Q.sibling=null,Q}function y(Q,V,te){return Q.index=te,i?(te=Q.alternate,te!==null?(te=te.index,te<V?(Q.flags|=67108866,V):te):(Q.flags|=67108866,V)):(Q.flags|=1048576,V)}function C(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function O(Q,V,te,Ee){return V===null||V.tag!==6?(V=Os(te,Q.mode,Ee),V.return=Q,V):(V=b(V,te),V.return=Q,V)}function j(Q,V,te,Ee){var qe=te.type;return qe===$?we(Q,V,te.props.children,Ee,te.key):V!==null&&(V.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ne&&va(qe)===V.type)?(V=b(V,te.props),tf(V,te),V.return=Q,V):(V=Dt(te.type,te.key,te.props,null,Q.mode,Ee),tf(V,te),V.return=Q,V)}function ee(Q,V,te,Ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Bc(te,Q.mode,Ee),V.return=Q,V):(V=b(V,te.children||[]),V.return=Q,V)}function we(Q,V,te,Ee,qe){return V===null||V.tag!==7?(V=Ie(te,Q.mode,Ee,qe),V.return=Q,V):(V=b(V,te),V.return=Q,V)}function Te(Q,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Os(""+V,Q.mode,te),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return te=Dt(V.type,V.key,V.props,null,Q.mode,te),tf(te,V),te.return=Q,te;case A:return V=Bc(V,Q.mode,te),V.return=Q,V;case ne:var Ee=V._init;return V=Ee(V._payload),Te(Q,V,te)}if(ct(V)||De(V))return V=Ie(V,Q.mode,te,null),V.return=Q,V;if(typeof V.then=="function")return Te(Q,ef(V),te);if(V.$$typeof===pe)return Te(Q,Vc(Q,V),te);lu(Q,V)}return null}function ae(Q,V,te,Ee){var qe=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return qe!==null?null:O(Q,V,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return te.key===qe?j(Q,V,te,Ee):null;case A:return te.key===qe?ee(Q,V,te,Ee):null;case ne:return qe=te._init,te=qe(te._payload),ae(Q,V,te,Ee)}if(ct(te)||De(te))return qe!==null?null:we(Q,V,te,Ee,null);if(typeof te.then=="function")return ae(Q,V,ef(te),Ee);if(te.$$typeof===pe)return ae(Q,V,Vc(Q,te),Ee);lu(Q,te)}return null}function fe(Q,V,te,Ee,qe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Q=Q.get(te)||null,O(V,Q,""+Ee,qe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case k:return Q=Q.get(Ee.key===null?te:Ee.key)||null,j(V,Q,Ee,qe);case A:return Q=Q.get(Ee.key===null?te:Ee.key)||null,ee(V,Q,Ee,qe);case ne:var Nt=Ee._init;return Ee=Nt(Ee._payload),fe(Q,V,te,Ee,qe)}if(ct(Ee)||De(Ee))return Q=Q.get(te)||null,we(V,Q,Ee,qe,null);if(typeof Ee.then=="function")return fe(Q,V,te,ef(Ee),qe);if(Ee.$$typeof===pe)return fe(Q,V,te,Vc(V,Ee),qe);lu(V,Ee)}return null}function gt(Q,V,te,Ee){for(var qe=null,Nt=null,rt=V,pt=V=0,bi=null;rt!==null&&pt<te.length;pt++){rt.index>pt?(bi=rt,rt=null):bi=rt.sibling;var en=ae(Q,rt,te[pt],Ee);if(en===null){rt===null&&(rt=bi);break}i&&rt&&en.alternate===null&&o(Q,rt),V=y(en,V,pt),Nt===null?qe=en:Nt.sibling=en,Nt=en,rt=bi}if(pt===te.length)return c(Q,rt),zt&&Wn(Q,pt),qe;if(rt===null){for(;pt<te.length;pt++)rt=Te(Q,te[pt],Ee),rt!==null&&(V=y(rt,V,pt),Nt===null?qe=rt:Nt.sibling=rt,Nt=rt);return zt&&Wn(Q,pt),qe}for(rt=g(rt);pt<te.length;pt++)bi=fe(rt,Q,pt,te[pt],Ee),bi!==null&&(i&&bi.alternate!==null&&rt.delete(bi.key===null?pt:bi.key),V=y(bi,V,pt),Nt===null?qe=bi:Nt.sibling=bi,Nt=bi);return i&&rt.forEach(function(dr){return o(Q,dr)}),zt&&Wn(Q,pt),qe}function lt(Q,V,te,Ee){if(te==null)throw Error(r(151));for(var qe=null,Nt=null,rt=V,pt=V=0,bi=null,en=te.next();rt!==null&&!en.done;pt++,en=te.next()){rt.index>pt?(bi=rt,rt=null):bi=rt.sibling;var dr=ae(Q,rt,en.value,Ee);if(dr===null){rt===null&&(rt=bi);break}i&&rt&&dr.alternate===null&&o(Q,rt),V=y(dr,V,pt),Nt===null?qe=dr:Nt.sibling=dr,Nt=dr,rt=bi}if(en.done)return c(Q,rt),zt&&Wn(Q,pt),qe;if(rt===null){for(;!en.done;pt++,en=te.next())en=Te(Q,en.value,Ee),en!==null&&(V=y(en,V,pt),Nt===null?qe=en:Nt.sibling=en,Nt=en);return zt&&Wn(Q,pt),qe}for(rt=g(rt);!en.done;pt++,en=te.next())en=fe(rt,Q,pt,en.value,Ee),en!==null&&(i&&en.alternate!==null&&rt.delete(en.key===null?pt:en.key),V=y(en,V,pt),Nt===null?qe=en:Nt.sibling=en,Nt=en);return i&&rt.forEach(function(JS){return o(Q,JS)}),zt&&Wn(Q,pt),qe}function rn(Q,V,te,Ee){if(typeof te=="object"&&te!==null&&te.type===$&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case k:e:{for(var qe=te.key;V!==null;){if(V.key===qe){if(qe=te.type,qe===$){if(V.tag===7){c(Q,V.sibling),Ee=b(V,te.props.children),Ee.return=Q,Q=Ee;break e}}else if(V.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ne&&va(qe)===V.type){c(Q,V.sibling),Ee=b(V,te.props),tf(Ee,te),Ee.return=Q,Q=Ee;break e}c(Q,V);break}else o(Q,V);V=V.sibling}te.type===$?(Ee=Ie(te.props.children,Q.mode,Ee,te.key),Ee.return=Q,Q=Ee):(Ee=Dt(te.type,te.key,te.props,null,Q.mode,Ee),tf(Ee,te),Ee.return=Q,Q=Ee)}return C(Q);case A:e:{for(qe=te.key;V!==null;){if(V.key===qe)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){c(Q,V.sibling),Ee=b(V,te.children||[]),Ee.return=Q,Q=Ee;break e}else{c(Q,V);break}else o(Q,V);V=V.sibling}Ee=Bc(te,Q.mode,Ee),Ee.return=Q,Q=Ee}return C(Q);case ne:return qe=te._init,te=qe(te._payload),rn(Q,V,te,Ee)}if(ct(te))return gt(Q,V,te,Ee);if(De(te)){if(qe=De(te),typeof qe!="function")throw Error(r(150));return te=qe.call(te),lt(Q,V,te,Ee)}if(typeof te.then=="function")return rn(Q,V,ef(te),Ee);if(te.$$typeof===pe)return rn(Q,V,Vc(Q,te),Ee);lu(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(c(Q,V.sibling),Ee=b(V,te),Ee.return=Q,Q=Ee):(c(Q,V),Ee=Os(te,Q.mode,Ee),Ee.return=Q,Q=Ee),C(Q)):c(Q,V)}return function(Q,V,te,Ee){try{su=0;var qe=rn(Q,V,te,Ee);return ba=null,qe}catch(rt){if(rt===Pl||rt===Kc)throw rt;var Nt=da(29,rt,null,Q.mode);return Nt.lanes=Ee,Nt.return=Q,Nt}finally{}}}var fi=fb(!0),gb=fb(!1),ti=P(null),No=null;function ya(i){var o=i.alternate;re(Zn,Zn.current&1),re(ti,i),No===null&&(o===null||Lr.current!==null||o.memoizedState!==null)&&(No=i)}function pb(i){if(i.tag===22){if(re(Zn,Zn.current),re(ti,i),No===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(No=i)}}else Li()}function Li(){re(Zn,Zn.current),re(ti,ti.current)}function Uo(i){ge(ti),No===i&&(No=null),ge(Zn)}var Zn=P(0);function za(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||ev(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function wp(i,o,c,g){o=i.memoizedState,c=c(g,o),c=c==null?o:M({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ps={enqueueSetState:function(i,o,c){i=i._reactInternals;var g=_a(),b=jr(g);b.payload=o,c!=null&&(b.callback=c),o=pa(i,b,g),o!==null&&(Ca(o,i,g),_l(o,i,g))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var g=_a(),b=jr(g);b.tag=1,b.payload=o,c!=null&&(b.callback=c),o=pa(i,b,g),o!==null&&(Ca(o,i,g),_l(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=_a(),g=jr(c);g.tag=2,o!=null&&(g.callback=o),o=pa(i,g,c),o!==null&&(Ca(o,i,c),_l(o,i,c))}};function hb(i,o,c,g,b,y,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,y,C):o.prototype&&o.prototype.isPureReactComponent?!Ir(c,g)||!Ir(b,y):!0}function cu(i,o,c,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,g),o.state!==i&&Ps.enqueueReplaceState(o,o.state,null)}function io(i,o){var c=o;if("ref"in o){c={};for(var g in o)g!=="ref"&&(c[g]=o[g])}if(i=i.defaultProps){c===o&&(c=M({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}var nf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function mb(i){nf(i)}function uu(i){console.error(i)}function bb(i){nf(i)}function ql(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(g){setTimeout(function(){throw g})}}function vb(i,o,c){try{var g=i.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ep(i,o,c){return c=jr(c),c.tag=3,c.payload={element:null},c.callback=function(){ql(i,o)},c}function u0(i){return i=jr(i),i.tag=3,i}function yb(i,o,c,g){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var y=g.value;i.payload=function(){return b(y)},i.callback=function(){vb(o,c,g)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){vb(o,c,g),typeof b!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var O=g.stack;this.componentDidCatch(g.value,{componentStack:O!==null?O:""})})}function Na(i,o,c,g,b){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(o=c.alternate,o!==null&&zd(o,c,b,!0),c=ti.current,c!==null){switch(c.tag){case 13:return No===null?Ys():c.alternate===null&&qn===0&&(qn=3),c.flags&=-257,c.flags|=65536,c.lanes=b,g===ap?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([g]):o.add(g),df(i,g,b)),!1;case 22:return c.flags|=65536,g===ap?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([g]):c.add(g)),df(i,g,b)),!1}throw Error(r(435,c.tag))}return df(i,g,b),Ys(),!1}if(zt)return o=ti.current,o!==null?(!(o.flags&65536)&&(o.flags|=256),o.flags|=65536,o.lanes=b,g!==Id&&(i=Error(r(422),{cause:g}),Gc(Ia(i,c)))):(g!==Id&&(o=Error(r(423),{cause:g}),Gc(Ia(o,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,g=Ia(g,c),b=Ep(i.stateNode,g,b),jd(i,b),qn!==4&&(qn=2)),!1;var y=Error(r(520),{cause:g});if(y=Ia(y,c),lf===null?lf=[y]:lf.push(y),qn!==4&&(qn=2),o===null)return!0;g=Ia(g,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Ep(c.stateNode,g,i),jd(c,i),!1;case 1:if(o=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ir===null||!ir.has(y))))return c.flags|=65536,b&=-b,c.lanes|=b,b=u0(b),yb(b,i,c,g),jd(c,b),!1}c=c.return}while(c!==null);return!1}var xb=Error(r(461)),jt=!1;function gi(i,o,c,g){o.child=i===null?gb(o,null,c,g):fi(o,i.child,c,g)}function Sb(i,o,c,g,b){c=c.render;var y=o.ref;if("ref"in g){var C={};for(var O in g)O!=="ref"&&(C[O]=g[O])}else C=g;return Is(o),g=cp(i,o,c,C,y,b),O=up(),i!==null&&!jt?(dp(i,o,b),Po(i,o,b)):(zt&&O&&Rd(o),o.flags|=1,gi(i,o,g,b),o.child)}function d0(i,o,c,g,b){if(i===null){var y=c.type;return typeof y=="function"&&!Kg(y)&&y.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=y,Hr(i,o,y,g,b)):(i=Dt(c.type,null,g,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!Op(i,b)){var C=y.memoizedProps;if(c=c.compare,c=c!==null?c:Ir,c(C,g)&&i.ref===o.ref)return Po(i,o,b)}return o.flags|=1,i=ko(y,g),i.ref=o.ref,i.return=o,o.child=i}function Hr(i,o,c,g,b){if(i!==null){var y=i.memoizedProps;if(Ir(y,g)&&i.ref===o.ref)if(jt=!1,o.pendingProps=g=y,Op(i,b))i.flags&131072&&(jt=!0);else return o.lanes=i.lanes,Po(i,o,b)}return Tp(i,o,c,g,b)}function Gl(i,o,c){var g=o.pendingProps,b=g.children,y=i!==null?i.memoizedState:null;if(g.mode==="hidden"){if(o.flags&128){if(g=y!==null?y.baseLanes|c:c,i!==null){for(b=o.child=i.child,y=0;b!==null;)y=y|b.lanes|b.childLanes,b=b.sibling;o.childLanes=y&~g}else o.childLanes=0,o.child=null;return Cp(i,o,g,c)}if(c&536870912)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Qc(o,y!==null?y.cachePool:null),y!==null?Vm(o,y):oi(),pb(o);else return o.lanes=o.childLanes=536870912,Cp(i,o,y!==null?y.baseLanes|c:c,c)}else y!==null?(Qc(o,y.cachePool),Vm(o,y),Li(),o.memoizedState=null):(i!==null&&Qc(o,null),oi(),Li());return gi(i,o,b,c),o.child}function Cp(i,o,c,g){var b=Xc();return b=b===null?null:{parent:ei._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},i!==null&&Qc(o,null),oi(),pb(o),i!==null&&zd(i,o,g,!0),null}function Fr(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Tp(i,o,c,g,b){return Is(o),c=cp(i,o,c,g,void 0,b),g=up(),i!==null&&!jt?(dp(i,o,b),Po(i,o,b)):(zt&&g&&Rd(o),o.flags|=1,gi(i,o,c,b),o.child)}function wb(i,o,c,g,b,y){return Is(o),o.updateQueue=null,c=Ns(o,g,c,b),Ym(i),g=up(),i!==null&&!jt?(dp(i,o,y),Po(i,o,y)):(zt&&g&&Rd(o),o.flags|=1,gi(i,o,c,y),o.child)}function Eb(i,o,c,g,b){if(Is(o),o.stateNode===null){var y=Nl,C=c.contextType;typeof C=="object"&&C!==null&&(y=Mi(C)),y=new c(g,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ps,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=g,y.state=o.memoizedState,y.refs={},$d(o),C=c.contextType,y.context=typeof C=="object"&&C!==null?Mi(C):Nl,y.state=o.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(wp(o,c,C,g),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&Ps.enqueueReplaceState(y,y.state,null),eu(o,g,y,b),Ld(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),g=!0}else if(i===null){y=o.stateNode;var O=o.memoizedProps,j=io(c,O);y.props=j;var ee=y.context,we=c.contextType;C=Nl,typeof we=="object"&&we!==null&&(C=Mi(we));var Te=c.getDerivedStateFromProps;we=typeof Te=="function"||typeof y.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,we||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O||ee!==C)&&cu(o,y,g,C),$r=!1;var ae=o.memoizedState;y.state=ae,eu(o,g,y,b),Ld(),ee=o.memoizedState,O||ae!==ee||$r?(typeof Te=="function"&&(wp(o,c,Te,g),ee=o.memoizedState),(j=$r||hb(o,c,j,g,ae,ee,C))?(we||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=ee),y.props=g,y.state=ee,y.context=C,g=j):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{y=o.stateNode,rp(i,o),C=o.memoizedProps,we=io(c,C),y.props=we,Te=o.pendingProps,ae=y.context,ee=c.contextType,j=Nl,typeof ee=="object"&&ee!==null&&(j=Mi(ee)),O=c.getDerivedStateFromProps,(ee=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==Te||ae!==j)&&cu(o,y,g,j),$r=!1,ae=o.memoizedState,y.state=ae,eu(o,g,y,b),Ld();var fe=o.memoizedState;C!==Te||ae!==fe||$r||i!==null&&i.dependencies!==null&&Nd(i.dependencies)?(typeof O=="function"&&(wp(o,c,O,g),fe=o.memoizedState),(we=$r||hb(o,c,we,g,ae,fe,j)||i!==null&&i.dependencies!==null&&Nd(i.dependencies))?(ee||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(g,fe,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(g,fe,j)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=fe),y.props=g,y.state=fe,y.context=j,g=we):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),g=!1)}return y=g,Fr(i,o),g=(o.flags&128)!==0,y||g?(y=o.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&g?(o.child=fi(o,i.child,null,b),o.child=fi(o,null,c,b)):gi(i,o,c,b),o.memoizedState=y.state,i=o.child):i=Po(i,o,b),i}function kp(i,o,c,g){return qc(),o.flags|=256,gi(i,o,c,g),o.child}var af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mp(i){return{baseLanes:i,cachePool:Pd()}}function Cb(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=si),i}function f0(i,o,c){var g=o.pendingProps,b=!1,y=(o.flags&128)!==0,C;if((C=y)||(C=i!==null&&i.memoizedState===null?!1:(Zn.current&2)!==0),C&&(b=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(zt){if(b?ya(o):Li(),zt){var O=fn,j;if(j=O){e:{for(j=O,O=Ki;j.nodeType!==8;){if(!O){O=null;break e}if(j=Ho(j.nextSibling),j===null){O=null;break e}}O=j}O!==null?(o.memoizedState={dehydrated:O,treeContext:Nr!==null?{id:Mo,overflow:Ao}:null,retryLane:536870912,hydrationErrors:null},j=da(18,null,null,0),j.stateNode=O,j.return=o,o.child=j,Bn=o,fn=null,j=!0):j=!1}j||Oo(o)}if(O=o.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return ev(O)?o.lanes=32:o.lanes=536870912,null;Uo(o)}return O=g.children,g=g.fallback,b?(Li(),b=o.mode,O=of({mode:"hidden",children:O},b),g=Ie(g,b,c,null),O.return=o,g.return=o,O.sibling=g,o.child=O,b=o.child,b.memoizedState=Mp(c),b.childLanes=Cb(i,C,c),o.memoizedState=af,g):(ya(o),Ap(o,O))}if(j=i.memoizedState,j!==null&&(O=j.dehydrated,O!==null)){if(y)o.flags&256?(ya(o),o.flags&=-257,o=Tb(i,o,c)):o.memoizedState!==null?(Li(),o.child=i.child,o.flags|=128,o=null):(Li(),b=g.fallback,O=o.mode,g=of({mode:"visible",children:g.children},O),b=Ie(b,O,c,null),b.flags|=2,g.return=o,b.return=o,g.sibling=b,o.child=g,fi(o,i.child,null,c),g=o.child,g.memoizedState=Mp(c),g.childLanes=Cb(i,C,c),o.memoizedState=af,o=b);else if(ya(o),ev(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var ee=C.dgst;C=ee,g=Error(r(419)),g.stack="",g.digest=C,Gc({value:g,source:null,stack:null}),o=Tb(i,o,c)}else if(jt||zd(i,o,c,!1),C=(c&i.childLanes)!==0,jt||C){if(C=pn,C!==null&&(g=c&-c,g=g&42?1:xt(g),g=g&(C.suspendedLanes|c)?0:g,g!==0&&g!==j.retryLane))throw j.retryLane=g,zr(i,g),Ca(C,i,g),xb;O.data==="$?"||Ys(),o=Tb(i,o,c)}else O.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=j.treeContext,fn=Ho(O.nextSibling),Bn=o,zt=!0,Ur=null,Ki=!1,i!==null&&(fa[Wa++]=Mo,fa[Wa++]=Ao,fa[Wa++]=Nr,Mo=i.id,Ao=i.overflow,Nr=o),o=Ap(o,g.children),o.flags|=4096);return o}return b?(Li(),b=g.fallback,O=o.mode,j=i.child,ee=j.sibling,g=ko(j,{mode:"hidden",children:g.children}),g.subtreeFlags=j.subtreeFlags&65011712,ee!==null?b=ko(ee,b):(b=Ie(b,O,c,null),b.flags|=2),b.return=o,g.return=o,g.sibling=b,o.child=g,g=b,b=o.child,O=i.child.memoizedState,O===null?O=Mp(c):(j=O.cachePool,j!==null?(ee=ei._currentValue,j=j.parent!==ee?{parent:ee,pool:ee}:j):j=Pd(),O={baseLanes:O.baseLanes|c,cachePool:j}),b.memoizedState=O,b.childLanes=Cb(i,C,c),o.memoizedState=af,g):(ya(o),c=i.child,i=c.sibling,c=ko(c,{mode:"visible",children:g.children}),c.return=o,c.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=c,o.memoizedState=null,c)}function Ap(i,o){return o=of({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function of(i,o){return i=da(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Tb(i,o,c){return fi(o,i.child,null,c),i=Ap(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Vl(i,o,c){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),tp(i.return,o,c)}function du(i,o,c,g,b){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:b}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=g,y.tail=c,y.tailMode=b)}function kb(i,o,c){var g=o.pendingProps,b=g.revealOrder,y=g.tail;if(gi(i,o,g.children,c),g=Zn.current,g&2)g=g&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Vl(i,c,o);else if(i.tag===19)Vl(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}switch(re(Zn,g),b){case"forwards":for(c=o.child,b=null;c!==null;)i=c.alternate,i!==null&&za(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=o.child,o.child=null):(b=c.sibling,c.sibling=null),du(o,!1,b,c,y);break;case"backwards":for(c=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&za(i)===null){o.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}du(o,!0,c,null,y);break;case"together":du(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Po(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Fs|=o.lanes,!(c&o.childLanes))if(i!==null){if(zd(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=ko(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=ko(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Op(i,o){return i.lanes&o?!0:(i=i.dependencies,!!(i!==null&&Nd(i)))}function g0(i,o,c){switch(o.tag){case 3:Me(o,o.stateNode.containerInfo),Jo(o,ei,i.memoizedState.cache),qc();break;case 27:case 5:at(o);break;case 4:Me(o,o.stateNode.containerInfo);break;case 10:Jo(o,o.type,o.memoizedProps.value);break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(ya(o),o.flags|=128,null):c&o.child.childLanes?f0(i,o,c):(ya(o),i=Po(i,o,c),i!==null?i.sibling:null);ya(o);break;case 19:var b=(i.flags&128)!==0;if(g=(c&o.childLanes)!==0,g||(zd(i,o,c,!1),g=(c&o.childLanes)!==0),b){if(g)return kb(i,o,c);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(Zn,Zn.current),g)break;return null;case 22:case 23:return o.lanes=0,Gl(i,o,c);case 24:Jo(o,ei,i.memoizedState.cache)}return Po(i,o,c)}function Mb(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)jt=!0;else{if(!Op(i,c)&&!(o.flags&128))return jt=!1,g0(i,o,c);jt=!!(i.flags&131072)}else jt=!1,zt&&o.flags&1048576&&sn(o,Od,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var g=o.elementType,b=g._init;if(g=b(g._payload),o.type=g,typeof g=="function")Kg(g)?(i=io(g,i),o.tag=1,o=Eb(null,o,g,i,c)):(o.tag=0,o=Tp(null,o,g,i,c));else{if(g!=null){if(b=g.$$typeof,b===oe){o.tag=11,o=Sb(null,o,g,i,c);break e}else if(b===he){o.tag=14,o=d0(null,o,g,i,c);break e}}throw o=Je(g)||g,Error(r(306,o,""))}}return o;case 0:return Tp(i,o,o.type,o.pendingProps,c);case 1:return g=o.type,b=io(g,o.pendingProps),Eb(i,o,g,b,c);case 3:e:{if(Me(o,o.stateNode.containerInfo),i===null)throw Error(r(387));g=o.pendingProps;var y=o.memoizedState;b=y.element,rp(i,o),eu(o,g,null,c);var C=o.memoizedState;if(g=C.cache,Jo(o,ei,g),g!==y.cache&&np(o,[ei],c,!0),Ld(),g=C.element,y.isDehydrated)if(y={element:g,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=kp(i,o,g,c);break e}else if(g!==b){b=Ia(Error(r(424)),o),Gc(b),o=kp(i,o,g,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(fn=Ho(i.firstChild),Bn=o,zt=!0,Ur=null,Ki=!0,c=gb(o,null,g,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(qc(),g===b){o=Po(i,o,c);break e}gi(i,o,g,c)}o=o.child}return o;case 26:return Fr(i,o),i===null?(c=ih(o.type,null,o.pendingProps,null))?o.memoizedState=c:zt||(c=o.type,i=o.pendingProps,g=ku(ke.current).createElement(c),g[vn]=o,g[_i]=i,le(g,c,i),Yn(g),o.stateNode=g):o.memoizedState=ih(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return at(o),i===null&&zt&&(g=o.stateNode=Ri(o.type,o.pendingProps,ke.current),Bn=o,Ki=!0,b=fn,Oi(o.type)?(nv=b,fn=Ho(g.firstChild)):fn=b),gi(i,o,o.pendingProps.children,c),Fr(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&zt&&((b=g=fn)&&(g=Wb(g,o.type,o.pendingProps,Ki),g!==null?(o.stateNode=g,Bn=o,fn=Ho(g.firstChild),Ki=!1,b=!0):b=!1),b||Oo(o)),at(o),b=o.type,y=o.pendingProps,C=i!==null?i.memoizedProps:null,g=y.children,Wl(b,y)?g=null:C!==null&&Wl(b,C)&&(o.flags|=32),o.memoizedState!==null&&(b=cp(i,o,t0,null,null,c),Ii._currentValue=b),Fr(i,o),gi(i,o,g,c),o.child;case 6:return i===null&&zt&&((i=c=fn)&&(c=Mu(c,o.pendingProps,Ki),c!==null?(o.stateNode=c,Bn=o,fn=null,i=!0):i=!1),i||Oo(o)),null;case 13:return f0(i,o,c);case 4:return Me(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=fi(o,null,g,c):gi(i,o,g,c),o.child;case 11:return Sb(i,o,o.type,o.pendingProps,c);case 7:return gi(i,o,o.pendingProps,c),o.child;case 8:return gi(i,o,o.pendingProps.children,c),o.child;case 12:return gi(i,o,o.pendingProps.children,c),o.child;case 10:return g=o.pendingProps,Jo(o,o.type,g.value),gi(i,o,g.children,c),o.child;case 9:return b=o.type._context,g=o.pendingProps.children,Is(o),b=Mi(b),g=g(b),o.flags|=1,gi(i,o,g,c),o.child;case 14:return d0(i,o,o.type,o.pendingProps,c);case 15:return Hr(i,o,o.type,o.pendingProps,c);case 19:return kb(i,o,c);case 31:return g=o.pendingProps,c=o.mode,g={mode:g.mode,children:g.children},i===null?(c=of(g,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=ko(i.child,g),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return Gl(i,o,c);case 24:return Is(o),g=Mi(ei),i===null?(b=Xc(),b===null&&(b=pn,y=jm(),b.pooledCache=y,y.refCount++,y!==null&&(b.pooledCacheLanes|=c),b=y),o.memoizedState={parent:g,cache:b},$d(o),Jo(o,ei,b)):(i.lanes&c&&(rp(i,o),eu(o,null,null,c),Ld()),b=i.memoizedState,y=o.memoizedState,b.parent!==g?(b={parent:g,cache:g},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Jo(o,ei,g)):(g=y.cache,Jo(o,ei,g),g!==b.cache&&np(o,[ei],c,!0))),gi(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function qr(i){i.flags|=4}function Ab(i,o){if(o.type!=="stylesheet"||o.state.loading&4)i.flags&=-16777217;else if(i.flags|=16777216,!rv(o)){if(o=ti.current,o!==null&&((Xt&4194048)===Xt?No!==null:(Xt&62914560)!==Xt&&!(Xt&536870912)||o!==No))throw Wc=ap,_d;i.flags|=8192}}function _s(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?ze():536870912,i.lanes|=o,bu|=o)}function fu(i,o){if(!zt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function In(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,g=0;if(o)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=g,i.childLanes=c,o}function gn(i,o,c){var g=o.pendingProps;switch(Ul(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(o),null;case 1:return In(o),null;case 3:return c=o.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),o.memoizedState.cache!==g&&(o.flags|=2048),Wo(ei),_e(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Fc(o)?qr(o):i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,_m())),In(o),null;case 26:return c=o.memoizedState,i===null?(qr(o),c!==null?(In(o),Ab(o,c)):(In(o),o.flags&=-16777217)):c?c!==i.memoizedState?(qr(o),In(o),Ab(o,c)):(In(o),o.flags&=-16777217):(i.memoizedProps!==g&&qr(o),In(o),o.flags&=-16777217),null;case 27:Xe(o),c=ke.current;var b=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==g&&qr(o);else{if(!g){if(o.stateNode===null)throw Error(r(166));return In(o),null}i=Oe.current,Fc(o)?Wg(o):(i=Ri(b,g,c),o.stateNode=i,qr(o))}return In(o),null;case 5:if(Xe(o),c=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==g&&qr(o);else{if(!g){if(o.stateNode===null)throw Error(r(166));return In(o),null}if(i=Oe.current,Fc(o))Wg(o);else{switch(b=ku(ke.current),i){case 1:i=b.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=b.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=b.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=b.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof g.is=="string"?b.createElement("select",{is:g.is}):b.createElement("select"),g.multiple?i.multiple=!0:g.size&&(i.size=g.size);break;default:i=typeof g.is=="string"?b.createElement(c,{is:g.is}):b.createElement(c)}}i[vn]=o,i[_i]=g;e:for(b=o.child;b!==null;){if(b.tag===5||b.tag===6)i.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===o)break e;for(;b.sibling===null;){if(b.return===null||b.return===o)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}o.stateNode=i;e:switch(le(i,c,g),c){case"button":case"input":case"select":case"textarea":i=!!g.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&qr(o)}}return In(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==g&&qr(o);else{if(typeof g!="string"&&o.stateNode===null)throw Error(r(166));if(i=ke.current,Fc(o)){if(i=o.stateNode,c=o.memoizedProps,g=null,b=Bn,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}i[vn]=o,i=!!(i.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||z0(i.nodeValue,c)),i||Oo(o)}else i=ku(i).createTextNode(g),i[vn]=o,o.stateNode=i}return In(o),null;case 13:if(g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=Fc(o),g!==null&&g.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[vn]=o}else qc(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;In(o),b=!1}else b=_m(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(Uo(o),o):(Uo(o),null)}if(Uo(o),o.flags&128)return o.lanes=c,o;if(c=g!==null,i=i!==null&&i.memoizedState!==null,c){g=o.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool);var y=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(y=g.memoizedState.cachePool.pool),y!==b&&(g.flags|=2048)}return c!==i&&c&&(o.child.flags|=8192),_s(o,o.updateQueue),In(o),null;case 4:return _e(),i===null&&hf(o.stateNode.containerInfo),In(o),null;case 10:return Wo(o.type),In(o),null;case 19:if(ge(Zn),b=o.memoizedState,b===null)return In(o),null;if(g=(o.flags&128)!==0,y=b.rendering,y===null)if(g)fu(b,!1);else{if(qn!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(y=za(i),y!==null){for(o.flags|=128,fu(b,!1),i=y.updateQueue,o.updateQueue=i,_s(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Jg(c,i),c=c.sibling;return re(Zn,Zn.current&1|2),o.child}i=i.sibling}b.tail!==null&&Tt()>Np&&(o.flags|=128,g=!0,fu(b,!1),o.lanes=4194304)}else{if(!g)if(i=za(y),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,_s(o,i),fu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!y.alternate&&!zt)return In(o),null}else 2*Tt()-b.renderingStartTime>Np&&c!==536870912&&(o.flags|=128,g=!0,fu(b,!1),o.lanes=4194304);b.isBackwards?(y.sibling=o.child,o.child=y):(i=b.last,i!==null?i.sibling=y:o.child=y,b.last=y)}return b.tail!==null?(o=b.tail,b.rendering=o,b.tail=o.sibling,b.renderingStartTime=Tt(),o.sibling=null,i=Zn.current,re(Zn,g?i&1|2:i&1),o):(In(o),null);case 22:case 23:return Uo(o),nu(),g=o.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(o.flags|=8192):g&&(o.flags|=8192),g?c&536870912&&!(o.flags&128)&&(In(o),o.subtreeFlags&6&&(o.flags|=8192)):In(o),c=o.updateQueue,c!==null&&_s(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==c&&(o.flags|=2048),i!==null&&ge(_r),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Wo(ei),In(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Ob(i,o){switch(Ul(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Wo(ei),_e(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Xe(o),null;case 13:if(Uo(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));qc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ge(Zn),null;case 4:return _e(),null;case 10:return Wo(o.type),null;case 22:case 23:return Uo(o),nu(),i!==null&&ge(_r),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Wo(ei),null;case 25:return null;default:return null}}function p0(i,o){switch(Ul(o),o.tag){case 3:Wo(ei),_e();break;case 26:case 27:case 5:Xe(o);break;case 4:_e();break;case 13:Uo(o);break;case 19:ge(Zn);break;case 10:Wo(o.type);break;case 22:case 23:Uo(o),nu(),i!==null&&ge(_r);break;case 24:Wo(ei)}}function gu(i,o){try{var c=o.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var b=g.next;c=b;do{if((c.tag&i)===i){g=void 0;var y=c.create,C=c.inst;g=y(),C.destroy=g}c=c.next}while(c!==b)}}catch(O){hn(o,o.return,O)}}function $s(i,o,c){try{var g=o.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var y=b.next;g=y;do{if((g.tag&i)===i){var C=g.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,b=o;var j=c,ee=O;try{ee()}catch(we){hn(b,j,we)}}}g=g.next}while(g!==y)}}catch(we){hn(o,o.return,we)}}function h0(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{sp(o,c)}catch(g){hn(i,i.return,g)}}}function Rp(i,o,c){c.props=io(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(g){hn(i,o,g)}}function pu(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof c=="function"?i.refCleanup=c(g):c.current=g}}catch(b){hn(i,o,b)}}function _o(i,o){var c=i.ref,g=i.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(b){hn(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){hn(i,o,b)}else c.current=null}function Rb(i){var o=i.type,c=i.memoizedProps,g=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(b){hn(i,i.return,b)}}function Yl(i,o,c){try{var g=i.stateNode;on(g,i.type,c,o),g[_i]=o}catch(b){hn(i,i.return,b)}}function m0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Oi(i.type)||i.tag===4}function Ib(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||m0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Oi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ao(i,o,c){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=bf));else if(g!==4&&(g===27&&Oi(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(ao(i,o,c),i=i.sibling;i!==null;)ao(i,o,c),i=i.sibling}function js(i,o,c){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(g!==4&&(g===27&&Oi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(js(i,o,c),i=i.sibling;i!==null;)js(i,o,c),i=i.sibling}function b0(i){var o=i.stateNode,c=i.memoizedProps;try{for(var g=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);le(o,g,c),o[vn]=i,o[_i]=c}catch(y){hn(i,i.return,y)}}var $o=!1,Fn=!1,Ip=!1,Db=typeof WeakSet=="function"?WeakSet:Set,ni=null;function v0(i,o){if(i=i.containerInfo,Kb=Tf,i=kd(i),Yg(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var b=g.anchorOffset,y=g.focusNode;g=g.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var C=0,O=-1,j=-1,ee=0,we=0,Te=i,ae=null;t:for(;;){for(var fe;Te!==c||b!==0&&Te.nodeType!==3||(O=C+b),Te!==y||g!==0&&Te.nodeType!==3||(j=C+g),Te.nodeType===3&&(C+=Te.nodeValue.length),(fe=Te.firstChild)!==null;)ae=Te,Te=fe;for(;;){if(Te===i)break t;if(ae===c&&++ee===b&&(O=C),ae===y&&++we===g&&(j=C),(fe=Te.nextSibling)!==null)break;Te=ae,ae=Te.parentNode}Te=fe}c=O===-1||j===-1?null:{start:O,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(vf={focusedElem:i,selectionRange:c},Tf=!1,ni=o;ni!==null;)if(o=ni,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,ni=i;else for(;ni!==null;){switch(o=ni,y=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if(i&1024&&y!==null){i=void 0,c=o,b=y.memoizedProps,y=y.memoizedState,g=c.stateNode;try{var gt=io(c.type,b,c.elementType===c.type);i=g.getSnapshotBeforeUpdate(gt,y),g.__reactInternalSnapshotBeforeUpdate=i}catch(lt){hn(c,c.return,lt)}}break;case 3:if(i&1024){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)yf(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(i&1024)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,ni=i;break}ni=o.return}}function Dp(i,o,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:Gr(i,c),g&4&&gu(5,c);break;case 1:if(Gr(i,c),g&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(C){hn(c,c.return,C)}else{var b=io(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){hn(c,c.return,C)}}g&64&&h0(c),g&512&&pu(c,c.return);break;case 3:if(Gr(i,c),g&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{sp(i,o)}catch(C){hn(c,c.return,C)}}break;case 27:o===null&&g&4&&b0(c);case 26:case 5:Gr(i,c),o===null&&g&4&&Rb(c),g&512&&pu(c,c.return);break;case 12:Gr(i,c);break;case 13:Gr(i,c),g&4&&Lt(i,c),g&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=R0.bind(null,c),tv(i,c))));break;case 22:if(g=c.memoizedState!==null||$o,!g){o=o!==null&&o.memoizedState!==null||Fn,b=$o;var y=Fn;$o=g,(Fn=o)&&!y?An(i,c,(c.subtreeFlags&8772)!==0):Gr(i,c),$o=b,Fn=y}break;case 30:break;default:Gr(i,c)}}function zb(i){var o=i.alternate;o!==null&&(i.alternate=null,zb(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&tt(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Mn=null,xa=!1;function oo(i,o,c){for(c=c.child;c!==null;)Nb(i,o,c),c=c.sibling}function Nb(i,o,c){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount($e,c)}catch{}switch(c.tag){case 26:Fn||_o(c,o),oo(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Fn||_o(c,o);var g=Mn,b=xa;Oi(c.type)&&(Mn=c.stateNode,xa=!1),oo(i,o,c),Fe(c.stateNode),Mn=g,xa=b;break;case 5:Fn||_o(c,o);case 6:if(g=Mn,b=xa,Mn=null,oo(i,o,c),Mn=g,xa=b,Mn!==null)if(xa)try{(Mn.nodeType===9?Mn.body:Mn.nodeName==="HTML"?Mn.ownerDocument.body:Mn).removeChild(c.stateNode)}catch(y){hn(c,o,y)}else try{Mn.removeChild(c.stateNode)}catch(y){hn(c,o,y)}break;case 18:Mn!==null&&(xa?(i=Mn,U0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),zu(i)):U0(Mn,c.stateNode));break;case 4:g=Mn,b=xa,Mn=c.stateNode.containerInfo,xa=!0,oo(i,o,c),Mn=g,xa=b;break;case 0:case 11:case 14:case 15:Fn||$s(2,c,o),Fn||$s(4,c,o),oo(i,o,c);break;case 1:Fn||(_o(c,o),g=c.stateNode,typeof g.componentWillUnmount=="function"&&Rp(c,o,g)),oo(i,o,c);break;case 21:oo(i,o,c);break;case 22:Fn=(g=Fn)||c.memoizedState!==null,oo(i,o,c),Fn=g;break;default:oo(i,o,c)}}function Lt(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{zu(i)}catch(c){hn(o,o.return,c)}}function Ub(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Db),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Db),o;default:throw Error(r(435,i.tag))}}function rf(i,o){var c=Ub(i);o.forEach(function(g){var b=FS.bind(null,i,g);c.has(g)||(c.add(g),g.then(b,b))})}function Sa(i,o){var c=o.deletions;if(c!==null)for(var g=0;g<c.length;g++){var b=c[g],y=i,C=o,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(Oi(O.type)){Mn=O.stateNode,xa=!1;break e}break;case 5:Mn=O.stateNode,xa=!1;break e;case 3:case 4:Mn=O.stateNode.containerInfo,xa=!0;break e}O=O.return}if(Mn===null)throw Error(r(160));Nb(y,C,b),Mn=null,xa=!1,y=b.alternate,y!==null&&(y.return=null),b.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)hu(o,i),o=o.sibling}var Ua=null;function hu(i,o){var c=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Sa(o,i),Bi(i),g&4&&($s(3,i,i.return),gu(3,i),$s(5,i,i.return));break;case 1:Sa(o,i),Bi(i),g&512&&(Fn||c===null||_o(c,c.return)),g&64&&$o&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var b=Ua;if(Sa(o,i),Bi(i),g&512&&(Fn||c===null||_o(c,c.return)),g&4){var y=c!==null?c.memoizedState:null;if(g=i.memoizedState,c===null)if(g===null)if(i.stateNode===null){e:{g=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":y=b.getElementsByTagName("title")[0],(!y||y[fd]||y[vn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=b.createElement(g),b.head.insertBefore(y,b.querySelector("head > title"))),le(y,g,c),y[vn]=i,Yn(y),g=y;break e;case"link":var C=Ou("link","href",b).get(g+(c.href||""));if(C){for(var O=0;O<C.length;O++)if(y=C[O],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(O,1);break t}}y=b.createElement(g),le(y,g,c),b.head.appendChild(y);break;case"meta":if(C=Ou("meta","content",b).get(g+(c.content||""))){for(O=0;O<C.length;O++)if(y=C[O],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(O,1);break t}}y=b.createElement(g),le(y,g,c),b.head.appendChild(y);break;default:throw Error(r(468,g))}y[vn]=i,Yn(y),g=y}i.stateNode=g}else ov(b,i.type,i.stateNode);else i.stateNode=ah(b,g,i.memoizedProps);else y!==g?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,g===null?ov(b,i.type,i.stateNode):ah(b,g,i.memoizedProps)):g===null&&i.stateNode!==null&&Yl(i,i.memoizedProps,c.memoizedProps)}break;case 27:Sa(o,i),Bi(i),g&512&&(Fn||c===null||_o(c,c.return)),c!==null&&g&4&&Yl(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Sa(o,i),Bi(i),g&512&&(Fn||c===null||_o(c,c.return)),i.flags&32){b=i.stateNode;try{xl(b,"")}catch(fe){hn(i,i.return,fe)}}g&4&&i.stateNode!=null&&(b=i.memoizedProps,Yl(i,b,c!==null?c.memoizedProps:b)),g&1024&&(Ip=!0);break;case 6:if(Sa(o,i),Bi(i),g&4){if(i.stateNode===null)throw Error(r(162));g=i.memoizedProps,c=i.stateNode;try{c.nodeValue=g}catch(fe){hn(i,i.return,fe)}}break;case 3:if(wf=null,b=Ua,Ua=hi(o.containerInfo),Sa(o,i),Ua=b,Bi(i),g&4&&c!==null&&c.memoizedState.isDehydrated)try{zu(o.containerInfo)}catch(fe){hn(i,i.return,fe)}Ip&&(Ip=!1,Zl(i));break;case 4:g=Ua,Ua=hi(i.stateNode.containerInfo),Sa(o,i),Bi(i),Ua=g;break;case 12:Sa(o,i),Bi(i);break;case 13:Sa(o,i),Bi(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Bb=Tt()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,rf(i,g)));break;case 22:b=i.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,ee=$o,we=Fn;if($o=ee||b,Fn=we||j,Sa(o,i),Fn=we,$o=ee,Bi(i),g&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(c===null||j||$o||Fn||Vr(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){j=c=o;try{if(y=j.stateNode,b)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=j.stateNode;var Te=j.memoizedProps.style,ae=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;O.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(fe){hn(j,j.return,fe)}}}else if(o.tag===6){if(c===null){j=o;try{j.stateNode.nodeValue=b?"":j.memoizedProps}catch(fe){hn(j,j.return,fe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}g&4&&(g=i.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,rf(i,c))));break;case 19:Sa(o,i),Bi(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,rf(i,g)));break;case 30:break;case 21:break;default:Sa(o,i),Bi(i)}}function Bi(i){var o=i.flags;if(o&2){try{for(var c,g=i.return;g!==null;){if(m0(g)){c=g;break}g=g.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var b=c.stateNode,y=Ib(i);js(i,y,b);break;case 5:var C=c.stateNode;c.flags&32&&(xl(C,""),c.flags&=-33);var O=Ib(i);js(i,O,C);break;case 3:case 4:var j=c.stateNode.containerInfo,ee=Ib(i);ao(i,ee,j);break;default:throw Error(r(161))}}catch(we){hn(i,i.return,we)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Zl(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Zl(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Gr(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Dp(i,o.alternate,o),o=o.sibling}function Vr(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:$s(4,o,o.return),Vr(o);break;case 1:_o(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Rp(o,o.return,c),Vr(o);break;case 27:Fe(o.stateNode);case 26:case 5:_o(o,o.return),Vr(o);break;case 22:o.memoizedState===null&&Vr(o);break;case 30:Vr(o);break;default:Vr(o)}i=i.sibling}}function An(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var g=o.alternate,b=i,y=o,C=y.flags;switch(y.tag){case 0:case 11:case 15:An(b,y,c),gu(4,y);break;case 1:if(An(b,y,c),g=y,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ee){hn(g,g.return,ee)}if(g=y,b=g.updateQueue,b!==null){var O=g.stateNode;try{var j=b.shared.hiddenCallbacks;if(j!==null)for(b.shared.hiddenCallbacks=null,b=0;b<j.length;b++)tu(j[b],O)}catch(ee){hn(g,g.return,ee)}}c&&C&64&&h0(y),pu(y,y.return);break;case 27:b0(y);case 26:case 5:An(b,y,c),c&&g===null&&C&4&&Rb(y),pu(y,y.return);break;case 12:An(b,y,c);break;case 13:An(b,y,c),c&&C&4&&Lt(b,y);break;case 22:y.memoizedState===null&&An(b,y,c),pu(y,y.return);break;case 30:break;default:An(b,y,c)}o=o.sibling}}function Pb(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Ds(c))}function ro(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ds(i))}function jo(i,o,c,g){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Yr(i,o,c,g),o=o.sibling}function Yr(i,o,c,g){var b=o.flags;switch(o.tag){case 0:case 11:case 15:jo(i,o,c,g),b&2048&&gu(9,o);break;case 1:jo(i,o,c,g);break;case 3:jo(i,o,c,g),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ds(i)));break;case 12:if(b&2048){jo(i,o,c,g),i=o.stateNode;try{var y=o.memoizedProps,C=y.id,O=y.onPostCommit;typeof O=="function"&&O(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){hn(o,o.return,j)}}else jo(i,o,c,g);break;case 13:jo(i,o,c,g);break;case 23:break;case 22:y=o.stateNode,C=o.alternate,o.memoizedState!==null?y._visibility&2?jo(i,o,c,g):Ls(i,o):y._visibility&2?jo(i,o,c,g):(y._visibility|=2,Xl(i,o,c,g,(o.subtreeFlags&10256)!==0)),b&2048&&Pb(C,o);break;case 24:jo(i,o,c,g),b&2048&&ro(o.alternate,o);break;default:jo(i,o,c,g)}}function Xl(i,o,c,g,b){for(b=b&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=i,C=o,O=c,j=g,ee=C.flags;switch(C.tag){case 0:case 11:case 15:Xl(y,C,O,j,b),gu(8,C);break;case 23:break;case 22:var we=C.stateNode;C.memoizedState!==null?we._visibility&2?Xl(y,C,O,j,b):Ls(y,C):(we._visibility|=2,Xl(y,C,O,j,b)),b&&ee&2048&&Pb(C.alternate,C);break;case 24:Xl(y,C,O,j,b),b&&ee&2048&&ro(C.alternate,C);break;default:Xl(y,C,O,j,b)}o=o.sibling}}function Ls(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,g=o,b=g.flags;switch(g.tag){case 22:Ls(c,g),b&2048&&Pb(g.alternate,g);break;case 24:Ls(c,g),b&2048&&ro(g.alternate,g);break;default:Ls(c,g)}o=o.sibling}}var Jt=8192;function Bs(i){if(i.subtreeFlags&Jt)for(i=i.child;i!==null;)pi(i),i=i.sibling}function pi(i){switch(i.tag){case 26:Bs(i),i.flags&Jt&&i.memoizedState!==null&&$0(Ua,i.memoizedState,i.memoizedProps);break;case 5:Bs(i);break;case 3:case 4:var o=Ua;Ua=hi(i.stateNode.containerInfo),Bs(i),Ua=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Jt,Jt=16777216,Bs(i),Jt=o):Bs(i));break;default:Bs(i)}}function y0(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function mu(i){var o=i.deletions;if(i.flags&16){if(o!==null)for(var c=0;c<o.length;c++){var g=o[c];ni=g,Pa(g,i)}y0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zp(i),i=i.sibling}function zp(i){switch(i.tag){case 0:case 11:case 15:mu(i),i.flags&2048&&$s(9,i,i.return);break;case 3:mu(i);break;case 12:mu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,sf(i)):mu(i);break;default:mu(i)}}function sf(i){var o=i.deletions;if(i.flags&16){if(o!==null)for(var c=0;c<o.length;c++){var g=o[c];ni=g,Pa(g,i)}y0(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:$s(8,o,o.return),sf(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,sf(o));break;default:sf(o)}i=i.sibling}}function Pa(i,o){for(;ni!==null;){var c=ni;switch(c.tag){case 0:case 11:case 15:$s(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Ds(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,ni=g;else e:for(c=i;ni!==null;){g=ni;var b=g.sibling,y=g.return;if(zb(g),g===c){ni=null;break e}if(b!==null){b.return=y,ni=b;break e}ni=y}}}var x0={getCacheForType:function(i){var o=Mi(ei),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c}},_b=typeof WeakMap=="function"?WeakMap:Map,ln=0,pn=null,Bt=null,Xt=0,Wt=0,wa=null,Zr=!1,Hs=!1,$b=!1,Xr=0,qn=0,Fs=0,qs=0,jb=0,si=0,bu=0,lf=null,Wi=null,Lb=!1,Bb=0,Np=1/0,Up=null,ir=null,Ai=0,Gs=null,Vs=null,vu=0,Ea=0,Pp=null,Hb=null,yu=0,_p=null;function _a(){if(ln&2&&Xt!==0)return Xt&-Xt;if(F.T!==null){var i=zs;return i!==0?i:Yp()}return Zo()}function S0(){si===0&&(si=!(Xt&536870912)||zt?X():536870912);var i=ti.current;return i!==null&&(i.flags|=32),si}function Ca(i,o,c){(i===pn&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)&&(Lo(i,0),Qr(i,Xt,si,!1)),Ve(i,c),(!(ln&2)||i!==pn)&&(i===pn&&(!(ln&2)&&(qs|=c),qn===4&&Qr(i,Xt,si,!1)),Bo(i))}function w0(i,o,c){if(ln&6)throw Error(r(327));var g=!c&&(o&124)===0&&(o&i.expiredLanes)===0||Za(i,o),b=g?jp(i,o):Ql(i,o,!0),y=g;do{if(b===0){Hs&&!g&&Qr(i,o,0,!1);break}else{if(c=i.current.alternate,y&&!$p(c)){b=Ql(i,o,!1),y=!1;continue}if(b===2){if(y=o,i.errorRecoveryDisabledLanes&y)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var O=i;b=lf;var j=O.current.memoizedState.isDehydrated;if(j&&(Lo(O,C).flags|=256),C=Ql(O,C,!1),C!==2){if($b&&!j){O.errorRecoveryDisabledLanes|=y,qs|=y,b=4;break e}y=Wi,Wi=b,y!==null&&(Wi===null?Wi=y:Wi.push.apply(Wi,y))}b=C}if(y=!1,b!==2)continue}}if(b===1){Lo(i,0),Qr(i,o,0,!0);break}e:{switch(g=i,y=b,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Qr(g,o,si,!Zr);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(b=Bb+300-Tt(),10<b)){if(Qr(g,o,si,!Zr),sa(g,0,!0)!==0)break e;g.timeoutHandle=rr(xu.bind(null,g,c,Wi,Up,Lb,o,si,qs,bu,Zr,y,2,-0,0),b);break e}xu(g,c,Wi,Up,Lb,o,si,qs,bu,Zr,y,0,-0,0)}}break}while(!0);Bo(i)}function xu(i,o,c,g,b,y,C,O,j,ee,we,Te,ae,fe){if(i.timeoutHandle=-1,Te=o.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:_0},pi(o),Te=j0(),Te!==null)){i.cancelPendingCommit=Te(T0.bind(null,i,o,y,c,g,b,C,O,j,we,1,ae,fe)),Qr(i,y,C,!ee);return}T0(i,o,y,c,g,b,C,O,j)}function $p(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var b=c[g],y=b.getSnapshot;b=b.value;try{if(!Qi(y(),b))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Qr(i,o,c,g){o&=~jb,o&=~qs,i.suspendedLanes|=o,i.pingedLanes&=~o,g&&(i.warmLanes|=o),g=i.expirationTimes;for(var b=o;0<b;){var y=31-Vn(b),C=1<<y;g[y]=-1,b&=~C}c!==0&&Et(i,c,o)}function cf(){return ln&6?!0:(Kr(0),!1)}function Su(){if(Bt!==null){if(Wt===0)var i=Bt.return;else i=Bt,Ro=Pr=null,iu(i),ba=null,su=0,i=Bt;for(;i!==null;)p0(i.alternate,i),i=i.return;Bt=null}}function Lo(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Jb(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Su(),pn=i,Bt=c=ko(i.current,null),Xt=o,Wt=0,wa=null,Zr=!1,Hs=Za(i,o),$b=!1,bu=si=jb=qs=Fs=qn=0,Wi=lf=null,Lb=!1,o&8&&(o|=o&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=o;0<g;){var b=31-Vn(g),y=1<<b;o|=i[b],g&=~y}return Xr=o,Co(),c}function wu(i,o){Ct=null,F.H=Wd,o===Pl||o===Kc?(o=op(),Wt=3):o===_d?(o=op(),Wt=4):Wt=o===xb?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,wa=o,Bt===null&&(qn=1,ql(i,Ia(o,i.current)))}function Fb(){var i=F.H;return F.H=Wd,i===null?Wd:i}function E0(){var i=F.A;return F.A=x0,i}function Ys(){qn=4,Zr||(Xt&4194048)!==Xt&&ti.current!==null||(Hs=!0),!(Fs&134217727)&&!(qs&134217727)||pn===null||Qr(pn,Xt,si,!1)}function Ql(i,o,c){var g=ln;ln|=2;var b=Fb(),y=E0();(pn!==i||Xt!==o)&&(Up=null,Lo(i,o)),o=!1;var C=qn;e:do try{if(Wt!==0&&Bt!==null){var O=Bt,j=wa;switch(Wt){case 8:Su(),C=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(o=!0);var ee=Wt;if(Wt=0,wa=null,Kl(i,O,j,ee),c&&Hs){C=0;break e}break;default:ee=Wt,Wt=0,wa=null,Kl(i,O,j,ee)}}C0(),C=qn;break}catch(we){wu(i,we)}while(!0);return o&&i.shellSuspendCounter++,Ro=Pr=null,ln=g,F.H=b,F.A=y,Bt===null&&(pn=null,Xt=0,Co()),C}function C0(){for(;Bt!==null;)Lp(Bt)}function jp(i,o){var c=ln;ln|=2;var g=Fb(),b=E0();pn!==i||Xt!==o?(Up=null,Np=Tt()+500,Lo(i,o)):Hs=Za(i,o);e:do try{if(Wt!==0&&Bt!==null){o=Bt;var y=wa;t:switch(Wt){case 1:Wt=0,wa=null,Kl(i,o,y,1);break;case 2:case 9:if(Hm(y)){Wt=0,wa=null,Gb(o);break}o=function(){Wt!==2&&Wt!==9||pn!==i||(Wt=7),Bo(i)},y.then(o,o);break e;case 3:Wt=7;break e;case 4:Wt=5;break e;case 7:Hm(y)?(Wt=0,wa=null,Gb(o)):(Wt=0,wa=null,Kl(i,o,y,7));break;case 5:var C=null;switch(Bt.tag){case 26:C=Bt.memoizedState;case 5:case 27:var O=Bt;if(!C||rv(C)){Wt=0,wa=null;var j=O.sibling;if(j!==null)Bt=j;else{var ee=O.return;ee!==null?(Bt=ee,Bp(ee)):Bt=null}break t}}Wt=0,wa=null,Kl(i,o,y,5);break;case 6:Wt=0,wa=null,Kl(i,o,y,6);break;case 8:Su(),qn=6;break e;default:throw Error(r(462))}}qb();break}catch(we){wu(i,we)}while(!0);return Ro=Pr=null,F.H=g,F.A=b,ln=c,Bt!==null?0:(pn=null,Xt=0,Co(),qn)}function qb(){for(;Bt!==null&&!Ei();)Lp(Bt)}function Lp(i){var o=Mb(i.alternate,i,Xr);i.memoizedProps=i.pendingProps,o===null?Bp(i):Bt=o}function Gb(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=wb(c,o,o.pendingProps,o.type,void 0,Xt);break;case 11:o=wb(c,o,o.pendingProps,o.type.render,o.ref,Xt);break;case 5:iu(o);default:p0(c,o),o=Bt=Jg(o,Xr),o=Mb(c,o,Xr)}i.memoizedProps=i.pendingProps,o===null?Bp(i):Bt=o}function Kl(i,o,c,g){Ro=Pr=null,iu(o),ba=null,su=0;var b=o.return;try{if(Na(i,b,o,c,Xt)){qn=1,ql(i,Ia(c,i.current)),Bt=null;return}}catch(y){if(b!==null)throw Bt=b,y;qn=1,ql(i,Ia(c,i.current)),Bt=null;return}o.flags&32768?(zt||g===1?i=!0:Hs||Xt&536870912?i=!1:(Zr=i=!0,(g===2||g===9||g===3||g===6)&&(g=ti.current,g!==null&&g.tag===13&&(g.flags|=16384))),Vb(o,i)):Bp(o)}function Bp(i){var o=i;do{if(o.flags&32768){Vb(o,Zr);return}i=o.return;var c=gn(o.alternate,o,Xr);if(c!==null){Bt=c;return}if(o=o.sibling,o!==null){Bt=o;return}Bt=o=i}while(o!==null);qn===0&&(qn=5)}function Vb(i,o){do{var c=Ob(i.alternate,i);if(c!==null){c.flags&=32767,Bt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Bt=i;return}Bt=i=c}while(i!==null);qn=6,Bt=null}function T0(i,o,c,g,b,y,C,O,j){i.cancelPendingCommit=null;do Fp();while(Ai!==0);if(ln&6)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=Ad,Pt(i,c,y,C,O,j),i===pn&&(Bt=pn=null,Xt=0),Vs=o,Gs=i,vu=c,Ea=y,Pp=b,Hb=g,o.subtreeFlags&10256||o.flags&10256?(i.callbackNode=null,i.callbackPriority=0,qS(Ae,function(){return A0(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(o.flags&13878)!==0,o.subtreeFlags&13878||g){g=F.T,F.T=null,b=q.p,q.p=2,C=ln,ln|=4;try{v0(i,o,c)}finally{ln=C,q.p=b,F.T=g}}Ai=1,k0(),M0(),uf()}}function k0(){if(Ai===1){Ai=0;var i=Gs,o=Vs,c=(o.flags&13878)!==0;if(o.subtreeFlags&13878||c){c=F.T,F.T=null;var g=q.p;q.p=2;var b=ln;ln|=4;try{hu(o,i);var y=vf,C=kd(i.containerInfo),O=y.focusedElem,j=y.selectionRange;if(C!==O&&O&&O.ownerDocument&&Tn(O.ownerDocument.documentElement,O)){if(j!==null&&Yg(O)){var ee=j.start,we=j.end;if(we===void 0&&(we=ee),"selectionStart"in O)O.selectionStart=ee,O.selectionEnd=Math.min(we,O.value.length);else{var Te=O.ownerDocument||document,ae=Te&&Te.defaultView||window;if(ae.getSelection){var fe=ae.getSelection(),gt=O.textContent.length,lt=Math.min(j.start,gt),rn=j.end===void 0?lt:Math.min(j.end,gt);!fe.extend&&lt>rn&&(C=rn,rn=lt,lt=C);var Q=Ts(O,lt),V=Ts(O,rn);if(Q&&V&&(fe.rangeCount!==1||fe.anchorNode!==Q.node||fe.anchorOffset!==Q.offset||fe.focusNode!==V.node||fe.focusOffset!==V.offset)){var te=Te.createRange();te.setStart(Q.node,Q.offset),fe.removeAllRanges(),lt>rn?(fe.addRange(te),fe.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),fe.addRange(te))}}}}for(Te=[],fe=O;fe=fe.parentNode;)fe.nodeType===1&&Te.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<Te.length;O++){var Ee=Te[O];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Tf=!!Kb,vf=Kb=null}finally{ln=b,q.p=g,F.T=c}}i.current=o,Ai=2}}function M0(){if(Ai===2){Ai=0;var i=Gs,o=Vs,c=(o.flags&8772)!==0;if(o.subtreeFlags&8772||c){c=F.T,F.T=null;var g=q.p;q.p=2;var b=ln;ln|=4;try{Dp(i,o.alternate,o)}finally{ln=b,q.p=g,F.T=c}}Ai=3}}function uf(){if(Ai===4||Ai===3){Ai=0,Un();var i=Gs,o=Vs,c=vu,g=Hb;o.subtreeFlags&10256||o.flags&10256?Ai=5:(Ai=0,Vs=Gs=null,Hp(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(ir=null),Jn(c),o=o.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot($e,o,void 0,(o.current.flags&128)===128)}catch{}if(g!==null){o=F.T,b=q.p,q.p=2,F.T=null;try{for(var y=i.onRecoverableError,C=0;C<g.length;C++){var O=g[C];y(O.value,{componentStack:O.stack})}}finally{F.T=o,q.p=b}}vu&3&&Fp(),Bo(i),b=i.pendingLanes,c&4194090&&b&42?i===_p?yu++:(yu=0,_p=i):yu=0,Kr(0)}}function Hp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Ds(o)))}function Fp(i){return k0(),M0(),uf(),A0()}function A0(){if(Ai!==5)return!1;var i=Gs,o=Ea;Ea=0;var c=Jn(vu),g=F.T,b=q.p;try{q.p=32>c?32:c,F.T=null,c=Pp,Pp=null;var y=Gs,C=vu;if(Ai=0,Vs=Gs=null,vu=0,ln&6)throw Error(r(331));var O=ln;if(ln|=4,zp(y.current),Yr(y,y.current,C,c),ln=O,Kr(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot($e,y)}catch{}return!0}finally{q.p=b,F.T=g,Hp(i,o)}}function Yb(i,o,c){o=Ia(c,o),o=Ep(i.stateNode,o,2),i=pa(i,o,2),i!==null&&(Ve(i,2),Bo(i))}function hn(i,o,c){if(i.tag===3)Yb(i,i,c);else for(;o!==null;){if(o.tag===3){Yb(o,i,c);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ir===null||!ir.has(g))){i=Ia(c,i),c=u0(2),g=pa(o,c,2),g!==null&&(yb(c,g,o,i),Ve(g,2),Bo(g));break}}o=o.return}}function df(i,o,c){var g=i.pingCache;if(g===null){g=i.pingCache=new _b;var b=new Set;g.set(o,b)}else b=g.get(o),b===void 0&&(b=new Set,g.set(o,b));b.has(c)||($b=!0,b.add(c),i=O0.bind(null,i,o,c),o.then(i,i))}function O0(i,o,c){var g=i.pingCache;g!==null&&g.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,pn===i&&(Xt&c)===c&&(qn===4||qn===3&&(Xt&62914560)===Xt&&300>Tt()-Bb?!(ln&2)&&Lo(i,0):jb|=c,bu===Xt&&(bu=0)),Bo(i)}function qp(i,o){o===0&&(o=ze()),i=zr(i,o),i!==null&&(Ve(i,o),Bo(i))}function R0(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),qp(i,c)}function FS(i,o){var c=0;switch(i.tag){case 13:var g=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(o),qp(i,c)}function qS(i,o){return yt(i,o)}var Gp=null,Eu=null,ff=!1,Cu=!1,gf=!1,Zs=0;function Bo(i){i!==Eu&&i.next===null&&(Eu===null?Gp=Eu=i:Eu=Eu.next=i),Cu=!0,ff||(ff=!0,Vp())}function Kr(i,o){if(!gf&&Cu){gf=!0;do for(var c=!1,g=Gp;g!==null;){if(i!==0){var b=g.pendingLanes;if(b===0)var y=0;else{var C=g.suspendedLanes,O=g.pingedLanes;y=(1<<31-Vn(42|i)+1)-1,y&=b&~(C&~O),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,I0(g,y))}else y=Xt,y=sa(g,g===pn?y:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),!(y&3)||Za(g,y)||(c=!0,I0(g,y));g=g.next}while(c);gf=!1}}function GS(){Zb()}function Zb(){Cu=ff=!1;var i=0;Zs!==0&&(eh()&&(i=Zs),Zs=0);for(var o=Tt(),c=null,g=Gp;g!==null;){var b=g.next,y=pf(g,o);y===0?(g.next=null,c===null?Gp=b:c.next=b,b===null&&(Eu=c)):(c=g,(i!==0||y&3)&&(Cu=!0)),g=b}Kr(i)}function pf(i,o){for(var c=i.suspendedLanes,g=i.pingedLanes,b=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var C=31-Vn(y),O=1<<C,j=b[C];j===-1?(!(O&c)||O&g)&&(b[C]=I(O,o)):j<=o&&(i.expiredLanes|=O),y&=~O}if(o=pn,c=Xt,c=sa(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,c===0||i===o&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&nn(g),i.callbackNode=null,i.callbackPriority=0;if(!(c&3)||Za(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(g!==null&&nn(g),Jn(c)){case 2:case 8:c=Gt;break;case 32:c=Ae;break;case 268435456:c=kt;break;default:c=Ae}return g=Xb.bind(null,i),c=yt(c,g),i.callbackPriority=o,i.callbackNode=c,o}return g!==null&&g!==null&&nn(g),i.callbackPriority=2,i.callbackNode=null,2}function Xb(i,o){if(Ai!==0&&Ai!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Fp()&&i.callbackNode!==c)return null;var g=Xt;return g=sa(i,i===pn?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(w0(i,g,o),pf(i,Tt()),i.callbackNode!=null&&i.callbackNode===c?Xb.bind(null,i):null)}function I0(i,o){if(Fp())return null;w0(i,o,!0)}function Vp(){ZS(function(){ln&6?yt(Ne,GS):Zb()})}function Yp(){return Zs===0&&(Zs=X()),Zs}function Tu(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:bd(""+i)}function Zp(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function Xp(i,o,c,g,b){if(o==="submit"&&c&&c.stateNode===b){var y=Tu((b[_i]||null).action),C=g.submitter;C&&(o=(o=C[_i]||null)?Tu(o.formAction):C.getAttribute("formAction"),o!==null&&(y=o,C=null));var O=new xd("action","action",null,g,b);i.push({event:O,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Zs!==0){var j=C?Zp(b,C):new FormData(b);lb(c,{pending:!0,data:j,method:b.method,action:y},null,j)}}else typeof y=="function"&&(O.preventDefault(),j=C?Zp(b,C):new FormData(b),lb(c,{pending:!0,data:j,method:b.method,action:y},y,j))},currentTarget:b}]})}}for(var Qp=0;Qp<Qg.length;Qp++){var Gn=Qg[Qp],Qb=Gn.toLowerCase(),VS=Gn[0].toUpperCase()+Gn.slice(1);ua(Qb,"on"+VS)}ua(Md,"onAnimationEnd"),ua(Wy,"onAnimationIteration"),ua(Dm,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(jS,"onTransitionRun"),ua(zm,"onTransitionStart"),ua(Xg,"onTransitionCancel"),ua(Nm,"onTransitionEnd"),vl("onMouseEnter",["mouseout","mouseover"]),vl("onMouseLeave",["mouseout","mouseover"]),vl("onPointerEnter",["pointerout","pointerover"]),vl("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var St="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(St));function Jr(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var g=i[c],b=g.event;g=g.listeners;e:{var y=void 0;if(o)for(var C=g.length-1;0<=C;C--){var O=g[C],j=O.instance,ee=O.currentTarget;if(O=O.listener,j!==y&&b.isPropagationStopped())break e;y=O,b.currentTarget=ee;try{y(b)}catch(we){nf(we)}b.currentTarget=null,y=j}else for(C=0;C<g.length;C++){if(O=g[C],j=O.instance,ee=O.currentTarget,O=O.listener,j!==y&&b.isPropagationStopped())break e;y=O,b.currentTarget=ee;try{y(b)}catch(we){nf(we)}b.currentTarget=null,y=j}}}}function Mt(i,o){var c=o[rm];c===void 0&&(c=o[rm]=new Set);var g=i+"__bubble";c.has(g)||(D0(o,i,2,!1),c.add(g))}function Xs(i,o,c){var g=0;o&&(g|=4),D0(c,i,g,o)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function hf(i){if(!i[Jl]){i[Jl]=!0,sm.forEach(function(c){c!=="selectionchange"&&(YS.has(c)||Xs(c,!1,i),Xs(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Jl]||(o[Jl]=!0,Xs("selectionchange",!1,o))}}function D0(i,o,c,g){switch(F0(o)){case 2:var b=B0;break;case 8:b=H0;break;default:b=lh}c=b.bind(null,o,c,i),b=void 0,!zg||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),g?b!==void 0?i.addEventListener(o,c,{capture:!0,passive:b}):i.addEventListener(o,c,!0):b!==void 0?i.addEventListener(o,c,{passive:b}):i.addEventListener(o,c,!1)}function mf(i,o,c,g,b){var y=g;if(!(o&1)&&!(o&2)&&g!==null)e:for(;;){if(g===null)return;var C=g.tag;if(C===3||C===4){var O=g.stateNode.containerInfo;if(O===b)break;if(C===4)for(C=g.return;C!==null;){var j=C.tag;if((j===3||j===4)&&C.stateNode.containerInfo===b)return;C=C.return}for(;O!==null;){if(C=ys(O),C===null)return;if(j=C.tag,j===5||j===6||j===26||j===27){g=y=C;continue e}O=O.parentNode}}g=g.return}Hy(function(){var ee=y,we=Sl(c),Te=[];e:{var ae=Um.get(i);if(ae!==void 0){var fe=xd,gt=i;switch(i){case"keypress":if(yd(c)===0)break e;case"keydown":case"keyup":fe=Tl;break;case"focusin":gt="focus",fe=ym;break;case"focusout":gt="blur",fe=ym;break;case"beforeblur":case"afterblur":fe=ym;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=jg;break;case Md:case Wy:case Dm:fe=US;break;case Nm:fe=ca;break;case"scroll":case"scrollend":fe=zS;break;case"wheel":fe=Lg;break;case"copy":case"cut":case"paste":fe=_S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=la;break;case"toggle":case"beforetoggle":fe=Em}var lt=(o&4)!==0,rn=!lt&&(i==="scroll"||i==="scrollend"),Q=lt?ae!==null?ae+"Capture":null:ae;lt=[];for(var V=ee,te;V!==null;){var Ee=V;if(te=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||te===null||Q===null||(Ee=Or(V,Q),Ee!=null&&lt.push(Ta(V,Ee,te))),rn)break;V=V.return}0<lt.length&&(ae=new fe(ae,gt,null,c,we),Te.push({event:ae,listeners:lt}))}}if(!(o&7)){e:{if(ae=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",ae&&c!==Dg&&(gt=c.relatedTarget||c.fromElement)&&(ys(gt)||gt[bl]))break e;if((fe||ae)&&(ae=we.window===we?we:(ae=we.ownerDocument)?ae.defaultView||ae.parentWindow:window,fe?(gt=c.relatedTarget||c.toElement,fe=ee,gt=gt?ys(gt):null,gt!==null&&(rn=d(gt),lt=gt.tag,gt!==rn||lt!==5&&lt!==27&&lt!==6)&&(gt=null)):(fe=null,gt=ee),fe!==gt)){if(lt=wd,Ee="onMouseLeave",Q="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(lt=la,Ee="onPointerLeave",Q="onPointerEnter",V="pointer"),rn=fe==null?ae:Tc(fe),te=gt==null?ae:Tc(gt),ae=new lt(Ee,V+"leave",fe,c,we),ae.target=rn,ae.relatedTarget=te,Ee=null,ys(we)===ee&&(lt=new lt(Q,V+"enter",gt,c,we),lt.target=te,lt.relatedTarget=rn,Ee=lt),rn=Ee,fe&&gt)t:{for(lt=fe,Q=gt,V=0,te=lt;te;te=Ks(te))V++;for(te=0,Ee=Q;Ee;Ee=Ks(Ee))te++;for(;0<V-te;)lt=Ks(lt),V--;for(;0<te-V;)Q=Ks(Q),te--;for(;V--;){if(lt===Q||Q!==null&&lt===Q.alternate)break t;lt=Ks(lt),Q=Ks(Q)}lt=null}else lt=null;fe!==null&&Kp(Te,ae,fe,lt,!1),gt!==null&&rn!==null&&Kp(Te,rn,gt,lt,!0)}}e:{if(ae=ee?Tc(ee):window,fe=ae.nodeName&&ae.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ae.type==="file")var qe=Es;else if(Mm(ae))if(Am)qe=Rr;else{qe=Vg;var Nt=Jy}else fe=ae.nodeName,!fe||fe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ee&&Ic(ee.elementType)&&(qe=Es):qe=Cs;if(qe&&(qe=qe(i,ee))){qg(Te,qe,c,we);break e}Nt&&Nt(i,ae,ee),i==="focusout"&&ee&&ae.type==="number"&&ee.memoizedProps.value!=null&&hd(ae,"number",ae.value)}switch(Nt=ee?Tc(ee):window,i){case"focusin":(Mm(Nt)||Nt.contentEditable==="true")&&(Ja=Nt,Dl=ee,Ra=null);break;case"focusout":Ra=Dl=Ja=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,jc(Te,c,we);break;case"selectionchange":if(Im)break;case"keydown":case"keyup":jc(Te,c,we)}var rt;if(Bg)e:{switch(i){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Ka?Fg(i,c)&&(pt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(pt="onCompositionStart");pt&&(Hg&&c.locale!=="ko"&&(Ka||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Ka&&(rt=vd()):(Qa=we,Ng="value"in Qa?Qa.value:Qa.textContent,Ka=!0)),Nt=Qs(ee,pt),0<Nt.length&&(pt=new xm(pt,i,null,c,we),Te.push({event:pt,listeners:Nt}),rt?pt.data=rt:(rt=Cd(c),rt!==null&&(pt.data=rt)))),(rt=$S?Tm(i,c):km(i,c))&&(pt=Qs(ee,"onBeforeInput"),0<pt.length&&(Nt=new xm("onBeforeInput","beforeinput",null,c,we),Te.push({event:Nt,listeners:pt}),Nt.data=rt)),Xp(Te,i,ee,c,we)}Jr(Te,o)})}function Ta(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Qs(i,o){for(var c=o+"Capture",g=[];i!==null;){var b=i,y=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||y===null||(b=Or(i,c),b!=null&&g.unshift(Ta(i,b,y)),b=Or(i,o),b!=null&&g.push(Ta(i,b,y))),i.tag===3)return g;i=i.return}return[]}function Ks(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Kp(i,o,c,g,b){for(var y=o._reactName,C=[];c!==null&&c!==g;){var O=c,j=O.alternate,ee=O.stateNode;if(O=O.tag,j!==null&&j===g)break;O!==5&&O!==26&&O!==27||ee===null||(j=ee,b?(ee=Or(c,y),ee!=null&&C.unshift(Ta(c,ee,j))):b||(ee=Or(c,y),ee!=null&&C.push(Ta(c,ee,j)))),c=c.return}C.length!==0&&i.push({event:o,listeners:C})}var Jp=/\r\n?/g,$a=/\u0000|\uFFFD/g;function Wp(i){return(typeof i=="string"?i:""+i).replace(Jp,`
`).replace($a,"")}function z0(i,o){return o=Wp(o),Wp(i)===o}function bf(){}function mn(i,o,c,g,b,y){switch(c){case"children":typeof g=="string"?o==="body"||o==="textarea"&&g===""||xl(i,g):(typeof g=="number"||typeof g=="bigint")&&o!=="body"&&xl(i,""+g);break;case"className":Mr(i,"class",g);break;case"tabIndex":Mr(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(i,c,g);break;case"style":Ig(i,g,y);break;case"data":if(o!=="object"){Mr(i,"data",g);break}case"src":case"href":if(g===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(c);break}g=bd(""+g),i.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(o!=="input"&&mn(i,o,"name",b.name,b,null),mn(i,o,"formEncType",b.formEncType,b,null),mn(i,o,"formMethod",b.formMethod,b,null),mn(i,o,"formTarget",b.formTarget,b,null)):(mn(i,o,"encType",b.encType,b,null),mn(i,o,"method",b.method,b,null),mn(i,o,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(c);break}g=bd(""+g),i.setAttribute(c,g);break;case"onClick":g!=null&&(i.onclick=bf);break;case"onScroll":g!=null&&Mt("scroll",i);break;case"onScrollEnd":g!=null&&Mt("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(c=g.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}c=bd(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,""+g):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":g===!0?i.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,g):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(c,g):i.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(c):i.setAttribute(c,g);break;case"popover":Mt("beforetoggle",i),Mt("toggle",i),pd(i,"popover",g);break;case"xlinkActuate":Qo(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Qo(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Qo(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Qo(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Qo(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Qo(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Qo(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Qo(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Qo(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":pd(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=md.get(c)||c,pd(i,c,g))}}function li(i,o,c,g,b,y){switch(c){case"style":Ig(i,g,y);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(c=g.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof g=="string"?xl(i,g):(typeof g=="number"||typeof g=="bigint")&&xl(i,""+g);break;case"onScroll":g!=null&&Mt("scroll",i);break;case"onScrollEnd":g!=null&&Mt("scrollend",i);break;case"onClick":g!=null&&(i.onclick=bf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gd.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),o=c.slice(2,b?c.length-7:void 0),y=i[_i]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(o,y,b),typeof g=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,g,b);break e}c in i?i[c]=g:g===!0?i.setAttribute(c,""):pd(i,c,g)}}}function le(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",i),Mt("load",i);var g=!1,b=!1,y;for(y in c)if(c.hasOwnProperty(y)){var C=c[y];if(C!=null)switch(y){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mn(i,o,y,C,c,null)}}b&&mn(i,o,"srcSet",c.srcSet,c,null),g&&mn(i,o,"src",c.src,c,null);return;case"input":Mt("invalid",i);var O=y=C=b=null,j=null,ee=null;for(g in c)if(c.hasOwnProperty(g)){var we=c[g];if(we!=null)switch(g){case"name":b=we;break;case"type":C=we;break;case"checked":j=we;break;case"defaultChecked":ee=we;break;case"value":y=we;break;case"defaultValue":O=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,o));break;default:mn(i,o,g,we,c,null)}}gm(i,y,O,j,ee,C,b,!1),Oc(i);return;case"select":Mt("invalid",i),g=C=y=null;for(b in c)if(c.hasOwnProperty(b)&&(O=c[b],O!=null))switch(b){case"value":y=O;break;case"defaultValue":C=O;break;case"multiple":g=O;default:mn(i,o,b,O,c,null)}o=y,c=C,i.multiple=!!g,o!=null?Ss(i,!!g,o,!1):c!=null&&Ss(i,!!g,c,!0);return;case"textarea":Mt("invalid",i),y=b=g=null;for(C in c)if(c.hasOwnProperty(C)&&(O=c[C],O!=null))switch(C){case"value":g=O;break;case"defaultValue":b=O;break;case"children":y=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:mn(i,o,C,O,c,null)}hm(i,g,b,y),Oc(i);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(g=c[j],g!=null))switch(j){case"selected":i.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:mn(i,o,j,g,c,null)}return;case"dialog":Mt("beforetoggle",i),Mt("toggle",i),Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":Mt("load",i);break;case"video":case"audio":for(g=0;g<St.length;g++)Mt(St[g],i);break;case"image":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"embed":case"source":case"link":Mt("error",i),Mt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in c)if(c.hasOwnProperty(ee)&&(g=c[ee],g!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mn(i,o,ee,g,c,null)}return;default:if(Ic(o)){for(we in c)c.hasOwnProperty(we)&&(g=c[we],g!==void 0&&li(i,o,we,g,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(g=c[O],g!=null&&mn(i,o,O,g,c,null))}function on(i,o,c,g){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,y=null,C=null,O=null,j=null,ee=null,we=null;for(fe in c){var Te=c[fe];if(c.hasOwnProperty(fe)&&Te!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":j=Te;default:g.hasOwnProperty(fe)||mn(i,o,fe,null,g,Te)}}for(var ae in g){var fe=g[ae];if(Te=c[ae],g.hasOwnProperty(ae)&&(fe!=null||Te!=null))switch(ae){case"type":y=fe;break;case"name":b=fe;break;case"checked":ee=fe;break;case"defaultChecked":we=fe;break;case"value":C=fe;break;case"defaultValue":O=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,o));break;default:fe!==Te&&mn(i,o,ae,fe,g,Te)}}fm(i,C,O,j,ee,we,y,b);return;case"select":fe=C=O=ae=null;for(y in c)if(j=c[y],c.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":fe=j;default:g.hasOwnProperty(y)||mn(i,o,y,null,g,j)}for(b in g)if(y=g[b],j=c[b],g.hasOwnProperty(b)&&(y!=null||j!=null))switch(b){case"value":ae=y;break;case"defaultValue":O=y;break;case"multiple":C=y;default:y!==j&&mn(i,o,b,y,g,j)}o=O,c=C,g=fe,ae!=null?Ss(i,!!c,ae,!1):!!g!=!!c&&(o!=null?Ss(i,!!c,o,!0):Ss(i,!!c,c?[]:"",!1));return;case"textarea":fe=ae=null;for(O in c)if(b=c[O],c.hasOwnProperty(O)&&b!=null&&!g.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:mn(i,o,O,null,g,b)}for(C in g)if(b=g[C],y=c[C],g.hasOwnProperty(C)&&(b!=null||y!=null))switch(C){case"value":ae=b;break;case"defaultValue":fe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==y&&mn(i,o,C,b,g,y)}pm(i,ae,fe);return;case"option":for(var gt in c)if(ae=c[gt],c.hasOwnProperty(gt)&&ae!=null&&!g.hasOwnProperty(gt))switch(gt){case"selected":i.selected=!1;break;default:mn(i,o,gt,null,g,ae)}for(j in g)if(ae=g[j],fe=c[j],g.hasOwnProperty(j)&&ae!==fe&&(ae!=null||fe!=null))switch(j){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:mn(i,o,j,ae,g,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in c)ae=c[lt],c.hasOwnProperty(lt)&&ae!=null&&!g.hasOwnProperty(lt)&&mn(i,o,lt,null,g,ae);for(ee in g)if(ae=g[ee],fe=c[ee],g.hasOwnProperty(ee)&&ae!==fe&&(ae!=null||fe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:mn(i,o,ee,ae,g,fe)}return;default:if(Ic(o)){for(var rn in c)ae=c[rn],c.hasOwnProperty(rn)&&ae!==void 0&&!g.hasOwnProperty(rn)&&li(i,o,rn,void 0,g,ae);for(we in g)ae=g[we],fe=c[we],!g.hasOwnProperty(we)||ae===fe||ae===void 0&&fe===void 0||li(i,o,we,ae,g,fe);return}}for(var Q in c)ae=c[Q],c.hasOwnProperty(Q)&&ae!=null&&!g.hasOwnProperty(Q)&&mn(i,o,Q,null,g,ae);for(Te in g)ae=g[Te],fe=c[Te],!g.hasOwnProperty(Te)||ae===fe||ae==null&&fe==null||mn(i,o,Te,ae,g,fe)}var Kb=null,vf=null;function ku(i){return i.nodeType===9?i:i.ownerDocument}function ar(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wr(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Wl(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var or=null;function eh(){var i=window.event;return i&&i.type==="popstate"?i===or?!1:(or=i,!0):(or=null,!1)}var rr=typeof setTimeout=="function"?setTimeout:void 0,Jb=typeof clearTimeout=="function"?clearTimeout:void 0,N0=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof N0<"u"?function(i){return N0.resolve(null).then(i).catch(XS)}:rr;function XS(i){setTimeout(function(){throw i})}function Oi(i){return i==="head"}function U0(i,o){var c=o,g=0,b=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<g&&8>g){c=g;var C=i.ownerDocument;if(c&1&&Fe(C.documentElement),c&2&&Fe(C.body),c&4)for(c=C.head,Fe(c),C=c.firstChild;C;){var O=C.nextSibling,j=C.nodeName;C[fd]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&C.rel.toLowerCase()==="stylesheet"||c.removeChild(C),C=O}}if(b===0){i.removeChild(y),zu(o);return}b--}else c==="$"||c==="$?"||c==="$!"?b++:g=c.charCodeAt(0)-48;else g=0;c=y}while(c);zu(o)}function yf(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":yf(c),tt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Wb(i,o,c,g){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[fd])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Ho(i.nextSibling),i===null)break}return null}function Mu(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ho(i.nextSibling),i===null))return null;return i}function ev(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function tv(i,o){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")o();else{var g=function(){o(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function Ho(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var nv=null;function ec(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}function Ri(i,o,c){switch(o=ku(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Fe(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);tt(i)}var Xn=new Map,so=new Set;function hi(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var es=q.d;q.d={f:QS,r:th,D:sr,C:ns,L:nh,m:Js,X:ka,S:Hi,M:Ws};function QS(){var i=es.f(),o=cf();return i||o}function th(i){var o=Ti(i);o!==null&&o.tag===5&&o.type==="form"?o0(o):es.r(i)}var ts=typeof document>"u"?null:document;function ja(i,o,c){var g=ts;if(g&&typeof o=="string"&&o){var b=Xa(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),so.has(b)||(so.add(b),i={rel:i,crossOrigin:c,href:o},g.querySelector(b)===null&&(o=g.createElement("link"),le(o,"link",i),Yn(o),g.head.appendChild(o)))}}function sr(i){es.D(i),ja("dns-prefetch",i,null)}function ns(i,o){es.C(i,o),ja("preconnect",i,o)}function nh(i,o,c){es.L(i,o,c);var g=ts;if(g&&i&&o){var b='link[rel="preload"][as="'+Xa(o)+'"]';o==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+Xa(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+Xa(c.imageSizes)+'"]')):b+='[href="'+Xa(i)+'"]';var y=b;switch(o){case"style":y=Au(i);break;case"script":y=tc(i)}Xn.has(y)||(i=M({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Xn.set(y,i),g.querySelector(b)!==null||o==="style"&&g.querySelector(xf(y))||o==="script"&&g.querySelector(Fo(y))||(o=g.createElement("link"),le(o,"link",i),Yn(o),g.head.appendChild(o)))}}function Js(i,o){es.m(i,o);var c=ts;if(c&&i){var g=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+Xa(g)+'"][href="'+Xa(i)+'"]',y=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=tc(i)}if(!Xn.has(y)&&(i=M({rel:"modulepreload",href:i},o),Xn.set(y,i),c.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Fo(y)))return}g=c.createElement("link"),le(g,"link",i),Yn(g),c.head.appendChild(g)}}}function Hi(i,o,c){es.S(i,o,c);var g=ts;if(g&&i){var b=kc(g).hoistableStyles,y=Au(i);o=o||"default";var C=b.get(y);if(!C){var O={loading:0,preload:null};if(C=g.querySelector(xf(y)))O.loading=5;else{i=M({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Xn.get(y))&&av(i,c);var j=C=g.createElement("link");Yn(j),le(j,"link",i),j._p=new Promise(function(ee,we){j.onload=ee,j.onerror=we}),j.addEventListener("load",function(){O.loading|=1}),j.addEventListener("error",function(){O.loading|=2}),O.loading|=4,oh(C,o,g)}C={type:"stylesheet",instance:C,count:1,state:O},b.set(y,C)}}}function ka(i,o){es.X(i,o);var c=ts;if(c&&i){var g=kc(c).hoistableScripts,b=tc(i),y=g.get(b);y||(y=c.querySelector(Fo(b)),y||(i=M({src:i,async:!0},o),(o=Xn.get(b))&&rh(i,o),y=c.createElement("script"),Yn(y),le(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(b,y))}}function Ws(i,o){es.M(i,o);var c=ts;if(c&&i){var g=kc(c).hoistableScripts,b=tc(i),y=g.get(b);y||(y=c.querySelector(Fo(b)),y||(i=M({src:i,async:!0,type:"module"},o),(o=Xn.get(b))&&rh(i,o),y=c.createElement("script"),Yn(y),le(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(b,y))}}function ih(i,o,c,g){var b=(b=ke.current)?hi(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Au(c.href),c=kc(b).hoistableStyles,g=c.get(o),g||(g={type:"style",instance:null,count:0,state:null},c.set(o,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Au(c.href);var y=kc(b).hoistableStyles,C=y.get(i);if(C||(b=b.ownerDocument||b,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,C),(y=b.querySelector(xf(i)))&&!y._p&&(C.instance=y,C.state.loading=5),Xn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Xn.set(i,c),y||Sf(b,i,c,C.state))),o&&g===null)throw Error(r(528,""));return C}if(o&&g!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=tc(c),c=kc(b).hoistableScripts,g=c.get(o),g||(g={type:"script",instance:null,count:0,state:null},c.set(o,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Au(i){return'href="'+Xa(i)+'"'}function xf(i){return'link[rel="stylesheet"]['+i+"]"}function iv(i){return M({},i,{"data-precedence":i.precedence,precedence:null})}function Sf(i,o,c,g){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?g.loading=1:(o=i.createElement("link"),g.preload=o,o.addEventListener("load",function(){return g.loading|=1}),o.addEventListener("error",function(){return g.loading|=2}),le(o,"link",c),Yn(o),i.head.appendChild(o))}function tc(i){return'[src="'+Xa(i)+'"]'}function Fo(i){return"script[async]"+i}function ah(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var g=i.querySelector('style[data-href~="'+Xa(c.href)+'"]');if(g)return o.instance=g,Yn(g),g;var b=M({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),Yn(g),le(g,"style",b),oh(g,c.precedence,i),o.instance=g;case"stylesheet":b=Au(c.href);var y=i.querySelector(xf(b));if(y)return o.state.loading|=4,o.instance=y,Yn(y),y;g=iv(c),(b=Xn.get(b))&&av(g,b),y=(i.ownerDocument||i).createElement("link"),Yn(y);var C=y;return C._p=new Promise(function(O,j){C.onload=O,C.onerror=j}),le(y,"link",g),o.state.loading|=4,oh(y,c.precedence,i),o.instance=y;case"script":return y=tc(c.src),(b=i.querySelector(Fo(y)))?(o.instance=b,Yn(b),b):(g=c,(b=Xn.get(y))&&(g=M({},c),rh(g,b)),i=i.ownerDocument||i,b=i.createElement("script"),Yn(b),le(b,"link",g),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&!(o.state.loading&4)&&(g=o.instance,o.state.loading|=4,oh(g,c.precedence,i));return o.instance}function oh(i,o,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,y=b,C=0;C<g.length;C++){var O=g[C];if(O.dataset.precedence===o)y=O;else if(y!==b)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function av(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function rh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var wf=null;function Ou(i,o,c){if(wf===null){var g=new Map,b=wf=new Map;b.set(c,g)}else b=wf,g=b.get(c),g||(g=new Map,b.set(c,g));if(g.has(i))return g;for(g.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var y=c[b];if(!(y[fd]||y[vn]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(o)||"";C=i+C;var O=g.get(C);O?O.push(y):g.set(C,[y])}}return g}function ov(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function P0(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function rv(i){return!(i.type==="stylesheet"&&!(i.state.loading&3))}var Ru=null;function _0(){}function $0(i,o,c){if(Ru===null)throw Error(r(475));var g=Ru;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&!(o.state.loading&4)){if(o.instance===null){var b=Au(c.href),y=i.querySelector(xf(b));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(g.count++,g=Iu.bind(g),i.then(g,g)),o.state.loading|=4,o.instance=y,Yn(y);return}y=i.ownerDocument||i,c=iv(c),(b=Xn.get(b))&&av(c,b),y=y.createElement("link"),Yn(y);var C=y;C._p=new Promise(function(O,j){C.onload=O,C.onerror=j}),le(y,"link",c),o.instance=y}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(o,i),(i=o.state.preload)&&!(o.state.loading&3)&&(g.count++,o=Iu.bind(g),i.addEventListener("load",o),i.addEventListener("error",o))}}function j0(){if(Ru===null)throw Error(r(475));var i=Ru;return i.stylesheets&&i.count===0&&Cf(i,i.stylesheets),0<i.count?function(o){var c=setTimeout(function(){if(i.stylesheets&&Cf(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Iu(){if(this.count--,this.count===0){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ef=null;function Cf(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ef=new Map,o.forEach(sv,i),Ef=null,Iu.call(i))}function sv(i,o){if(!(o.state.loading&4)){var c=Ef.get(i);if(c)var g=c.get(null);else{c=new Map,Ef.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<b.length;y++){var C=b[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),g=C)}g&&c.set(null,g)}b=o.instance,C=b.getAttribute("data-precedence"),y=c.get(C)||g,y===g&&c.set(null,b),c.set(C,b),this.count++,g=Iu.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),y?y.parentNode.insertBefore(b,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var Ii={$$typeof:pe,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function lr(i,o,c,g,b,y,C,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function L0(i,o,c,g,b,y,C,O,j,ee,we,Te){return i=new lr(i,o,c,C,O,j,ee,Te),o=1,y===!0&&(o|=24),y=da(3,null,null,o),i.current=y,y.stateNode=i,o=jm(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:g,isDehydrated:c,cache:o},$d(y),i}function lv(i){return i?(i=Nl,i):Nl}function cv(i,o,c,g,b,y){b=lv(b),g.context===null?g.context=b:g.pendingContext=b,g=jr(o),g.payload={element:c},y=y===void 0?null:y,y!==null&&(g.callback=y),c=pa(i,g,o),c!==null&&(Ca(c,i,o),_l(c,i,o))}function uv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function sh(i,o){uv(i,o),(i=i.alternate)&&uv(i,o)}function dv(i){if(i.tag===13){var o=zr(i,67108864);o!==null&&Ca(o,i,67108864),sh(i,67108864)}}var Tf=!0;function B0(i,o,c,g){var b=F.T;F.T=null;var y=q.p;try{q.p=2,lh(i,o,c,g)}finally{q.p=y,F.T=b}}function H0(i,o,c,g){var b=F.T;F.T=null;var y=q.p;try{q.p=8,lh(i,o,c,g)}finally{q.p=y,F.T=b}}function lh(i,o,c,g){if(Tf){var b=fv(g);if(b===null)mf(i,o,g,kf,c),pv(i,g);else if(hv(b,i,o,c,g))g.stopPropagation();else if(pv(i,g),o&4&&-1<KS.indexOf(i)){for(;b!==null;){var y=Ti(b);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=Ci(y.pendingLanes);if(C!==0){var O=y;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var j=1<<31-Vn(C);O.entanglements[1]|=j,C&=~j}Bo(y),!(ln&6)&&(Np=Tt()+500,Kr(0))}}break;case 13:O=zr(y,2),O!==null&&Ca(O,y,2),cf(),sh(y,2)}if(y=fv(g),y===null&&mf(i,o,g,kf,c),y===b)break;b=y}b!==null&&g.stopPropagation()}else mf(i,o,g,null,c)}}function fv(i){return i=Sl(i),gv(i)}var kf=null;function gv(i){if(kf=null,i=ys(i),i!==null){var o=d(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=h(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return kf=i,null}function F0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(En()){case Ne:return 2;case Gt:return 8;case Ae:case st:return 32;case kt:return 268435456;default:return 32}default:return 32}}var ch=!1,qo=null,cr=null,is=null,Du=new Map,Mf=new Map,el=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pv(i,o){switch(i){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Du.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(o.pointerId)}}function ur(i,o,c,g,b,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:c,eventSystemFlags:g,nativeEvent:y,targetContainers:[b]},o!==null&&(o=Ti(o),o!==null&&dv(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function hv(i,o,c,g,b){switch(o){case"focusin":return qo=ur(qo,i,o,c,g,b),!0;case"dragenter":return cr=ur(cr,i,o,c,g,b),!0;case"mouseover":return is=ur(is,i,o,c,g,b),!0;case"pointerover":var y=b.pointerId;return Du.set(y,ur(Du.get(y)||null,i,o,c,g,b)),!0;case"gotpointercapture":return y=b.pointerId,Mf.set(y,ur(Mf.get(y)||null,i,o,c,g,b)),!0}return!1}function mv(i){var o=ys(i.target);if(o!==null){var c=d(o);if(c!==null){if(o=c.tag,o===13){if(o=h(c),o!==null){i.blockedOn=o,om(i.priority,function(){if(c.tag===13){var g=_a();g=xt(g);var b=zr(c,g);b!==null&&Ca(b,c,g),sh(c,g)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Af(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=fv(i.nativeEvent);if(c===null){c=i.nativeEvent;var g=new c.constructor(c.type,c);Dg=g,c.target.dispatchEvent(g),Dg=null}else return o=Ti(c),o!==null&&dv(o),i.blockedOn=c,!1;o.shift()}return!0}function bv(i,o,c){Af(i)&&c.delete(o)}function uh(){ch=!1,qo!==null&&Af(qo)&&(qo=null),cr!==null&&Af(cr)&&(cr=null),is!==null&&Af(is)&&(is=null),Du.forEach(bv),Mf.forEach(bv)}function as(i,o){i.blockedOn===o&&(i.blockedOn=null,ch||(ch=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,uh)))}var dh=null;function Of(i){dh!==i&&(dh=i,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){dh===i&&(dh=null);for(var o=0;o<i.length;o+=3){var c=i[o],g=i[o+1],b=i[o+2];if(typeof g!="function"){if(gv(g||c)===null)continue;break}var y=Ti(c);y!==null&&(i.splice(o,3),o-=3,lb(y,{pending:!0,data:b,method:c.method,action:g},g,b))}}))}function zu(i){function o(j){return as(j,i)}qo!==null&&as(qo,i),cr!==null&&as(cr,i),is!==null&&as(is,i),Du.forEach(o),Mf.forEach(o);for(var c=0;c<el.length;c++){var g=el[c];g.blockedOn===i&&(g.blockedOn=null)}for(;0<el.length&&(c=el[0],c.blockedOn===null);)mv(c),c.blockedOn===null&&el.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var b=c[g],y=c[g+1],C=b[_i]||null;if(typeof y=="function")C||Of(c);else if(C){var O=null;if(y&&y.hasAttribute("formAction")){if(b=y,C=y[_i]||null)O=C.formAction;else if(gv(b)!==null)continue}else O=C.action;typeof O=="function"?c[g+1]=O:(c.splice(g,3),g-=3),Of(c)}}}function tl(i){this._internalRoot=i}fh.prototype.render=tl.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,g=_a();cv(c,g,i,o,null,null)},fh.prototype.unmount=tl.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;cv(i.current,2,null,i,null,null),cf(),o[bl]=null}};function fh(i){this._internalRoot=i}fh.prototype.unstable_scheduleHydration=function(i){if(i){var o=Zo();i={blockedOn:null,target:i,priority:o};for(var c=0;c<el.length&&o!==0&&o<el[c].priority;c++);el.splice(c,0,i),c===0&&mv(i)}};var q0=l.version;if(q0!=="19.1.0")throw Error(r(527,q0,"19.1.0"));q.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=S(o),i=i!==null?w(i):null,i=i===null?null:i.stateNode,i};var G0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{$e=mi.inject(G0),ut=mi}catch{}}return Yh.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,g="",b=mb,y=uu,C=bb,O=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks)),o=L0(i,1,!1,null,null,c,g,b,y,C,O,null),i[bl]=o.current,hf(i),new tl(o)},Yh.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var g=!1,b="",y=mb,C=uu,O=bb,j=null,ee=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks),c.formState!==void 0&&(ee=c.formState)),o=L0(i,1,!0,o,c??null,g,b,y,C,O,j,ee),o.context=lv(null),c=o.current,g=_a(),g=xt(g),b=jr(g),b.callback=null,pa(c,b,g),c=g,o.current.lanes=c,Ve(o,c),Bo(o),i[bl]=o.current,hf(i),new fh(o)},Yh.version="19.1.0",Yh}var Zh={},SE;function Hk(){if(SE)return Zh;SE=1;var f={};/**
 * @license React
 * react-dom-client.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return f.NODE_ENV!=="production"&&function(){function l(e,t){for(e=e.memoizedState;e!==null&&0<t;)e=e.next,t--;return e}function n(e,t,a,u){if(a>=t.length)return u;var p=t[a],m=li(e)?e.slice():St({},e);return m[p]=n(e[p],t,a+1,u),m}function r(e,t,a){if(t.length!==a.length)console.warn("copyWithRename() expects paths of the same length");else{for(var u=0;u<a.length-1;u++)if(t[u]!==a[u]){console.warn("copyWithRename() expects paths to be the same except for the deepest key");return}return s(e,t,a,0)}}function s(e,t,a,u){var p=t[u],m=li(e)?e.slice():St({},e);return u+1===t.length?(m[a[u]]=m[p],li(m)?m.splice(p,1):delete m[p]):m[p]=s(e[p],t,a,u+1),m}function d(e,t,a){var u=t[a],p=li(e)?e.slice():St({},e);return a+1===t.length?(li(p)?p.splice(u,1):delete p[u],p):(p[u]=d(e[u],t,a+1),p)}function h(){return!1}function v(){return null}function S(){}function w(){console.error("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://react.dev/link/rules-of-hooks")}function M(){console.error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")}function N(){}function k(e){var t=[];return e.forEach(function(a){t.push(a)}),t.sort().join(", ")}function A(e,t,a,u){return new $S(e,t,a,u)}function $(e,t){e.context===Nu&&(df(e.current,2,t,e,null,null),Gl())}function B(e,t){if(gr!==null){var a=t.staleFamilies;t=t.updatedFamilies,_s(),Ml(e.current,t,a),Gl()}}function Z(e){gr=e}function Y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ie(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function pe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oe(e){if(ie(e)!==e)throw Error("Unable to find node on an unmounted component.")}function me(e){var t=e.alternate;if(!t){if(t=ie(e),t===null)throw Error("Unable to find node on an unmounted component.");return t!==e?null:e}for(var a=e,u=t;;){var p=a.return;if(p===null)break;var m=p.alternate;if(m===null){if(u=p.return,u!==null){a=u;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===a)return oe(p),e;if(m===u)return oe(p),t;m=m.sibling}throw Error("Unable to find node on an unmounted component.")}if(a.return!==u.return)a=p,u=m;else{for(var x=!1,E=p.child;E;){if(E===a){x=!0,a=p,u=m;break}if(E===u){x=!0,u=p,a=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===a){x=!0,a=m,u=p;break}if(E===u){x=!0,u=m,a=p;break}E=E.sibling}if(!x)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(a.alternate!==u)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(a.tag!==3)throw Error("Unable to find node on an unmounted component.");return a.stateNode.current===a?e:t}function J(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=J(e),t!==null)return t;e=e.sibling}return null}function he(e){return e===null||typeof e!="object"?null:(e=bf&&e[bf]||e["@@iterator"],typeof e=="function"?e:null)}function ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===mn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xs:return"Fragment";case hf:return"Profiler";case Jl:return"StrictMode";case Ks:return"Suspense";case Kp:return"SuspenseList";case Wp:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case Mt:return"Portal";case Ta:return(e.displayName||"Context")+".Provider";case mf:return(e._context.displayName||"Context")+".Consumer";case Qs:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jp:return t=e.displayName||null,t!==null?t:ne(e.type)||"Memo";case $a:t=e._payload,e=e._init;try{return ne(e(t))}catch{}}return null}function Ce(e){return typeof e.tag=="number"?de(e):typeof e.name=="string"?e.name:null}function de(e){var t=e.type;switch(e.tag){case 31:return"Activity";case 24:return"Cache";case 9:return(t._context.displayName||"Context")+".Consumer";case 10:return(t.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 26:case 27:case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(t);case 8:return t===Jl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;break;case 29:if(t=e._debugInfo,t!=null){for(var a=t.length-1;0<=a;a--)if(typeof t[a].name=="string")return t[a].name}if(e.return!==null)return de(e.return)}return null}function Ue(e){return{current:e}}function De(e,t){0>ar?console.error("Unexpected pop."):(t!==ku[ar]&&console.error("Unexpected Fiber popped."),e.current=vf[ar],vf[ar]=null,ku[ar]=null,ar--)}function Ze(e,t,a){ar++,vf[ar]=e.current,ku[ar]=a,e.current=t}function Je(e){return e===null&&console.error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue."),e}function ct(e,t){Ze(or,t,e),Ze(Wl,e,e),Ze(Wr,null,e);var a=t.nodeType;switch(a){case 9:case 11:a=a===9?"#document":"#fragment",t=(t=t.documentElement)&&(t=t.namespaceURI)?wa(t):uc;break;default:if(a=t.tagName,t=t.namespaceURI)t=wa(t),t=Zr(t,a);else switch(a){case"svg":t=Lh;break;case"math":t=xx;break;default:t=uc}}a=a.toLowerCase(),a=hm(null,a),a={context:t,ancestorInfo:a},De(Wr,e),Ze(Wr,a,e)}function F(e){De(Wr,e),De(Wl,e),De(or,e)}function q(){return Je(Wr.current)}function W(e){e.memoizedState!==null&&Ze(eh,e,e);var t=Je(Wr.current),a=e.type,u=Zr(t.context,a);a=hm(t.ancestorInfo,a),u={context:u,ancestorInfo:a},t!==u&&(Ze(Wl,e,e),Ze(Wr,u,e))}function Re(e){Wl.current===e&&(De(Wr,e),De(Wl,e)),eh.current===e&&(De(eh,e),Xv._currentValue=Zf)}function _(e){return typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}function P(e){try{return ge(e),!1}catch{return!0}}function ge(e){return""+e}function re(e,t){if(P(e))return console.error("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before using it here.",t,_(e)),ge(e)}function Oe(e,t){if(P(e))return console.error("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before using it here.",t,_(e)),ge(e)}function He(e){if(P(e))return console.error("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before using it here.",_(e)),ge(e)}function ke(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return console.error("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://react.dev/link/react-devtools"),!0;try{ec=t.inject(e),Ri=t}catch(a){console.error("React instrumentation encountered an error: %s.",a)}return!!t.checkDCE}function Pe(e){if(typeof Ho=="function"&&nv(e),Ri&&typeof Ri.setStrictMode=="function")try{Ri.setStrictMode(ec,e)}catch(t){Xn||(Xn=!0,console.error("React instrumentation encountered an error: %s",t))}}function Me(e){Fe=e}function _e(){Fe!==null&&typeof Fe.markCommitStopped=="function"&&Fe.markCommitStopped()}function at(e){Fe!==null&&typeof Fe.markComponentRenderStarted=="function"&&Fe.markComponentRenderStarted(e)}function Xe(){Fe!==null&&typeof Fe.markComponentRenderStopped=="function"&&Fe.markComponentRenderStopped()}function ft(e){Fe!==null&&typeof Fe.markRenderStarted=="function"&&Fe.markRenderStarted(e)}function yt(){Fe!==null&&typeof Fe.markRenderStopped=="function"&&Fe.markRenderStopped()}function nn(e,t){Fe!==null&&typeof Fe.markStateUpdateScheduled=="function"&&Fe.markStateUpdateScheduled(e,t)}function Ei(e){return e>>>=0,e===0?32:31-(es(e)/QS|0)|0}function Un(e){if(e&1)return"SyncHydrationLane";if(e&2)return"Sync";if(e&4)return"InputContinuousHydration";if(e&8)return"InputContinuous";if(e&16)return"DefaultHydration";if(e&32)return"Default";if(e&128)return"TransitionHydration";if(e&4194048)return"Transition";if(e&62914560)return"Retry";if(e&67108864)return"SelectiveHydration";if(e&134217728)return"IdleHydration";if(e&268435456)return"Idle";if(e&536870912)return"Offscreen";if(e&1073741824)return"Deferred"}function Tt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return console.error("Should have found matching lanes. This is a bug in React."),e}}function En(e,t,a){var u=e.pendingLanes;if(u===0)return 0;var p=0,m=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?p=Tt(u):(x&=E,x!==0?p=Tt(x):a||(a=E&~e,a!==0&&(p=Tt(a))))):(E=u&~m,E!==0?p=Tt(E):x!==0?p=Tt(x):a||(a=u&~e,a!==0&&(p=Tt(a)))),p===0?0:t!==0&&t!==p&&!(t&m)&&(m=p&-p,a=t&-t,m>=a||m===32&&(a&4194048)!==0)?t:p}function Ne(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return console.error("Should have found matching lanes. This is a bug in React."),-1}}function Ae(){var e=th;return th<<=1,!(th&4194048)&&(th=256),e}function st(){var e=ts;return ts<<=1,!(ts&62914560)&&(ts=4194304),e}function kt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Be(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function it(e,t,a,u,p,m){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,D=e.expirationTimes,U=e.hiddenUpdates;for(a=x&~a;0<a;){var ce=31-hi(a),ve=1<<ce;E[ce]=0,D[ce]=-1;var se=U[ce];if(se!==null)for(U[ce]=null,ce=0;ce<se.length;ce++){var ye=se[ce];ye!==null&&(ye.lane&=-536870913)}a&=~ve}u!==0&&$e(e,u,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(x&~t))}function $e(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var u=31-hi(t);e.entangledLanes|=t,e.entanglements[u]=e.entanglements[u]|1073741824|a&4194090}function ut(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var u=31-hi(a),p=1<<u;p&t|e[u]&t&&(e[u]|=t),a&=~p}}function Pn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vn(e,t,a){if(so)for(e=e.pendingUpdatersLaneMap;0<a;){var u=31-hi(a),p=1<<u;e[u].add(t),a&=~p}}function hl(e,t){if(so)for(var a=e.pendingUpdatersLaneMap,u=e.memoizedUpdaters;0<t;){var p=31-hi(t);e=1<<p,p=a[p],0<p.size&&(p.forEach(function(m){var x=m.alternate;x!==null&&u.has(x)||u.add(m)}),p.clear()),t&=~e}}function Cn(e){return e&=-e,ja<e?sr<e?e&134217727?ns:nh:sr:ja}function ml(){var e=on.p;return e!==0?e:(e=window.event,e===void 0?ns:Zs(e.type))}function kr(e,t){var a=on.p;try{return on.p=e,t()}finally{on.p=a}}function yo(e){delete e[Hi],delete e[ka],delete e[ih],delete e[Au],delete e[xf]}function Ci(e){var t=e[Hi];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ws]||a[Hi]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=_p(e);e!==null;){if(a=e[Hi])return a;e=_p(e)}return t}e=a,a=e.parentNode}return null}function sa(e){if(e=e[Hi]||e[Ws]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Za(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error("getNodeFromInstance: Invalid argument.")}function I(e){var t=e[iv];return t||(t=e[iv]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function X(e){e[Sf]=!0}function ze(e,t){je(e,t),je(e+"Capture",t)}function je(e,t){Fo[e]&&console.error("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),Fo[e]=t;var a=e.toLowerCase();for(ah[a]=e,e==="onDoubleClick"&&(ah.ondblclick=e),e=0;e<t.length;e++)tc.add(t[e])}function Ve(e,t){oh[t.type]||t.onChange||t.onInput||t.readOnly||t.disabled||t.value==null||console.error(e==="select"?"You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set `onChange`.":"You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),t.onChange||t.readOnly||t.disabled||t.checked==null||console.error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Pt(e){return rr.call(wf,e)?!0:rr.call(rh,e)?!1:av.test(e)?wf[e]=!0:(rh[e]=!0,console.error("Invalid attribute name: `%s`",e),!1)}function Et(e,t,a){if(Pt(t)){if(!e.hasAttribute(t)){switch(typeof a){case"symbol":case"object":return a;case"function":return a;case"boolean":if(a===!1)return a}return a===void 0?void 0:null}return e=e.getAttribute(t),e===""&&a===!0?!0:(re(a,t),e===""+a?a:e)}}function Yt(e,t,a){if(Pt(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var u=t.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(t);return}}re(a,t),e.setAttribute(t,""+a)}}function xt(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}re(a,t),e.setAttribute(t,""+a)}}function Jn(e,t,a,u){if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}re(u,a),e.setAttributeNS(t,a,""+u)}}function Zo(){}function om(){if(Ou===0){ov=console.log,P0=console.info,rv=console.warn,Ru=console.error,_0=console.group,$0=console.groupCollapsed,j0=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Zo,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Ou++}function Xo(){if(Ou--,Ou===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:St({},e,{value:ov}),info:St({},e,{value:P0}),warn:St({},e,{value:rv}),error:St({},e,{value:Ru}),group:St({},e,{value:_0}),groupCollapsed:St({},e,{value:$0}),groupEnd:St({},e,{value:j0})})}0>Ou&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function vn(e){if(Iu===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Iu=t&&t[1]||"",Ef=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Iu+e+Ef}function _i(e,t){if(!e||Cf)return"";var a=sv.get(e);if(a!==void 0)return a;Cf=!0,a=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var u=null;u=le.H,le.H=null,om();try{var p={DetermineComponentFrameRoot:function(){try{if(t){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Qe){var ye=Qe}Reflect.construct(e,[],se)}else{try{se.call()}catch(Qe){ye=Qe}e.call(se.prototype)}}else{try{throw Error()}catch(Qe){ye=Qe}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Qe){if(Qe&&ye&&typeof Qe.stack=="string")return[Qe.stack,ye.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),E=x[0],D=x[1];if(E&&D){var U=E.split(`
`),ce=D.split(`
`);for(x=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;x<ce.length&&!ce[x].includes("DetermineComponentFrameRoot");)x++;if(m===U.length||x===ce.length)for(m=U.length-1,x=ce.length-1;1<=m&&0<=x&&U[m]!==ce[x];)x--;for(;1<=m&&0<=x;m--,x--)if(U[m]!==ce[x]){if(m!==1||x!==1)do if(m--,x--,0>x||U[m]!==ce[x]){var ve=`
`+U[m].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),typeof e=="function"&&sv.set(e,ve),ve}while(1<=m&&0<=x);break}}}finally{Cf=!1,le.H=u,Xo(),Error.prepareStackTrace=a}return U=(U=e?e.displayName||e.name:"")?vn(U):"",typeof e=="function"&&sv.set(e,U),U}function bl(e){var t=Error.prepareStackTrace;if(Error.prepareStackTrace=void 0,e=e.stack,Error.prepareStackTrace=t,e.startsWith(`Error: react-stack-top-frame
`)&&(e=e.slice(29)),t=e.indexOf(`
`),t!==-1&&(e=e.slice(t+1)),t=e.indexOf("react-stack-bottom-frame"),t!==-1&&(t=e.lastIndexOf(`
`,t)),t!==-1)e=e.slice(0,t);else return"";return e}function rm(e){switch(e.tag){case 26:case 27:case 5:return vn(e.type);case 16:return vn("Lazy");case 13:return vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return _i(e.type,!1);case 11:return _i(e.type.render,!1);case 1:return _i(e.type,!0);case 31:return vn("Activity");default:return""}}function $y(e){try{var t="";do{t+=rm(e);var a=e._debugInfo;if(a)for(var u=a.length-1;0<=u;u--){var p=a[u];if(typeof p.name=="string"){var m=t,x=p.env,E=vn(p.name+(x?" ["+x+"]":""));t=m+E}}e=e.return}while(e);return t}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}function jy(e){return(e=e?e.displayName||e.name:"")?vn(e):""}function dd(){if(Ii===null)return null;var e=Ii._debugOwner;return e!=null?Ce(e):null}function fd(){if(Ii===null)return"";var e=Ii;try{var t="";switch(e.tag===6&&(e=e.return),e.tag){case 26:case 27:case 5:t+=vn(e.type);break;case 13:t+=vn("Suspense");break;case 19:t+=vn("SuspenseList");break;case 31:t+=vn("Activity");break;case 30:case 0:case 15:case 1:e._debugOwner||t!==""||(t+=jy(e.type));break;case 11:e._debugOwner||t!==""||(t+=jy(e.type.render))}for(;e;)if(typeof e.tag=="number"){var a=e;e=a._debugOwner;var u=a._debugStack;e&&u&&(typeof u!="string"&&(a._debugStack=u=bl(u)),u!==""&&(t+=`
`+u))}else if(e.debugStack!=null){var p=e.debugStack;(e=e.owner)&&p&&(t+=`
`+bl(p))}else break;var m=t}catch(x){m=`
Error generating stack: `+x.message+`
`+x.stack}return m}function tt(e,t,a,u,p,m,x){var E=Ii;ys(e);try{return e!==null&&e._debugTask?e._debugTask.run(t.bind(null,a,u,p,m,x)):t(a,u,p,m,x)}finally{ys(E)}throw Error("runWithFiberInDEV should never be called in production. This is a bug in React.")}function ys(e){le.getCurrentStack=e===null?null:fd,lr=!1,Ii=e}function Ti(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return He(e),e;default:return""}}function Tc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kc(e){var t=Tc(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);He(e[t]);var u=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,m=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(x){He(x),u=""+x,m.call(this,x)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(x){He(x),u=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yn(e){e._valueTracker||(e._valueTracker=kc(e))}function sm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),u="";return e&&(u=Tc(e)?e.checked?"true":"false":e.value),e=u,e!==a?(t.setValue(e),!0):!1}function gd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function di(e){return e.replace(L0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function vl(e,t){t.checked===void 0||t.defaultChecked===void 0||cv||(console.error("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://react.dev/link/controlled-components",dd()||"A component",t.type),cv=!0),t.value===void 0||t.defaultValue===void 0||lv||(console.error("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://react.dev/link/controlled-components",dd()||"A component",t.type),lv=!0)}function lm(e,t,a,u,p,m,x,E){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?(re(x,"type"),e.type=x):e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ti(t)):e.value!==""+Ti(t)&&(e.value=""+Ti(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?Mg(e,x,Ti(t)):a!=null?Mg(e,x,Ti(a)):u!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?(re(E,"name"),e.name=""+Ti(E)):e.removeAttribute("name")}function cm(e,t,a,u,p,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(re(m,"type"),e.type=m),t!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||t!=null))return;a=a!=null?""+Ti(a):"",t=t!=null?""+Ti(t):a,E||t===e.value||(e.value=t),e.defaultValue=t}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=E?e.checked:!!u,e.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(re(x,"name"),e.name=x)}function Mg(e,t,a){t==="number"&&gd(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ly(e,t){t.value==null&&(typeof t.children=="object"&&t.children!==null?Qb.Children.forEach(t.children,function(a){a==null||typeof a=="string"||typeof a=="number"||typeof a=="bigint"||sh||(sh=!0,console.error("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>."))}):t.dangerouslySetInnerHTML==null||dv||(dv=!0,console.error("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected."))),t.selected==null||uv||(console.error("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),uv=!0)}function pd(){var e=dd();return e?`

Check the render method of \``+e+"`.":""}function Mr(e,t,a,u){if(e=e.options,t){t={};for(var p=0;p<a.length;p++)t["$"+a[p]]=!0;for(a=0;a<e.length;a++)p=t.hasOwnProperty("$"+e[a].value),e[a].selected!==p&&(e[a].selected=p),p&&u&&(e[a].defaultSelected=!0)}else{for(a=""+Ti(a),t=null,p=0;p<e.length;p++){if(e[p].value===a){e[p].selected=!0,u&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function Qo(e,t){for(e=0;e<B0.length;e++){var a=B0[e];if(t[a]!=null){var u=li(t[a]);t.multiple&&!u?console.error("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",a,pd()):!t.multiple&&u&&console.error("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",a,pd())}}t.value===void 0||t.defaultValue===void 0||Tf||(console.error("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://react.dev/link/controlled-components"),Tf=!0)}function Ag(e,t){t.value===void 0||t.defaultValue===void 0||H0||(console.error("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://react.dev/link/controlled-components",dd()||"A component"),H0=!0),t.children!=null&&t.value==null&&console.error("Use the `defaultValue` or `value` props instead of setting children on <textarea>.")}function um(e,t,a){if(t!=null&&(t=""+Ti(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ti(a):""}function yl(e,t,a,u){if(t==null){if(u!=null){if(a!=null)throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(li(u)){if(1<u.length)throw Error("<textarea> can only have at most one child.");u=u[0]}a=u}a==null&&(a=""),t=a}a=Ti(t),e.defaultValue=a,u=e.textContent,u===a&&u!==""&&u!==null&&(e.value=u)}function Og(e,t){return e.serverProps===void 0&&e.serverTail.length===0&&e.children.length===1&&3<e.distanceFromLeaf&&e.distanceFromLeaf>15-t?Og(e.children[0],t):e}function Xi(e){return"  "+"  ".repeat(e)}function Mc(e){return"+ "+"  ".repeat(e)}function xs(e){return"- "+"  ".repeat(e)}function Oa(e){switch(e.tag){case 26:case 27:case 5:return e.type;case 16:return"Lazy";case 13:return"Suspense";case 19:return"SuspenseList";case 0:case 15:return e=e.type,e.displayName||e.name||null;case 11:return e=e.type.render,e.displayName||e.name||null;case 1:return e=e.type,e.displayName||e.name||null;default:return null}}function Ac(e,t){return lh.test(e)?(e=JSON.stringify(e),e.length>t-2?8>t?'{"..."}':"{"+e.slice(0,t-7)+'..."}':"{"+e+"}"):e.length>t?5>t?'{"..."}':e.slice(0,t-3)+"...":e}function Rg(e,t,a){var u=120-2*a;if(t===null)return Mc(a)+Ac(e,u)+`
`;if(typeof t=="string"){for(var p=0;p<t.length&&p<e.length&&t.charCodeAt(p)===e.charCodeAt(p);p++);return p>u-8&&10<p&&(e="..."+e.slice(p-8),t="..."+t.slice(p-8)),Mc(a)+Ac(e,u)+`
`+xs(a)+Ac(t,u)+`
`}return Xi(a)+Ac(e,u)+`
`}function Oc(e){return Object.prototype.toString.call(e).replace(/^\[object (.*)\]$/,function(t,a){return a})}function Rc(e,t){switch(typeof e){case"string":return e=JSON.stringify(e),e.length>t?5>t?'"..."':e.slice(0,t-4)+'..."':e;case"object":if(e===null)return"null";if(li(e))return"[...]";if(e.$$typeof===Jr)return(t=ne(e.type))?"<"+t+">":"<...>";var a=Oc(e);if(a==="Object"){a="",t-=2;for(var u in e)if(e.hasOwnProperty(u)){var p=JSON.stringify(u);if(p!=='"'+u+'"'&&(u=p),t-=u.length-2,p=Rc(e[u],15>t?t:15),t-=p.length,0>t){a+=a===""?"...":", ...";break}a+=(a===""?"":",")+u+":"+p}return"{"+a+"}"}return a;case"function":return(t=e.displayName||e.name)?"function "+t:"function";default:return String(e)}}function Ar(e,t){return typeof e!="string"||lh.test(e)?"{"+Rc(e,t-2)+"}":e.length>t-2?5>t?'"..."':'"'+e.slice(0,t-5)+'..."':'"'+e+'"'}function dm(e,t,a){var u=120-a.length-e.length,p=[],m;for(m in t)if(t.hasOwnProperty(m)&&m!=="children"){var x=Ar(t[m],120-a.length-m.length-1);u-=m.length+x.length+2,p.push(m+"="+x)}return p.length===0?a+"<"+e+`>
`:0<u?a+"<"+e+" "+p.join(" ")+`>
`:a+"<"+e+`
`+a+"  "+p.join(`
`+a+"  ")+`
`+a+`>
`}function Xa(e,t,a){var u="",p=St({},t),m;for(m in e)if(e.hasOwnProperty(m)){delete p[m];var x=120-2*a-m.length-2,E=Rc(e[m],x);t.hasOwnProperty(m)?(x=Rc(t[m],x),u+=Mc(a)+m+": "+E+`
`,u+=xs(a)+m+": "+x+`
`):u+=Mc(a)+m+": "+E+`
`}for(var D in p)p.hasOwnProperty(D)&&(e=Rc(p[D],120-2*a-D.length-2),u+=xs(a)+D+": "+e+`
`);return u}function fm(e,t,a,u){var p="",m=new Map;for(U in a)a.hasOwnProperty(U)&&m.set(U.toLowerCase(),U);if(m.size===1&&m.has("children"))p+=dm(e,t,Xi(u));else{for(var x in t)if(t.hasOwnProperty(x)&&x!=="children"){var E=120-2*(u+1)-x.length-1,D=m.get(x.toLowerCase());if(D!==void 0){m.delete(x.toLowerCase());var U=t[x];D=a[D];var ce=Ar(U,E);E=Ar(D,E),typeof U=="object"&&U!==null&&typeof D=="object"&&D!==null&&Oc(U)==="Object"&&Oc(D)==="Object"&&(2<Object.keys(U).length||2<Object.keys(D).length||-1<ce.indexOf("...")||-1<E.indexOf("..."))?p+=Xi(u+1)+x+`={{
`+Xa(U,D,u+2)+Xi(u+1)+`}}
`:(p+=Mc(u+1)+x+"="+ce+`
`,p+=xs(u+1)+x+"="+E+`
`)}else p+=Xi(u+1)+x+"="+Ar(t[x],E)+`
`}m.forEach(function(ve){if(ve!=="children"){var se=120-2*(u+1)-ve.length-1;p+=xs(u+1)+ve+"="+Ar(a[ve],se)+`
`}}),p=p===""?Xi(u)+"<"+e+`>
`:Xi(u)+"<"+e+`
`+p+Xi(u)+`>
`}return e=a.children,t=t.children,typeof e=="string"||typeof e=="number"||typeof e=="bigint"?(m="",(typeof t=="string"||typeof t=="number"||typeof t=="bigint")&&(m=""+t),p+=Rg(m,""+e,u+1)):(typeof t=="string"||typeof t=="number"||typeof t=="bigint")&&(p=e==null?p+Rg(""+t,null,u+1):p+Rg(""+t,void 0,u+1)),p}function gm(e,t){var a=Oa(e);if(a===null){for(a="",e=e.child;e;)a+=gm(e,t),e=e.sibling;return a}return Xi(t)+"<"+a+`>
`}function hd(e,t){var a=Og(e,t);if(a!==e&&(e.children.length!==1||e.children[0]!==a))return Xi(t)+`...
`+hd(a,t+1);a="";var u=e.fiber._debugInfo;if(u)for(var p=0;p<u.length;p++){var m=u[p].name;typeof m=="string"&&(a+=Xi(t)+"<"+m+`>
`,t++)}if(u="",p=e.fiber.pendingProps,e.fiber.tag===6)u=Rg(p,e.serverProps,t),t++;else if(m=Oa(e.fiber),m!==null)if(e.serverProps===void 0){u=t;var x=120-2*u-m.length-2,E="";for(U in p)if(p.hasOwnProperty(U)&&U!=="children"){var D=Ar(p[U],15);if(x-=U.length+D.length+2,0>x){E+=" ...";break}E+=" "+U+"="+D}u=Xi(u)+"<"+m+E+`>
`,t++}else e.serverProps===null?(u=dm(m,p,Mc(t)),t++):typeof e.serverProps=="string"?console.error("Should not have matched a non HostText fiber to a Text node. This is a bug in React."):(u=fm(m,p,e.serverProps,t),t++);var U="";for(p=e.fiber.child,m=0;p&&m<e.children.length;)x=e.children[m],x.fiber===p?(U+=hd(x,t),m++):U+=gm(p,t),p=p.sibling;for(p&&0<e.children.length&&(U+=Xi(t)+`...
`),p=e.serverTail,e.serverProps===null&&t--,e=0;e<p.length;e++)m=p[e],U=typeof m=="string"?U+(xs(t)+Ac(m,120-2*t)+`
`):U+dm(m.type,m.props,xs(t));return a+u+U}function Ss(e){try{return`

`+hd(e,0)}catch{return""}}function pm(e,t,a){for(var u=t,p=null,m=0;u;)u===e&&(m=0),p={fiber:u,children:p!==null?[p]:[],serverProps:u===t?a:u===e?null:void 0,serverTail:[],distanceFromLeaf:m},m++,u=u.return;return p!==null?Ss(p).replaceAll(/^[+-]/gm,">"):""}function hm(e,t){var a=St({},e||ch),u={tag:t};return kf.indexOf(t)!==-1&&(a.aTagInScope=null,a.buttonTagInScope=null,a.nobrTagInScope=null),gv.indexOf(t)!==-1&&(a.pTagInButtonScope=null),fv.indexOf(t)!==-1&&t!=="address"&&t!=="div"&&t!=="p"&&(a.listItemTagAutoclosing=null,a.dlItemTagAutoclosing=null),a.current=u,t==="form"&&(a.formTag=u),t==="a"&&(a.aTagInScope=u),t==="button"&&(a.buttonTagInScope=u),t==="nobr"&&(a.nobrTagInScope=u),t==="p"&&(a.pTagInButtonScope=u),t==="li"&&(a.listItemTagAutoclosing=u),(t==="dd"||t==="dt")&&(a.dlItemTagAutoclosing=u),t==="#document"||t==="html"?a.containerTagInScope=null:a.containerTagInScope||(a.containerTagInScope=u),e!==null||t!=="#document"&&t!=="html"&&t!=="body"?a.implicitRootScope===!0&&(a.implicitRootScope=!1):a.implicitRootScope=!0,a}function xl(e,t,a){switch(t){case"select":return e==="hr"||e==="option"||e==="optgroup"||e==="script"||e==="template"||e==="#text";case"optgroup":return e==="option"||e==="#text";case"option":return e==="#text";case"tr":return e==="th"||e==="td"||e==="style"||e==="script"||e==="template";case"tbody":case"thead":case"tfoot":return e==="tr"||e==="style"||e==="script"||e==="template";case"colgroup":return e==="col"||e==="template";case"table":return e==="caption"||e==="colgroup"||e==="tbody"||e==="tfoot"||e==="thead"||e==="style"||e==="script"||e==="template";case"head":return e==="base"||e==="basefont"||e==="bgsound"||e==="link"||e==="meta"||e==="title"||e==="noscript"||e==="noframes"||e==="style"||e==="script"||e==="template";case"html":if(a)break;return e==="head"||e==="body"||e==="frameset";case"frameset":return e==="frame";case"#document":if(!a)return e==="html"}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6";case"rp":case"rt":return F0.indexOf(t)===-1;case"caption":case"col":case"colgroup":case"frameset":case"frame":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return t==null;case"head":return a||t===null;case"html":return a&&t==="#document"||t===null;case"body":return a&&(t==="#document"||t==="html")||t===null}return!0}function IS(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}function mm(e,t){for(;e;){switch(e.tag){case 5:case 26:case 27:if(e.type===t)return e}e=e.return}return null}function Ig(e,t){t=t||ch;var a=t.current;if(t=(a=xl(e,a&&a.tag,t.implicitRootScope)?null:a)?null:IS(e,t),t=a||t,!t)return!0;var u=t.tag;if(t=String(!!a)+"|"+e+"|"+u,qo[t])return!1;qo[t]=!0;var p=(t=Ii)?mm(t.return,u):null,m=t!==null&&p!==null?pm(p,t,null):"",x="<"+e+">";return a?(a="",u==="table"&&e==="tr"&&(a+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),console.error(`In HTML, %s cannot be a child of <%s>.%s
This will cause a hydration error.%s`,x,u,a,m)):console.error(`In HTML, %s cannot be a descendant of <%s>.
This will cause a hydration error.%s`,x,u,m),t&&(e=t.return,p===null||e===null||p===e&&e._debugOwner===t._debugOwner||tt(p,function(){console.error(`<%s> cannot contain a nested %s.
See this log for the ancestor stack trace.`,u,x)})),!1}function Ic(e,t,a){if(a||xl("#text",t,!1))return!0;if(a="#text|"+t,qo[a])return!1;qo[a]=!0;var u=(a=Ii)?mm(a,t):null;return a=a!==null&&u!==null?pm(u,a,a.tag!==6?{children:null}:null):"",/\S/.test(e)?console.error(`In HTML, text nodes cannot be a child of <%s>.
This will cause a hydration error.%s`,t,a):console.error(`In HTML, whitespace text nodes cannot be a child of <%s>. Make sure you don't have any extra whitespace between tags on each line of your source code.
This will cause a hydration error.%s`,t,a),!1}function md(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}function DS(e){return e.replace(KS,function(t,a){return a.toUpperCase()})}function bd(e,t,a){var u=t.indexOf("--")===0;u||(-1<t.indexOf("-")?ur.hasOwnProperty(t)&&ur[t]||(ur[t]=!0,console.error("Unsupported style property %s. Did you mean %s?",t,DS(t.replace(el,"ms-")))):Mf.test(t)?ur.hasOwnProperty(t)&&ur[t]||(ur[t]=!0,console.error("Unsupported vendor-prefixed style property %s. Did you mean %s?",t,t.charAt(0).toUpperCase()+t.slice(1))):!pv.test(a)||hv.hasOwnProperty(a)&&hv[a]||(hv[a]=!0,console.error(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,t,a.replace(pv,""))),typeof a=="number"&&(isNaN(a)?mv||(mv=!0,console.error("`NaN` is an invalid value for the `%s` css style property.",t)):isFinite(a)||Af||(Af=!0,console.error("`Infinity` is an invalid value for the `%s` css style property.",t)))),a==null||typeof a=="boolean"||a===""?u?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":u?e.setProperty(t,a):typeof a!="number"||a===0||bv.has(t)?t==="float"?e.cssFloat=a:(Oe(a,t),e[t]=(""+a).trim()):e[t]=a+"px"}function Dg(e,t,a){if(t!=null&&typeof t!="object")throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");if(t&&Object.freeze(t),e=e.style,a!=null){if(t){var u={};if(a){for(var p in a)if(a.hasOwnProperty(p)&&!t.hasOwnProperty(p))for(var m=cr[p]||[p],x=0;x<m.length;x++)u[m[x]]=p}for(var E in t)if(t.hasOwnProperty(E)&&(!a||a[E]!==t[E]))for(p=cr[E]||[E],m=0;m<p.length;m++)u[p[m]]=E;E={};for(var D in t)for(p=cr[D]||[D],m=0;m<p.length;m++)E[p[m]]=D;D={};for(var U in u)if(p=u[U],(m=E[U])&&p!==m&&(x=p+","+m,!D[x])){D[x]=!0,x=console;var ce=t[p];x.error.call(x,"%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",ce==null||typeof ce=="boolean"||ce===""?"Removing":"Updating",p,m)}}for(var ve in a)!a.hasOwnProperty(ve)||t!=null&&t.hasOwnProperty(ve)||(ve.indexOf("--")===0?e.setProperty(ve,""):ve==="float"?e.cssFloat="":e[ve]="");for(var se in t)U=t[se],t.hasOwnProperty(se)&&a[se]!==U&&bd(e,se,U)}else for(u in t)t.hasOwnProperty(u)&&bd(e,u,t[u])}function Sl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function wl(e){return dh.get(e)||e}function Dc(e,t){if(rr.call(tl,t)&&tl[t])return!0;if(q0.test(t)){if(e="aria-"+t.slice(4).toLowerCase(),e=zu.hasOwnProperty(e)?e:null,e==null)return console.error("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",t),tl[t]=!0;if(t!==e)return console.error("Invalid ARIA attribute `%s`. Did you mean `%s`?",t,e),tl[t]=!0}if(fh.test(t)){if(e=t.toLowerCase(),e=zu.hasOwnProperty(e)?e:null,e==null)return tl[t]=!0,!1;t!==e&&(console.error("Unknown ARIA attribute `%s`. Did you mean `%s`?",t,e),tl[t]=!0)}return!0}function By(e,t){var a=[],u;for(u in t)Dc(e,u)||a.push(u);t=a.map(function(p){return"`"+p+"`"}).join(", "),a.length===1?console.error("Invalid aria prop %s on <%s> tag. For details, see https://react.dev/link/invalid-aria-props",t,e):1<a.length&&console.error("Invalid aria props %s on <%s> tag. For details, see https://react.dev/link/invalid-aria-props",t,e)}function bm(e,t,a,u){if(rr.call(mi,t)&&mi[t])return!0;var p=t.toLowerCase();if(p==="onfocusin"||p==="onfocusout")return console.error("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),mi[t]=!0;if(typeof a=="function"&&(e==="form"&&t==="action"||e==="input"&&t==="formAction"||e==="button"&&t==="formAction"))return!0;if(u!=null){if(e=u.possibleRegistrationNames,u.registrationNameDependencies.hasOwnProperty(t))return!0;if(u=e.hasOwnProperty(p)?e[p]:null,u!=null)return console.error("Invalid event handler property `%s`. Did you mean `%s`?",t,u),mi[t]=!0;if(i.test(t))return console.error("Unknown event handler property `%s`. It will be ignored.",t),mi[t]=!0}else if(i.test(t))return o.test(t)&&console.error("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",t),mi[t]=!0;if(c.test(t)||g.test(t))return!0;if(p==="innerhtml")return console.error("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),mi[t]=!0;if(p==="aria")return console.error("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),mi[t]=!0;if(p==="is"&&a!==null&&a!==void 0&&typeof a!="string")return console.error("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof a),mi[t]=!0;if(typeof a=="number"&&isNaN(a))return console.error("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",t),mi[t]=!0;if(Of.hasOwnProperty(p)){if(p=Of[p],p!==t)return console.error("Invalid DOM property `%s`. Did you mean `%s`?",t,p),mi[t]=!0}else if(t!==p)return console.error("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",t,p),mi[t]=!0;switch(t){case"dangerouslySetInnerHTML":case"children":case"style":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":return!0;case"innerText":case"textContent":return!0}switch(typeof a){case"boolean":switch(t){case"autoFocus":case"checked":case"multiple":case"muted":case"selected":case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":case"capture":case"download":case"inert":return!0;default:return p=t.toLowerCase().slice(0,5),p==="data-"||p==="aria-"?!0:(a?console.error('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',a,t,t,a,t):console.error('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',a,t,t,a,t,t,t),mi[t]=!0)}case"function":case"symbol":return mi[t]=!0,!1;case"string":if(a==="false"||a==="true"){switch(t){case"checked":case"selected":case"multiple":case"muted":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":case"inert":break;default:return!0}console.error("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",a,t,a==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',t,a),mi[t]=!0}}return!0}function Hy(e,t,a){var u=[],p;for(p in t)bm(e,p,t[p],a)||u.push(p);t=u.map(function(m){return"`"+m+"`"}).join(", "),u.length===1?console.error("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://react.dev/link/attribute-behavior ",t,e):1<u.length&&console.error("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://react.dev/link/attribute-behavior ",t,e)}function Or(e){return b.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function zg(e){var t=sa(e);if(t&&(e=t.stateNode)){var a=e[ka]||null;e:switch(e=t.stateNode,t.type){case"input":if(lm(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(re(t,"name"),a=a.querySelectorAll('input[name="'+di(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var u=a[t];if(u!==e&&u.form===e.form){var p=u[ka]||null;if(!p)throw Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");lm(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(t=0;t<a.length;t++)u=a[t],u.form===e.form&&sm(u)}break e;case"textarea":um(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Mr(e,!!a.multiple,t,!1)}}}function zc(e,t,a){if(j)return e(t,a);j=!0;try{var u=e(t);return u}finally{if(j=!1,(C!==null||O!==null)&&(Gl(),C&&(t=C,e=O,O=C=null,zg(t),e)))for(t=0;t<e.length;t++)zg(e[t])}}function Qa(e,t){var a=e.stateNode;if(a===null)return null;var u=a[ka]||null;if(u===null)return null;a=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof a+"` type.");return a}function Ng(){if(gt)return gt;var e,t=fe,a=t.length,u,p="value"in ae?ae.value:ae.textContent,m=p.length;for(e=0;e<a&&t[e]===p[e];e++);var x=a-e;for(u=1;u<=x&&t[a-u]===p[m-u];u++);return gt=p.slice(e,1<u?1-u:void 0)}function El(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vd(){return!0}function yd(){return!1}function ki(e){function t(a,u,p,m,x){this._reactName=a,this._targetInst=p,this.type=u,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?vd:yd,this.isPropagationStopped=yd,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),t}function Fy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gR[e])?!!t[e]:!1}function $i(){return Fy}function ws(e,t){switch(e){case"keyup":return TR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==ZC;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}function Sd(e,t){switch(e){case"compositionend":return xd(t);case"keypress":return t.which!==QC?null:(JC=!0,KC);case"textInput":return e=t.data,e===KC&&JC?null:e;default:return null}}function zS(e,t){if(gh)return e==="compositionend"||!WS&&ws(e,t)?(e=Ng(),gt=fe=ae=null,gh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XC&&t.locale!=="ko"?null:t.data;default:return null}}function Ug(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MR[e.type]:t==="textarea"}function vm(e){if(!ee)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}function Nc(e,t,a,u){C?O?O.push(u):O=[u]:C=u,t=Bi(t,"onChange"),0<t.length&&(a=new rn("onChange","change",null,a,u),e.push({event:a,listeners:t}))}function Pg(e){Nb(e,0)}function wd(e){var t=Za(e);if(sm(t))return e}function qy(e,t){if(e==="change")return t}function Gy(){yv&&(yv.detachEvent("onpropertychange",Vy),xv=yv=null)}function Vy(e){if(e.propertyName==="value"&&wd(xv)){var t=[];Nc(t,xv,e,xo(e)),zc(Pg,t)}}function ym(e,t,a){e==="focusin"?(Gy(),yv=t,xv=a,yv.attachEvent("onpropertychange",Vy)):e==="focusout"&&Gy()}function NS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wd(xv)}function US(e,t){if(e==="click")return wd(t)}function PS(e,t){if(e==="input"||e==="change")return wd(t)}function _S(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function Ed(e,t){if(La(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),u=Object.keys(t);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var p=a[u];if(!rr.call(t,p)||!La(e[p],t[p]))return!1}return!0}function xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yy(e,t){var a=xm(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=t&&u>=t)return{node:a,offset:t-e};e=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xm(a)}}function Zy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=gd(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=gd(e.document)}return t}function Sm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _g(e,t,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tw||ph==null||ph!==gd(u)||(u=ph,"selectionStart"in u&&Sm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Sv&&Ed(Sv,u)||(Sv=u,u=Bi(ew,"onSelect"),0<u.length&&(t=new rn("onSelect","select",null,t,a),e.push({event:t,listeners:u}),t.target=ph)))}function Cl(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}function Tl(e){if(nw[e])return nw[e];if(!hh[e])return e;var t=hh[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in e1)return nw[e]=t[a];return e}function So(e,t){o1.set(e,t),ze(t,[e])}function la(e,t){if(typeof e=="object"&&e!==null){var a=aw.get(e);return a!==void 0?a:(t={value:e,source:t,stack:$y(t)},aw.set(e,t),t)}return{value:e,source:t,stack:$y(t)}}function $g(){for(var e=mh,t=rw=mh=0;t<e;){var a=fr[t];fr[t++]=null;var u=fr[t];fr[t++]=null;var p=fr[t];fr[t++]=null;var m=fr[t];if(fr[t++]=null,u!==null&&p!==null){var x=u.pending;x===null?p.next=p:(p.next=x.next,x.next=p),u.pending=p}m!==0&&Qy(a,p,m)}}function jg(e,t,a,u){fr[mh++]=e,fr[mh++]=t,fr[mh++]=a,fr[mh++]=u,rw|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function wm(e,t,a,u){return jg(e,t,a,u),Lg(e)}function ca(e,t){return jg(e,null,null,t),Lg(e)}function Qy(e,t,a){e.lanes|=a;var u=e.alternate;u!==null&&(u.lanes|=a);for(var p=!1,m=e.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&ow||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&t!==null&&(p=31-hi(a),e=m.hiddenUpdates,u=e[p],u===null?e[p]=[t]:u.push(t),t.lane=a|536870912),m):null}function Lg(e){if(Fv>QR)throw Ff=Fv=0,qv=Pw=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Ff>KR&&(Ff=0,qv=null,console.error("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render.")),e.alternate===null&&e.flags&4098&&Rb(e);for(var t=e,a=t.return;a!==null;)t.alternate===null&&t.flags&4098&&Rb(e),t=a,a=t.return;return t.tag===3?t.stateNode:null}function kl(e){if(gr===null)return e;var t=gr(e);return t===void 0?e:t.current}function Em(e){if(gr===null)return e;var t=gr(e);return t===void 0?e!=null&&typeof e.render=="function"&&(t=kl(e.render),e.render!==t)?(t={$$typeof:Qs,render:t},e.displayName!==void 0&&(t.displayName=e.displayName),t):e:t.current}function Ky(e,t){if(gr===null)return!1;var a=e.elementType;t=t.type;var u=!1,p=typeof t=="object"&&t!==null?t.$$typeof:null;switch(e.tag){case 1:typeof t=="function"&&(u=!0);break;case 0:(typeof t=="function"||p===$a)&&(u=!0);break;case 11:(p===Qs||p===$a)&&(u=!0);break;case 14:case 15:(p===Jp||p===$a)&&(u=!0);break;default:return!1}return!!(u&&(e=gr(a),e!==void 0&&e===gr(t)))}function Bg(e){gr!==null&&typeof WeakSet=="function"&&(bh===null&&(bh=new WeakSet),bh.add(e))}function Ml(e,t,a){var u=e.alternate,p=e.child,m=e.sibling,x=e.tag,E=e.type,D=null;switch(x){case 0:case 15:case 1:D=E;break;case 11:D=E.render}if(gr===null)throw Error("Expected resolveFamily to be set during hot reload.");var U=!1;E=!1,D!==null&&(D=gr(D),D!==void 0&&(a.has(D)?E=!0:t.has(D)&&(x===1?E=!0:U=!0))),bh!==null&&(bh.has(e)||u!==null&&bh.has(u))&&(E=!0),E&&(e._debugNeedsRemount=!0),(E||U)&&(u=ca(e,2),u!==null&&jt(u,e,2)),p===null||E||Ml(p,t,a),m!==null&&Ml(m,t,a)}function $S(e,t,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null,this.actualDuration=-0,this.actualStartTime=-1.1,this.treeBaseDuration=this.selfBaseDuration=-0,this._debugTask=this._debugStack=this._debugOwner=this._debugInfo=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,s1||typeof Object.preventExtensions!="function"||Object.preventExtensions(this)}function Hg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ko(e,t){var a=e.alternate;switch(a===null?(a=A(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a._debugOwner=e._debugOwner,a._debugStack=e._debugStack,a._debugTask=e._debugTask,a._debugHookTypes=e._debugHookTypes,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null,a.actualDuration=-0,a.actualStartTime=-1.1),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext,_debugThenableState:t._debugThenableState},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a.selfBaseDuration=e.selfBaseDuration,a.treeBaseDuration=e.treeBaseDuration,a._debugInfo=e._debugInfo,a._debugNeedsRemount=e._debugNeedsRemount,a.tag){case 0:case 15:a.type=kl(e.type);break;case 1:a.type=kl(e.type);break;case 11:a.type=Em(e.type)}return a}function Cm(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext,_debugThenableState:t._debugThenableState},e.selfBaseDuration=a.selfBaseDuration,e.treeBaseDuration=a.treeBaseDuration),e}function Fg(e,t,a,u,p,m){var x=0,E=e;if(typeof e=="function")Hg(e)&&(x=1),E=kl(E);else if(typeof e=="string")x=q(),x=Bp(e,a,x)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Wp:return t=A(31,a,t,p),t.elementType=Wp,t.lanes=m,t;case Xs:return Ka(a.children,p,m,t);case Jl:x=8,p|=Ma,p|=os;break;case hf:return e=a,u=p,typeof e.id!="string"&&console.error('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof e.id),t=A(12,e,t,u|ea),t.elementType=hf,t.lanes=m,t.stateNode={effectDuration:0,passiveEffectDuration:0},t;case Ks:return t=A(13,a,t,p),t.elementType=Ks,t.lanes=m,t;case Kp:return t=A(19,a,t,p),t.elementType=Kp,t.lanes=m,t;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D0:case Ta:x=10;break e;case mf:x=9;break e;case Qs:x=11,E=Em(E);break e;case Jp:x=14;break e;case $a:x=16,E=null;break e}E="",(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(E+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),e===null?a="null":li(e)?a="array":e!==void 0&&e.$$typeof===Jr?(a="<"+(ne(e.type)||"Unknown")+" />",E=" Did you accidentally export a JSX literal instead of a component?"):a=typeof e,(x=u?Ce(u):null)&&(E+=`

Check the render method of \``+x+"`."),x=29,a=Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(a+"."+E)),E=null}return t=A(x,a,t,p),t.elementType=e,t.type=E,t.lanes=m,t._debugOwner=u,t}function Cd(e,t,a){return t=Fg(e.type,e.key,e.props,e._owner,t,a),t._debugOwner=e._owner,t._debugStack=e._debugStack,t._debugTask=e._debugTask,t}function Ka(e,t,a,u){return e=A(7,e,u,t),e.lanes=a,e}function Tm(e,t,a){return e=A(6,e,null,t),e.lanes=a,e}function km(e,t,a){return t=A(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Al(e,t){wo(),vh[yh++]=Y0,vh[yh++]=V0,V0=e,Y0=t}function Mm(e,t,a){wo(),pr[hr++]=nc,pr[hr++]=ic,pr[hr++]=If,If=e;var u=nc;e=ic;var p=32-hi(u)-1;u&=~(1<<p),a+=1;var m=32-hi(t)+p;if(30<m){var x=p-p%5;m=(u&(1<<x)-1).toString(32),u>>=x,p-=x,nc=1<<32-hi(t)+p|a<<p|u,ic=m+e}else nc=1<<m|a<<p|u,ic=e}function qg(e){wo(),e.return!==null&&(Al(e,1),Mm(e,1,0))}function Ol(e){for(;e===V0;)V0=vh[--yh],vh[yh]=null,Y0=vh[--yh],vh[yh]=null;for(;e===If;)If=pr[--hr],pr[hr]=null,ic=pr[--hr],pr[hr]=null,nc=pr[--hr],pr[hr]=null}function wo(){tn||console.error("Expected to be hydrating. This is a bug in React. Please file an issue.")}function Rl(e,t){if(e.return===null){if(mr===null)mr={fiber:e,children:[],serverProps:void 0,serverTail:[],distanceFromLeaf:t};else{if(mr.fiber!==e)throw Error("Saw multiple hydration diff roots in a pass. This is a bug in React.");mr.distanceFromLeaf>t&&(mr.distanceFromLeaf=t)}return mr}var a=Rl(e.return,t+1).children;return 0<a.length&&a[a.length-1].fiber===e?(a=a[a.length-1],a.distanceFromLeaf>t&&(a.distanceFromLeaf=t),a):(t={fiber:e,children:[],serverProps:void 0,serverTail:[],distanceFromLeaf:t},a.push(t),t)}function Uc(e,t){ac||(e=Rl(e,0),e.serverProps=null,t!==null&&(t=Pp(t),e.serverTail.push(t)))}function Es(e){var t="",a=mr;throw a!==null&&(mr=null,t=Ss(a)),_c(la(Error(`Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:

- A server/client branch \`if (typeof window !== 'undefined')\`.
- Variable input such as \`Date.now()\` or \`Math.random()\` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.

https://react.dev/link/hydration-mismatch`+t),e)),sw}function Am(e){var t=e.stateNode,a=e.type,u=e.memoizedProps;switch(t[Hi]=e,t[ka]=u,Vr(a,u),a){case"dialog":Lt("cancel",t),Lt("close",t);break;case"iframe":case"object":case"embed":Lt("load",t);break;case"video":case"audio":for(a=0;a<Gv.length;a++)Lt(Gv[a],t);break;case"source":Lt("error",t);break;case"img":case"image":case"link":Lt("error",t),Lt("load",t);break;case"details":Lt("toggle",t);break;case"input":Ve("input",u),Lt("invalid",t),vl(t,u),cm(t,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Yn(t);break;case"option":Ly(t,u);break;case"select":Ve("select",u),Lt("invalid",t),Qo(t,u);break;case"textarea":Ve("textarea",u),Lt("invalid",t),Ag(t,u),yl(t,u.value,u.defaultValue,u.children),Yn(t)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||u.suppressHydrationWarning===!0||Xl(t.textContent,a)?(u.popover!=null&&(Lt("beforetoggle",t),Lt("toggle",t)),u.onScroll!=null&&Lt("scroll",t),u.onScrollEnd!=null&&Lt("scrollend",t),u.onClick!=null&&(t.onclick=Ls),t=!0):t=!1,t||Es(e)}function Gg(e){for(Ba=e.return;Ba;)switch(Ba.tag){case 5:case 13:nl=!1;return;case 27:case 3:nl=!0;return;default:Ba=Ba.return}}function Il(e){if(e!==Ba)return!1;if(!tn)return Gg(e),tn=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Hs(e.type,e.memoizedProps)),a=!a),a&&ii){for(a=ii;a;){var u=Rl(e,0),p=Pp(a);u.serverTail.push(p),a=p.type==="Suspense"?yu(a):Ea(a.nextSibling)}Es(e)}if(Gg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");ii=yu(e)}else t===27?(t=ii,si(e.type)?(e=Zw,Zw=null,ii=e):ii=t):ii=Ba?Ea(e.stateNode.nextSibling):null;return!0}function Pc(){ii=Ba=null,ac=tn=!1}function Om(){var e=Df;return e!==null&&(qa===null?qa=e:qa.push.apply(qa,e),Df=null),e}function _c(e){Df===null?Df=[e]:Df.push(e)}function Jy(){var e=mr;if(e!==null){mr=null;for(var t=Ss(e);0<e.children.length;)e=e.children[0];tt(e.fiber,function(){console.error(`A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. This won't be patched up. This can happen if a SSR-ed Client Component used:

- A server/client branch \`if (typeof window !== 'undefined')\`.
- Variable input such as \`Date.now()\` or \`Math.random()\` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.

%s%s`,"https://react.dev/link/hydration-mismatch",t)})}}function Vg(){xh=Z0=null,Sh=!1}function Cs(e,t,a){Ze(lw,t._currentValue,e),t._currentValue=a,Ze(cw,t._currentRenderer,e),t._currentRenderer!==void 0&&t._currentRenderer!==null&&t._currentRenderer!==d1&&console.error("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer=d1}function Rr(e,t){e._currentValue=lw.current;var a=cw.current;De(cw,t),e._currentRenderer=a,De(lw,t)}function Rm(e,t,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===a)break;e=e.return}e!==a&&console.error("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function Qi(e,t,a,u){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var x=p.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=p;for(var D=0;D<t.length;D++)if(E.context===t[D]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Rm(m.return,a,e),u||(x=null);break e}m=E.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error("We just came from a parent so we must have had a parent. This is a bug in React.");x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Rm(x,a,e),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===e){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function Ir(e,t,a,u){e=null;for(var p=t,m=!1;p!==null;){if(!m){if(p.flags&524288)m=!0;else if(p.flags&262144)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error("Should have a current fiber. This is a bug in React.");if(x=x.memoizedProps,x!==null){var E=p.type;La(p.pendingProps.value,x.value)||(e!==null?e.push(E):e=[E])}}else if(p===eh.current){if(x=p.alternate,x===null)throw Error("Should have a current fiber. This is a bug in React.");x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Xv):e=[Xv])}p=p.return}e!==null&&Qi(t,e,a,u),t.flags|=262144}function Td(e){for(e=e.firstContext;e!==null;){if(!La(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ts(e){Z0=e,xh=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Tn(e){return Sh&&console.error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),Yg(Z0,e)}function kd(e,t){return Z0===null&&Ts(e),Yg(e,t)}function Yg(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},xh===null){if(e===null)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");xh=t,e.dependencies={lanes:0,firstContext:t,_debugThenableState:null},e.flags|=524288}else xh=xh.next=t;return a}function Im(){return{controller:new UR,data:new Map,refCount:0}}function Ja(e){e.controller.signal.aborted&&console.warn("A cache instance was retained after it was already freed. This likely indicates a bug in React."),e.refCount++}function Dl(e){e.refCount--,0>e.refCount&&console.warn("A cache instance was released after it was already freed. This likely indicates a bug in React."),e.refCount===0&&PR(_R,function(){e.controller.abort()})}function Ra(){var e=zf;return zf=0,e}function $c(e){var t=zf;return zf=e,t}function jc(e){var t=zf;return zf+=e,t}function Dr(e){lo=wh(),0>e.actualStartTime&&(e.actualStartTime=lo)}function ks(e){if(0<=lo){var t=wh()-lo;e.actualDuration+=t,e.selfBaseDuration=t,lo=-1}}function Zg(e){if(0<=lo){var t=wh()-lo;e.actualDuration+=t,lo=-1}}function Eo(){if(0<=lo){var e=wh()-lo;lo=-1,zf+=e}}function ji(){lo=wh()}function Md(e){for(var t=e.child;t;)e.actualDuration+=t.actualDuration,t=t.sibling}function Wy(e,t){if(wv===null){var a=wv=[];uw=0,Nf=Dp(),Eh={status:"pending",value:void 0,then:function(u){a.push(u)}}}return uw++,t.then(Dm,Dm),t}function Dm(){if(--uw===0&&wv!==null){Eh!==null&&(Eh.status="fulfilled");var e=wv;wv=null,Nf=0,Eh=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jS(e,t){var a=[],u={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return e.then(function(){u.status="fulfilled",u.value=t;for(var p=0;p<a.length;p++)(0,a[p])(t)},function(p){for(u.status="rejected",u.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),u}function zm(){var e=Uf.current;return e!==null?e:On.pooledCache}function Xg(e,t){t===null?Ze(Uf,Uf.current,e):Ze(Uf,t.pool,e)}function Nm(){var e=zm();return e===null?null:{parent:Di._currentValue,pool:e}}function Um(){return{didWarnAboutUncachedPromise:!1,thenables:[]}}function Qg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ua(){}function Pm(e,t,a){le.actQueue!==null&&(le.didUsePromise=!0);var u=e.thenables;switch(a=u[a],a===void 0?u.push(t):a!==t&&(e.didWarnAboutUncachedPromise||(e.didWarnAboutUncachedPromise=!0,console.error("A component was suspended by an uncached promise. Creating promises inside a Client Component or hook is not yet supported, except via a Suspense-compatible library or framework.")),t.then(ua,ua),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Da(e),e;default:if(typeof t.status=="string")t.then(ua,ua);else{if(e=On,e!==null&&100<e.shellSuspendCounter)throw Error("An unknown Component is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.");e=t,e.status="pending",e.then(function(p){if(t.status==="pending"){var m=t;m.status="fulfilled",m.value=p}},function(p){if(t.status==="pending"){var m=t;m.status="rejected",m.reason=p}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Da(e),e}throw Rv=t,ex=!0,Ov}}function Ia(){if(Rv===null)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var e=Rv;return Rv=null,ex=!1,e}function Da(e){if(e===Ov||e===W0)throw Error("Hooks are not supported inside an async component. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.")}function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Co(e){return{lane:e,tag:m1,payload:null,callback:null,next:null}}function To(e,t,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,gw===u&&!y1){var p=de(e);console.error(`An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback.

Please update the following component: %s`,p),y1=!0}return(cn&Fa)!==Go?(p=u.pending,p===null?t.next=t:(t.next=p.next,p.next=t),u.pending=t,t=Lg(e),Qy(e,null,a),t):(jg(e,u,t,a),Lg(e))}function zl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var u=t.lanes;u&=e.pendingLanes,a|=u,t.lanes=a,ut(e,a)}}function zr(e,t){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var p=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?p=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?p=m=t:m=m.next=t}else p=m=t;a={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Lc(){if(pw){var e=Eh;if(e!==null)throw e}}function As(e,t,a,u){pw=!1;var p=e.updateQueue;Uu=!1,gw=p.shared;var m=p.firstBaseUpdate,x=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var D=E,U=D.next;D.next=null,x===null?m=U:x.next=U,x=D;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,E=ce.lastBaseUpdate,E!==x&&(E===null?ce.firstBaseUpdate=U:E.next=U,ce.lastBaseUpdate=D))}if(m!==null){var ve=p.baseState;x=0,ce=U=D=null,E=m;do{var se=E.lane&-536870913,ye=se!==E.lane;if(ye?(Vt&se)===se:(u&se)===se){se!==0&&se===Nf&&(pw=!0),ce!==null&&(ce=ce.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{se=e;var Qe=E,mt=t,Rn=a;switch(Qe.tag){case b1:if(Qe=Qe.payload,typeof Qe=="function"){Sh=!0;var Zt=Qe.call(Rn,ve,mt);if(se.mode&Ma){Pe(!0);try{Qe.call(Rn,ve,mt)}finally{Pe(!1)}}Sh=!1,ve=Zt;break e}ve=Qe;break e;case fw:se.flags=se.flags&-65537|128;case m1:if(Zt=Qe.payload,typeof Zt=="function"){if(Sh=!0,Qe=Zt.call(Rn,ve,mt),se.mode&Ma){Pe(!0);try{Zt.call(Rn,ve,mt)}finally{Pe(!1)}}Sh=!1}else Qe=Zt;if(Qe==null)break e;ve=St({},ve,Qe);break e;case v1:Uu=!0}}se=E.callback,se!==null&&(e.flags|=64,ye&&(e.flags|=8192),ye=p.callbacks,ye===null?p.callbacks=[se]:ye.push(se))}else ye={lane:se,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ce===null?(U=ce=ye,D=ve):ce=ce.next=ye,x|=se;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;ye=E,E=ye.next,ye.next=null,p.lastBaseUpdate=ye,p.shared.pending=null}}while(!0);ce===null&&(D=ve),p.baseState=D,p.firstBaseUpdate=U,p.lastBaseUpdate=ce,m===null&&(p.shared.lanes=0),ju|=x,e.lanes=x,e.memoizedState=ve}gw=null}function Nl(e,t){if(typeof e!="function")throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function LS(e,t){var a=e.shared.hiddenCallbacks;if(a!==null)for(e.shared.hiddenCallbacks=null,e=0;e<a.length;e++)Nl(a[e],t)}function da(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Nl(a[e],t)}function Kg(e,t){var a=ol;Ze(tx,a,e),Ze(Ch,t,e),ol=a|t.baseLanes}function ko(e){Ze(tx,ol,e),Ze(Ch,Ch.current,e)}function Jg(e){ol=tx.current,De(Ch,e),De(tx,e)}function Dt(){var e=be;yr===null?yr=[e]:yr.push(e)}function Ie(){var e=be;if(yr!==null&&(rc++,yr[rc]!==e)){var t=de(wt);if(!x1.has(t)&&(x1.add(t),yr!==null)){for(var a="",u=0;u<=rc;u++){var p=yr[u],m=u===rc?e:p;for(p=u+1+". "+p;30>p.length;)p+=" ";p+=m+`
`,a+=p}console.error(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://react.dev/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,t,a)}}}function Os(e){e==null||li(e)||console.error("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",be,typeof e)}function Bc(){var e=de(wt);w1.has(e)||(w1.add(e),console.error("ReactDOM.useFormState has been renamed to React.useActionState. Please update %s to use React.useActionState.",e))}function Sn(){throw Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function Rs(e,t){if(Dv)return!1;if(t===null)return console.error("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",be),!1;e.length!==t.length&&console.error(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,be,"["+t.join(", ")+"]","["+e.join(", ")+"]");for(var a=0;a<t.length&&a<e.length;a++)if(!La(e[a],t[a]))return!1;return!0}function Hc(e,t,a,u,p,m){Pu=m,wt=t,yr=e!==null?e._debugHookTypes:null,rc=-1,Dv=e!==null&&e.type!==t.type,(Object.prototype.toString.call(a)==="[object AsyncFunction]"||Object.prototype.toString.call(a)==="[object AsyncGeneratorFunction]")&&(m=de(wt),hw.has(m)||(hw.add(m),console.error("%s is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.",m===null?"An unknown Component":"<"+m+">"))),t.memoizedState=null,t.updateQueue=null,t.lanes=0,le.H=e!==null&&e.memoizedState!==null?bw:yr!==null?E1:mw,_f=m=(t.mode&Ma)!==Dn;var x=vw(a,u,p);if(_f=!1,kh&&(x=fa(t,a,u,p)),m){Pe(!0);try{x=fa(t,a,u,p)}finally{Pe(!1)}}return Od(e,t),x}function Od(e,t){t._debugHookTypes=yr,t.dependencies===null?oc!==null&&(t.dependencies={lanes:0,firstContext:null,_debugThenableState:oc}):t.dependencies._debugThenableState=oc,le.H=ax;var a=wn!==null&&wn.next!==null;if(Pu=0,yr=be=vi=wn=wt=null,rc=-1,e!==null&&(e.flags&65011712)!==(t.flags&65011712)&&console.error("Internal React error: Expected static flag was missing. Please notify the React team."),nx=!1,Iv=0,oc=null,a)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");e===null||Fi||(e=e.dependencies,e!==null&&Td(e)&&(Fi=!0)),ex?(ex=!1,e=!0):e=!1,e&&(t=de(t)||"Unknown",S1.has(t)||hw.has(t)||(S1.add(t),console.error("`use` was called from inside a try/catch block. This is not allowed and can lead to unexpected behavior. To handle errors triggered by `use`, wrap your component in a error boundary.")))}function fa(e,t,a,u){wt=e;var p=0;do{if(kh&&(oc=null),Iv=0,kh=!1,p>=jR)throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");if(p+=1,Dv=!1,vi=wn=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}rc=-1,le.H=C1,m=vw(t,a,u)}while(kh);return m}function Wa(){var e=le.H,t=e.useState()[0];return t=typeof t.then=="function"?Ul(t):t,e=e.useState()[0],(wn!==null?wn.memoizedState:null)!==e&&(wt.flags|=1024),t}function Nr(){var e=ix!==0;return ix=0,e}function Mo(e,t,a){t.updateQueue=e.updateQueue,t.flags=(t.mode&os)!==Dn?t.flags&-402655237:t.flags&-2053,e.lanes&=~a}function Ao(e){if(nx){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}nx=!1}Pu=0,yr=vi=wn=wt=null,rc=-1,be=null,kh=!1,Iv=ix=0,oc=null}function Wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?wt.memoizedState=vi=e:vi=vi.next=e,vi}function sn(){if(wn===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=wn.next;var t=vi===null?wt.memoizedState:vi.next;if(t!==null)vi=t,wn=e;else{if(e===null)throw wt.alternate===null?Error("Update hook called on initial render. This is likely a bug in React. Please file an issue."):Error("Rendered more hooks than during the previous render.");wn=e,e={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},vi===null?wt.memoizedState=vi=e:vi=vi.next=e}return vi}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(e){var t=Iv;return Iv+=1,oc===null&&(oc=Um()),e=Pm(oc,e,t),t=wt,(vi===null?t.memoizedState:vi.next)===null&&(t=t.alternate,le.H=t!==null&&t.memoizedState!==null?bw:mw),e}function Bn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ul(e);if(e.$$typeof===Ta)return Tn(e)}throw Error("An unsupported type was passed to use(): "+String(e))}function fn(e){var t=null,a=wt.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var u=wt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(t={data:u.data.map(function(p){return p.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Rd(),wt.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0||Dv)for(a=t.data[t.index]=Array(e),u=0;u<e;u++)a[u]=z0;else a.length!==e&&console.error("Expected a constant size argument for each invocation of useMemoCache. The previous cache was allocated with size %s but size %s was requested.",a.length,e);return t.index++,a}function zt(e,t){return typeof t=="function"?t(e):t}function Ur(e,t,a){var u=Wn();if(a!==void 0){var p=a(t);if(_f){Pe(!0);try{a(t)}finally{Pe(!1)}}}else p=t;return u.memoizedState=u.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},u.queue=e,e=e.dispatch=Ld.bind(null,wt,e),[u.memoizedState,e]}function Ki(e){var t=sn();return Id(t,wn,e)}function Id(e,t,a){var u=e.queue;if(u===null)throw Error("Should have a queue. You are likely calling Hooks conditionally, which is not allowed. (https://react.dev/link/invalid-hook-call)");u.lastRenderedReducer=a;var p=e.baseQueue,m=u.pending;if(m!==null){if(p!==null){var x=p.next;p.next=m.next,m.next=x}t.baseQueue!==p&&console.error("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),t.baseQueue=p=m,u.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{t=p.next;var E=x=null,D=null,U=t,ce=!1;do{var ve=U.lane&-536870913;if(ve!==U.lane?(Vt&ve)===ve:(Pu&ve)===ve){var se=U.revertLane;if(se===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ve===Nf&&(ce=!0);else if((Pu&se)===se){U=U.next,se===Nf&&(ce=!0);continue}else ve={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(E=D=ve,x=m):D=D.next=ve,wt.lanes|=se,ju|=se;ve=U.action,_f&&a(m,ve),m=U.hasEagerState?U.eagerState:a(m,ve)}else se={lane:ve,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(E=D=se,x=m):D=D.next=se,wt.lanes|=ve,ju|=ve;U=U.next}while(U!==null&&U!==t);if(D===null?x=m:D.next=E,!La(m,e.memoizedState)&&(Fi=!0,ce&&(a=Eh,a!==null)))throw a;e.memoizedState=m,e.baseState=x,e.baseQueue=D,u.lastRenderedState=m}return p===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Oo(e){var t=sn(),a=t.queue;if(a===null)throw Error("Should have a queue. You are likely calling Hooks conditionally, which is not allowed. (https://react.dev/link/invalid-hook-call)");a.lastRenderedReducer=e;var u=a.dispatch,p=a.pending,m=t.memoizedState;if(p!==null){a.pending=null;var x=p=p.next;do m=e(m,x.action),x=x.next;while(x!==p);La(m,t.memoizedState)||(Fi=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),a.lastRenderedState=m}return[m,u]}function Wg(e,t,a){var u=wt,p=Wn();if(tn){if(a===void 0)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");var m=a();Th||m===a()||(console.error("The result of getServerSnapshot should be cached to avoid an infinite loop"),Th=!0)}else{if(m=t(),Th||(a=t(),La(m,a)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),Th=!0)),On===null)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Vt&124||Fc(u,t,m)}return p.memoizedState=m,a={value:m,getSnapshot:t},p.queue=a,Ud(_m.bind(null,u,a,e),[e]),u.flags|=2048,er(vr|zi,Zc(),qc.bind(null,u,a,m,t),null),m}function Dd(e,t,a){var u=wt,p=sn(),m=tn;if(m){if(a===void 0)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");a=a()}else if(a=t(),!Th){var x=t();La(a,x)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),Th=!0)}(x=!La((wn||p).memoizedState,a))&&(p.memoizedState=a,Fi=!0),p=p.queue;var E=_m.bind(null,u,p,e);if(ga(2048,zi,E,[e]),p.getSnapshot!==t||x||vi!==null&&vi.memoizedState.tag&vr){if(u.flags|=2048,er(vr|zi,Zc(),qc.bind(null,u,p,a,t),null),On===null)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");m||Pu&124||Fc(u,t,a)}return a}function Fc(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=wt.updateQueue,t===null?(t=Rd(),wt.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function qc(e,t,a,u){t.value=a,t.getSnapshot=u,Gc(t)&&ep(e)}function _m(e,t,a){return a(function(){Gc(t)&&ep(e)})}function Gc(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!La(e,a)}catch{return!0}}function ep(e){var t=ca(e,2);t!==null&&jt(t,e,2)}function Pr(e){var t=Wn();if(typeof e=="function"){var a=e;if(e=a(),_f){Pe(!0);try{a()}finally{Pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zt,lastRenderedState:e},t}function Ro(e){e=Pr(e);var t=e.queue,a=eu.bind(null,wt,t);return t.dispatch=a,[e.memoizedState,a]}function Jo(e){var t=Wn();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=sp.bind(null,wt,!0,a),a.dispatch=t,[e,t]}function Wo(e,t){var a=sn();return tp(a,wn,e,t)}function tp(e,t,a,u){return e.baseState=a,Id(e,wn,typeof u=="function"?u:zt)}function np(e,t){var a=sn();return wn!==null?tp(a,wn,e,t):(a.baseState=e,[e,a.queue.dispatch])}function zd(e,t,a,u,p){if(Lr(e))throw Error("Cannot update form state while rendering.");if(e=t.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};le.T!==null?a(!0):m.isTransition=!1,u(m),a=t.pending,a===null?(m.next=t.pending=m,Nd(t,m)):(m.next=a.next,t.pending=a.next=m)}}function Nd(e,t){var a=t.action,u=t.payload,p=e.state;if(t.isTransition){var m=le.T,x={};le.T=x,le.T._updatedFibers=new Set;try{var E=a(p,u),D=le.S;D!==null&&D(x,E),Is(e,t,E)}catch(U){Vc(e,t,U)}finally{le.T=m,m===null&&x._updatedFibers&&(e=x._updatedFibers.size,x._updatedFibers.clear(),10<e&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."))}}else try{x=a(p,u),Is(e,t,x)}catch(U){Vc(e,t,U)}}function Is(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?(a.then(function(u){Mi(e,t,u)},function(u){return Vc(e,t,u)}),t.isTransition||console.error("An async function with useActionState was called outside of a transition. This is likely not what you intended (for example, isPending will not update correctly). Either call the returned function inside startTransition, or pass it to an `action` or `formAction` prop.")):Mi(e,t,a)}function Mi(e,t,a){t.status="fulfilled",t.value=a,$m(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Nd(e,a)))}function Vc(e,t,a){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do t.status="rejected",t.reason=a,$m(t),t=t.next;while(t!==u)}e.action=null}function $m(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function e0(e,t){return t}function Yc(e,t){if(tn){var a=On.formState;if(a!==null){e:{var u=wt;if(tn){if(ii){t:{for(var p=ii,m=nl;p.nodeType!==8;){if(!m){p=null;break t}if(p=Ea(p.nextSibling),p===null){p=null;break t}}m=p.data,p=m===qw||m===wT?p:null}if(p){ii=Ea(p.nextSibling),u=p.data===qw;break e}}Es(u)}u=!1}u&&(t=a[0])}}return a=Wn(),a.memoizedState=a.baseState=t,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e0,lastRenderedState:t},a.queue=u,a=eu.bind(null,wt,u),u.dispatch=a,u=Pr(!1),m=sp.bind(null,wt,!1,u.queue),u=Wn(),p={state:t,dispatch:null,action:e,pending:null},u.queue=p,a=zd.bind(null,wt,p,m,a),p.dispatch=a,u.memoizedState=e,[t,a,!1]}function ip(e){var t=sn();return ei(t,wn,e)}function ei(e,t,a){if(t=Id(e,t,e0)[0],e=Ki(zt)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var u=Ul(t)}catch(x){throw x===Ov?W0:x}else u=t;t=sn();var p=t.queue,m=p.dispatch;return a!==t.memoizedState&&(wt.flags|=2048,er(vr|zi,Zc(),jm.bind(null,p,a),null)),[u,m,e]}function jm(e,t){e.action=t}function Ds(e){var t=sn(),a=wn;if(a!==null)return ei(t,a,e);sn(),t=t.memoizedState,a=sn();var u=a.queue.dispatch;return a.memoizedState=e,[t,u,!1]}function er(e,t,a,u){return e={tag:e,create:a,deps:u,inst:t,next:null},t=wt.updateQueue,t===null&&(t=Rd(),wt.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,t.lastEffect=e),e}function Zc(){return{destroy:void 0,resource:void 0}}function zs(e){var t=Wn();return e={current:e},t.memoizedState=e}function eo(e,t,a,u){var p=Wn();u=u===void 0?null:u,wt.flags|=e,p.memoizedState=er(vr|t,Zc(),a,u)}function ga(e,t,a,u){var p=sn();u=u===void 0?null:u;var m=p.memoizedState.inst;wn!==null&&u!==null&&Rs(u,wn.memoizedState.deps)?p.memoizedState=er(t,m,a,u):(wt.flags|=e,p.memoizedState=er(vr|t,m,a,u))}function Ud(e,t){(wt.mode&os)!==Dn&&(wt.mode&r1)===Dn?eo(276826112,zi,e,t):eo(8390656,zi,e,t)}function Lm(e,t){var a=4194308;return(wt.mode&os)!==Dn&&(a|=134217728),eo(a,ta,e,t)}function Bm(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return t.hasOwnProperty("current")||console.error("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(t).join(", ")+"}"),e=e(),t.current=e,function(){t.current=null}}function _r(e,t,a){typeof t!="function"&&console.error("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",t!==null?typeof t:"null"),a=a!=null?a.concat([e]):null;var u=4194308;(wt.mode&os)!==Dn&&(u|=134217728),eo(u,ta,Bm.bind(null,t,e),a)}function Xc(e,t,a){typeof t!="function"&&console.error("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",t!==null?typeof t:"null"),a=a!=null?a.concat([e]):null,ga(4,ta,Bm.bind(null,t,e),a)}function Qc(e,t){return Wn().memoizedState=[e,t===void 0?null:t],e}function Pd(e,t){var a=sn();t=t===void 0?null:t;var u=a.memoizedState;return t!==null&&Rs(t,u[1])?u[0]:(a.memoizedState=[e,t],e)}function Pl(e,t){var a=Wn();t=t===void 0?null:t;var u=e();if(_f){Pe(!0);try{e()}finally{Pe(!1)}}return a.memoizedState=[u,t],u}function _d(e,t){var a=sn();t=t===void 0?null:t;var u=a.memoizedState;if(t!==null&&Rs(t,u[1]))return u[0];if(u=e(),_f){Pe(!0);try{e()}finally{Pe(!1)}}return a.memoizedState=[u,t],u}function Kc(e,t){var a=Wn();return Jc(a,e,t)}function ap(e,t){var a=sn();return Fm(a,wn.memoizedState,e,t)}function Hm(e,t){var a=sn();return wn===null?Jc(a,e,t):Fm(a,wn.memoizedState,e,t)}function Jc(e,t,a){return a===void 0||Pu&1073741824?e.memoizedState=t:(e.memoizedState=a,e=xb(),wt.lanes|=e,ju|=e,a)}function Fm(e,t,a,u){return La(a,t)?a:Ch.current!==null?(e=Jc(e,a,u),La(e,t)||(Fi=!0),e):Pu&42?(e=xb(),wt.lanes|=e,ju|=e,t):(Fi=!0,e.memoizedState=a)}function Wc(e,t,a,u,p){var m=on.p;on.p=m!==0&&m<sr?m:sr;var x=le.T,E={};le.T=E,sp(e,!1,t,a),E._updatedFibers=new Set;try{var D=p(),U=le.S;if(U!==null&&U(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ce=jS(D,u);tu(e,t,ce,Na(e))}else tu(e,t,u,Na(e))}catch(ve){tu(e,t,{then:function(){},status:"rejected",reason:ve},Na(e))}finally{on.p=m,le.T=x,x===null&&E._updatedFibers&&(e=E._updatedFibers.size,E._updatedFibers.clear(),10<e&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."))}}function op(e,t,a,u){if(e.tag!==5)throw Error("Expected the form instance to be a HostComponent. This is a bug in React.");var p=qm(e).queue;Wc(e,p,t,Zf,a===null?N:function(){return $r(e),a(u)})}function qm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Zf,baseState:Zf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zt,lastRenderedState:Zf},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zt,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $r(e){le.T===null&&console.error("requestFormReset was called outside a transition or action. To fix, move to an action, or wrap with startTransition.");var t=qm(e).next.queue;tu(e,t,{},Na(e))}function $d(){var e=Pr(!1);return e=Wc.bind(null,wt,e.queue,!0,!1),Wn().memoizedState=e,[!1,e]}function rp(){var e=Ki(zt)[0],t=sn().memoizedState;return[typeof e=="boolean"?e:Ul(e),t]}function jr(){var e=Oo(zt)[0],t=sn().memoizedState;return[typeof e=="boolean"?e:Ul(e),t]}function pa(){return Tn(Xv)}function _l(){var e=Wn(),t=On.identifierPrefix;if(tn){var a=ic,u=nc;a=(u&~(1<<32-hi(u)-1)).toString(32)+a,t=""+t+"R"+a,a=ix++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=$R++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t}function jd(){return Wn().memoizedState=Gm.bind(null,wt)}function Gm(e,t){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var u=Na(a);e=Co(u);var p=To(a,e,u);p!==null&&(jt(p,a,u),zl(p,a,u)),a=Im(),t!=null&&p!==null&&console.error("The seed argument is not enabled outside experimental channels."),e.payload={cache:a};return}a=a.return}}function Ld(e,t,a){var u=arguments;typeof u[3]=="function"&&console.error("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect()."),u=Na(e);var p={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};Lr(e)?Bd(t,p):(p=wm(e,t,p,u),p!==null&&(jt(p,e,u),Vm(p,t,u))),nn(e,u)}function eu(e,t,a){var u=arguments;typeof u[3]=="function"&&console.error("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect()."),u=Na(e),tu(e,t,a,u),nn(e,u)}function tu(e,t,a,u){var p={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lr(e))Bd(t,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null)){var x=le.H;le.H=ss;try{var E=t.lastRenderedState,D=m(E,a);if(p.hasEagerState=!0,p.eagerState=D,La(D,E))return jg(e,t,p,0),On===null&&$g(),!1}catch{}finally{le.H=x}}if(a=wm(e,t,p,u),a!==null)return jt(a,e,u),Vm(a,t,u),!0}return!1}function sp(e,t,a,u){if(le.T===null&&Nf===0&&console.error("An optimistic state update occurred outside a transition or action. To fix, move the update to an action, or wrap with startTransition."),u={lane:2,revertLane:Dp(),action:u,hasEagerState:!1,eagerState:null,next:null},Lr(e)){if(t)throw Error("Cannot update optimistic state while rendering.");console.error("Cannot call startTransition while rendering.")}else t=wm(e,a,u,2),t!==null&&jt(t,e,2);nn(e,2)}function Lr(e){var t=e.alternate;return e===wt||t!==null&&t===wt}function Bd(e,t){kh=nx=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Vm(e,t,a){if(a&4194048){var u=t.lanes;u&=e.pendingLanes,a|=u,t.lanes=a,ut(e,a)}}function oi(e){var t=$t;return e!=null&&($t=t===null?e:t.concat(e)),t}function nu(e,t,a){for(var u=Object.keys(e.props),p=0;p<u.length;p++){var m=u[p];if(m!=="children"&&m!=="key"){t===null&&(t=Cd(e,a.mode,0),t._debugInfo=$t,t.return=a),tt(t,function(x){console.error("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",x)},m);break}}}function Io(e){var t=zv;return zv+=1,Mh===null&&(Mh=Um()),Pm(Mh,e,t)}function Ct(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function an(e,t){throw t.$$typeof===YS?Error(`A React Element from an older version of React was rendered. This is not supported. It can happen if:
- Multiple copies of the "react" package is used.
- A library pre-bundled an old copy of "react" or "react/jsx-runtime".
- A compiler tries to "inline" JSX instead of using the runtime.`):(e=Object.prototype.toString.call(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead."))}function _n(e,t){var a=de(e)||"Component";j1[a]||(j1[a]=!0,t=t.displayName||t.name||"Component",e.tag===3?console.error(`Functions are not valid as a React child. This may happen if you return %s instead of <%s /> from render. Or maybe you meant to call this function rather than return it.
  root.render(%s)`,t,t,t):console.error(`Functions are not valid as a React child. This may happen if you return %s instead of <%s /> from render. Or maybe you meant to call this function rather than return it.
  <%s>{%s}</%s>`,t,t,a,t,a))}function $l(e,t){var a=de(e)||"Component";L1[a]||(L1[a]=!0,t=String(t),e.tag===3?console.error(`Symbols are not valid as a React child.
  root.render(%s)`,t):console.error(`Symbols are not valid as a React child.
  <%s>%s</%s>`,a,t,a))}function jl(e){function t(L,H){if(e){var G=L.deletions;G===null?(L.deletions=[H],L.flags|=16):G.push(H)}}function a(L,H){if(!e)return null;for(;H!==null;)t(L,H),H=H.sibling;return null}function u(L){for(var H=new Map;L!==null;)L.key!==null?H.set(L.key,L):H.set(L.index,L),L=L.sibling;return H}function p(L,H){return L=Ko(L,H),L.index=0,L.sibling=null,L}function m(L,H,G){return L.index=G,e?(G=L.alternate,G!==null?(G=G.index,G<H?(L.flags|=67108866,H):G):(L.flags|=67108866,H)):(L.flags|=1048576,H)}function x(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function E(L,H,G,xe){return H===null||H.tag!==6?(H=Tm(G,L.mode,xe),H.return=L,H._debugOwner=L,H._debugTask=L._debugTask,H._debugInfo=$t,H):(H=p(H,G),H.return=L,H._debugInfo=$t,H)}function D(L,H,G,xe){var Le=G.type;return Le===Xs?(H=ce(L,H,G.props.children,xe,G.key),nu(G,H,L),H):H!==null&&(H.elementType===Le||Ky(H,G)||typeof Le=="object"&&Le!==null&&Le.$$typeof===$a&&_u(Le)===H.type)?(H=p(H,G.props),Ct(H,G),H.return=L,H._debugOwner=G._owner,H._debugInfo=$t,H):(H=Cd(G,L.mode,xe),Ct(H,G),H.return=L,H._debugInfo=$t,H)}function U(L,H,G,xe){return H===null||H.tag!==4||H.stateNode.containerInfo!==G.containerInfo||H.stateNode.implementation!==G.implementation?(H=km(G,L.mode,xe),H.return=L,H._debugInfo=$t,H):(H=p(H,G.children||[]),H.return=L,H._debugInfo=$t,H)}function ce(L,H,G,xe,Le){return H===null||H.tag!==7?(H=Ka(G,L.mode,xe,Le),H.return=L,H._debugOwner=L,H._debugTask=L._debugTask,H._debugInfo=$t,H):(H=p(H,G),H.return=L,H._debugInfo=$t,H)}function ve(L,H,G){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Tm(""+H,L.mode,G),H.return=L,H._debugOwner=L,H._debugTask=L._debugTask,H._debugInfo=$t,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Jr:return G=Cd(H,L.mode,G),Ct(G,H),G.return=L,L=oi(H._debugInfo),G._debugInfo=$t,$t=L,G;case Mt:return H=km(H,L.mode,G),H.return=L,H._debugInfo=$t,H;case $a:var xe=oi(H._debugInfo);return H=_u(H),L=ve(L,H,G),$t=xe,L}if(li(H)||he(H))return G=Ka(H,L.mode,G,null),G.return=L,G._debugOwner=L,G._debugTask=L._debugTask,L=oi(H._debugInfo),G._debugInfo=$t,$t=L,G;if(typeof H.then=="function")return xe=oi(H._debugInfo),L=ve(L,Io(H),G),$t=xe,L;if(H.$$typeof===Ta)return ve(L,kd(L,H),G);an(L,H)}return typeof H=="function"&&_n(L,H),typeof H=="symbol"&&$l(L,H),null}function se(L,H,G,xe){var Le=H!==null?H.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Le!==null?null:E(L,H,""+G,xe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Jr:return G.key===Le?(Le=oi(G._debugInfo),L=D(L,H,G,xe),$t=Le,L):null;case Mt:return G.key===Le?U(L,H,G,xe):null;case $a:return Le=oi(G._debugInfo),G=_u(G),L=se(L,H,G,xe),$t=Le,L}if(li(G)||he(G))return Le!==null?null:(Le=oi(G._debugInfo),L=ce(L,H,G,xe,null),$t=Le,L);if(typeof G.then=="function")return Le=oi(G._debugInfo),L=se(L,H,Io(G),xe),$t=Le,L;if(G.$$typeof===Ta)return se(L,H,kd(L,G),xe);an(L,G)}return typeof G=="function"&&_n(L,G),typeof G=="symbol"&&$l(L,G),null}function ye(L,H,G,xe,Le){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return L=L.get(G)||null,E(H,L,""+xe,Le);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case Jr:return G=L.get(xe.key===null?G:xe.key)||null,L=oi(xe._debugInfo),H=D(H,G,xe,Le),$t=L,H;case Mt:return L=L.get(xe.key===null?G:xe.key)||null,U(H,L,xe,Le);case $a:var At=oi(xe._debugInfo);return xe=_u(xe),H=ye(L,H,G,xe,Le),$t=At,H}if(li(xe)||he(xe))return G=L.get(G)||null,L=oi(xe._debugInfo),H=ce(H,G,xe,Le,null),$t=L,H;if(typeof xe.then=="function")return At=oi(xe._debugInfo),H=ye(L,H,G,Io(xe),Le),$t=At,H;if(xe.$$typeof===Ta)return ye(L,H,G,kd(H,xe),Le);an(H,xe)}return typeof xe=="function"&&_n(H,xe),typeof xe=="symbol"&&$l(H,xe),null}function Qe(L,H,G,xe){if(typeof G!="object"||G===null)return xe;switch(G.$$typeof){case Jr:case Mt:S(L,H,G);var Le=G.key;if(typeof Le!="string")break;if(xe===null){xe=new Set,xe.add(Le);break}if(!xe.has(Le)){xe.add(Le);break}tt(H,function(){console.error("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",Le)});break;case $a:G=_u(G),Qe(L,H,G,xe)}return xe}function mt(L,H,G,xe){for(var Le=null,At=null,Ke=null,Ot=H,Ut=H=0,zn=null;Ot!==null&&Ut<G.length;Ut++){Ot.index>Ut?(zn=Ot,Ot=null):zn=Ot.sibling;var ui=se(L,Ot,G[Ut],xe);if(ui===null){Ot===null&&(Ot=zn);break}Le=Qe(L,ui,G[Ut],Le),e&&Ot&&ui.alternate===null&&t(L,Ot),H=m(ui,H,Ut),Ke===null?At=ui:Ke.sibling=ui,Ke=ui,Ot=zn}if(Ut===G.length)return a(L,Ot),tn&&Al(L,Ut),At;if(Ot===null){for(;Ut<G.length;Ut++)Ot=ve(L,G[Ut],xe),Ot!==null&&(Le=Qe(L,Ot,G[Ut],Le),H=m(Ot,H,Ut),Ke===null?At=Ot:Ke.sibling=Ot,Ke=Ot);return tn&&Al(L,Ut),At}for(Ot=u(Ot);Ut<G.length;Ut++)zn=ye(Ot,L,Ut,G[Ut],xe),zn!==null&&(Le=Qe(L,zn,G[Ut],Le),e&&zn.alternate!==null&&Ot.delete(zn.key===null?Ut:zn.key),H=m(zn,H,Ut),Ke===null?At=zn:Ke.sibling=zn,Ke=zn);return e&&Ot.forEach(function(fc){return t(L,fc)}),tn&&Al(L,Ut),At}function Rn(L,H,G,xe){if(G==null)throw Error("An iterable object provided no iterator.");for(var Le=null,At=null,Ke=H,Ot=H=0,Ut=null,zn=null,ui=G.next();Ke!==null&&!ui.done;Ot++,ui=G.next()){Ke.index>Ot?(Ut=Ke,Ke=null):Ut=Ke.sibling;var fc=se(L,Ke,ui.value,xe);if(fc===null){Ke===null&&(Ke=Ut);break}zn=Qe(L,fc,ui.value,zn),e&&Ke&&fc.alternate===null&&t(L,Ke),H=m(fc,H,Ot),At===null?Le=fc:At.sibling=fc,At=fc,Ke=Ut}if(ui.done)return a(L,Ke),tn&&Al(L,Ot),Le;if(Ke===null){for(;!ui.done;Ot++,ui=G.next())Ke=ve(L,ui.value,xe),Ke!==null&&(zn=Qe(L,Ke,ui.value,zn),H=m(Ke,H,Ot),At===null?Le=Ke:At.sibling=Ke,At=Ke);return tn&&Al(L,Ot),Le}for(Ke=u(Ke);!ui.done;Ot++,ui=G.next())Ut=ye(Ke,L,Ot,ui.value,xe),Ut!==null&&(zn=Qe(L,Ut,ui.value,zn),e&&Ut.alternate!==null&&Ke.delete(Ut.key===null?Ot:Ut.key),H=m(Ut,H,Ot),At===null?Le=Ut:At.sibling=Ut,At=Ut);return e&&Ke.forEach(function(d3){return t(L,d3)}),tn&&Al(L,Ot),Le}function Zt(L,H,G,xe){if(typeof G=="object"&&G!==null&&G.type===Xs&&G.key===null&&(nu(G,null,L),G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Jr:var Le=oi(G._debugInfo);e:{for(var At=G.key;H!==null;){if(H.key===At){if(At=G.type,At===Xs){if(H.tag===7){a(L,H.sibling),xe=p(H,G.props.children),xe.return=L,xe._debugOwner=G._owner,xe._debugInfo=$t,nu(G,xe,L),L=xe;break e}}else if(H.elementType===At||Ky(H,G)||typeof At=="object"&&At!==null&&At.$$typeof===$a&&_u(At)===H.type){a(L,H.sibling),xe=p(H,G.props),Ct(xe,G),xe.return=L,xe._debugOwner=G._owner,xe._debugInfo=$t,L=xe;break e}a(L,H);break}else t(L,H);H=H.sibling}G.type===Xs?(xe=Ka(G.props.children,L.mode,xe,G.key),xe.return=L,xe._debugOwner=L,xe._debugTask=L._debugTask,xe._debugInfo=$t,nu(G,xe,L),L=xe):(xe=Cd(G,L.mode,xe),Ct(xe,G),xe.return=L,xe._debugInfo=$t,L=xe)}return L=x(L),$t=Le,L;case Mt:e:{for(Le=G,G=Le.key;H!==null;){if(H.key===G)if(H.tag===4&&H.stateNode.containerInfo===Le.containerInfo&&H.stateNode.implementation===Le.implementation){a(L,H.sibling),xe=p(H,Le.children||[]),xe.return=L,L=xe;break e}else{a(L,H);break}else t(L,H);H=H.sibling}xe=km(Le,L.mode,xe),xe.return=L,L=xe}return x(L);case $a:return Le=oi(G._debugInfo),G=_u(G),L=Zt(L,H,G,xe),$t=Le,L}if(li(G))return Le=oi(G._debugInfo),L=mt(L,H,G,xe),$t=Le,L;if(he(G)){if(Le=oi(G._debugInfo),At=he(G),typeof At!="function")throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");var Ke=At.call(G);return Ke===G?(L.tag!==0||Object.prototype.toString.call(L.type)!=="[object GeneratorFunction]"||Object.prototype.toString.call(Ke)!=="[object Generator]")&&(_1||console.error("Using Iterators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. You can also use an Iterable that can iterate multiple times over the same items."),_1=!0):G.entries!==At||xw||(console.error("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),xw=!0),L=Rn(L,H,Ke,xe),$t=Le,L}if(typeof G.then=="function")return Le=oi(G._debugInfo),L=Zt(L,H,Io(G),xe),$t=Le,L;if(G.$$typeof===Ta)return Zt(L,H,kd(L,G),xe);an(L,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(Le=""+G,H!==null&&H.tag===6?(a(L,H.sibling),xe=p(H,Le),xe.return=L,L=xe):(a(L,H),xe=Tm(Le,L.mode,xe),xe.return=L,xe._debugOwner=L,xe._debugTask=L._debugTask,xe._debugInfo=$t,L=xe),x(L)):(typeof G=="function"&&_n(L,G),typeof G=="symbol"&&$l(L,G),a(L,H))}return function(L,H,G,xe){var Le=$t;$t=null;try{zv=0;var At=Zt(L,H,G,xe);return Mh=null,At}catch(zn){if(zn===Ov||zn===W0)throw zn;var Ke=A(29,zn,null,L.mode);Ke.lanes=xe,Ke.return=L;var Ot=Ke._debugInfo=$t;if(Ke._debugOwner=L._debugOwner,Ke._debugTask=L._debugTask,Ot!=null){for(var Ut=Ot.length-1;0<=Ut;Ut--)if(typeof Ot[Ut].stack=="string"){Ke._debugOwner=Ot[Ut],Ke._debugTask=Ot[Ut].debugTask;break}}return Ke}finally{$t=Le}}}function ha(e){var t=e.alternate;Ze(Ni,Ni.current&Oh,e),Ze(xr,e,e),al===null&&(t===null||Ch.current!==null||t.memoizedState!==null)&&(al=e)}function Hd(e){if(e.tag===22){if(Ze(Ni,Ni.current,e),Ze(xr,e,e),al===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(al=e)}}else to(e)}function to(e){Ze(Ni,Ni.current,e),Ze(xr,xr.current,e)}function ma(e){De(xr,e),al===e&&(al=null),De(Ni,e)}function lp(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data===cc||Vs(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function $n(e){if(e!==null&&typeof e!="function"){var t=String(e);J1.has(t)||(J1.add(t),console.error("Expected the last optional `callback` argument to be a function. Instead received: %s.",e))}}function Fd(e,t,a,u){var p=e.memoizedState,m=a(u,p);if(e.mode&Ma){Pe(!0);try{m=a(u,p)}finally{Pe(!1)}}m===void 0&&(t=ne(t)||"Component",Z1.has(t)||(Z1.add(t),console.error("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",t))),p=m==null?p:St({},p,m),e.memoizedState=p,e.lanes===0&&(e.updateQueue.baseState=p)}function cp(e,t,a,u,p,m,x){var E=e.stateNode;if(typeof E.shouldComponentUpdate=="function"){if(a=E.shouldComponentUpdate(u,m,x),e.mode&Ma){Pe(!0);try{a=E.shouldComponentUpdate(u,m,x)}finally{Pe(!1)}}return a===void 0&&console.error("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",ne(t)||"Component"),a}return t.prototype&&t.prototype.isPureReactComponent?!Ed(a,u)||!Ed(p,m):!0}function Ym(e,t,a,u){var p=t.state;typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,u),t.state!==p&&(e=de(e)||"Component",F1.has(e)||(F1.add(e),console.error("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",e)),Sw.enqueueReplaceState(t,t.state,null))}function Ns(e,t){var a=t;if("ref"in t){a={};for(var u in t)u!=="ref"&&(a[u]=t[u])}if(e=e.defaultProps){a===t&&(a=St({},a));for(var p in e)a[p]===void 0&&(a[p]=e[p])}return a}function t0(e){ww(e),console.warn(`%s

%s
`,Rh?"An error occurred in the <"+Rh+"> component.":"An error occurred in one of your React components.",`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.`)}function up(e){var t=Rh?"The above error occurred in the <"+Rh+"> component.":"The above error occurred in one of your React components.",a="React will try to recreate this component tree from scratch using the error boundary you provided, "+((Ew||"Anonymous")+".");if(typeof e=="object"&&e!==null&&typeof e.environmentName=="string"){var u=e.environmentName;e=[`%o

%s

%s
`,e,t,a].slice(0),typeof e[0]=="string"?e.splice(0,1,RT+e[0],IT,Ex+u+Ex,DT):e.splice(0,0,RT,IT,Ex+u+Ex,DT),e.unshift(console),u=c3.apply(console.error,e),u()}else console.error(`%o

%s

%s
`,e,t,a)}function dp(e){ww(e)}function iu(e,t){try{Rh=t.source?de(t.source):null,Ew=null;var a=t.value;if(le.actQueue!==null)le.thrownErrors.push(a);else{var u=e.onUncaughtError;u(a,{componentStack:t.stack})}}catch(p){setTimeout(function(){throw p})}}function Ji(e,t,a){try{Rh=a.source?de(a.source):null,Ew=de(t);var u=e.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Hn(e,t,a){return a=Co(a),a.tag=fw,a.payload={element:null},a.callback=function(){tt(t.source,iu,e,t)},a}function qd(e){return e=Co(e),e.tag=fw,e}function Ll(e,t,a,u){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var m=u.value;e.payload=function(){return p(m)},e.callback=function(){Bg(a),tt(u.source,Ji,t,a,u)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){Bg(a),tt(u.source,Ji,t,a,u),typeof p!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this)),LR(this,u),typeof p=="function"||!(a.lanes&2)&&console.error("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",de(a)||"Unknown")})}function fp(e,t,a,u,p){if(a.flags|=32768,so&&Yl(e,p),u!==null&&typeof u=="object"&&typeof u.then=="function"){if(t=a.alternate,t!==null&&Ir(t,a,p,!0),tn&&(ac=!0),a=xr.current,a!==null){switch(a.tag){case 13:return al===null?kp():a.alternate===null&&ai===lc&&(ai=Mw),a.flags&=-257,a.flags|=65536,a.lanes=p,u===dw?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([u]):t.add(u),Ob(e,u,p)),!1;case 22:return a.flags|=65536,u===dw?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([u]):a.add(u)),Ob(e,u,p)),!1}throw Error("Unexpected Suspense handler tag ("+a.tag+"). This is a bug in React.")}return Ob(e,u,p),kp(),!1}if(tn)return ac=!0,t=xr.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=p,u!==sw&&_c(la(Error("There was an error while hydrating but React was able to recover by instead client rendering from the nearest Suspense boundary.",{cause:u}),a))):(u!==sw&&_c(la(Error("There was an error while hydrating but React was able to recover by instead client rendering the entire root.",{cause:u}),a)),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,u=la(u,a),p=Hn(e.stateNode,u,p),zr(e,p),ai!==$f&&(ai=Nh)),!1;var m=la(Error("There was an error during concurrent rendering but React was able to recover by instead synchronously rendering the entire root.",{cause:u}),a);if(Bv===null?Bv=[m]:Bv.push(m),ai!==$f&&(ai=Nh),t===null)return!0;u=la(u,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=p&-p,a.lanes|=e,e=Hn(a.stateNode,u,e),zr(a,e),!1;case 1:if(t=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Bu===null||!Bu.has(m))))return a.flags|=65536,p&=-p,a.lanes|=p,p=qd(p),Ll(p,e,a,u),zr(a,p),!1}a=a.return}while(a!==null);return!1}function ri(e,t,a,u){t.child=e===null?B1(t,null,a,u):Ah(t,e.child,a,u)}function tr(e,t,a,u,p){a=a.render;var m=t.ref;if("ref"in u){var x={};for(var E in u)E!=="ref"&&(x[E]=u[E])}else x=u;return Ts(t),at(t),u=Hc(e,t,a,x,m,p),E=Nr(),Xe(),e!==null&&!Fi?(Mo(e,t,p),nr(e,t,p)):(tn&&E&&qg(t),t.flags|=1,ri(e,t,u,p),t.child)}function Gd(e,t,a,u,p){if(e===null){var m=a.type;return typeof m=="function"&&!Hg(m)&&m.defaultProps===void 0&&a.compare===null?(a=kl(m),t.tag=15,t.type=a,Yd(t,m),gp(e,t,a,u,p)):(e=Fg(a.type,null,u,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!ib(e,p)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ed,a(x,u)&&e.ref===t.ref)return nr(e,t,p)}return t.flags|=1,e=Ko(m,u),e.ref=t.ref,e.return=t,t.child=e}function gp(e,t,a,u,p){if(e!==null){var m=e.memoizedProps;if(Ed(m,u)&&e.ref===t.ref&&t.type===e.type)if(Fi=!1,t.pendingProps=u=m,ib(e,p))e.flags&131072&&(Fi=!0);else return t.lanes=e.lanes,nr(e,t,p)}return hp(e,t,a,u,p)}function pp(e,t,a){var u=t.pendingProps,p=u.children,m=e!==null?e.memoizedState:null;if(u.mode==="hidden"){if(t.flags&128){if(u=m!==null?m.baseLanes|a:a,e!==null){for(p=t.child=e.child,m=0;p!==null;)m=m|p.lanes|p.childLanes,p=p.sibling;t.childLanes=m&~u}else t.childLanes=0,t.child=null;return Zm(e,t,u,a)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xg(t,m!==null?m.cachePool:null),m!==null?Kg(t,m):ko(t),Hd(t);else return t.lanes=t.childLanes=536870912,Zm(e,t,m!==null?m.baseLanes|a:a,a)}else m!==null?(Xg(t,m.cachePool),Kg(t,m),to(t),t.memoizedState=null):(e!==null&&Xg(t,null),ko(t),to(t));return ri(e,t,p,a),t.child}function Zm(e,t,a,u){var p=zm();return p=p===null?null:{parent:Di._currentValue,pool:p},t.memoizedState={baseLanes:a,cachePool:p},e!==null&&Xg(t,null),ko(t),Hd(t),e!==null&&Ir(e,t,u,!0),null}function Vd(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error("Expected ref to be a function, an object returned by React.createRef(), or undefined/null.");(e===null||e.ref!==a)&&(t.flags|=4194816)}}function hp(e,t,a,u,p){if(a.prototype&&typeof a.prototype.render=="function"){var m=ne(a)||"Unknown";eT[m]||(console.error("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",m,m),eT[m]=!0)}return t.mode&Ma&&rs.recordLegacyContextWarning(t,null),e===null&&(Yd(t,t.type),a.contextTypes&&(m=ne(a)||"Unknown",nT[m]||(nT[m]=!0,console.error("%s uses the legacy contextTypes API which was removed in React 19. Use React.createContext() with React.useContext() instead. (https://react.dev/link/legacy-context)",m)))),Ts(t),at(t),a=Hc(e,t,a,u,void 0,p),u=Nr(),Xe(),e!==null&&!Fi?(Mo(e,t,p),nr(e,t,p)):(tn&&u&&qg(t),t.flags|=1,ri(e,t,a,p),t.child)}function Xm(e,t,a,u,p,m){return Ts(t),at(t),rc=-1,Dv=e!==null&&e.type!==t.type,t.updateQueue=null,a=fa(t,u,a,p),Od(e,t),u=Nr(),Xe(),e!==null&&!Fi?(Mo(e,t,m),nr(e,t,m)):(tn&&u&&qg(t),t.flags|=1,ri(e,t,a,m),t.child)}function Qm(e,t,a,u,p){switch(v(t)){case!1:var m=t.stateNode,x=new t.type(t.memoizedProps,m.context).state;m.updater.enqueueSetState(m,x,null);break;case!0:t.flags|=128,t.flags|=65536,m=Error("Simulated error coming from DevTools");var E=p&-p;if(t.lanes|=E,x=On,x===null)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");E=qd(E),Ll(E,x,t,la(m,t)),zr(t,E)}if(Ts(t),t.stateNode===null){if(x=Nu,m=a.contextType,"contextType"in a&&m!==null&&(m===void 0||m.$$typeof!==Ta)&&!K1.has(a)&&(K1.add(a),E=m===void 0?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof m!="object"?" However, it is set to a "+typeof m+".":m.$$typeof===mf?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(m).join(", ")+"}.",console.error("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",ne(a)||"Component",E)),typeof m=="object"&&m!==null&&(x=Tn(m)),m=new a(u,x),t.mode&Ma){Pe(!0);try{m=new a(u,x)}finally{Pe(!1)}}if(x=t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Sw,t.stateNode=m,m._reactInternals=t,m._reactInternalInstance=H1,typeof a.getDerivedStateFromProps=="function"&&x===null&&(x=ne(a)||"Component",q1.has(x)||(q1.add(x),console.error("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",x,m.state===null?"null":"undefined",x))),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"){var D=E=x=null;if(typeof m.componentWillMount=="function"&&m.componentWillMount.__suppressDeprecationWarning!==!0?x="componentWillMount":typeof m.UNSAFE_componentWillMount=="function"&&(x="UNSAFE_componentWillMount"),typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps.__suppressDeprecationWarning!==!0?E="componentWillReceiveProps":typeof m.UNSAFE_componentWillReceiveProps=="function"&&(E="UNSAFE_componentWillReceiveProps"),typeof m.componentWillUpdate=="function"&&m.componentWillUpdate.__suppressDeprecationWarning!==!0?D="componentWillUpdate":typeof m.UNSAFE_componentWillUpdate=="function"&&(D="UNSAFE_componentWillUpdate"),x!==null||E!==null||D!==null){m=ne(a)||"Component";var U=typeof a.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";V1.has(m)||(V1.add(m),console.error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://react.dev/link/unsafe-component-lifecycles`,m,U,x!==null?`
  `+x:"",E!==null?`
  `+E:"",D!==null?`
  `+D:""))}}m=t.stateNode,x=ne(a)||"Component",m.render||(a.prototype&&typeof a.prototype.render=="function"?console.error("No `render` method found on the %s instance: did you accidentally return an object from the constructor?",x):console.error("No `render` method found on the %s instance: you may have forgotten to define `render`.",x)),!m.getInitialState||m.getInitialState.isReactClassApproved||m.state||console.error("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",x),m.getDefaultProps&&!m.getDefaultProps.isReactClassApproved&&console.error("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",x),m.contextType&&console.error("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",x),a.childContextTypes&&!Q1.has(a)&&(Q1.add(a),console.error("%s uses the legacy childContextTypes API which was removed in React 19. Use React.createContext() instead. (https://react.dev/link/legacy-context)",x)),a.contextTypes&&!X1.has(a)&&(X1.add(a),console.error("%s uses the legacy contextTypes API which was removed in React 19. Use React.createContext() with static contextType instead. (https://react.dev/link/legacy-context)",x)),typeof m.componentShouldUpdate=="function"&&console.error("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",x),a.prototype&&a.prototype.isPureReactComponent&&typeof m.shouldComponentUpdate<"u"&&console.error("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",ne(a)||"A pure component"),typeof m.componentDidUnmount=="function"&&console.error("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",x),typeof m.componentDidReceiveProps=="function"&&console.error("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",x),typeof m.componentWillRecieveProps=="function"&&console.error("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",x),typeof m.UNSAFE_componentWillRecieveProps=="function"&&console.error("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",x),E=m.props!==u,m.props!==void 0&&E&&console.error("When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",x),m.defaultProps&&console.error("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",x,x),typeof m.getSnapshotBeforeUpdate!="function"||typeof m.componentDidUpdate=="function"||G1.has(a)||(G1.add(a),console.error("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",ne(a))),typeof m.getDerivedStateFromProps=="function"&&console.error("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",x),typeof m.getDerivedStateFromError=="function"&&console.error("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",x),typeof a.getSnapshotBeforeUpdate=="function"&&console.error("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",x),(E=m.state)&&(typeof E!="object"||li(E))&&console.error("%s.state: must be set to an object or null",x),typeof m.getChildContext=="function"&&typeof a.childContextTypes!="object"&&console.error("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",x),m=t.stateNode,m.props=u,m.state=t.memoizedState,m.refs={},Ms(t),x=a.contextType,m.context=typeof x=="object"&&x!==null?Tn(x):Nu,m.state===u&&(x=ne(a)||"Component",Y1.has(x)||(Y1.add(x),console.error("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",x))),t.mode&Ma&&rs.recordLegacyContextWarning(t,m),rs.recordUnsafeLifecycleWarnings(t,m),m.state=t.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Fd(t,a,x,u),m.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&(console.error("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",de(t)||"Component"),Sw.enqueueReplaceState(m,m.state,null)),As(t,u,m,p),Lc(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&os)!==Dn&&(t.flags|=134217728),m=!0}else if(e===null){m=t.stateNode;var ce=t.memoizedProps;E=Ns(a,ce),m.props=E;var ve=m.context;D=a.contextType,x=Nu,typeof D=="object"&&D!==null&&(x=Tn(D)),U=a.getDerivedStateFromProps,D=typeof U=="function"||typeof m.getSnapshotBeforeUpdate=="function",ce=t.pendingProps!==ce,D||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(ce||ve!==x)&&Ym(t,m,u,x),Uu=!1;var se=t.memoizedState;m.state=se,As(t,u,m,p),Lc(),ve=t.memoizedState,ce||se!==ve||Uu?(typeof U=="function"&&(Fd(t,a,U,u),ve=t.memoizedState),(E=Uu||cp(t,a,E,u,se,ve,x))?(D||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&os)!==Dn&&(t.flags|=134217728)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&os)!==Dn&&(t.flags|=134217728),t.memoizedProps=u,t.memoizedState=ve),m.props=u,m.state=ve,m.context=x,m=E):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&os)!==Dn&&(t.flags|=134217728),m=!1)}else{m=t.stateNode,Ad(e,t),x=t.memoizedProps,D=Ns(a,x),m.props=D,U=t.pendingProps,se=m.context,ve=a.contextType,E=Nu,typeof ve=="object"&&ve!==null&&(E=Tn(ve)),ce=a.getDerivedStateFromProps,(ve=typeof ce=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==U||se!==E)&&Ym(t,m,u,E),Uu=!1,se=t.memoizedState,m.state=se,As(t,u,m,p),Lc();var ye=t.memoizedState;x!==U||se!==ye||Uu||e!==null&&e.dependencies!==null&&Td(e.dependencies)?(typeof ce=="function"&&(Fd(t,a,ce,u),ye=t.memoizedState),(D=Uu||cp(t,a,D,u,se,ye,E)||e!==null&&e.dependencies!==null&&Td(e.dependencies))?(ve||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ye,E),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ye,E)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=ye),m.props=u,m.state=ye,m.context=E,m=D):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),m=!1)}if(E=m,Vd(e,t),x=(t.flags&128)!==0,E||x){if(E=t.stateNode,ys(t),x&&typeof a.getDerivedStateFromError!="function")a=null,lo=-1;else{if(at(t),a=M1(E),t.mode&Ma){Pe(!0);try{M1(E)}finally{Pe(!1)}}Xe()}t.flags|=1,e!==null&&x?(t.child=Ah(t,e.child,null,p),t.child=Ah(t,null,a,p)):ri(e,t,a,p),t.memoizedState=E.state,e=t.child}else e=nr(e,t,p);return p=t.stateNode,m&&p.props!==u&&(Ih||console.error("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",de(t)||"a component"),Ih=!0),e}function Km(e,t,a,u){return Pc(),t.flags|=256,ri(e,t,a,u),t.child}function Yd(e,t){t&&t.childContextTypes&&console.error(`childContextTypes cannot be defined on a function component.
  %s.childContextTypes = ...`,t.displayName||t.name||"Component"),typeof t.getDerivedStateFromProps=="function"&&(e=ne(t)||"Unknown",iT[e]||(console.error("%s: Function components do not support getDerivedStateFromProps.",e),iT[e]=!0)),typeof t.contextType=="object"&&t.contextType!==null&&(t=ne(t)||"Unknown",tT[t]||(console.error("%s: Function components do not support contextType.",t),tT[t]=!0))}function mp(e){return{baseLanes:e,cachePool:Nm()}}function Jm(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Yo),e}function Wm(e,t,a){var u,p=t.pendingProps;h(t)&&(t.flags|=128);var m=!1,x=(t.flags&128)!==0;if((u=x)||(u=e!==null&&e.memoizedState===null?!1:(Ni.current&Nv)!==0),u&&(m=!0,t.flags&=-129),u=(t.flags&32)!==0,t.flags&=-33,e===null){if(tn){if(m?ha(t):to(t),tn){var E=ii,D;if(!(D=!E)){e:{var U=E;for(D=nl;U.nodeType!==8;){if(!D){D=null;break e}if(U=Ea(U.nextSibling),U===null){D=null;break e}}D=U}D!==null?(wo(),t.memoizedState={dehydrated:D,treeContext:If!==null?{id:nc,overflow:ic}:null,retryLane:536870912,hydrationErrors:null},U=A(18,null,null,Dn),U.stateNode=D,U.return=t,t.child=U,Ba=t,ii=null,D=!0):D=!1,D=!D}D&&(Uc(t,E),Es(t))}if(E=t.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Vs(E)?t.lanes=32:t.lanes=536870912,null;ma(t)}return E=p.children,p=p.fallback,m?(to(t),m=t.mode,E=Zd({mode:"hidden",children:E},m),p=Ka(p,m,a,null),E.return=t,p.return=t,E.sibling=p,t.child=E,m=t.child,m.memoizedState=mp(a),m.childLanes=Jm(e,u,a),t.memoizedState=Tw,p):(ha(t),bp(t,E))}var ce=e.memoizedState;if(ce!==null&&(E=ce.dehydrated,E!==null)){if(x)t.flags&256?(ha(t),t.flags&=-257,t=Xd(e,t,a)):t.memoizedState!==null?(to(t),t.child=e.child,t.flags|=128,t=null):(to(t),m=p.fallback,E=t.mode,p=Zd({mode:"visible",children:p.children},E),m=Ka(m,E,a,null),m.flags|=2,p.return=t,m.return=t,p.sibling=m,t.child=p,Ah(t,e.child,null,a),p=t.child,p.memoizedState=mp(a),p.childLanes=Jm(e,u,a),t.memoizedState=Tw,t=m);else if(ha(t),tn&&console.error("We should not be hydrating here. This is a bug in React. Please file a bug."),Vs(E)){if(u=E.nextSibling&&E.nextSibling.dataset,u){D=u.dgst;var ve=u.msg;U=u.stck;var se=u.cstck}E=ve,u=D,p=U,D=m=se,m=Error(E||"The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering."),m.stack=p||"",m.digest=u,u=D===void 0?null:D,p={value:m,source:null,stack:u},typeof u=="string"&&aw.set(m,p),_c(p),t=Xd(e,t,a)}else if(Fi||Ir(e,t,a,!1),u=(a&e.childLanes)!==0,Fi||u){if(u=On,u!==null&&(p=a&-a,p=p&42?1:Pn(p),p=p&(u.suspendedLanes|a)?0:p,p!==0&&p!==ce.retryLane))throw ce.retryLane=p,ca(e,p),jt(u,e,p),W1;E.data===cc||kp(),t=Xd(e,t,a)}else E.data===cc?(t.flags|=192,t.child=e.child,t=null):(e=ce.treeContext,ii=Ea(E.nextSibling),Ba=t,tn=!0,Df=null,ac=!1,mr=null,nl=!1,e!==null&&(wo(),pr[hr++]=nc,pr[hr++]=ic,pr[hr++]=If,nc=e.id,ic=e.overflow,If=t),t=bp(t,p.children),t.flags|=4096);return t}return m?(to(t),m=p.fallback,E=t.mode,D=e.child,U=D.sibling,p=Ko(D,{mode:"hidden",children:p.children}),p.subtreeFlags=D.subtreeFlags&65011712,U!==null?m=Ko(U,m):(m=Ka(m,E,a,null),m.flags|=2),m.return=t,p.return=t,p.sibling=m,t.child=p,p=m,m=t.child,E=e.child.memoizedState,E===null?E=mp(a):(D=E.cachePool,D!==null?(U=Di._currentValue,D=D.parent!==U?{parent:U,pool:U}:D):D=Nm(),E={baseLanes:E.baseLanes|a,cachePool:D}),m.memoizedState=E,m.childLanes=Jm(e,u,a),t.memoizedState=Tw,p):(ha(t),a=e.child,e=a.sibling,a=Ko(a,{mode:"visible",children:p.children}),a.return=t,a.sibling=null,e!==null&&(u=t.deletions,u===null?(t.deletions=[e],t.flags|=16):u.push(e)),t.child=a,t.memoizedState=null,a)}function bp(e,t){return t=Zd({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Zd(e,t){return e=A(22,e,null,t),e.lanes=0,e.stateNode={_visibility:ow,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Xd(e,t,a){return Ah(t,e.child,null,a),e=bp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eb(e,t,a){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),Rm(e.return,t,a)}function tb(e,t){var a=li(e);return e=!a&&typeof he(e)=="function",a||e?(a=a?"array":"iterable",console.error("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",a,t,a),!1):!0}function vp(e,t,a,u,p){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:p}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=p)}function nb(e,t,a){var u=t.pendingProps,p=u.revealOrder,m=u.tail;if(u=u.children,p!==void 0&&p!=="forwards"&&p!=="backwards"&&p!=="together"&&!aT[p])if(aT[p]=!0,typeof p=="string")switch(p.toLowerCase()){case"together":case"forwards":case"backwards":console.error('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',p,p.toLowerCase());break;case"forward":case"backward":console.error('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',p,p.toLowerCase());break;default:console.error('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',p)}else console.error('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',p);m===void 0||Cw[m]||(m!=="collapsed"&&m!=="hidden"?(Cw[m]=!0,console.error('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',m)):p!=="forwards"&&p!=="backwards"&&(Cw[m]=!0,console.error('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',m)));e:if((p==="forwards"||p==="backwards")&&u!==void 0&&u!==null&&u!==!1)if(li(u)){for(var x=0;x<u.length;x++)if(!tb(u[x],x))break e}else if(x=he(u),typeof x=="function"){if(x=x.call(u))for(var E=x.next(),D=0;!E.done;E=x.next()){if(!tb(E.value,D))break e;D++}}else console.error('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',p);if(ri(e,t,u,a),u=Ni.current,u&Nv)u=u&Oh|Nv,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eb(e,a,t);else if(e.tag===19)eb(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=Oh}switch(Ze(Ni,u,t),p){case"forwards":for(a=t.child,p=null;a!==null;)e=a.alternate,e!==null&&lp(e)===null&&(p=a),a=a.sibling;a=p,a===null?(p=t.child,t.child=null):(p=a.sibling,a.sibling=null),vp(t,!1,p,a,m);break;case"backwards":for(a=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&lp(e)===null){t.child=p;break}e=p.sibling,p.sibling=a,a=p,p=e}vp(t,!0,a,null,m);break;case"together":vp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nr(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),lo=-1,ju|=t.lanes,!(a&t.childLanes))if(e!==null){if(Ir(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(t.child!==null){for(e=t.child,a=Ko(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ko(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ib(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Td(e)))}function n0(e,t,a){switch(t.tag){case 3:ct(t,t.stateNode.containerInfo),Cs(t,Di,e.memoizedState.cache),Pc();break;case 27:case 5:W(t);break;case 4:ct(t,t.stateNode.containerInfo);break;case 10:Cs(t,t.type,t.memoizedProps.value);break;case 12:a&t.childLanes&&(t.flags|=4),t.flags|=2048;var u=t.stateNode;u.effectDuration=-0,u.passiveEffectDuration=-0;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(ha(t),t.flags|=128,null):a&t.child.childLanes?Wm(e,t,a):(ha(t),e=nr(e,t,a),e!==null?e.sibling:null);ha(t);break;case 19:var p=(e.flags&128)!==0;if(u=(a&t.childLanes)!==0,u||(Ir(e,t,a,!1),u=(a&t.childLanes)!==0),p){if(u)return nb(e,t,a);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ze(Ni,Ni.current,t),u)break;return null;case 22:case 23:return t.lanes=0,pp(e,t,a);case 24:Cs(t,Di,e.memoizedState.cache)}return nr(e,t,a)}function Us(e,t,a){if(t._debugNeedsRemount&&e!==null){a=Fg(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.lanes),a._debugStack=t._debugStack,a._debugTask=t._debugTask;var u=t.return;if(u===null)throw Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,a.index=t.index,a.sibling=t.sibling,a.return=t.return,a.ref=t.ref,a._debugInfo=t._debugInfo,t===u.child)u.child=a;else{var p=u.child;if(p===null)throw Error("Expected parent to have a child.");for(;p.sibling!==t;)if(p=p.sibling,p===null)throw Error("Expected to find the previous sibling.");p.sibling=a}return t=u.deletions,t===null?(u.deletions=[e],u.flags|=16):t.push(e),a.flags|=2,a}if(e!==null)if(e.memoizedProps!==t.pendingProps||t.type!==e.type)Fi=!0;else{if(!ib(e,a)&&!(t.flags&128))return Fi=!1,n0(e,t,a);Fi=!!(e.flags&131072)}else Fi=!1,(u=tn)&&(wo(),u=(t.flags&1048576)!==0),u&&(u=t.index,wo(),Mm(t,Y0,u));switch(t.lanes=0,t.tag){case 16:e:if(u=t.pendingProps,e=_u(t.elementType),t.type=e,typeof e=="function")Hg(e)?(u=Ns(e,u),t.tag=1,t.type=e=kl(e),t=Qm(null,t,e,u,a)):(t.tag=0,Yd(t,e),t.type=e=kl(e),t=hp(null,t,e,u,a));else{if(e!=null){if(p=e.$$typeof,p===Qs){t.tag=11,t.type=e=Em(e),t=tr(null,t,e,u,a);break e}else if(p===Jp){t.tag=14,t=Gd(null,t,e,u,a);break e}}throw t="",e!==null&&typeof e=="object"&&e.$$typeof===$a&&(t=" Did you wrap a component in React.lazy() more than once?"),e=ne(e)||e,Error("Element type is invalid. Received a promise that resolves to: "+e+". Lazy element type must resolve to a class or function."+t)}return t;case 0:return hp(e,t,t.type,t.pendingProps,a);case 1:return u=t.type,p=Ns(u,t.pendingProps),Qm(e,t,u,p,a);case 3:e:{if(ct(t,t.stateNode.containerInfo),e===null)throw Error("Should have a current fiber. This is a bug in React.");u=t.pendingProps;var m=t.memoizedState;p=m.element,Ad(e,t),As(t,u,null,a);var x=t.memoizedState;if(u=x.cache,Cs(t,Di,u),u!==m.cache&&Qi(t,[Di],a,!0),Lc(),u=x.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=Km(e,t,u,a);break e}else if(u!==p){p=la(Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),t),_c(p),t=Km(e,t,u,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ii=Ea(e.firstChild),Ba=t,tn=!0,Df=null,ac=!1,mr=null,nl=!0,e=B1(t,null,u,a),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(Pc(),u===p){t=nr(e,t,a);break e}ri(e,t,u,a)}t=t.child}return t;case 26:return Vd(e,t),e===null?(e=cf(t.type,null,t.pendingProps,null))?t.memoizedState=e:tn||(e=t.type,a=t.pendingProps,u=Je(or.current),u=Wt(u).createElement(e),u[Hi]=t,u[ka]=a,pi(u,e,a),X(u),t.stateNode=u):t.memoizedState=cf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return W(t),e===null&&tn&&(u=Je(or.current),p=q(),u=t.stateNode=Ca(t.type,t.pendingProps,u,p,!1),ac||(p=Bt(u,t.type,t.pendingProps,p),p!==null&&(Rl(t,0).serverProps=p)),Ba=t,nl=!0,p=ii,si(t.type)?(Zw=p,ii=Ea(u.firstChild)):ii=p),ri(e,t,t.pendingProps.children,a),Vd(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&tn&&(m=q(),u=Ig(t.type,m.ancestorInfo),p=ii,(x=!p)||(x=Ai(p,t.type,t.pendingProps,nl),x!==null?(t.stateNode=x,ac||(m=Bt(x,t.type,t.pendingProps,m),m!==null&&(Rl(t,0).serverProps=m)),Ba=t,ii=Ea(x.firstChild),nl=!1,m=!0):m=!1,x=!m),x&&(u&&Uc(t,p),Es(t))),W(t),p=t.type,m=t.pendingProps,x=e!==null?e.memoizedProps:null,u=m.children,Hs(p,m)?u=null:x!==null&&Hs(p,x)&&(t.flags|=32),t.memoizedState!==null&&(p=Hc(e,t,Wa,null,null,a),Xv._currentValue=p),Vd(e,t),ri(e,t,u,a),t.child;case 6:return e===null&&tn&&(e=t.pendingProps,a=q(),u=a.ancestorInfo.current,e=u!=null?Ic(e,u.tag,a.ancestorInfo.implicitRootScope):!0,a=ii,(u=!a)||(u=Gs(a,t.pendingProps,nl),u!==null?(t.stateNode=u,Ba=t,ii=null,u=!0):u=!1,u=!u),u&&(e&&Uc(t,a),Es(t))),null;case 13:return Wm(e,t,a);case 4:return ct(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Ah(t,null,u,a):ri(e,t,u,a),t.child;case 11:return tr(e,t,t.type,t.pendingProps,a);case 7:return ri(e,t,t.pendingProps,a),t.child;case 8:return ri(e,t,t.pendingProps.children,a),t.child;case 12:return t.flags|=4,t.flags|=2048,u=t.stateNode,u.effectDuration=-0,u.passiveEffectDuration=-0,ri(e,t,t.pendingProps.children,a),t.child;case 10:return u=t.type,p=t.pendingProps,m=p.value,"value"in p||oT||(oT=!0,console.error("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?")),Cs(t,u,m),ri(e,t,p.children,a),t.child;case 9:return p=t.type._context,u=t.pendingProps.children,typeof u!="function"&&console.error("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Ts(t),p=Tn(p),at(t),u=vw(u,p,void 0),Xe(),t.flags|=1,ri(e,t,u,a),t.child;case 14:return Gd(e,t,t.type,t.pendingProps,a);case 15:return gp(e,t,t.type,t.pendingProps,a);case 19:return nb(e,t,a);case 31:return u=t.pendingProps,a=t.mode,u={mode:u.mode,children:u.children},e===null?(e=Zd(u,a),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=Ko(e.child,u),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return pp(e,t,a);case 24:return Ts(t),u=Tn(Di),e===null?(p=zm(),p===null&&(p=On,m=Im(),p.pooledCache=m,Ja(m),m!==null&&(p.pooledCacheLanes|=a),p=m),t.memoizedState={parent:u,cache:p},Ms(t),Cs(t,Di,p)):(e.lanes&a&&(Ad(e,t),As(t,null,null,a),Lc()),p=e.memoizedState,m=t.memoizedState,p.parent!==u?(p={parent:u,cache:u},t.memoizedState=p,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=p),Cs(t,Di,u)):(u=m.cache,Cs(t,Di,u),u!==p.cache&&Qi(t,[Di],a,!0))),ri(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function no(e){e.flags|=4}function ab(e,t){if(t.type!=="stylesheet"||(t.state.loading&Sr)!==Yf)e.flags&=-16777217;else if(e.flags|=16777216,!Vb(t)){if(t=xr.current,t!==null&&((Vt&4194048)===Vt?al!==null:(Vt&62914560)!==Vt&&!(Vt&536870912)||t!==al))throw Rv=dw,h1;e.flags|=8192}}function Bl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?st():536870912,e.lanes|=t,Bf|=t)}function Br(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function kn(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(t)if((e.mode&ea)!==Dn){for(var p=e.selfBaseDuration,m=e.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,p+=m.treeBaseDuration,m=m.sibling;e.treeBaseDuration=p}else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=e,p=p.sibling;else if((e.mode&ea)!==Dn){p=e.actualDuration,m=e.selfBaseDuration;for(var x=e.child;x!==null;)a|=x.lanes|x.childLanes,u|=x.subtreeFlags,u|=x.flags,p+=x.actualDuration,m+=x.treeBaseDuration,x=x.sibling;e.actualDuration=p,e.treeBaseDuration=m}else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=u,e.childLanes=a,t}function i0(e,t,a){var u=t.pendingProps;switch(Ol(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(t),null;case 1:return kn(t),null;case 3:return a=t.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),t.memoizedState.cache!==u&&(t.flags|=2048),Rr(Di,t),F(t),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Il(t)?(Jy(),no(t)):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Om())),kn(t),null;case 26:return a=t.memoizedState,e===null?(no(t),a!==null?(kn(t),ab(t,a)):(kn(t),t.flags&=-16777217)):a?a!==e.memoizedState?(no(t),kn(t),ab(t,a)):(kn(t),t.flags&=-16777217):(e.memoizedProps!==u&&no(t),kn(t),t.flags&=-16777217),null;case 27:Re(t),a=Je(or.current);var p=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==u&&no(t);else{if(!u){if(t.stateNode===null)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return kn(t),null}e=q(),Il(t)?Am(t):(e=Ca(p,u,a,e,!0),t.stateNode=e,no(t))}return kn(t),null;case 5:if(Re(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==u&&no(t);else{if(!u){if(t.stateNode===null)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return kn(t),null}if(p=q(),Il(t))Am(t);else{switch(e=Je(or.current),Ig(a,p.ancestorInfo),p=p.context,e=Wt(e),p){case Lh:e=e.createElementNS(as,a);break;case xx:e=e.createElementNS(uh,a);break;default:switch(a){case"svg":e=e.createElementNS(as,a);break;case"math":e=e.createElementNS(uh,a);break;case"script":e=e.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof u.is=="string"?e.createElement("select",{is:u.is}):e.createElement("select"),u.multiple?e.multiple=!0:u.size&&(e.size=u.size);break;default:e=typeof u.is=="string"?e.createElement(a,{is:u.is}):e.createElement(a),a.indexOf("-")===-1&&(a!==a.toLowerCase()&&console.error("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",a),Object.prototype.toString.call(e)!=="[object HTMLUnknownElement]"||rr.call(CT,a)||(CT[a]=!0,console.error("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",a)))}}e[Hi]=t,e[ka]=u;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)e.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=e;e:switch(pi(e,a,u),a){case"button":case"input":case"select":case"textarea":e=!!u.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&no(t)}}return kn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==u&&no(t);else{if(typeof u!="string"&&t.stateNode===null)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");if(e=Je(or.current),a=q(),Il(t)){e=t.stateNode,a=t.memoizedProps,p=!ac,u=null;var m=Ba;if(m!==null)switch(m.tag){case 3:p&&(p=Hb(e,a,u),p!==null&&(Rl(t,0).serverProps=p));break;case 27:case 5:u=m.memoizedProps,p&&(p=Hb(e,a,u),p!==null&&(Rl(t,0).serverProps=p))}e[Hi]=t,e=!!(e.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Xl(e.nodeValue,a)),e||Es(t)}else p=a.ancestorInfo.current,p!=null&&Ic(u,p.tag,a.ancestorInfo.implicitRootScope),e=Wt(e).createTextNode(u),e[Hi]=t,t.stateNode=e}return kn(t),null;case 13:if(u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Il(t),u!==null&&u.dehydrated!==null){if(e===null){if(!p)throw Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");p[Hi]=t,kn(t),(t.mode&ea)!==Dn&&u!==null&&(p=t.child,p!==null&&(t.treeBaseDuration-=p.treeBaseDuration))}else Jy(),Pc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4,kn(t),(t.mode&ea)!==Dn&&u!==null&&(p=t.child,p!==null&&(t.treeBaseDuration-=p.treeBaseDuration));p=!1}else p=Om(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return t.flags&256?(ma(t),t):(ma(t),null)}return ma(t),t.flags&128?(t.lanes=a,(t.mode&ea)!==Dn&&Md(t),t):(a=u!==null,e=e!==null&&e.memoizedState!==null,a&&(u=t.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==p&&(u.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Bl(t,t.updateQueue),kn(t),(t.mode&ea)!==Dn&&a&&(e=t.child,e!==null&&(t.treeBaseDuration-=e.treeBaseDuration)),null);case 4:return F(t),e===null&&rf(t.stateNode.containerInfo),kn(t),null;case 10:return Rr(t.type,t),kn(t),null;case 19:if(De(Ni,t),p=t.memoizedState,p===null)return kn(t),null;if(u=(t.flags&128)!==0,m=p.rendering,m===null)if(u)Br(p,!1);else{if(ai!==lc||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=lp(e),m!==null){for(t.flags|=128,Br(p,!1),e=m.updateQueue,t.updateQueue=e,Bl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Cm(a,e),a=a.sibling;return Ze(Ni,Ni.current&Oh|Nv,t),t.child}e=e.sibling}p.tail!==null&&Oi()>lx&&(t.flags|=128,u=!0,Br(p,!1),t.lanes=4194304)}else{if(!u)if(e=lp(m),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Bl(t,e),Br(p,!0),p.tail===null&&p.tailMode==="hidden"&&!m.alternate&&!tn)return kn(t),null}else 2*Oi()-p.renderingStartTime>lx&&a!==536870912&&(t.flags|=128,u=!0,Br(p,!1),t.lanes=4194304);p.isBackwards?(m.sibling=t.child,t.child=m):(e=p.last,e!==null?e.sibling=m:t.child=m,p.last=m)}return p.tail!==null?(e=p.tail,p.rendering=e,p.tail=e.sibling,p.renderingStartTime=Oi(),e.sibling=null,a=Ni.current,a=u?a&Oh|Nv:a&Oh,Ze(Ni,a,t),e):(kn(t),null);case 22:case 23:return ma(t),Jg(t),u=t.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(t.flags|=8192):u&&(t.flags|=8192),u?a&536870912&&!(t.flags&128)&&(kn(t),t.subtreeFlags&6&&(t.flags|=8192)):kn(t),a=t.updateQueue,a!==null&&Bl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),u=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(u=t.memoizedState.cachePool.pool),u!==a&&(t.flags|=2048),e!==null&&De(Uf,t),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Rr(Di,t),kn(t),null;case 25:return null;case 30:return null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function a0(e,t){switch(Ol(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,(t.mode&ea)!==Dn&&Md(t),t):null;case 3:return Rr(Di,t),F(t),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Re(t),null;case 13:if(ma(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Pc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,(t.mode&ea)!==Dn&&Md(t),t):null;case 19:return De(Ni,t),null;case 4:return F(t),null;case 10:return Rr(t.type,t),null;case 22:case 23:return ma(t),Jg(t),e!==null&&De(Uf,t),e=t.flags,e&65536?(t.flags=e&-65537|128,(t.mode&ea)!==Dn&&Md(t),t):null;case 24:return Rr(Di,t),null;case 25:return null;default:return null}}function ob(e,t){switch(Ol(t),t.tag){case 3:Rr(Di,t),F(t);break;case 26:case 27:case 5:Re(t);break;case 4:F(t);break;case 13:ma(t);break;case 19:De(Ni,t);break;case 10:Rr(t.type,t);break;case 22:case 23:ma(t),Jg(t),e!==null&&De(Uf,t);break;case 24:Rr(Di,t)}}function Do(e){return(e.mode&ea)!==Dn}function rb(e,t){Do(e)?(ji(),au(t,e),Eo()):au(t,e)}function Qd(e,t,a){Do(e)?(ji(),Hl(a,e,t),Eo()):Hl(a,e,t)}function au(e,t){try{var a=t.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var p=u.next;a=p;do{if((a.tag&e)===e&&((e&zi)!==br?Fe!==null&&typeof Fe.markComponentPassiveEffectMountStarted=="function"&&Fe.markComponentPassiveEffectMountStarted(t):(e&ta)!==br&&Fe!==null&&typeof Fe.markComponentLayoutEffectMountStarted=="function"&&Fe.markComponentLayoutEffectMountStarted(t),u=void 0,(e&Ha)!==br&&($h=!0),u=tt(t,BR,a),(e&Ha)!==br&&($h=!1),(e&zi)!==br?Fe!==null&&typeof Fe.markComponentPassiveEffectMountStopped=="function"&&Fe.markComponentPassiveEffectMountStopped():(e&ta)!==br&&Fe!==null&&typeof Fe.markComponentLayoutEffectMountStopped=="function"&&Fe.markComponentLayoutEffectMountStopped(),u!==void 0&&typeof u!="function")){var m=void 0;m=a.tag&ta?"useLayoutEffect":a.tag&Ha?"useInsertionEffect":"useEffect";var x=void 0;x=u===null?" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof u.then=="function"?`

It looks like you wrote `+m+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+m+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://react.dev/link/hooks-data-fetching`:" You returned: "+u,tt(t,function(E,D){console.error("%s must not return anything besides a function, which is used for clean-up.%s",E,D)},m,x)}a=a.next}while(a!==p)}}catch(E){gn(t,t.return,E)}}function Hl(e,t,a){try{var u=t.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var m=p.next;u=m;do{if((u.tag&e)===e){var x=u.inst,E=x.destroy;E!==void 0&&(x.destroy=void 0,(e&zi)!==br?Fe!==null&&typeof Fe.markComponentPassiveEffectUnmountStarted=="function"&&Fe.markComponentPassiveEffectUnmountStarted(t):(e&ta)!==br&&Fe!==null&&typeof Fe.markComponentLayoutEffectUnmountStarted=="function"&&Fe.markComponentLayoutEffectUnmountStarted(t),(e&Ha)!==br&&($h=!0),p=t,tt(p,HR,p,a,E),(e&Ha)!==br&&($h=!1),(e&zi)!==br?Fe!==null&&typeof Fe.markComponentPassiveEffectUnmountStopped=="function"&&Fe.markComponentPassiveEffectUnmountStopped():(e&ta)!==br&&Fe!==null&&typeof Fe.markComponentLayoutEffectUnmountStopped=="function"&&Fe.markComponentLayoutEffectUnmountStopped())}u=u.next}while(u!==m)}}catch(D){gn(t,t.return,D)}}function yp(e,t){Do(e)?(ji(),au(t,e),Eo()):au(t,e)}function xp(e,t,a){Do(e)?(ji(),Hl(a,e,t),Eo()):Hl(a,e,t)}function sb(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;e.type.defaultProps||"ref"in e.memoizedProps||Ih||(a.props!==e.memoizedProps&&console.error("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(e)||"instance"),a.state!==e.memoizedState&&console.error("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(e)||"instance"));try{tt(e,da,t,a)}catch(u){gn(e,e.return,u)}}}function BS(e,t,a){return e.getSnapshotBeforeUpdate(t,a)}function lb(e,t){var a=t.memoizedProps,u=t.memoizedState;t=e.stateNode,e.type.defaultProps||"ref"in e.memoizedProps||Ih||(t.props!==e.memoizedProps&&console.error("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(e)||"instance"),t.state!==e.memoizedState&&console.error("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(e)||"instance"));try{var p=Ns(e.type,a,e.elementType===e.type),m=tt(e,BS,t,p,u);a=rT,m!==void 0||a.has(e.type)||(a.add(e.type),tt(e,function(){console.error("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",de(e))})),t.__reactInternalSnapshotBeforeUpdate=m}catch(x){gn(e,e.return,x)}}function cb(e,t,a){a.props=Ns(e.type,e.memoizedProps),a.state=e.memoizedState,Do(e)?(ji(),tt(e,z1,e,t,a),Eo()):tt(e,z1,e,t,a)}function o0(e){var t=e.ref;if(t!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}if(typeof t=="function")if(Do(e))try{ji(),e.refCleanup=t(a)}finally{Eo()}else e.refCleanup=t(a);else typeof t=="string"?console.error("String refs are no longer supported."):t.hasOwnProperty("current")||console.error("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",de(e)),t.current=a}}function Fl(e,t){try{tt(e,o0,e)}catch(a){gn(e,t,a)}}function zo(e,t){var a=e.ref,u=e.refCleanup;if(a!==null)if(typeof u=="function")try{if(Do(e))try{ji(),tt(e,u)}finally{Eo(e)}else tt(e,u)}catch(p){gn(e,t,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{if(Do(e))try{ji(),tt(e,a,null)}finally{Eo(e)}else tt(e,a,null)}catch(p){gn(e,t,p)}else a.current=null}function ub(e,t,a,u){var p=e.memoizedProps,m=p.id,x=p.onCommit;p=p.onRender,t=t===null?"mount":"update",Q0&&(t="nested-update"),typeof p=="function"&&p(m,t,e.actualDuration,e.treeBaseDuration,e.actualStartTime,a),typeof x=="function"&&x(e.memoizedProps.id,t,u,a)}function HS(e,t,a,u){var p=e.memoizedProps;e=p.id,p=p.onPostCommit,t=t===null?"mount":"update",Q0&&(t="nested-update"),typeof p=="function"&&p(e,t,u,a)}function r0(e){var t=e.type,a=e.memoizedProps,u=e.stateNode;try{tt(e,qn,u,t,a,e)}catch(p){gn(e,e.return,p)}}function Sp(e,t,a){try{tt(e,Fs,e.stateNode,e.type,a,t,e)}catch(u){gn(e,e.return,u)}}function ou(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&si(e.type)||e.tag===4}function Kd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&si(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ru(e,t,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ls));else if(u!==4&&(u===27&&si(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(ru(e,t,a),e=e.sibling;e!==null;)ru(e,t,a),e=e.sibling}function Jd(e,t,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(u!==4&&(u===27&&si(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Jd(e,t,a),e=e.sibling;e!==null;)Jd(e,t,a),e=e.sibling}function s0(e){for(var t,a=e.return;a!==null;){if(ou(a)){t=a;break}a=a.return}if(t==null)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");switch(t.tag){case 27:t=t.stateNode,a=Kd(e),Jd(e,a,t);break;case 5:a=t.stateNode,t.flags&32&&(qs(a),t.flags&=-33),t=Kd(e),Jd(e,t,a);break;case 3:case 4:t=t.stateNode.containerInfo,a=Kd(e),ru(e,a,t);break;default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function Wd(e){var t=e.stateNode,a=e.memoizedProps;try{tt(e,w0,e.type,a,t,e)}catch(u){gn(e,e.return,u)}}function l0(e,t){if(e=e.containerInfo,Gw=Cx,e=Xy(e),Sm(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var p=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,E=-1,D=-1,U=0,ce=0,ve=e,se=null;t:for(;;){for(var ye;ve!==a||p!==0&&ve.nodeType!==3||(E=x+p),ve!==m||u!==0&&ve.nodeType!==3||(D=x+u),ve.nodeType===3&&(x+=ve.nodeValue.length),(ye=ve.firstChild)!==null;)se=ve,ve=ye;for(;;){if(ve===e)break t;if(se===a&&++U===p&&(E=x),se===m&&++ce===u&&(D=x),(ye=ve.nextSibling)!==null)break;ve=se,se=ve.parentNode}ve=ye}a=E===-1||D===-1?null:{start:E,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vw={focusedElem:e,selectionRange:a},Cx=!1,qi=t;qi!==null;)if(t=qi,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,qi=e;else for(;qi!==null;){switch(e=t=qi,a=e.alternate,p=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:p&1024&&a!==null&&lb(e,a);break;case 3:if(p&1024){if(e=e.stateNode.containerInfo,a=e.nodeType,a===9)ir(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ir(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(p&1024)throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}if(e=t.sibling,e!==null){e.return=t.return,qi=e;break}qi=t.return}}function db(e,t,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ti(e,a),u&4&&rb(a,ta|vr);break;case 1:if(ti(e,a),u&4)if(e=a.stateNode,t===null)a.type.defaultProps||"ref"in a.memoizedProps||Ih||(e.props!==a.memoizedProps&&console.error("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(a)||"instance"),e.state!==a.memoizedState&&console.error("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(a)||"instance")),Do(a)?(ji(),tt(a,yw,a,e),Eo()):tt(a,yw,a,e);else{var p=Ns(a.type,t.memoizedProps);t=t.memoizedState,a.type.defaultProps||"ref"in a.memoizedProps||Ih||(e.props!==a.memoizedProps&&console.error("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(a)||"instance"),e.state!==a.memoizedState&&console.error("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(a)||"instance")),Do(a)?(ji(),tt(a,R1,a,e,p,t,e.__reactInternalSnapshotBeforeUpdate),Eo()):tt(a,R1,a,e,p,t,e.__reactInternalSnapshotBeforeUpdate)}u&64&&sb(a),u&512&&Fl(a,a.return);break;case 3:if(t=Ra(),ti(e,a),u&64&&(u=a.updateQueue,u!==null)){if(p=null,a.child!==null)switch(a.child.tag){case 27:case 5:p=a.child.stateNode;break;case 1:p=a.child.stateNode}try{tt(a,da,u,p)}catch(x){gn(a,a.return,x)}}e.effectDuration+=$c(t);break;case 27:t===null&&u&4&&Wd(a);case 26:case 5:ti(e,a),t===null&&u&4&&r0(a),u&512&&Fl(a,a.return);break;case 12:if(u&4){u=Ra(),ti(e,a),e=a.stateNode,e.effectDuration+=jc(u);try{tt(a,ub,a,t,X0,e.effectDuration)}catch(x){gn(a,a.return,x)}}else ti(e,a);break;case 13:ti(e,a),u&4&&ef(e,a),u&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=$s.bind(null,a),vu(e,a))));break;case 22:if(u=a.memoizedState!==null||sc,!u){t=t!==null&&t.memoizedState!==null||ci,p=sc;var m=ci;sc=u,(ci=t)&&!m?Li(e,a,(a.subtreeFlags&8772)!==0):ti(e,a),sc=p,ci=m}break;case 30:break;default:ti(e,a)}}function c0(e){var t=e.alternate;t!==null&&(e.alternate=null,c0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&yo(t)),e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ba(e,t,a){for(a=a.child;a!==null;)su(e,t,a),a=a.sibling}function su(e,t,a){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(ec,a)}catch(m){Xn||(Xn=!0,console.error("React instrumentation encountered an error: %s",m))}switch(a.tag){case 26:ci||zo(a,t),ba(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ci||zo(a,t);var u=yi,p=co;si(a.type)&&(yi=a.stateNode,co=!1),ba(e,t,a),tt(a,xu,a.stateNode),yi=u,co=p;break;case 5:ci||zo(a,t);case 6:if(u=yi,p=co,yi=null,ba(e,t,a),yi=u,co=p,yi!==null)if(co)try{tt(a,lf,yi,a.stateNode)}catch(m){gn(a,t,m)}else try{tt(a,bu,yi,a.stateNode)}catch(m){gn(a,t,m)}break;case 18:yi!==null&&(co?(e=yi,Wi(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Tu(e)):Wi(yi,a.stateNode));break;case 4:u=yi,p=co,yi=a.stateNode.containerInfo,co=!0,ba(e,t,a),yi=u,co=p;break;case 0:case 11:case 14:case 15:ci||Hl(Ha,a,t),ci||Qd(a,t,ta),ba(e,t,a);break;case 1:ci||(zo(a,t),u=a.stateNode,typeof u.componentWillUnmount=="function"&&cb(a,t,u)),ba(e,t,a);break;case 21:ba(e,t,a);break;case 22:ci=(u=ci)||a.memoizedState!==null,ba(e,t,a),ci=u;break;default:ba(e,t,a)}}function ef(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{tt(t,S0,e)}catch(a){gn(t,t.return,a)}}function tf(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sT),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sT),t;default:throw Error("Unexpected Suspense handler tag ("+e.tag+"). This is a bug in React.")}}function lu(e,t){var a=tf(e);t.forEach(function(u){var p=h0.bind(null,e,u);if(!a.has(u)){if(a.add(u),so)if(Dh!==null&&zh!==null)Yl(zh,Dh);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");u.then(p,p)}})}function va(e,t){var a=t.deletions;if(a!==null)for(var u=0;u<a.length;u++){var p=e,m=t,x=a[u],E=m;e:for(;E!==null;){switch(E.tag){case 27:if(si(E.type)){yi=E.stateNode,co=!1;break e}break;case 5:yi=E.stateNode,co=!1;break e;case 3:case 4:yi=E.stateNode.containerInfo,co=!0;break e}E=E.return}if(yi===null)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");su(p,m,x),yi=null,co=!1,p=x,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)fb(t,e),t=t.sibling}function fb(e,t){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:va(t,e),fi(e),u&4&&(Hl(Ha|vr,e,e.return),au(Ha|vr,e),Qd(e,e.return,ta|vr));break;case 1:va(t,e),fi(e),u&512&&(ci||a===null||zo(a,a.return)),u&64&&sc&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var p=ls;if(va(t,e),fi(e),u&512&&(ci||a===null||zo(a,a.return)),u&4)if(t=a!==null?a.memoizedState:null,u=e.memoizedState,a===null)if(u===null)if(e.stateNode===null){e:{u=e.type,a=e.memoizedProps,t=p.ownerDocument||p;t:switch(u){case"title":p=t.getElementsByTagName("title")[0],(!p||p[Sf]||p[Hi]||p.namespaceURI===as||p.hasAttribute("itemprop"))&&(p=t.createElement(u),t.head.insertBefore(p,t.querySelector("head > title"))),pi(p,u,a),p[Hi]=e,X(p),u=p;break e;case"link":var m=Gb("link","href",t).get(u+(a.href||""));if(m){for(var x=0;x<m.length;x++)if(p=m[x],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(x,1);break t}}p=t.createElement(u),pi(p,u,a),t.head.appendChild(p);break;case"meta":if(m=Gb("meta","content",t).get(u+(a.content||""))){for(x=0;x<m.length;x++)if(p=m[x],re(a.content,"content"),p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(x,1);break t}}p=t.createElement(u),pi(p,u,a),t.head.appendChild(p);break;default:throw Error('getNodesForType encountered a type it did not expect: "'+u+'". This is a bug in React.')}p[Hi]=e,X(p),u=p}e.stateNode=u}else Kl(p,e.type,e.stateNode);else e.stateNode=C0(p,u,e.memoizedProps);else t!==u?(t===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):t.count--,u===null?Kl(p,e.type,e.stateNode):C0(p,u,e.memoizedProps)):u===null&&e.stateNode!==null&&Sp(e,e.memoizedProps,a.memoizedProps);break;case 27:va(t,e),fi(e),u&512&&(ci||a===null||zo(a,a.return)),a!==null&&u&4&&Sp(e,e.memoizedProps,a.memoizedProps);break;case 5:if(va(t,e),fi(e),u&512&&(ci||a===null||zo(a,a.return)),e.flags&32){t=e.stateNode;try{tt(e,qs,t)}catch(ce){gn(e,e.return,ce)}}u&4&&e.stateNode!=null&&(t=e.memoizedProps,Sp(e,t,a!==null?a.memoizedProps:t)),u&1024&&(kw=!0,e.type!=="form"&&console.error("Unexpected host component type. Expected a form. This is a bug in React."));break;case 6:if(va(t,e),fi(e),u&4){if(e.stateNode===null)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");u=e.memoizedProps,a=a!==null?a.memoizedProps:u,t=e.stateNode;try{tt(e,jb,t,a,u)}catch(ce){gn(e,e.return,ce)}}break;case 3:if(p=Ra(),Sx=null,m=ls,ls=$p(t.containerInfo),va(t,e),ls=m,fi(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{tt(e,_a,t.containerInfo)}catch(ce){gn(e,e.return,ce)}kw&&(kw=!1,gb(e)),t.effectDuration+=$c(p);break;case 4:u=ls,ls=$p(e.stateNode.containerInfo),va(t,e),fi(e),ls=u;break;case 12:u=Ra(),va(t,e),fi(e),e.stateNode.effectDuration+=jc(u);break;case 13:va(t,e),fi(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dw=Oi()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,lu(e,u)));break;case 22:p=e.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,D=sc,U=ci;if(sc=D||p,ci=U||E,va(t,e),ci=U,sc=D,fi(e),u&8192)e:for(t=e.stateNode,t._visibility=p?t._visibility&-2:t._visibility|ow,p&&(a===null||E||sc||ci||ya(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){E=a=t;try{m=E.stateNode,p?tt(E,Lb,m):tt(E,Np,E.stateNode,E.memoizedProps)}catch(ce){gn(E,E.return,ce)}}}else if(t.tag===6){if(a===null){E=t;try{x=E.stateNode,p?tt(E,Bb,x):tt(E,Up,x,E.memoizedProps)}catch(ce){gn(E,E.return,ce)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}u&4&&(u=e.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,lu(e,a))));break;case 19:va(t,e),fi(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,lu(e,u)));break;case 30:break;case 21:break;default:va(t,e),fi(e)}}function fi(e){var t=e.flags;if(t&2){try{tt(e,s0,e)}catch(a){gn(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gb(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gb(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ti(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)db(e,t.alternate,t),t=t.sibling}function No(e){switch(e.tag){case 0:case 11:case 14:case 15:Qd(e,e.return,ta),ya(e);break;case 1:zo(e,e.return);var t=e.stateNode;typeof t.componentWillUnmount=="function"&&cb(e,e.return,t),ya(e);break;case 27:tt(e,xu,e.stateNode);case 26:case 5:zo(e,e.return),ya(e);break;case 22:e.memoizedState===null&&ya(e);break;case 30:ya(e);break;default:ya(e)}}function ya(e){for(e=e.child;e!==null;)No(e),e=e.sibling}function pb(e,t,a,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Li(e,a,u),rb(a,ta);break;case 1:if(Li(e,a,u),t=a.stateNode,typeof t.componentDidMount=="function"&&tt(a,yw,a,t),t=a.updateQueue,t!==null){e=a.stateNode;try{tt(a,LS,t,e)}catch(m){gn(a,a.return,m)}}u&&p&64&&sb(a),Fl(a,a.return);break;case 27:Wd(a);case 26:case 5:Li(e,a,u),u&&t===null&&p&4&&r0(a),Fl(a,a.return);break;case 12:if(u&&p&4){p=Ra(),Li(e,a,u),u=a.stateNode,u.effectDuration+=jc(p);try{tt(a,ub,a,t,X0,u.effectDuration)}catch(m){gn(a,a.return,m)}}else Li(e,a,u);break;case 13:Li(e,a,u),u&&p&4&&ef(e,a);break;case 22:a.memoizedState===null&&Li(e,a,u),Fl(a,a.return);break;case 30:break;default:Li(e,a,u)}}function Li(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;)pb(e,t.alternate,t,a),t=t.sibling}function Uo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&Ja(e),a!=null&&Dl(a))}function Zn(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(Ja(t),e!=null&&Dl(e))}function za(e,t,a,u){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wp(e,t,a,u),t=t.sibling}function wp(e,t,a,u){var p=t.flags;switch(t.tag){case 0:case 11:case 15:za(e,t,a,u),p&2048&&yp(t,zi|vr);break;case 1:za(e,t,a,u);break;case 3:var m=Ra();za(e,t,a,u),p&2048&&(a=null,t.alternate!==null&&(a=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==a&&(Ja(t),a!=null&&Dl(a))),e.passiveEffectDuration+=$c(m);break;case 12:if(p&2048){p=Ra(),za(e,t,a,u),e=t.stateNode,e.passiveEffectDuration+=jc(p);try{tt(t,HS,t,t.alternate,X0,e.passiveEffectDuration)}catch(E){gn(t,t.return,E)}}else za(e,t,a,u);break;case 13:za(e,t,a,u);break;case 23:break;case 22:m=t.stateNode;var x=t.alternate;t.memoizedState!==null?m._visibility&Rf?za(e,t,a,u):cu(e,t):m._visibility&Rf?za(e,t,a,u):(m._visibility|=Rf,Ps(e,t,a,u,(t.subtreeFlags&10256)!==0)),p&2048&&Uo(x,t);break;case 24:za(e,t,a,u),p&2048&&Zn(t.alternate,t);break;default:za(e,t,a,u)}}function Ps(e,t,a,u,p){for(p=p&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;)hb(e,t,a,u,p),t=t.sibling}function hb(e,t,a,u,p){var m=t.flags;switch(t.tag){case 0:case 11:case 15:Ps(e,t,a,u,p),yp(t,zi);break;case 23:break;case 22:var x=t.stateNode;t.memoizedState!==null?x._visibility&Rf?Ps(e,t,a,u,p):cu(e,t):(x._visibility|=Rf,Ps(e,t,a,u,p)),p&&m&2048&&Uo(t.alternate,t);break;case 24:Ps(e,t,a,u,p),p&&m&2048&&Zn(t.alternate,t);break;default:Ps(e,t,a,u,p)}}function cu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,u=t,p=u.flags;switch(u.tag){case 22:cu(a,u),p&2048&&Uo(u.alternate,u);break;case 24:cu(a,u),p&2048&&Zn(u.alternate,u);break;default:cu(a,u)}t=t.sibling}}function io(e){if(e.subtreeFlags&Uv)for(e=e.child;e!==null;)nf(e),e=e.sibling}function nf(e){switch(e.tag){case 26:io(e),e.flags&Uv&&e.memoizedState!==null&&k0(ls,e.memoizedState,e.memoizedProps);break;case 5:io(e);break;case 3:case 4:var t=ls;ls=$p(e.stateNode.containerInfo),io(e),ls=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Uv,Uv=16777216,io(e),Uv=t):io(e));break;default:io(e)}}function mb(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function uu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var u=t[a];qi=u,Ep(u,e)}mb(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bb(e),e=e.sibling}function bb(e){switch(e.tag){case 0:case 11:case 15:uu(e),e.flags&2048&&xp(e,e.return,zi|vr);break;case 3:var t=Ra();uu(e),e.stateNode.passiveEffectDuration+=$c(t);break;case 12:t=Ra(),uu(e),e.stateNode.passiveEffectDuration+=jc(t);break;case 22:t=e.stateNode,e.memoizedState!==null&&t._visibility&Rf&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ql(e)):uu(e);break;default:uu(e)}}function ql(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var u=t[a];qi=u,Ep(u,e)}mb(e)}for(e=e.child;e!==null;)vb(e),e=e.sibling}function vb(e){switch(e.tag){case 0:case 11:case 15:xp(e,e.return,zi),ql(e);break;case 22:var t=e.stateNode;t._visibility&Rf&&(t._visibility&=-3,ql(e));break;default:ql(e)}}function Ep(e,t){for(;qi!==null;){var a=qi,u=a;switch(u.tag){case 0:case 11:case 15:xp(u,t,zi);break;case 23:case 22:u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(u=u.memoizedState.cachePool.pool,u!=null&&Ja(u));break;case 24:Dl(u.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,qi=u;else e:for(a=e;qi!==null;){u=qi;var p=u.sibling,m=u.return;if(c0(u),u===a){qi=null;break e}if(p!==null){p.return=m,qi=p;break e}qi=m}}}function u0(){qR.forEach(function(e){return e()})}function yb(){var e=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return e||le.actQueue===null||console.error("The current testing environment is not configured to support act(...)"),e}function Na(e){if((cn&Fa)!==Go&&Vt!==0)return Vt&-Vt;var t=le.T;return t!==null?(t._updatedFibers||(t._updatedFibers=new Set),t._updatedFibers.add(e),e=Nf,e!==0?e:Dp()):ml()}function xb(){Yo===0&&(Yo=!(Vt&536870912)||tn?Ae():536870912);var e=xr.current;return e!==null&&(e.flags|=32),Yo}function jt(e,t,a){if($h&&console.error("useInsertionEffect must not schedule updates."),_w&&(cx=!0),(e===On&&(bn===jf||bn===Lf)||e.cancelPendingCommit!==null)&&(Fr(e,0),Hr(e,Vt,Yo,!1)),Be(e,a),cn&Fa&&e===On){if(lr)switch(t.tag){case 0:case 11:case 15:e=qt&&de(qt)||"Unknown",bT.has(e)||(bT.add(e),t=de(t)||"Unknown",console.error("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://react.dev/link/setstate-in-render",t,e,e));break;case 1:mT||(console.error("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),mT=!0)}}else so&&Vn(e,t,a),Ib(t),e===On&&((cn&Fa)===Go&&(Lu|=a),ai===$f&&Hr(e,Vt,Yo,!1)),ao(e)}function gi(e,t,a){if((cn&(Fa|cs))!==Go)throw Error("Should not already be working.");var u=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Ne(e,t),p=u?Cb(e,t):af(e,t,!0),m=u;do{if(p===lc){Ph&&!u&&Hr(e,t,0,!1);break}else{if(a=e.current.alternate,m&&!d0(a)){p=af(e,t,!1),m=!1;continue}if(p===Nh){if(m=t,e.errorRecoveryDisabledLanes&m)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{p=e;var E=x;x=Bv;var D=p.current.memoizedState.isDehydrated;if(D&&(Fr(p,E).flags|=256),E=af(p,E,!1),E!==Nh){if(Rw&&!D){p.errorRecoveryDisabledLanes|=m,Lu|=m,p=$f;break e}p=qa,qa=x,p!==null&&(qa===null?qa=p:qa.push.apply(qa,p))}p=E}if(m=!1,p!==Nh)continue}}if(p===_v){Fr(e,0),Hr(e,t,0,!0);break}e:{switch(u=e,p){case lc:case _v:throw Error("Root did not complete. This is a bug in React.");case $f:if((t&4194048)!==t)break;case rx:Hr(u,t,Yo,!$u);break e;case Nh:qa=null;break;case Mw:case lT:break;default:throw Error("Unknown root exit status.")}if(le.actQueue!==null)Po(u,a,t,qa,Hv,sx,Yo,Lu,Bf);else{if((t&62914560)===t&&(m=Dw+uT-Oi(),10<m)){if(Hr(u,t,Yo,!$u),En(u,0,!0)!==0)break e;u.timeoutHandle=TT(Sb.bind(null,u,a,qa,Hv,sx,t,Yo,Lu,Bf,$u,p,ZR,f1,0),m);break e}Sb(u,a,qa,Hv,sx,t,Yo,Lu,Bf,$u,p,VR,f1,0)}}}break}while(!0);ao(e)}function Sb(e,t,a,u,p,m,x,E,D,U,ce,ve,se,ye){if(e.timeoutHandle=Vf,ve=t.subtreeFlags,(ve&8192||(ve&16785408)===16785408)&&(Zv={stylesheets:null,count:0,unsuspend:T0},nf(t),ve=M0(),ve!==null)){e.cancelPendingCommit=ve(Po.bind(null,e,t,m,a,u,p,x,E,D,ce,YR,se,ye)),Hr(e,m,x,!U);return}Po(e,t,m,a,u,p,x,E,D)}function d0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var p=a[u],m=p.getSnapshot;p=p.value;try{if(!La(m(),p))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t,a,u){t&=~Iw,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,u&&(e.warmLanes|=t),u=e.expirationTimes;for(var p=t;0<p;){var m=31-hi(p),x=1<<m;u[m]=-1,p&=~x}a!==0&&$e(e,a,t)}function Gl(){return(cn&(Fa|cs))===Go?(js(0),!1):!0}function Cp(){if(qt!==null){if(bn===uo)var e=qt.return;else e=qt,Vg(),Ao(e),Mh=null,zv=0,e=qt;for(;e!==null;)ob(e.alternate,e),e=e.return;qt=null}}function Fr(e,t){var a=e.timeoutHandle;a!==Vf&&(e.timeoutHandle=Vf,s3(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Cp(),On=e,qt=a=Ko(e.current,null),Vt=t,bn=uo,Vo=null,$u=!1,Ph=Ne(e,t),Rw=!1,ai=lc,Bf=Yo=Iw=Lu=ju=0,qa=Bv=null,sx=!1,t&8&&(t|=t&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=t;0<u;){var p=31-hi(u),m=1<<p;t|=e[p],u&=~m}return ol=t,$g(),t=u1(),1e3<t-c1&&(le.recentlyCreatedOwnerStacks=0,c1=t),rs.discardPendingWarnings(),a}function Tp(e,t){wt=null,le.H=ax,le.getCurrentStack=null,lr=!1,Ii=null,t===Ov||t===W0?(t=Ia(),bn=jv):t===h1?(t=Ia(),bn=cT):bn=t===W1?Ow:t!==null&&typeof t=="object"&&typeof t.then=="function"?Uh:$v,Vo=t;var a=qt;if(a===null)ai=_v,iu(e,la(t,e.current));else switch(a.mode&ea&&ks(a),Xe(),bn){case $v:Fe!==null&&typeof Fe.markComponentErrored=="function"&&Fe.markComponentErrored(a,t,Vt);break;case jf:case Lf:case jv:case Uh:case Lv:Fe!==null&&typeof Fe.markComponentSuspended=="function"&&Fe.markComponentSuspended(a,t,Vt)}}function wb(){var e=le.H;return le.H=ax,e===null?ax:e}function Eb(){var e=le.A;return le.A=FR,e}function kp(){ai=$f,$u||(Vt&4194048)!==Vt&&xr.current!==null||(Ph=!0),!(ju&134217727)&&!(Lu&134217727)||On===null||Hr(On,Vt,Yo,!1)}function af(e,t,a){var u=cn;cn|=Fa;var p=wb(),m=Eb();if(On!==e||Vt!==t){if(so){var x=e.memoizedUpdaters;0<x.size&&(Yl(e,Vt),x.clear()),hl(e,t)}Hv=null,Fr(e,t)}ft(t),t=!1,x=ai;e:do try{if(bn!==uo&&qt!==null){var E=qt,D=Vo;switch(bn){case Ow:Cp(),x=rx;break e;case jv:case jf:case Lf:case Uh:xr.current===null&&(t=!0);var U=bn;if(bn=uo,Vo=null,Vl(e,E,D,U),a&&Ph){x=lc;break e}break;default:U=bn,bn=uo,Vo=null,Vl(e,E,D,U)}}Mp(),x=ai;break}catch(ce){Tp(e,ce)}while(!0);return t&&e.shellSuspendCounter++,Vg(),cn=u,le.H=p,le.A=m,yt(),qt===null&&(On=null,Vt=0,$g()),x}function Mp(){for(;qt!==null;)Ap(qt)}function Cb(e,t){var a=cn;cn|=Fa;var u=wb(),p=Eb();if(On!==e||Vt!==t){if(so){var m=e.memoizedUpdaters;0<m.size&&(Yl(e,Vt),m.clear()),hl(e,t)}Hv=null,lx=Oi()+dT,Fr(e,t)}else Ph=Ne(e,t);ft(t);e:do try{if(bn!==uo&&qt!==null)t:switch(t=qt,m=Vo,bn){case $v:bn=uo,Vo=null,Vl(e,t,m,$v);break;case jf:case Lf:if(Qg(m)){bn=uo,Vo=null,of(t);break}t=function(){bn!==jf&&bn!==Lf||On!==e||(bn=Lv),ao(e)},m.then(t,t);break e;case jv:bn=Lv;break e;case cT:bn=Aw;break e;case Lv:Qg(m)?(bn=uo,Vo=null,of(t)):(bn=uo,Vo=null,Vl(e,t,m,Lv));break;case Aw:var x=null;switch(qt.tag){case 26:x=qt.memoizedState;case 5:case 27:var E=qt;if(!x||Vb(x)){bn=uo,Vo=null;var D=E.sibling;if(D!==null)qt=D;else{var U=E.return;U!==null?(qt=U,du(U)):qt=null}break t}break;default:console.error("Unexpected type of fiber triggered a suspensey commit. This is a bug in React.")}bn=uo,Vo=null,Vl(e,t,m,Aw);break;case Uh:bn=uo,Vo=null,Vl(e,t,m,Uh);break;case Ow:Cp(),ai=rx;break e;default:throw Error("Unexpected SuspendedReason. This is a bug in React.")}le.actQueue!==null?Mp():f0();break}catch(ce){Tp(e,ce)}while(!0);return Vg(),le.H=u,le.A=p,cn=a,qt!==null?(Fe!==null&&typeof Fe.markRenderYielded=="function"&&Fe.markRenderYielded(),lc):(yt(),On=null,Vt=0,$g(),ai)}function f0(){for(;qt!==null&&!ZS();)Ap(qt)}function Ap(e){var t=e.alternate;(e.mode&ea)!==Dn?(Dr(e),t=tt(e,Us,t,e,ol),ks(e)):t=tt(e,Us,t,e,ol),e.memoizedProps=e.pendingProps,t===null?du(e):qt=t}function of(e){var t=tt(e,Tb,e);e.memoizedProps=e.pendingProps,t===null?du(e):qt=t}function Tb(e){var t=e.alternate,a=(e.mode&ea)!==Dn;switch(a&&Dr(e),e.tag){case 15:case 0:t=Xm(t,e,e.pendingProps,e.type,void 0,Vt);break;case 11:t=Xm(t,e,e.pendingProps,e.type.render,e.ref,Vt);break;case 5:Ao(e);default:ob(t,e),e=qt=Cm(e,ol),t=Us(t,e,ol)}return a&&ks(e),t}function Vl(e,t,a,u){Vg(),Ao(t),Mh=null,zv=0;var p=t.return;try{if(fp(e,p,t,a,Vt)){ai=_v,iu(e,la(a,e.current)),qt=null;return}}catch(m){if(p!==null)throw qt=p,m;ai=_v,iu(e,la(a,e.current)),qt=null;return}t.flags&32768?(tn||u===$v?e=!0:Ph||Vt&536870912?e=!1:($u=e=!0,(u===jf||u===Lf||u===jv||u===Uh)&&(u=xr.current,u!==null&&u.tag===13&&(u.flags|=16384))),kb(t,e)):du(t)}function du(e){var t=e;do{if(t.flags&32768){kb(t,$u);return}var a=t.alternate;if(e=t.return,Dr(t),a=tt(t,i0,a,t,ol),(t.mode&ea)!==Dn&&Zg(t),a!==null){qt=a;return}if(t=t.sibling,t!==null){qt=t;return}qt=t=e}while(t!==null);ai===lc&&(ai=lT)}function kb(e,t){do{var a=a0(e.alternate,e);if(a!==null){a.flags&=32767,qt=a;return}if((e.mode&ea)!==Dn){Zg(e),a=e.actualDuration;for(var u=e.child;u!==null;)a+=u.actualDuration,u=u.sibling;e.actualDuration=a}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){qt=e;return}qt=e=a}while(e!==null);ai=rx,qt=null}function Po(e,t,a,u,p,m,x,E,D){e.cancelPendingCommit=null;do _s();while(na!==Hf);if(rs.flushLegacyContextWarning(),rs.flushPendingUnsafeLifecycleWarnings(),(cn&(Fa|cs))!==Go)throw Error("Should not already be working.");if(Fe!==null&&typeof Fe.markCommitStarted=="function"&&Fe.markCommitStarted(a),t===null)_e();else{if(a===0&&console.error("finishedLanes should not be empty during a commit. This is a bug in React."),t===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");if(m=t.lanes|t.childLanes,m|=rw,it(e,a,m,x,E,D),e===On&&(qt=On=null,Vt=0),_h=t,Hu=e,Fu=a,Nw=m,Uw=p,hT=u,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,m0(Mu,function(){return fu(),null})):(e.callbackNode=null,e.callbackPriority=0),X0=wh(),u=(t.flags&13878)!==0,t.subtreeFlags&13878||u){u=le.T,le.T=null,p=on.p,on.p=ja,x=cn,cn|=cs;try{l0(e,t,a)}finally{cn=x,on.p=p,le.T=u}}na=fT,Op(),g0(),Mb()}}function Op(){if(na===fT){na=Hf;var e=Hu,t=_h,a=Fu,u=(t.flags&13878)!==0;if(t.subtreeFlags&13878||u){u=le.T,le.T=null;var p=on.p;on.p=ja;var m=cn;cn|=cs;try{Dh=a,zh=e,fb(t,e),zh=Dh=null,a=Vw;var x=Xy(e.containerInfo),E=a.focusedElem,D=a.selectionRange;if(x!==E&&E&&E.ownerDocument&&Zy(E.ownerDocument.documentElement,E)){if(D!==null&&Sm(E)){var U=D.start,ce=D.end;if(ce===void 0&&(ce=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(ce,E.value.length);else{var ve=E.ownerDocument||document,se=ve&&ve.defaultView||window;if(se.getSelection){var ye=se.getSelection(),Qe=E.textContent.length,mt=Math.min(D.start,Qe),Rn=D.end===void 0?mt:Math.min(D.end,Qe);!ye.extend&&mt>Rn&&(x=Rn,Rn=mt,mt=x);var Zt=Yy(E,mt),L=Yy(E,Rn);if(Zt&&L&&(ye.rangeCount!==1||ye.anchorNode!==Zt.node||ye.anchorOffset!==Zt.offset||ye.focusNode!==L.node||ye.focusOffset!==L.offset)){var H=ve.createRange();H.setStart(Zt.node,Zt.offset),ye.removeAllRanges(),mt>Rn?(ye.addRange(H),ye.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),ye.addRange(H))}}}}for(ve=[],ye=E;ye=ye.parentNode;)ye.nodeType===1&&ve.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ve.length;E++){var G=ve[E];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Cx=!!Gw,Vw=Gw=null}finally{cn=m,on.p=p,le.T=u}}e.current=t,na=gT}}function g0(){if(na===gT){na=Hf;var e=Hu,t=_h,a=Fu,u=(t.flags&8772)!==0;if(t.subtreeFlags&8772||u){u=le.T,le.T=null;var p=on.p;on.p=ja;var m=cn;cn|=cs;try{Fe!==null&&typeof Fe.markLayoutEffectsStarted=="function"&&Fe.markLayoutEffectsStarted(a),Dh=a,zh=e,db(e,t.alternate,t),zh=Dh=null,Fe!==null&&typeof Fe.markLayoutEffectsStopped=="function"&&Fe.markLayoutEffectsStopped()}finally{cn=m,on.p=p,le.T=u}}na=pT}}function Mb(){if(na===XR||na===pT){na=Hf,XS();var e=Hu,t=_h,a=Fu,u=hT,p=(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0;p?na=zw:(na=Hf,_h=Hu=null,Ab(e,e.pendingLanes),Ff=0,qv=null);var m=e.pendingLanes;if(m===0&&(Bu=null),p||_o(e),p=Cn(a),t=t.stateNode,Ri&&typeof Ri.onCommitFiberRoot=="function")try{var x=(t.current.flags&128)===128;switch(p){case ja:var E=yf;break;case sr:E=Wb;break;case ns:E=Mu;break;case nh:E=tv;break;default:E=Mu}Ri.onCommitFiberRoot(ec,t,E,x)}catch(ve){Xn||(Xn=!0,console.error("React instrumentation encountered an error: %s",ve))}if(so&&e.memoizedUpdaters.clear(),u0(),u!==null){x=le.T,E=on.p,on.p=ja,le.T=null;try{var D=e.onRecoverableError;for(t=0;t<u.length;t++){var U=u[t],ce=qr(U.stack);tt(U.source,D,U.value,ce)}}finally{le.T=x,on.p=E}}Fu&3&&_s(),ao(e),m=e.pendingLanes,a&4194090&&m&42?(K0=!0,e===Pw?Fv++:(Fv=0,Pw=e)):Fv=0,js(0),_e()}}function qr(e){return e={componentStack:e},Object.defineProperty(e,"digest",{get:function(){console.error('You are accessing "digest" from the errorInfo object passed to onRecoverableError. This property is no longer provided as part of errorInfo but can be accessed as a property of the Error instance itself.')}}),e}function Ab(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Dl(t)))}function _s(e){return Op(),g0(),Mb(),fu()}function fu(){if(na!==zw)return!1;var e=Hu,t=Nw;Nw=0;var a=Cn(Fu),u=ns>a?ns:a;a=le.T;var p=on.p;try{on.p=u,le.T=null,u=Uw,Uw=null;var m=Hu,x=Fu;if(na=Hf,_h=Hu=null,Fu=0,(cn&(Fa|cs))!==Go)throw Error("Cannot flush passive effects while already rendering.");_w=!0,cx=!1,Fe!==null&&typeof Fe.markPassiveEffectsStarted=="function"&&Fe.markPassiveEffectsStarted(x);var E=cn;if(cn|=cs,bb(m.current),wp(m,m.current,x,u),Fe!==null&&typeof Fe.markPassiveEffectsStopped=="function"&&Fe.markPassiveEffectsStopped(),_o(m),cn=E,js(0,!1),cx?m===qv?Ff++:(Ff=0,qv=m):Ff=0,cx=_w=!1,Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(ec,m)}catch(U){Xn||(Xn=!0,console.error("React instrumentation encountered an error: %s",U))}var D=m.current.stateNode;return D.effectDuration=0,D.passiveEffectDuration=0,!0}finally{on.p=p,le.T=a,Ab(e,t)}}function In(e,t,a){t=la(a,t),t=Hn(e.stateNode,t,2),e=To(e,t,2),e!==null&&(Be(e,2),ao(e))}function gn(e,t,a){if($h=!1,e.tag===3)In(e,e,a);else{for(;t!==null;){if(t.tag===3){In(t,e,a);return}if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bu===null||!Bu.has(u))){e=la(a,e),a=qd(2),u=To(t,a,2),u!==null&&(Ll(a,u,t,e),Be(u,2),ao(u));return}}t=t.return}console.error(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Potential causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,a)}}function Ob(e,t,a){var u=e.pingCache;if(u===null){u=e.pingCache=new GR;var p=new Set;u.set(t,p)}else p=u.get(t),p===void 0&&(p=new Set,u.set(t,p));p.has(a)||(Rw=!0,p.add(a),u=p0.bind(null,e,t,a),so&&Yl(e,a),t.then(u,u))}function p0(e,t,a){var u=e.pingCache;u!==null&&u.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,yb()&&le.actQueue===null&&console.error(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act`),On===e&&(Vt&a)===a&&(ai===$f||ai===Mw&&(Vt&62914560)===Vt&&Oi()-Dw<uT?(cn&Fa)===Go&&Fr(e,0):Iw|=a,Bf===Vt&&(Bf=0)),ao(e)}function gu(e,t){t===0&&(t=st()),e=ca(e,t),e!==null&&(Be(e,t),ao(e))}function $s(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),gu(e,a)}function h0(e,t){var a=0;switch(e.tag){case 13:var u=e.stateNode,p=e.memoizedState;p!==null&&(a=p.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}u!==null&&u.delete(t),gu(e,a)}function Rp(e,t,a){if(t.subtreeFlags&67117056)for(t=t.child;t!==null;){var u=e,p=t,m=p.type===Jl;m=a||m,p.tag!==22?p.flags&67108864?m&&tt(p,pu,u,p,(p.mode&r1)===Dn):Rp(u,p,m):p.memoizedState===null&&(m&&p.flags&8192?tt(p,pu,u,p):p.subtreeFlags&67108864&&tt(p,Rp,u,p,m)),t=t.sibling}}function pu(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0;Pe(!0);try{No(t),a&&vb(t),pb(e,t.alternate,t,!1),a&&hb(e,t,0,null,!1,0)}finally{Pe(!1)}}function _o(e){var t=!0;e.current.mode&(Ma|os)||(t=!1),Rp(e,e.current,t)}function Rb(e){if((cn&Fa)===Go){var t=e.tag;if(t===3||t===1||t===0||t===11||t===14||t===15){if(t=de(e)||"ReactComponent",ux!==null){if(ux.has(t))return;ux.add(t)}else ux=new Set([t]);tt(e,function(){console.error("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")})}}}function Yl(e,t){so&&e.memoizedUpdaters.forEach(function(a){Vn(e,a,t)})}function m0(e,t){var a=le.actQueue;return a!==null?(a.push(t),JR):Jb(e,t)}function Ib(e){yb()&&le.actQueue===null&&tt(e,function(){console.error(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act`,de(e))})}function ao(e){e!==jh&&e.next===null&&(jh===null?dx=jh=e:jh=jh.next=e),fx=!0,le.actQueue!==null?jw||(jw=!0,v0()):$w||($w=!0,v0())}function js(e,t){if(!Lw&&fx){Lw=!0;do for(var a=!1,u=dx;u!==null;){if(e!==0){var p=u.pendingLanes;if(p===0)var m=0;else{var x=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-hi(42|e)+1)-1,m&=p&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Db(u,m))}else m=Vt,m=En(u,u===On?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==Vf),!(m&3)||Ne(u,m)||(a=!0,Db(u,m));u=u.next}while(a);Lw=!1}}function b0(){$o()}function $o(){fx=jw=$w=!1;var e=0;qf!==0&&($b()&&(e=qf),qf=0);for(var t=Oi(),a=null,u=dx;u!==null;){var p=u.next,m=Fn(u,t);m===0?(u.next=null,a===null?dx=p:a.next=p,p===null&&(jh=a)):(a=u,(e!==0||m&3)&&(fx=!0)),u=p}js(e)}function Fn(e,t){for(var a=e.suspendedLanes,u=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var x=31-hi(m),E=1<<x,D=p[x];D===-1?(!(E&a)||E&u)&&(p[x]=Gt(E,t)):D<=t&&(e.expiredLanes|=E),m&=~E}if(t=On,a=Vt,a=En(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==Vf),u=e.callbackNode,a===0||e===t&&(bn===jf||bn===Lf)||e.cancelPendingCommit!==null)return u!==null&&ni(u),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||Ne(e,a)){if(t=a&-a,t!==e.callbackPriority||le.actQueue!==null&&u!==Bw)ni(u);else return t;switch(Cn(a)){case ja:case sr:a=Wb;break;case ns:a=Mu;break;case nh:a=tv;break;default:a=Mu}return u=Ip.bind(null,e),le.actQueue!==null?(le.actQueue.push(u),a=Bw):a=Jb(a,u),e.callbackPriority=t,e.callbackNode=a,t}return u!==null&&ni(u),e.callbackPriority=2,e.callbackNode=null,2}function Ip(e,t){if(K0=Q0=!1,na!==Hf&&na!==zw)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(_s()&&e.callbackNode!==a)return null;var u=Vt;return u=En(e,e===On?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==Vf),u===0?null:(gi(e,u,t),Fn(e,Oi()),e.callbackNode!=null&&e.callbackNode===a?Ip.bind(null,e):null)}function Db(e,t){if(_s())return null;Q0=K0,K0=!1,gi(e,t,!0)}function ni(e){e!==Bw&&e!==null&&N0(e)}function v0(){le.actQueue!==null&&le.actQueue.push(function(){return $o(),null}),l3(function(){(cn&(Fa|cs))!==Go?Jb(yf,b0):$o()})}function Dp(){return qf===0&&(qf=Ae()),qf}function zb(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:(re(e,"action"),Or(""+e))}function Mn(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function xa(e,t,a,u,p){if(t==="submit"&&a&&a.stateNode===p){var m=zb((p[ka]||null).action),x=u.submitter;x&&(t=(t=x[ka]||null)?zb(t.formAction):x.getAttribute("formAction"),t!==null&&(m=t,x=null));var E=new rn("action","action",null,u,p);e.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qf!==0){var D=x?Mn(p,x):new FormData(p),U={pending:!0,data:D,method:p.method,action:m};Object.freeze(U),op(a,U,null,D)}}else typeof m=="function"&&(E.preventDefault(),D=x?Mn(p,x):new FormData(p),U={pending:!0,data:D,method:p.method,action:m},Object.freeze(U),op(a,U,m,D))},currentTarget:p}]})}}function oo(e,t,a){e.currentTarget=a;try{t(e)}catch(u){ww(u)}e.currentTarget=null}function Nb(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var u=e[a];e:{var p=void 0,m=u.event;if(u=u.listeners,t)for(var x=u.length-1;0<=x;x--){var E=u[x],D=E.instance,U=E.currentTarget;if(E=E.listener,D!==p&&m.isPropagationStopped())break e;D!==null?tt(D,oo,m,E,U):oo(m,E,U),p=D}else for(x=0;x<u.length;x++){if(E=u[x],D=E.instance,U=E.currentTarget,E=E.listener,D!==p&&m.isPropagationStopped())break e;D!==null?tt(D,oo,m,E,U):oo(m,E,U),p=D}}}}function Lt(e,t){Hw.has(e)||console.error('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',e);var a=t[ih];a===void 0&&(a=t[ih]=new Set);var u=e+"__bubble";a.has(u)||(Sa(t,e,2,!1),a.add(u))}function Ub(e,t,a){Hw.has(e)&&!t&&console.error('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',e);var u=0;t&&(u|=4),Sa(a,e,u,t)}function rf(e){if(!e[gx]){e[gx]=!0,tc.forEach(function(a){a!=="selectionchange"&&(Hw.has(a)||Ub(a,!1,e),Ub(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gx]||(t[gx]=!0,Ub("selectionchange",!1,t))}}function Sa(e,t,a,u){switch(Zs(t)){case ja:var p=Gp;break;case sr:p=Eu;break;default:p=ff}a=p.bind(null,t,a,e),p=void 0,!we||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),u?p!==void 0?e.addEventListener(t,a,{capture:!0,passive:p}):e.addEventListener(t,a,!0):p!==void 0?e.addEventListener(t,a,{passive:p}):e.addEventListener(t,a,!1)}function Ua(e,t,a,u,p){var m=u;if(!(t&1)&&!(t&2)&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var E=u.stateNode.containerInfo;if(E===p)break;if(x===4)for(x=u.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;E!==null;){if(x=Ci(E),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){u=m=x;continue e}E=E.parentNode}}u=u.return}zc(function(){var U=m,ce=xo(a),ve=[];e:{var se=o1.get(e);if(se!==void 0){var ye=rn,Qe=e;switch(e){case"keypress":if(El(a)===0)break e;case"keydown":case"keyup":ye=hR;break;case"focusin":Qe="focus",ye=dr;break;case"focusout":Qe="blur",ye=dr;break;case"beforeblur":case"afterblur":ye=dr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=rt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=bi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=vR;break;case t1:case n1:case i1:ye=rR;break;case a1:ye=xR;break;case"scroll":case"scrollend":ye=V;break;case"wheel":ye=wR;break;case"copy":case"cut":case"paste":ye=lR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=YC;break;case"toggle":case"beforetoggle":ye=CR}var mt=(t&4)!==0,Rn=!mt&&(e==="scroll"||e==="scrollend"),Zt=mt?se!==null?se+"Capture":null:se;mt=[];for(var L=U,H;L!==null;){var G=L;if(H=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||H===null||Zt===null||(G=Qa(L,Zt),G!=null&&mt.push(hu(L,G,H))),Rn)break;L=L.return}0<mt.length&&(se=new ye(se,Qe,null,a,ce),ve.push({event:se,listeners:mt}))}}if(!(t&7)){e:{if(se=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",se&&a!==y&&(Qe=a.relatedTarget||a.fromElement)&&(Ci(Qe)||Qe[Ws]))break e;if((ye||se)&&(se=ce.window===ce?ce:(se=ce.ownerDocument)?se.defaultView||se.parentWindow:window,ye?(Qe=a.relatedTarget||a.toElement,ye=U,Qe=Qe?Ci(Qe):null,Qe!==null&&(Rn=ie(Qe),mt=Qe.tag,Qe!==Rn||mt!==5&&mt!==27&&mt!==6)&&(Qe=null)):(ye=null,Qe=U),ye!==Qe)){if(mt=rt,G="onMouseLeave",Zt="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(mt=YC,G="onPointerLeave",Zt="onPointerEnter",L="pointer"),Rn=ye==null?se:Za(ye),H=Qe==null?se:Za(Qe),se=new mt(G,L+"leave",ye,a,ce),se.target=Rn,se.relatedTarget=H,G=null,Ci(ce)===U&&(mt=new mt(Zt,L+"enter",Qe,a,ce),mt.target=H,mt.relatedTarget=Rn,G=mt),Rn=G,ye&&Qe)t:{for(mt=ye,Zt=Qe,L=0,H=mt;H;H=Zl(H))L++;for(H=0,G=Zt;G;G=Zl(G))H++;for(;0<L-H;)mt=Zl(mt),L--;for(;0<H-L;)Zt=Zl(Zt),H--;for(;L--;){if(mt===Zt||Zt!==null&&mt===Zt.alternate)break t;mt=Zl(mt),Zt=Zl(Zt)}mt=null}else mt=null;ye!==null&&Gr(ve,se,ye,mt,!1),Qe!==null&&Rn!==null&&Gr(ve,Rn,Qe,mt,!0)}}e:{if(se=U?Za(U):window,ye=se.nodeName&&se.nodeName.toLowerCase(),ye==="select"||ye==="input"&&se.type==="file")var xe=qy;else if(Ug(se))if(WC)xe=PS;else{xe=NS;var Le=ym}else ye=se.nodeName,!ye||ye.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?U&&Sl(U.elementType)&&(xe=qy):xe=US;if(xe&&(xe=xe(e,U))){Nc(ve,xe,a,ce);break e}Le&&Le(e,se,U),e==="focusout"&&U&&se.type==="number"&&U.memoizedProps.value!=null&&Mg(se,"number",se.value)}switch(Le=U?Za(U):window,e){case"focusin":(Ug(Le)||Le.contentEditable==="true")&&(ph=Le,ew=U,Sv=null);break;case"focusout":Sv=ew=ph=null;break;case"mousedown":tw=!0;break;case"contextmenu":case"mouseup":case"dragend":tw=!1,_g(ve,a,ce);break;case"selectionchange":if(AR)break;case"keydown":case"keyup":_g(ve,a,ce)}var At;if(WS)e:{switch(e){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else gh?ws(e,a)&&(Ke="onCompositionEnd"):e==="keydown"&&a.keyCode===ZC&&(Ke="onCompositionStart");Ke&&(XC&&a.locale!=="ko"&&(gh||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&gh&&(At=Ng()):(ae=ce,fe="value"in ae?ae.value:ae.textContent,gh=!0)),Le=Bi(U,Ke),0<Le.length&&(Ke=new VC(Ke,e,null,a,ce),ve.push({event:Ke,listeners:Le}),At?Ke.data=At:(At=xd(a),At!==null&&(Ke.data=At)))),(At=kR?Sd(e,a):zS(e,a))&&(Ke=Bi(U,"onBeforeInput"),0<Ke.length&&(Le=new uR("onBeforeInput","beforeinput",null,a,ce),ve.push({event:Le,listeners:Ke}),Le.data=At)),xa(ve,e,U,a,ce)}Nb(ve,t)})}function hu(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Bi(e,t){for(var a=t+"Capture",u=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Qa(e,a),p!=null&&u.unshift(hu(e,p,m)),p=Qa(e,t),p!=null&&u.push(hu(e,p,m))),e.tag===3)return u;e=e.return}return[]}function Zl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gr(e,t,a,u,p){for(var m=t._reactName,x=[];a!==null&&a!==u;){var E=a,D=E.alternate,U=E.stateNode;if(E=E.tag,D!==null&&D===u)break;E!==5&&E!==26&&E!==27||U===null||(D=U,p?(U=Qa(a,m),U!=null&&x.unshift(hu(a,U,D))):p||(U=Qa(a,m),U!=null&&x.push(hu(a,U,D)))),a=a.return}x.length!==0&&e.push({event:t,listeners:x})}function Vr(e,t){By(e,t),e!=="input"&&e!=="textarea"&&e!=="select"||t==null||t.value!==null||G0||(G0=!0,e==="select"&&t.multiple?console.error("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):console.error("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e));var a={registrationNameDependencies:Fo,possibleRegistrationNames:ah};Sl(e)||typeof t.is=="string"||Hy(e,t,a),t.contentEditable&&!t.suppressContentEditableWarning&&t.children!=null&&console.error("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional.")}function An(e,t,a,u){t!==a&&(a=Yr(a),Yr(t)!==a&&(u[e]=t))}function Pb(e,t,a){t.forEach(function(u){a[mu(u)]=u==="style"?zp(e):e.getAttribute(u)})}function ro(e,t){t===!1?console.error("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):console.error("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof t)}function jo(e,t){return e=e.namespaceURI===uh||e.namespaceURI===as?e.ownerDocument.createElementNS(e.namespaceURI,e.tagName):e.ownerDocument.createElement(e.tagName),e.innerHTML=t,e.innerHTML}function Yr(e){return P(e)&&(console.error("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before using it here.",_(e)),ge(e)),(typeof e=="string"?e:""+e).replace(WR,`
`).replace(e3,"")}function Xl(e,t){return t=Yr(t),Yr(e)===t}function Ls(){}function Jt(e,t,a,u,p,m){switch(a){case"children":typeof u=="string"?(Ic(u,t,!1),t==="body"||t==="textarea"&&u===""||md(e,u)):(typeof u=="number"||typeof u=="bigint")&&(Ic(""+u,t,!1),t!=="body"&&md(e,""+u));break;case"className":xt(e,"class",u);break;case"tabIndex":xt(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xt(e,a,u);break;case"style":Dg(e,u,m);break;case"data":if(t!=="object"){xt(e,"data",u);break}case"src":case"href":if(u===""&&(t!=="a"||a!=="href")){console.error(a==="src"?'An empty string ("") was passed to the %s attribute. This may cause the browser to download the whole page again over the network. To fix this, either do not render the element at all or pass null to %s instead of an empty string.':'An empty string ("") was passed to the %s attribute. To fix this, either do not render the element at all or pass null to %s instead of an empty string.',a,a),e.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}re(u,a),u=Or(""+u),e.setAttribute(a,u);break;case"action":case"formAction":if(u!=null&&(t==="form"?a==="formAction"?console.error("You can only pass the formAction prop to <input> or <button>. Use the action prop on <form>."):typeof u=="function"&&(p.encType==null&&p.method==null||mx||(mx=!0,console.error("Cannot specify a encType or method for a form that specifies a function as the action. React provides those automatically. They will get overridden.")),p.target==null||hx||(hx=!0,console.error("Cannot specify a target for a form that specifies a function as the action. The function will always be executed in the same window."))):t==="input"||t==="button"?a==="action"?console.error("You can only pass the action prop to <form>. Use the formAction prop on <input> or <button>."):t!=="input"||p.type==="submit"||p.type==="image"||px?t!=="button"||p.type==null||p.type==="submit"||px?typeof u=="function"&&(p.name==null||xT||(xT=!0,console.error('Cannot specify a "name" prop for a button that specifies a function as a formAction. React needs it to encode which action should be invoked. It will get overridden.')),p.formEncType==null&&p.formMethod==null||mx||(mx=!0,console.error("Cannot specify a formEncType or formMethod for a button that specifies a function as a formAction. React provides those automatically. They will get overridden.")),p.formTarget==null||hx||(hx=!0,console.error("Cannot specify a formTarget for a button that specifies a function as a formAction. The function will always be executed in the same window."))):(px=!0,console.error('A button can only specify a formAction along with type="submit" or no type.')):(px=!0,console.error('An input can only specify a formAction along with type="submit" or type="image".')):console.error(a==="action"?"You can only pass the action prop to <form>.":"You can only pass the formAction prop to <input> or <button>.")),typeof u=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(t!=="input"&&Jt(e,t,"name",p.name,p,null),Jt(e,t,"formEncType",p.formEncType,p,null),Jt(e,t,"formMethod",p.formMethod,p,null),Jt(e,t,"formTarget",p.formTarget,p,null)):(Jt(e,t,"encType",p.encType,p,null),Jt(e,t,"method",p.method,p,null),Jt(e,t,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}re(u,a),u=Or(""+u),e.setAttribute(a,u);break;case"onClick":u!=null&&(typeof u!="function"&&ro(a,u),e.onclick=Ls);break;case"onScroll":u!=null&&(typeof u!="function"&&ro(a,u),Lt("scroll",e));break;case"onScrollEnd":u!=null&&(typeof u!="function"&&ro(a,u),Lt("scrollend",e));break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://react.dev/link/dangerously-set-inner-html for more information.");if(a=u.__html,a!=null){if(p.children!=null)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");e.innerHTML=a}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}re(u,a),a=Or(""+u),e.setAttributeNS(Gf,"xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?(re(u,a),e.setAttribute(a,""+u)):e.removeAttribute(a);break;case"inert":u!==""||bx[a]||(bx[a]=!0,console.error("Received an empty string for a boolean attribute `%s`. This will treat the attribute as if it were false. Either pass `false` to silence this warning, or pass `true` if you used an empty string in earlier versions of React to indicate this attribute is true.",a));case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":u===!0?e.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?(re(u,a),e.setAttribute(a,u)):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?(re(u,a),e.setAttribute(a,u)):e.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(a):(re(u,a),e.setAttribute(a,u));break;case"popover":Lt("beforetoggle",e),Lt("toggle",e),Yt(e,"popover",u);break;case"xlinkActuate":Jn(e,Gf,"xlink:actuate",u);break;case"xlinkArcrole":Jn(e,Gf,"xlink:arcrole",u);break;case"xlinkRole":Jn(e,Gf,"xlink:role",u);break;case"xlinkShow":Jn(e,Gf,"xlink:show",u);break;case"xlinkTitle":Jn(e,Gf,"xlink:title",u);break;case"xlinkType":Jn(e,Gf,"xlink:type",u);break;case"xmlBase":Jn(e,Fw,"xml:base",u);break;case"xmlLang":Jn(e,Fw,"xml:lang",u);break;case"xmlSpace":Jn(e,Fw,"xml:space",u);break;case"is":m!=null&&console.error('Cannot update the "is" prop after it has been initialized.'),Yt(e,"is",u);break;case"innerText":case"textContent":break;case"popoverTarget":ST||u==null||typeof u!="object"||(ST=!0,console.error("The `popoverTarget` prop expects the ID of an Element as a string. Received %s instead.",u));default:!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N"?(a=wl(a),Yt(e,a,u)):Fo.hasOwnProperty(a)&&u!=null&&typeof u!="function"&&ro(a,u)}}function Bs(e,t,a,u,p,m){switch(a){case"style":Dg(e,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://react.dev/link/dangerously-set-inner-html for more information.");if(a=u.__html,a!=null){if(p.children!=null)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");e.innerHTML=a}}break;case"children":typeof u=="string"?md(e,u):(typeof u=="number"||typeof u=="bigint")&&md(e,""+u);break;case"onScroll":u!=null&&(typeof u!="function"&&ro(a,u),Lt("scroll",e));break;case"onScrollEnd":u!=null&&(typeof u!="function"&&ro(a,u),Lt("scrollend",e));break;case"onClick":u!=null&&(typeof u!="function"&&ro(a,u),e.onclick=Ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(Fo.hasOwnProperty(a))u!=null&&typeof u!="function"&&ro(a,u);else e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),t=a.slice(2,p?a.length-7:void 0),m=e[ka]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(t,m,p),typeof u=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,u,p);break e}a in e?e[a]=u:u===!0?e.setAttribute(a,""):Yt(e,a,u)}}}function pi(e,t,a){switch(Vr(t,a),t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",e),Lt("load",e);var u=!1,p=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:Jt(e,t,m,x,a,null)}}p&&Jt(e,t,"srcSet",a.srcSet,a,null),u&&Jt(e,t,"src",a.src,a,null);return;case"input":Ve("input",a),Lt("invalid",e);var E=m=x=p=null,D=null,U=null;for(u in a)if(a.hasOwnProperty(u)){var ce=a[u];if(ce!=null)switch(u){case"name":p=ce;break;case"type":x=ce;break;case"checked":D=ce;break;case"defaultChecked":U=ce;break;case"value":m=ce;break;case"defaultValue":E=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");break;default:Jt(e,t,u,ce,a,null)}}vl(e,a),cm(e,m,E,D,U,x,p,!1),Yn(e);return;case"select":Ve("select",a),Lt("invalid",e),u=x=m=null;for(p in a)if(a.hasOwnProperty(p)&&(E=a[p],E!=null))switch(p){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":u=E;default:Jt(e,t,p,E,a,null)}Qo(e,a),t=m,a=x,e.multiple=!!u,t!=null?Mr(e,!!u,t,!1):a!=null&&Mr(e,!!u,a,!0);return;case"textarea":Ve("textarea",a),Lt("invalid",e),m=p=u=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":u=E;break;case"defaultValue":p=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");break;default:Jt(e,t,x,E,a,null)}Ag(e,a),yl(e,u,p,m),Yn(e);return;case"option":Ly(e,a);for(D in a)if(a.hasOwnProperty(D)&&(u=a[D],u!=null))switch(D){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Jt(e,t,D,u,a,null)}return;case"dialog":Lt("beforetoggle",e),Lt("toggle",e),Lt("cancel",e),Lt("close",e);break;case"iframe":case"object":Lt("load",e);break;case"video":case"audio":for(u=0;u<Gv.length;u++)Lt(Gv[u],e);break;case"image":Lt("error",e),Lt("load",e);break;case"details":Lt("toggle",e);break;case"embed":case"source":case"link":Lt("error",e),Lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(u=a[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:Jt(e,t,U,u,a,null)}return;default:if(Sl(t)){for(ce in a)a.hasOwnProperty(ce)&&(u=a[ce],u!==void 0&&Bs(e,t,ce,u,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(u=a[E],u!=null&&Jt(e,t,E,u,a,null))}function y0(e,t,a,u){switch(Vr(t,u),t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,x=null,E=null,D=null,U=null,ce=null;for(ye in a){var ve=a[ye];if(a.hasOwnProperty(ye)&&ve!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":D=ve;default:u.hasOwnProperty(ye)||Jt(e,t,ye,null,u,ve)}}for(var se in u){var ye=u[se];if(ve=a[se],u.hasOwnProperty(se)&&(ye!=null||ve!=null))switch(se){case"type":m=ye;break;case"name":p=ye;break;case"checked":U=ye;break;case"defaultChecked":ce=ye;break;case"value":x=ye;break;case"defaultValue":E=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");break;default:ye!==ve&&Jt(e,t,se,ye,u,ve)}}t=a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null,u=u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null,t||!u||yT||(console.error("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://react.dev/link/controlled-components"),yT=!0),!t||u||vT||(console.error("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://react.dev/link/controlled-components"),vT=!0),lm(e,x,E,D,U,ce,m,p);return;case"select":ye=x=E=se=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":ye=D;default:u.hasOwnProperty(m)||Jt(e,t,m,null,u,D)}for(p in u)if(m=u[p],D=a[p],u.hasOwnProperty(p)&&(m!=null||D!=null))switch(p){case"value":se=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==D&&Jt(e,t,p,m,u,D)}u=E,t=x,a=ye,se!=null?Mr(e,!!t,se,!1):!!a!=!!t&&(u!=null?Mr(e,!!t,u,!0):Mr(e,!!t,t?[]:"",!1));return;case"textarea":ye=se=null;for(E in a)if(p=a[E],a.hasOwnProperty(E)&&p!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Jt(e,t,E,null,u,p)}for(x in u)if(p=u[x],m=a[x],u.hasOwnProperty(x)&&(p!=null||m!=null))switch(x){case"value":se=p;break;case"defaultValue":ye=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");break;default:p!==m&&Jt(e,t,x,p,u,m)}um(e,se,ye);return;case"option":for(var Qe in a)if(se=a[Qe],a.hasOwnProperty(Qe)&&se!=null&&!u.hasOwnProperty(Qe))switch(Qe){case"selected":e.selected=!1;break;default:Jt(e,t,Qe,null,u,se)}for(D in u)if(se=u[D],ye=a[D],u.hasOwnProperty(D)&&se!==ye&&(se!=null||ye!=null))switch(D){case"selected":e.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Jt(e,t,D,se,u,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)se=a[mt],a.hasOwnProperty(mt)&&se!=null&&!u.hasOwnProperty(mt)&&Jt(e,t,mt,null,u,se);for(U in u)if(se=u[U],ye=a[U],u.hasOwnProperty(U)&&se!==ye&&(se!=null||ye!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");break;default:Jt(e,t,U,se,u,ye)}return;default:if(Sl(t)){for(var Rn in a)se=a[Rn],a.hasOwnProperty(Rn)&&se!==void 0&&!u.hasOwnProperty(Rn)&&Bs(e,t,Rn,void 0,u,se);for(ce in u)se=u[ce],ye=a[ce],!u.hasOwnProperty(ce)||se===ye||se===void 0&&ye===void 0||Bs(e,t,ce,se,u,ye);return}}for(var Zt in a)se=a[Zt],a.hasOwnProperty(Zt)&&se!=null&&!u.hasOwnProperty(Zt)&&Jt(e,t,Zt,null,u,se);for(ve in u)se=u[ve],ye=a[ve],!u.hasOwnProperty(ve)||se===ye||se==null&&ye==null||Jt(e,t,ve,se,u,ye)}function mu(e){switch(e){case"class":return"className";case"for":return"htmlFor";default:return e}}function zp(e){var t={};e=e.style;for(var a=0;a<e.length;a++){var u=e[a];t[u]=e.getPropertyValue(u)}return t}function sf(e,t,a){if(t!=null&&typeof t!="object")console.error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");else{var u,p=u="",m;for(m in t)if(t.hasOwnProperty(m)){var x=t[m];x!=null&&typeof x!="boolean"&&x!==""&&(m.indexOf("--")===0?(Oe(x,m),u+=p+m+":"+(""+x).trim()):typeof x!="number"||x===0||bv.has(m)?(Oe(x,m),u+=p+m.replace(is,"-$1").toLowerCase().replace(Du,"-ms-")+":"+(""+x).trim()):u+=p+m.replace(is,"-$1").toLowerCase().replace(Du,"-ms-")+":"+x+"px",p=";")}u=u||null,t=e.getAttribute("style"),t!==u&&(u=Yr(u),Yr(t)!==u&&(a.style=zp(e)))}}function Pa(e,t,a,u,p,m){if(p.delete(a),e=e.getAttribute(a),e===null)switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":return}else if(u!=null)switch(typeof u){case"function":case"symbol":case"boolean":break;default:if(re(u,t),e===""+u)return}An(t,e,u,m)}function x0(e,t,a,u,p,m){if(p.delete(a),e=e.getAttribute(a),e===null){switch(typeof u){case"function":case"symbol":return}if(!u)return}else switch(typeof u){case"function":case"symbol":break;default:if(u)return}An(t,e,u,m)}function _b(e,t,a,u,p,m){if(p.delete(a),e=e.getAttribute(a),e===null)switch(typeof u){case"undefined":case"function":case"symbol":return}else if(u!=null)switch(typeof u){case"function":case"symbol":break;default:if(re(u,a),e===""+u)return}An(t,e,u,m)}function ln(e,t,a,u,p,m){if(p.delete(a),e=e.getAttribute(a),e===null)switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":return;default:if(isNaN(u))return}else if(u!=null)switch(typeof u){case"function":case"symbol":case"boolean":break;default:if(!isNaN(u)&&(re(u,t),e===""+u))return}An(t,e,u,m)}function pn(e,t,a,u,p,m){if(p.delete(a),e=e.getAttribute(a),e===null)switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":return}else if(u!=null)switch(typeof u){case"function":case"symbol":case"boolean":break;default:if(re(u,t),a=Or(""+u),e===a)return}An(t,e,u,m)}function Bt(e,t,a,u){for(var p={},m=new Set,x=e.attributes,E=0;E<x.length;E++)switch(x[E].name.toLowerCase()){case"value":break;case"checked":break;case"selected":break;default:m.add(x[E].name)}if(Sl(t)){for(var D in a)if(a.hasOwnProperty(D)){var U=a[D];if(U!=null){if(Fo.hasOwnProperty(D))typeof U!="function"&&ro(D,U);else if(a.suppressHydrationWarning!==!0)switch(D){case"children":typeof U!="string"&&typeof U!="number"||An("children",e.textContent,U,p);continue;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":continue;case"dangerouslySetInnerHTML":x=e.innerHTML,U=U?U.__html:void 0,U!=null&&(U=jo(e,U),An(D,x,U,p));continue;case"style":m.delete(D),sf(e,U,p);continue;case"offsetParent":case"offsetTop":case"offsetLeft":case"offsetWidth":case"offsetHeight":case"isContentEditable":case"outerText":case"outerHTML":m.delete(D.toLowerCase()),console.error("Assignment to read-only property will result in a no-op: `%s`",D);continue;case"className":m.delete("class"),x=Et(e,"class",U),An("className",x,U,p);continue;default:u.context===uc&&t!=="svg"&&t!=="math"?m.delete(D.toLowerCase()):m.delete(D),x=Et(e,D,U),An(D,x,U,p)}}}}else for(U in a)if(a.hasOwnProperty(U)&&(D=a[U],D!=null)){if(Fo.hasOwnProperty(U))typeof D!="function"&&ro(U,D);else if(a.suppressHydrationWarning!==!0)switch(U){case"children":typeof D!="string"&&typeof D!="number"||An("children",e.textContent,D,p);continue;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"value":case"checked":case"selected":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":continue;case"dangerouslySetInnerHTML":x=e.innerHTML,D=D?D.__html:void 0,D!=null&&(D=jo(e,D),x!==D&&(p[U]={__html:x}));continue;case"className":Pa(e,U,"class",D,m,p);continue;case"tabIndex":Pa(e,U,"tabindex",D,m,p);continue;case"style":m.delete(U),sf(e,D,p);continue;case"multiple":m.delete(U),An(U,e.multiple,D,p);continue;case"muted":m.delete(U),An(U,e.muted,D,p);continue;case"autoFocus":m.delete("autofocus"),An(U,e.autofocus,D,p);continue;case"data":if(t!=="object"){m.delete(U),x=e.getAttribute("data"),An(U,x,D,p);continue}case"src":case"href":if(!(D!==""||t==="a"&&U==="href"||t==="object"&&U==="data")){console.error(U==="src"?'An empty string ("") was passed to the %s attribute. This may cause the browser to download the whole page again over the network. To fix this, either do not render the element at all or pass null to %s instead of an empty string.':'An empty string ("") was passed to the %s attribute. To fix this, either do not render the element at all or pass null to %s instead of an empty string.',U,U);continue}pn(e,U,U,D,m,p);continue;case"action":case"formAction":if(x=e.getAttribute(U),typeof D=="function"){m.delete(U.toLowerCase()),U==="formAction"?(m.delete("name"),m.delete("formenctype"),m.delete("formmethod"),m.delete("formtarget")):(m.delete("enctype"),m.delete("method"),m.delete("target"));continue}else if(x===t3){m.delete(U.toLowerCase()),An(U,"function",D,p);continue}pn(e,U,U.toLowerCase(),D,m,p);continue;case"xlinkHref":pn(e,U,"xlink:href",D,m,p);continue;case"contentEditable":_b(e,U,"contenteditable",D,m,p);continue;case"spellCheck":_b(e,U,"spellcheck",D,m,p);continue;case"draggable":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_b(e,U,U,D,m,p);continue;case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x0(e,U,U.toLowerCase(),D,m,p);continue;case"capture":case"download":e:{E=e;var ce=x=U,ve=p;if(m.delete(ce),E=E.getAttribute(ce),E===null)switch(typeof D){case"undefined":case"function":case"symbol":break e;default:if(D===!1)break e}else if(D!=null)switch(typeof D){case"function":case"symbol":break;case"boolean":if(D===!0&&E==="")break e;break;default:if(re(D,x),E===""+D)break e}An(x,E,D,ve)}continue;case"cols":case"rows":case"size":case"span":e:{if(E=e,ce=x=U,ve=p,m.delete(ce),E=E.getAttribute(ce),E===null)switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":break e;default:if(isNaN(D)||1>D)break e}else if(D!=null)switch(typeof D){case"function":case"symbol":case"boolean":break;default:if(!(isNaN(D)||1>D)&&(re(D,x),E===""+D))break e}An(x,E,D,ve)}continue;case"rowSpan":ln(e,U,"rowspan",D,m,p);continue;case"start":ln(e,U,U,D,m,p);continue;case"xHeight":Pa(e,U,"x-height",D,m,p);continue;case"xlinkActuate":Pa(e,U,"xlink:actuate",D,m,p);continue;case"xlinkArcrole":Pa(e,U,"xlink:arcrole",D,m,p);continue;case"xlinkRole":Pa(e,U,"xlink:role",D,m,p);continue;case"xlinkShow":Pa(e,U,"xlink:show",D,m,p);continue;case"xlinkTitle":Pa(e,U,"xlink:title",D,m,p);continue;case"xlinkType":Pa(e,U,"xlink:type",D,m,p);continue;case"xmlBase":Pa(e,U,"xml:base",D,m,p);continue;case"xmlLang":Pa(e,U,"xml:lang",D,m,p);continue;case"xmlSpace":Pa(e,U,"xml:space",D,m,p);continue;case"inert":D!==""||bx[U]||(bx[U]=!0,console.error("Received an empty string for a boolean attribute `%s`. This will treat the attribute as if it were false. Either pass `false` to silence this warning, or pass `true` if you used an empty string in earlier versions of React to indicate this attribute is true.",U)),x0(e,U,U,D,m,p);continue;default:if(!(2<U.length)||U[0]!=="o"&&U[0]!=="O"||U[1]!=="n"&&U[1]!=="N"){E=wl(U),x=!1,u.context===uc&&t!=="svg"&&t!=="math"?m.delete(E.toLowerCase()):(ce=U.toLowerCase(),ce=Of.hasOwnProperty(ce)&&Of[ce]||null,ce!==null&&ce!==U&&(x=!0,m.delete(ce)),m.delete(E));e:if(ce=e,ve=E,E=D,Pt(ve))if(ce.hasAttribute(ve))ce=ce.getAttribute(ve),re(E,ve),E=ce===""+E?E:ce;else{switch(typeof E){case"function":case"symbol":break e;case"boolean":if(ce=ve.toLowerCase().slice(0,5),ce!=="data-"&&ce!=="aria-")break e}E=E===void 0?void 0:null}else E=void 0;x||An(U,E,D,p)}}}return 0<m.size&&a.suppressHydrationWarning!==!0&&Pb(e,m,p),Object.keys(p).length===0?null:p}function Xt(e,t){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e[0]+" "+t+" "+e[1];default:return e.slice(0,-1).join(", ")+", "+t+" "+e[e.length-1]}}function Wt(e){return e.nodeType===9?e:e.ownerDocument}function wa(e){switch(e){case as:return Lh;case uh:return xx;default:return uc}}function Zr(e,t){if(e===uc)switch(t){case"svg":return Lh;case"math":return xx;default:return uc}return e===Lh&&t==="foreignObject"?uc:e}function Hs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}function $b(){var e=window.event;return e&&e.type==="popstate"?e===Yw?!1:(Yw=e,!0):(Yw=null,!1)}function Xr(e){setTimeout(function(){throw e})}function qn(e,t,a){switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&e.focus();break;case"img":a.src?e.src=a.src:a.srcSet&&(e.srcset=a.srcSet)}}function Fs(e,t,a,u){y0(e,t,a,u),e[ka]=u}function qs(e){md(e,"")}function jb(e,t,a){e.nodeValue=a}function si(e){return e==="head"}function bu(e,t){e.removeChild(t)}function lf(e,t){(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).removeChild(t)}function Wi(e,t){var a=t,u=0,p=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a===yx){if(0<u&&8>u){a=u;var x=e.ownerDocument;if(a&i3&&xu(x.documentElement),a&a3&&xu(x.body),a&o3)for(a=x.head,xu(a),x=a.firstChild;x;){var E=x.nextSibling,D=x.nodeName;x[Sf]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=E}}if(p===0){e.removeChild(m),Tu(t);return}p--}else a===vx||a===cc||a===Vv?p++:u=a.charCodeAt(0)-48;else u=0;a=m}while(a);Tu(t)}function Lb(e){e=e.style,typeof e.setProperty=="function"?e.setProperty("display","none","important"):e.display="none"}function Bb(e){e.nodeValue=""}function Np(e,t){t=t[r3],t=t!=null&&t.hasOwnProperty("display")?t.display:null,e.style.display=t==null||typeof t=="boolean"?"":(""+t).trim()}function Up(e,t){e.nodeValue=t}function ir(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ir(a),yo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ai(e,t,a,u){for(;e.nodeType===1;){var p=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Sf])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){re(p.name,"name");var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Ea(e.nextSibling),e===null)break}return null}function Gs(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ea(e.nextSibling),e===null))return null;return e}function Vs(e){return e.data===Vv||e.data===cc&&e.ownerDocument.readyState===ET}function vu(e,t){var a=e.ownerDocument;if(e.data!==cc||a.readyState===ET)t();else{var u=function(){t(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function Ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===vx||t===Vv||t===cc||t===qw||t===wT)break;if(t===yx)return null}}return e}function Pp(e){if(e.nodeType===1){for(var t=e.nodeName.toLowerCase(),a={},u=e.attributes,p=0;p<u.length;p++){var m=u[p];a[mu(m.name)]=m.name.toLowerCase()==="style"?zp(e):m.value}return{type:t,props:a}}return e.nodeType===8?{type:"Suspense",props:{}}:e.nodeValue}function Hb(e,t,a){return a===null||a[n3]!==!0?(e.nodeValue===t?e=null:(t=Yr(t),e=Yr(e.nodeValue)===t?null:e.nodeValue),e):null}function yu(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a===yx){if(t===0)return Ea(e.nextSibling);t--}else a!==vx&&a!==Vv&&a!==cc||t++}e=e.nextSibling}return null}function _p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a===vx||a===Vv||a===cc){if(t===0)return e;t--}else a===yx&&t++}e=e.previousSibling}return null}function _a(e){Tu(e)}function S0(e){Tu(e)}function Ca(e,t,a,u,p){switch(p&&Ig(e,u.ancestorInfo),t=Wt(a),e){case"html":if(e=t.documentElement,!e)throw Error("React expected an <html> element (document.documentElement) to exist in the Document but one was not found. React never removes the documentElement for any Document it renders into so the cause is likely in some other script running on this page.");return e;case"head":if(e=t.head,!e)throw Error("React expected a <head> element (document.head) to exist in the Document but one was not found. React never removes the head for any Document it renders into so the cause is likely in some other script running on this page.");return e;case"body":if(e=t.body,!e)throw Error("React expected a <body> element (document.body) to exist in the Document but one was not found. React never removes the body for any Document it renders into so the cause is likely in some other script running on this page.");return e;default:throw Error("resolveSingletonInstance was called with an element type that is not supported. This is a bug in React.")}}function w0(e,t,a,u){if(!a[Ws]&&sa(a)){var p=a.tagName.toLowerCase();console.error("You are mounting a new %s component when a previous one has not first unmounted. It is an error to render more than one %s component at a time and attributes and children of these components will likely fail in unpredictable ways. Please only render a single instance of <%s> and if you need to mount a new one, ensure any previous ones have unmounted first.",p,p,p)}switch(e){case"html":case"head":case"body":break;default:console.error("acquireSingletonInstance was called with an element type that is not supported. This is a bug in React.")}for(p=a.attributes;p.length;)a.removeAttributeNode(p[0]);pi(a,e,t),a[Hi]=u,a[ka]=t}function xu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);yo(e)}function $p(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}function Qr(e,t,a){var u=Bh;if(u&&typeof t=="string"&&t){var p=di(t);p='link[rel="'+e+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),OT.has(p)||(OT.add(p),e={rel:e,crossOrigin:a,href:t},u.querySelector(p)===null&&(t=u.createElement("link"),pi(t,"link",e),X(t),u.head.appendChild(t)))}}function cf(e,t,a,u){var p=(p=or.current)?$p(p):null;if(!p)throw Error('"resourceRoot" was expected to exist. This is a bug in React.');switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(a=Lo(a.href),t=I(p).hoistableStyles,u=t.get(a),u||(u={type:"style",instance:null,count:0,state:null},t.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Lo(a.href);var m=I(p).hoistableStyles,x=m.get(e);if(!x&&(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:Yf,preload:null}},m.set(e,x),(m=p.querySelector(wu(e)))&&!m._p&&(x.instance=m,x.state.loading=Yv|Sr),!wr.has(e))){var E={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy};wr.set(e,E),m||E0(p,e,E,x.state)}if(t&&u===null)throw a=`

  - `+Su(t)+`
  + `+Su(a),Error("Expected <link> not to update to be updated to a stylesheet with precedence. Check the `rel`, `href`, and `precedence` props of this component. Alternatively, check whether two different <link> components render in the same slot or share the same key."+a);return x}if(t&&u!==null)throw a=`

  - `+Su(t)+`
  + `+Su(a),Error("Expected stylesheet with precedence to not be updated to a different kind of <link>. Check the `rel`, `href`, and `precedence` props of this component. Alternatively, check whether two different <link> components render in the same slot or share the same key."+a);return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(a=Ys(a),t=I(p).hoistableScripts,u=t.get(a),u||(u={type:"script",instance:null,count:0,state:null},t.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error('getResource encountered a type it did not expect: "'+e+'". this is a bug in React.')}}function Su(e){var t=0,a="<link";return typeof e.rel=="string"?(t++,a+=' rel="'+e.rel+'"'):rr.call(e,"rel")&&(t++,a+=' rel="'+(e.rel===null?"null":"invalid type "+typeof e.rel)+'"'),typeof e.href=="string"?(t++,a+=' href="'+e.href+'"'):rr.call(e,"href")&&(t++,a+=' href="'+(e.href===null?"null":"invalid type "+typeof e.href)+'"'),typeof e.precedence=="string"?(t++,a+=' precedence="'+e.precedence+'"'):rr.call(e,"precedence")&&(t++,a+=" precedence={"+(e.precedence===null?"null":"invalid type "+typeof e.precedence)+"}"),Object.getOwnPropertyNames(e).length>t&&(a+=" ..."),a+" />"}function Lo(e){return'href="'+di(e)+'"'}function wu(e){return'link[rel="stylesheet"]['+e+"]"}function Fb(e){return St({},e,{"data-precedence":e.precedence,precedence:null})}function E0(e,t,a,u){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?u.loading=Yv:(t=e.createElement("link"),u.preload=t,t.addEventListener("load",function(){return u.loading|=Yv}),t.addEventListener("error",function(){return u.loading|=MT}),pi(t,"link",a),X(t),e.head.appendChild(t))}function Ys(e){return'[src="'+di(e)+'"]'}function Ql(e){return"script[async]"+e}function C0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var u=e.querySelector('style[data-href~="'+di(a.href)+'"]');if(u)return t.instance=u,X(u),u;var p=St({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),X(u),pi(u,"style",p),jp(u,a.precedence,e),t.instance=u;case"stylesheet":p=Lo(a.href);var m=e.querySelector(wu(p));if(m)return t.state.loading|=Sr,t.instance=m,X(m),m;u=Fb(a),(p=wr.get(p))&&qb(u,p),m=(e.ownerDocument||e).createElement("link"),X(m);var x=m;return x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),pi(m,"link",u),t.state.loading|=Sr,jp(m,a.precedence,e),t.instance=m;case"script":return m=Ys(a.src),(p=e.querySelector(Ql(m)))?(t.instance=p,X(p),p):(u=a,(p=wr.get(m))&&(u=St({},a),Lp(u,p)),e=e.ownerDocument||e,p=e.createElement("script"),X(p),pi(p,"link",u),e.head.appendChild(p),t.instance=p);case"void":return null;default:throw Error('acquireResource encountered a resource type it did not expect: "'+t.type+'". this is a bug in React.')}else t.type==="stylesheet"&&(t.state.loading&Sr)===Yf&&(u=t.instance,t.state.loading|=Sr,jp(u,a.precedence,e));return t.instance}function jp(e,t,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,m=p,x=0;x<u.length;x++){var E=u[x];if(E.dataset.precedence===t)m=E;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function qb(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}function Gb(e,t,a){if(Sx===null){var u=new Map,p=Sx=new Map;p.set(a,u)}else p=Sx,u=p.get(a),u||(u=new Map,p.set(a,u));if(u.has(e))return u;for(u.set(e,null),a=a.getElementsByTagName(e),p=0;p<a.length;p++){var m=a[p];if(!(m[Sf]||m[Hi]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!==as){var x=m.getAttribute(t)||"";x=e+x;var E=u.get(x);E?E.push(m):u.set(x,[m])}}return u}function Kl(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Bp(e,t,a){var u=!a.ancestorInfo.containerTagInScope;if(a.context===Lh||t.itemProp!=null)return!u||t.itemProp==null||e!=="meta"&&e!=="title"&&e!=="style"&&e!=="link"&&e!=="script"||console.error("Cannot render a <%s> outside the main document if it has an `itemProp` prop. `itemProp` suggests the tag belongs to an `itemScope` which can appear anywhere in the DOM. If you were intending for React to hoist this <%s> remove the `itemProp` prop. Otherwise, try moving this tag into the <head> or <body> of the Document.",e,e),!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href===""){u&&console.error('Cannot render a <style> outside the main document without knowing its precedence and a unique href key. React can hoist and deduplicate <style> tags if you provide a `precedence` prop along with an `href` prop that does not conflict with the `href` values used in any other hoisted <style> or <link rel="stylesheet" ...> tags.  Note that hoisting <style> tags is considered an advanced feature that most will not use directly. Consider moving the <style> tag to the <head> or consider adding a `precedence="default"` and `href="some unique resource identifier"`.');break}return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError){if(t.rel==="stylesheet"&&typeof t.precedence=="string"){e=t.href;var p=t.onError,m=t.disabled;a=[],t.onLoad&&a.push("`onLoad`"),p&&a.push("`onError`"),m!=null&&a.push("`disabled`"),p=Xt(a,"and"),p+=a.length===1?" prop":" props",m=a.length===1?"an "+p:"the "+p,a.length&&console.error('React encountered a <link rel="stylesheet" href="%s" ... /> with a `precedence` prop that also included %s. The presence of loading and error handlers indicates an intent to manage the stylesheet loading state from your from your Component code and React will not hoist or deduplicate this stylesheet. If your intent was to have React hoist and deduplciate this stylesheet using the `precedence` prop remove the %s, otherwise remove the `precedence` prop.',e,m,p)}u&&(typeof t.rel!="string"||typeof t.href!="string"||t.href===""?console.error("Cannot render a <link> outside the main document without a `rel` and `href` prop. Try adding a `rel` and/or `href` prop to this <link> or moving the link into the <head> tag"):(t.onError||t.onLoad)&&console.error("Cannot render a <link> with onLoad or onError listeners outside the main document. Try removing onLoad={...} and onError={...} or moving it into the root <head> tag or somewhere in the <body>."));break}switch(t.rel){case"stylesheet":return e=t.precedence,t=t.disabled,typeof e!="string"&&u&&console.error('Cannot render a <link rel="stylesheet" /> outside the main document without knowing its precedence. Consider adding precedence="default" or moving it into the root <head> tag.'),typeof e=="string"&&t==null;default:return!0}case"script":if(e=t.async&&typeof t.async!="function"&&typeof t.async!="symbol",!e||t.onLoad||t.onError||!t.src||typeof t.src!="string"){u&&(e?t.onLoad||t.onError?console.error("Cannot render a <script> with onLoad or onError listeners outside the main document. Try removing onLoad={...} and onError={...} or moving it into the root <head> tag or somewhere in the <body>."):console.error("Cannot render a <script> outside the main document without `async={true}` and a non-empty `src` prop. Ensure there is a valid `src` and either make the script async or move it into the root <head> tag or somewhere in the <body>."):console.error('Cannot render a sync or defer <script> outside the main document without knowing its order. Try adding async="" or moving it into the root <head> tag.'));break}return!0;case"noscript":case"template":u&&console.error("Cannot render <%s> outside the main document. Try moving it into the root <head> tag.",e)}return!1}function Vb(e){return!(e.type==="stylesheet"&&(e.state.loading&AT)===Yf)}function T0(){}function k0(e,t,a){if(Zv===null)throw Error("Internal React Error: suspendedState null when it was expected to exists. Please report this as a React bug.");var u=Zv;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&Sr)===Yf){if(t.instance===null){var p=Lo(a.href),m=e.querySelector(wu(p));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(u.count++,u=uf.bind(u),e.then(u,u)),t.state.loading|=Sr,t.instance=m,X(m);return}m=e.ownerDocument||e,a=Fb(a),(p=wr.get(p))&&qb(a,p),m=m.createElement("link"),X(m);var x=m;x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),pi(m,"link",a),t.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&AT)===Yf&&(u.count++,t=uf.bind(u),e.addEventListener("load",t),e.addEventListener("error",t))}}function M0(){if(Zv===null)throw Error("Internal React Error: suspendedState null when it was expected to exists. Please report this as a React bug.");var e=Zv;return e.stylesheets&&e.count===0&&Hp(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Hp(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function uf(){if(this.count--,this.count===0){if(this.stylesheets)Hp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}function Hp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wx=new Map,t.forEach(Fp,e),wx=null,uf.call(e))}function Fp(e,t){if(!(t.state.loading&Sr)){var a=wx.get(e);if(a)var u=a.get(Xw);else{a=new Map,wx.set(e,a);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var x=p[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),u=x)}u&&a.set(Xw,u)}p=t.instance,x=p.getAttribute("data-precedence"),m=a.get(x)||u,m===u&&a.set(Xw,p),a.set(x,p),this.count++,u=uf.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),t.state.loading|=Sr}}function A0(e,t,a,u,p,m,x,E){for(this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vf,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map,this.passiveEffectDuration=this.effectDuration=-0,this.memoizedUpdaters=new Set,e=this.pendingUpdatersLaneMap=[],t=0;31>t;t++)e.push(new Set);this._debugRootType=a?"hydrateRoot()":"createRoot()"}function Yb(e,t,a,u,p,m,x,E,D,U,ce,ve){return e=new A0(e,t,a,x,E,D,U,ve),t=DR,m===!0&&(t|=Ma|os),so&&(t|=ea),m=A(3,null,null,t),e.current=m,m.stateNode=e,t=Im(),Ja(t),e.pooledCache=t,Ja(t),m.memoizedState={element:u,isDehydrated:a,cache:t},Ms(m),e}function hn(e){return e?(e=Nu,e):Nu}function df(e,t,a,u,p,m){if(Ri&&typeof Ri.onScheduleFiberRoot=="function")try{Ri.onScheduleFiberRoot(ec,u,a)}catch(x){Xn||(Xn=!0,console.error("React instrumentation encountered an error: %s",x))}Fe!==null&&typeof Fe.markRenderScheduled=="function"&&Fe.markRenderScheduled(t),p=hn(p),u.context===null?u.context=p:u.pendingContext=p,lr&&Ii!==null&&!zT&&(zT=!0,console.error(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,de(Ii)||"Unknown")),u=Co(t),u.payload={element:a},m=m===void 0?null:m,m!==null&&(typeof m!="function"&&console.error("Expected the last optional `callback` argument to be a function. Instead received: %s.",m),u.callback=m),a=To(e,u,t),a!==null&&(jt(a,e,t),zl(a,e,t))}function O0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function qp(e,t){O0(e,t),(e=e.alternate)&&O0(e,t)}function R0(e){if(e.tag===13){var t=ca(e,67108864);t!==null&&jt(t,e,67108864),qp(e,67108864)}}function FS(){return Ii}function qS(){for(var e=new Map,t=1,a=0;31>a;a++){var u=Un(t);e.set(t,u),t*=2}return e}function Gp(e,t,a,u){var p=le.T;le.T=null;var m=on.p;try{on.p=ja,ff(e,t,a,u)}finally{on.p=m,le.T=p}}function Eu(e,t,a,u){var p=le.T;le.T=null;var m=on.p;try{on.p=sr,ff(e,t,a,u)}finally{on.p=m,le.T=p}}function ff(e,t,a,u){if(Cx){var p=Cu(u);if(p===null)Ua(e,t,u,Tx,a),Bo(e,u);else if(GS(p,e,t,a,u))u.stopPropagation();else if(Bo(e,u),t&4&&-1<u3.indexOf(e)){for(;p!==null;){var m=sa(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Tt(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var D=1<<31-hi(x);E.entanglements[1]|=D,x&=~D}ao(m),(cn&(Fa|cs))===Go&&(lx=Oi()+dT,js(0))}}break;case 13:E=ca(m,2),E!==null&&jt(E,m,2),Gl(),qp(m,2)}if(m=Cu(u),m===null&&Ua(e,t,u,Tx,a),m===p)break;p=m}p!==null&&u.stopPropagation()}else Ua(e,t,u,null,a)}}function Cu(e){return e=xo(e),gf(e)}function gf(e){if(Tx=null,e=Ci(e),e!==null){var t=ie(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=pe(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Tx=e,null}function Zs(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return ja;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return sr;case"message":switch(U0()){case yf:return ja;case Wb:return sr;case Mu:case ev:return ns;case tv:return nh;default:return ns}default:return ns}}function Bo(e,t){switch(e){case"focusin":case"focusout":qu=null;break;case"dragenter":case"dragleave":Gu=null;break;case"mouseover":case"mouseout":Vu=null;break;case"pointerover":case"pointerout":Qv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kv.delete(t.pointerId)}}function Kr(e,t,a,u,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[p]},t!==null&&(t=sa(t),t!==null&&R0(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function GS(e,t,a,u,p){switch(t){case"focusin":return qu=Kr(qu,e,t,a,u,p),!0;case"dragenter":return Gu=Kr(Gu,e,t,a,u,p),!0;case"mouseover":return Vu=Kr(Vu,e,t,a,u,p),!0;case"pointerover":var m=p.pointerId;return Qv.set(m,Kr(Qv.get(m)||null,e,t,a,u,p)),!0;case"gotpointercapture":return m=p.pointerId,Kv.set(m,Kr(Kv.get(m)||null,e,t,a,u,p)),!0}return!1}function Zb(e){var t=Ci(e.target);if(t!==null){var a=ie(t);if(a!==null){if(t=a.tag,t===13){if(t=pe(a),t!==null){e.blockedOn=t,kr(e.priority,function(){if(a.tag===13){var u=Na(a);u=Pn(u);var p=ca(a,u);p!==null&&jt(p,a,u),qp(a,u)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Cu(e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a),p=u;y!==null&&console.error("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),y=p,a.target.dispatchEvent(u),y===null&&console.error("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),y=null}else return t=sa(a),t!==null&&R0(t),e.blockedOn=a,!1;t.shift()}return!0}function Xb(e,t,a){pf(e)&&a.delete(t)}function I0(){Qw=!1,qu!==null&&pf(qu)&&(qu=null),Gu!==null&&pf(Gu)&&(Gu=null),Vu!==null&&pf(Vu)&&(Vu=null),Qv.forEach(Xb),Kv.forEach(Xb)}function Vp(e,t){e.blockedOn===t&&(e.blockedOn=null,Qw||(Qw=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,I0)))}function Yp(e){kx!==e&&(kx=e,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,function(){kx===e&&(kx=null);for(var t=0;t<e.length;t+=3){var a=e[t],u=e[t+1],p=e[t+2];if(typeof u!="function"){if(gf(u||a)===null)continue;break}var m=sa(a);m!==null&&(e.splice(t,3),t-=3,a={pending:!0,data:p,method:a.method,action:u},Object.freeze(a),op(m,a,u,p))}}))}function Tu(e){function t(D){return Vp(D,e)}qu!==null&&Vp(qu,e),Gu!==null&&Vp(Gu,e),Vu!==null&&Vp(Vu,e),Qv.forEach(t),Kv.forEach(t);for(var a=0;a<Yu.length;a++){var u=Yu[a];u.blockedOn===e&&(u.blockedOn=null)}for(;0<Yu.length&&(a=Yu[0],a.blockedOn===null);)Zb(a),a.blockedOn===null&&Yu.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var p=a[u],m=a[u+1],x=p[ka]||null;if(typeof m=="function")x||Yp(a);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(p=m,x=m[ka]||null)E=x.formAction;else if(gf(p)!==null)continue}else E=x.action;typeof E=="function"?a[u+1]=E:(a.splice(u,3),u-=3),Yp(a)}}}function Zp(e){this._internalRoot=e}function Xp(e){this._internalRoot=e}function Qp(e){e[Ws]&&(e._reactRootContainer?console.error("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):console.error("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var Gn=mE(),Qb=Qf(),VS=Fx(),St=Object.assign,YS=Symbol.for("react.element"),Jr=Symbol.for("react.transitional.element"),Mt=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Jl=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),D0=Symbol.for("react.provider"),mf=Symbol.for("react.consumer"),Ta=Symbol.for("react.context"),Qs=Symbol.for("react.forward_ref"),Ks=Symbol.for("react.suspense"),Kp=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),Wp=Symbol.for("react.activity"),z0=Symbol.for("react.memo_cache_sentinel"),bf=Symbol.iterator,mn=Symbol.for("react.client.reference"),li=Array.isArray,le=Qb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,on=VS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Kb=Object.freeze({pending:!1,data:null,method:null,action:null}),vf=[],ku=[],ar=-1,Wr=Ue(null),Wl=Ue(null),or=Ue(null),eh=Ue(null),rr=Object.prototype.hasOwnProperty,Jb=Gn.unstable_scheduleCallback,N0=Gn.unstable_cancelCallback,ZS=Gn.unstable_shouldYield,XS=Gn.unstable_requestPaint,Oi=Gn.unstable_now,U0=Gn.unstable_getCurrentPriorityLevel,yf=Gn.unstable_ImmediatePriority,Wb=Gn.unstable_UserBlockingPriority,Mu=Gn.unstable_NormalPriority,ev=Gn.unstable_LowPriority,tv=Gn.unstable_IdlePriority,Ho=Gn.log,nv=Gn.unstable_setDisableYieldValue,ec=null,Ri=null,Fe=null,Xn=!1,so=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u",hi=Math.clz32?Math.clz32:Ei,es=Math.log,QS=Math.LN2,th=256,ts=4194304,ja=2,sr=8,ns=32,nh=268435456,Js=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Js,ka="__reactProps$"+Js,Ws="__reactContainer$"+Js,ih="__reactEvents$"+Js,Au="__reactListeners$"+Js,xf="__reactHandles$"+Js,iv="__reactResources$"+Js,Sf="__reactMarker$"+Js,tc=new Set,Fo={},ah={},oh={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},av=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rh={},wf={},Ou=0,ov,P0,rv,Ru,_0,$0,j0;Zo.__reactDisabledLog=!0;var Iu,Ef,Cf=!1,sv=new(typeof WeakMap=="function"?WeakMap:Map),Ii=null,lr=!1,L0=/[\n"\\]/g,lv=!1,cv=!1,uv=!1,sh=!1,dv=!1,Tf=!1,B0=["value","defaultValue"],H0=!1,lh=/["'&<>\n\t]|^\s|\s$/,fv="address applet area article aside base basefont bgsound blockquote body br button caption center col colgroup dd details dir div dl dt embed fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html iframe img input isindex li link listing main marquee menu menuitem meta nav noembed noframes noscript object ol p param plaintext pre script section select source style summary table tbody td template textarea tfoot th thead title tr track ul wbr xmp".split(" "),kf="applet caption html table td th marquee object template foreignObject desc title".split(" "),gv=kf.concat(["button"]),F0="dd dt li option optgroup p rp rt".split(" "),ch={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null,containerTagInScope:null,implicitRootScope:!1},qo={},cr={animation:"animationDelay animationDirection animationDuration animationFillMode animationIterationCount animationName animationPlayState animationTimingFunction".split(" "),background:"backgroundAttachment backgroundClip backgroundColor backgroundImage backgroundOrigin backgroundPositionX backgroundPositionY backgroundRepeat backgroundSize".split(" "),backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:"borderBottomColor borderBottomStyle borderBottomWidth borderImageOutset borderImageRepeat borderImageSlice borderImageSource borderImageWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderTopColor borderTopStyle borderTopWidth".split(" "),borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:"fontFamily fontFeatureSettings fontKerning fontLanguageOverride fontSize fontSizeAdjust fontStretch fontStyle fontVariant fontVariantAlternates fontVariantCaps fontVariantEastAsian fontVariantLigatures fontVariantNumeric fontVariantPosition fontWeight lineHeight".split(" "),fontVariant:"fontVariantAlternates fontVariantCaps fontVariantEastAsian fontVariantLigatures fontVariantNumeric fontVariantPosition".split(" "),gap:["columnGap","rowGap"],grid:"gridAutoColumns gridAutoFlow gridAutoRows gridTemplateAreas gridTemplateColumns gridTemplateRows".split(" "),gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:"maskClip maskComposite maskImage maskMode maskOrigin maskPositionX maskPositionY maskRepeat maskSize".split(" "),maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},is=/([A-Z])/g,Du=/^ms-/,Mf=/^(?:webkit|moz|o)[A-Z]/,el=/^-ms-/,KS=/-(.)/g,pv=/;\s*$/,ur={},hv={},mv=!1,Af=!1,bv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),uh="http://www.w3.org/1998/Math/MathML",as="http://www.w3.org/2000/svg",dh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Of={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",fetchpriority:"fetchPriority",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",inert:"inert",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",popover:"popover",popovertarget:"popoverTarget",popovertargetaction:"popoverTargetAction",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",transformorigin:"transformOrigin","transform-origin":"transformOrigin",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},zu={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},tl={},fh=RegExp("^(aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),q0=RegExp("^(aria)[A-Z][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),G0=!1,mi={},i=/^on./,o=/^on[^A-Z]/,c=RegExp("^(aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),g=RegExp("^(aria)[A-Z][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),b=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i,y=null,C=null,O=null,j=!1,ee=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),we=!1;if(ee)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){we=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch{we=!1}var ae=null,fe=null,gt=null,lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rn=ki(lt),Q=St({},lt,{view:0,detail:0}),V=ki(Q),te,Ee,qe,Nt=St({},Q,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qe&&(qe&&e.type==="mousemove"?(te=e.screenX-qe.screenX,Ee=e.screenY-qe.screenY):Ee=te=0,qe=e),te)},movementY:function(e){return"movementY"in e?e.movementY:Ee}}),rt=ki(Nt),pt=St({},Nt,{dataTransfer:0}),bi=ki(pt),en=St({},Q,{relatedTarget:0}),dr=ki(en),JS=St({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),rR=ki(JS),sR=St({},lt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lR=ki(sR),cR=St({},lt,{data:0}),VC=ki(cR),uR=VC,dR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},pR=St({},Q,{key:function(e){if(e.key){var t=dR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=El(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(e){return e.type==="keypress"?El(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?El(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hR=ki(pR),mR=St({},Nt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YC=ki(mR),bR=St({},Q,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),vR=ki(bR),yR=St({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),xR=ki(yR),SR=St({},Nt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wR=ki(SR),ER=St({},lt,{newState:0,oldState:0}),CR=ki(ER),TR=[9,13,27,32],ZC=229,WS=ee&&"CompositionEvent"in window,vv=null;ee&&"documentMode"in document&&(vv=document.documentMode);var kR=ee&&"TextEvent"in window&&!vv,XC=ee&&(!WS||vv&&8<vv&&11>=vv),QC=32,KC=String.fromCharCode(QC),JC=!1,gh=!1,MR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},yv=null,xv=null,WC=!1;ee&&(WC=vm("input")&&(!document.documentMode||9<document.documentMode));var La=typeof Object.is=="function"?Object.is:_S,AR=ee&&"documentMode"in document&&11>=document.documentMode,ph=null,ew=null,Sv=null,tw=!1,hh={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionrun:Cl("Transition","TransitionRun"),transitionstart:Cl("Transition","TransitionStart"),transitioncancel:Cl("Transition","TransitionCancel"),transitionend:Cl("Transition","TransitionEnd")},nw={},e1={};ee&&(e1=document.createElement("div").style,"AnimationEvent"in window||(delete hh.animationend.animation,delete hh.animationiteration.animation,delete hh.animationstart.animation),"TransitionEvent"in window||delete hh.transitionend.transition);var t1=Tl("animationend"),n1=Tl("animationiteration"),i1=Tl("animationstart"),OR=Tl("transitionrun"),RR=Tl("transitionstart"),IR=Tl("transitioncancel"),a1=Tl("transitionend"),o1=new Map,iw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");iw.push("scrollEnd");var aw=new WeakMap,ow=1,Rf=2,fr=[],mh=0,rw=0,Nu={};Object.freeze(Nu);var gr=null,bh=null,Dn=0,DR=1,ea=2,Ma=8,os=16,r1=64,s1=!1;try{var l1=Object.preventExtensions({})}catch{s1=!0}var vh=[],yh=0,V0=null,Y0=0,pr=[],hr=0,If=null,nc=1,ic="",Ba=null,ii=null,tn=!1,ac=!1,mr=null,Df=null,nl=!1,sw=Error("Hydration Mismatch Exception: This is not a real error, and should not leak into userspace. If you're seeing this, it's likely a bug in React."),c1=0;if(typeof performance=="object"&&typeof performance.now=="function")var zR=performance,u1=function(){return zR.now()};else{var NR=Date;u1=function(){return NR.now()}}var lw=Ue(null),cw=Ue(null),d1={},Z0=null,xh=null,Sh=!1,UR=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,u){e.push(u)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},PR=Gn.unstable_scheduleCallback,_R=Gn.unstable_NormalPriority,Di={$$typeof:Ta,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0,_currentRenderer:null,_currentRenderer2:null},wh=Gn.unstable_now,f1=-0,X0=-0,lo=-1.1,zf=-0,Q0=!1,K0=!1,wv=null,uw=0,Nf=0,Eh=null,g1=le.S;le.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Wy(e,t),g1!==null&&g1(e,t)};var Uf=Ue(null),rs={recordUnsafeLifecycleWarnings:function(){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},Ev=[],Cv=[],Tv=[],kv=[],Mv=[],Av=[],Pf=new Set;rs.recordUnsafeLifecycleWarnings=function(e,t){Pf.has(e.type)||(typeof t.componentWillMount=="function"&&t.componentWillMount.__suppressDeprecationWarning!==!0&&Ev.push(e),e.mode&Ma&&typeof t.UNSAFE_componentWillMount=="function"&&Cv.push(e),typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Tv.push(e),e.mode&Ma&&typeof t.UNSAFE_componentWillReceiveProps=="function"&&kv.push(e),typeof t.componentWillUpdate=="function"&&t.componentWillUpdate.__suppressDeprecationWarning!==!0&&Mv.push(e),e.mode&Ma&&typeof t.UNSAFE_componentWillUpdate=="function"&&Av.push(e))},rs.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;0<Ev.length&&(Ev.forEach(function(E){e.add(de(E)||"Component"),Pf.add(E.type)}),Ev=[]);var t=new Set;0<Cv.length&&(Cv.forEach(function(E){t.add(de(E)||"Component"),Pf.add(E.type)}),Cv=[]);var a=new Set;0<Tv.length&&(Tv.forEach(function(E){a.add(de(E)||"Component"),Pf.add(E.type)}),Tv=[]);var u=new Set;0<kv.length&&(kv.forEach(function(E){u.add(de(E)||"Component"),Pf.add(E.type)}),kv=[]);var p=new Set;0<Mv.length&&(Mv.forEach(function(E){p.add(de(E)||"Component"),Pf.add(E.type)}),Mv=[]);var m=new Set;if(0<Av.length&&(Av.forEach(function(E){m.add(de(E)||"Component"),Pf.add(E.type)}),Av=[]),0<t.size){var x=k(t);console.error(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,x)}0<u.size&&(x=k(u),console.error(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://react.dev/link/derived-state

Please update the following components: %s`,x)),0<m.size&&(x=k(m),console.error(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,x)),0<e.size&&(x=k(e),console.warn(`componentWillMount has been renamed, and is not recommended for use. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,x)),0<a.size&&(x=k(a),console.warn(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://react.dev/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,x)),0<p.size&&(x=k(p),console.warn(`componentWillUpdate has been renamed, and is not recommended for use. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,x))};var J0=new Map,p1=new Set;rs.recordLegacyContextWarning=function(e,t){for(var a=null,u=e;u!==null;)u.mode&Ma&&(a=u),u=u.return;a===null?console.error("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue."):!p1.has(e.type)&&(u=J0.get(a),e.type.contextTypes!=null||e.type.childContextTypes!=null||t!==null&&typeof t.getChildContext=="function")&&(u===void 0&&(u=[],J0.set(a,u)),u.push(e))},rs.flushLegacyContextWarning=function(){J0.forEach(function(e){if(e.length!==0){var t=e[0],a=new Set;e.forEach(function(p){a.add(de(p)||"Component"),p1.add(p.type)});var u=k(a);tt(t,function(){console.error(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://react.dev/link/legacy-context`,u)})}})},rs.discardPendingWarnings=function(){Ev=[],Cv=[],Tv=[],kv=[],Mv=[],Av=[],J0=new Map};var Ov=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`."),h1=Error("Suspense Exception: This is not a real error, and should not leak into userspace. If you're seeing this, it's likely a bug in React."),W0=Error("Suspense Exception: This is not a real error! It's an implementation detail of `useActionState` to interrupt the current render. You must either rethrow it immediately, or move the `useActionState` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary."),dw={then:function(){console.error('Internal React error: A listener was unexpectedly attached to a "noop" thenable. This is a bug in React. Please file an issue.')}},Rv=null,ex=!1,br=0,vr=1,Ha=2,ta=4,zi=8,m1=0,b1=1,v1=2,fw=3,Uu=!1,y1=!1,gw=null,pw=!1,Ch=Ue(null),tx=Ue(0),Th,x1=new Set,S1=new Set,hw=new Set,w1=new Set,Pu=0,wt=null,wn=null,vi=null,nx=!1,kh=!1,_f=!1,ix=0,Iv=0,oc=null,$R=0,jR=25,be=null,yr=null,rc=-1,Dv=!1,ax={readContext:Tn,use:Bn,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn},mw=null,E1=null,bw=null,C1=null,il=null,ss=null,ox=null;mw={readContext:function(e){return Tn(e)},use:Bn,useCallback:function(e,t){return be="useCallback",Dt(),Os(t),Qc(e,t)},useContext:function(e){return be="useContext",Dt(),Tn(e)},useEffect:function(e,t){return be="useEffect",Dt(),Os(t),Ud(e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",Dt(),Os(a),_r(e,t,a)},useInsertionEffect:function(e,t){be="useInsertionEffect",Dt(),Os(t),eo(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",Dt(),Os(t),Lm(e,t)},useMemo:function(e,t){be="useMemo",Dt(),Os(t);var a=le.H;le.H=il;try{return Pl(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",Dt();var u=le.H;le.H=il;try{return Ur(e,t,a)}finally{le.H=u}},useRef:function(e){return be="useRef",Dt(),zs(e)},useState:function(e){be="useState",Dt();var t=le.H;le.H=il;try{return Ro(e)}finally{le.H=t}},useDebugValue:function(){be="useDebugValue",Dt()},useDeferredValue:function(e,t){return be="useDeferredValue",Dt(),Kc(e,t)},useTransition:function(){return be="useTransition",Dt(),$d()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",Dt(),Wg(e,t,a)},useId:function(){return be="useId",Dt(),_l()},useFormState:function(e,t){return be="useFormState",Dt(),Bc(),Yc(e,t)},useActionState:function(e,t){return be="useActionState",Dt(),Yc(e,t)},useOptimistic:function(e){return be="useOptimistic",Dt(),Jo(e)},useHostTransitionStatus:pa,useMemoCache:fn,useCacheRefresh:function(){return be="useCacheRefresh",Dt(),jd()}},E1={readContext:function(e){return Tn(e)},use:Bn,useCallback:function(e,t){return be="useCallback",Ie(),Qc(e,t)},useContext:function(e){return be="useContext",Ie(),Tn(e)},useEffect:function(e,t){return be="useEffect",Ie(),Ud(e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",Ie(),_r(e,t,a)},useInsertionEffect:function(e,t){be="useInsertionEffect",Ie(),eo(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",Ie(),Lm(e,t)},useMemo:function(e,t){be="useMemo",Ie();var a=le.H;le.H=il;try{return Pl(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",Ie();var u=le.H;le.H=il;try{return Ur(e,t,a)}finally{le.H=u}},useRef:function(e){return be="useRef",Ie(),zs(e)},useState:function(e){be="useState",Ie();var t=le.H;le.H=il;try{return Ro(e)}finally{le.H=t}},useDebugValue:function(){be="useDebugValue",Ie()},useDeferredValue:function(e,t){return be="useDeferredValue",Ie(),Kc(e,t)},useTransition:function(){return be="useTransition",Ie(),$d()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",Ie(),Wg(e,t,a)},useId:function(){return be="useId",Ie(),_l()},useActionState:function(e,t){return be="useActionState",Ie(),Yc(e,t)},useFormState:function(e,t){return be="useFormState",Ie(),Bc(),Yc(e,t)},useOptimistic:function(e){return be="useOptimistic",Ie(),Jo(e)},useHostTransitionStatus:pa,useMemoCache:fn,useCacheRefresh:function(){return be="useCacheRefresh",Ie(),jd()}},bw={readContext:function(e){return Tn(e)},use:Bn,useCallback:function(e,t){return be="useCallback",Ie(),Pd(e,t)},useContext:function(e){return be="useContext",Ie(),Tn(e)},useEffect:function(e,t){be="useEffect",Ie(),ga(2048,zi,e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",Ie(),Xc(e,t,a)},useInsertionEffect:function(e,t){return be="useInsertionEffect",Ie(),ga(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",Ie(),ga(4,ta,e,t)},useMemo:function(e,t){be="useMemo",Ie();var a=le.H;le.H=ss;try{return _d(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",Ie();var u=le.H;le.H=ss;try{return Ki(e,t,a)}finally{le.H=u}},useRef:function(){return be="useRef",Ie(),sn().memoizedState},useState:function(){be="useState",Ie();var e=le.H;le.H=ss;try{return Ki(zt)}finally{le.H=e}},useDebugValue:function(){be="useDebugValue",Ie()},useDeferredValue:function(e,t){return be="useDeferredValue",Ie(),ap(e,t)},useTransition:function(){return be="useTransition",Ie(),rp()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",Ie(),Dd(e,t,a)},useId:function(){return be="useId",Ie(),sn().memoizedState},useFormState:function(e){return be="useFormState",Ie(),Bc(),ip(e)},useActionState:function(e){return be="useActionState",Ie(),ip(e)},useOptimistic:function(e,t){return be="useOptimistic",Ie(),Wo(e,t)},useHostTransitionStatus:pa,useMemoCache:fn,useCacheRefresh:function(){return be="useCacheRefresh",Ie(),sn().memoizedState}},C1={readContext:function(e){return Tn(e)},use:Bn,useCallback:function(e,t){return be="useCallback",Ie(),Pd(e,t)},useContext:function(e){return be="useContext",Ie(),Tn(e)},useEffect:function(e,t){be="useEffect",Ie(),ga(2048,zi,e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",Ie(),Xc(e,t,a)},useInsertionEffect:function(e,t){return be="useInsertionEffect",Ie(),ga(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",Ie(),ga(4,ta,e,t)},useMemo:function(e,t){be="useMemo",Ie();var a=le.H;le.H=ox;try{return _d(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",Ie();var u=le.H;le.H=ox;try{return Oo(e,t,a)}finally{le.H=u}},useRef:function(){return be="useRef",Ie(),sn().memoizedState},useState:function(){be="useState",Ie();var e=le.H;le.H=ox;try{return Oo(zt)}finally{le.H=e}},useDebugValue:function(){be="useDebugValue",Ie()},useDeferredValue:function(e,t){return be="useDeferredValue",Ie(),Hm(e,t)},useTransition:function(){return be="useTransition",Ie(),jr()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",Ie(),Dd(e,t,a)},useId:function(){return be="useId",Ie(),sn().memoizedState},useFormState:function(e){return be="useFormState",Ie(),Bc(),Ds(e)},useActionState:function(e){return be="useActionState",Ie(),Ds(e)},useOptimistic:function(e,t){return be="useOptimistic",Ie(),np(e,t)},useHostTransitionStatus:pa,useMemoCache:fn,useCacheRefresh:function(){return be="useCacheRefresh",Ie(),sn().memoizedState}},il={readContext:function(e){return M(),Tn(e)},use:function(e){return w(),Bn(e)},useCallback:function(e,t){return be="useCallback",w(),Dt(),Qc(e,t)},useContext:function(e){return be="useContext",w(),Dt(),Tn(e)},useEffect:function(e,t){return be="useEffect",w(),Dt(),Ud(e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",w(),Dt(),_r(e,t,a)},useInsertionEffect:function(e,t){be="useInsertionEffect",w(),Dt(),eo(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",w(),Dt(),Lm(e,t)},useMemo:function(e,t){be="useMemo",w(),Dt();var a=le.H;le.H=il;try{return Pl(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",w(),Dt();var u=le.H;le.H=il;try{return Ur(e,t,a)}finally{le.H=u}},useRef:function(e){return be="useRef",w(),Dt(),zs(e)},useState:function(e){be="useState",w(),Dt();var t=le.H;le.H=il;try{return Ro(e)}finally{le.H=t}},useDebugValue:function(){be="useDebugValue",w(),Dt()},useDeferredValue:function(e,t){return be="useDeferredValue",w(),Dt(),Kc(e,t)},useTransition:function(){return be="useTransition",w(),Dt(),$d()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",w(),Dt(),Wg(e,t,a)},useId:function(){return be="useId",w(),Dt(),_l()},useFormState:function(e,t){return be="useFormState",w(),Dt(),Yc(e,t)},useActionState:function(e,t){return be="useActionState",w(),Dt(),Yc(e,t)},useOptimistic:function(e){return be="useOptimistic",w(),Dt(),Jo(e)},useMemoCache:function(e){return w(),fn(e)},useHostTransitionStatus:pa,useCacheRefresh:function(){return be="useCacheRefresh",Dt(),jd()}},ss={readContext:function(e){return M(),Tn(e)},use:function(e){return w(),Bn(e)},useCallback:function(e,t){return be="useCallback",w(),Ie(),Pd(e,t)},useContext:function(e){return be="useContext",w(),Ie(),Tn(e)},useEffect:function(e,t){be="useEffect",w(),Ie(),ga(2048,zi,e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",w(),Ie(),Xc(e,t,a)},useInsertionEffect:function(e,t){return be="useInsertionEffect",w(),Ie(),ga(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",w(),Ie(),ga(4,ta,e,t)},useMemo:function(e,t){be="useMemo",w(),Ie();var a=le.H;le.H=ss;try{return _d(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",w(),Ie();var u=le.H;le.H=ss;try{return Ki(e,t,a)}finally{le.H=u}},useRef:function(){return be="useRef",w(),Ie(),sn().memoizedState},useState:function(){be="useState",w(),Ie();var e=le.H;le.H=ss;try{return Ki(zt)}finally{le.H=e}},useDebugValue:function(){be="useDebugValue",w(),Ie()},useDeferredValue:function(e,t){return be="useDeferredValue",w(),Ie(),ap(e,t)},useTransition:function(){return be="useTransition",w(),Ie(),rp()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",w(),Ie(),Dd(e,t,a)},useId:function(){return be="useId",w(),Ie(),sn().memoizedState},useFormState:function(e){return be="useFormState",w(),Ie(),ip(e)},useActionState:function(e){return be="useActionState",w(),Ie(),ip(e)},useOptimistic:function(e,t){return be="useOptimistic",w(),Ie(),Wo(e,t)},useMemoCache:function(e){return w(),fn(e)},useHostTransitionStatus:pa,useCacheRefresh:function(){return be="useCacheRefresh",Ie(),sn().memoizedState}},ox={readContext:function(e){return M(),Tn(e)},use:function(e){return w(),Bn(e)},useCallback:function(e,t){return be="useCallback",w(),Ie(),Pd(e,t)},useContext:function(e){return be="useContext",w(),Ie(),Tn(e)},useEffect:function(e,t){be="useEffect",w(),Ie(),ga(2048,zi,e,t)},useImperativeHandle:function(e,t,a){return be="useImperativeHandle",w(),Ie(),Xc(e,t,a)},useInsertionEffect:function(e,t){return be="useInsertionEffect",w(),Ie(),ga(4,Ha,e,t)},useLayoutEffect:function(e,t){return be="useLayoutEffect",w(),Ie(),ga(4,ta,e,t)},useMemo:function(e,t){be="useMemo",w(),Ie();var a=le.H;le.H=ss;try{return _d(e,t)}finally{le.H=a}},useReducer:function(e,t,a){be="useReducer",w(),Ie();var u=le.H;le.H=ss;try{return Oo(e,t,a)}finally{le.H=u}},useRef:function(){return be="useRef",w(),Ie(),sn().memoizedState},useState:function(){be="useState",w(),Ie();var e=le.H;le.H=ss;try{return Oo(zt)}finally{le.H=e}},useDebugValue:function(){be="useDebugValue",w(),Ie()},useDeferredValue:function(e,t){return be="useDeferredValue",w(),Ie(),Hm(e,t)},useTransition:function(){return be="useTransition",w(),Ie(),jr()},useSyncExternalStore:function(e,t,a){return be="useSyncExternalStore",w(),Ie(),Dd(e,t,a)},useId:function(){return be="useId",w(),Ie(),sn().memoizedState},useFormState:function(e){return be="useFormState",w(),Ie(),Ds(e)},useActionState:function(e){return be="useActionState",w(),Ie(),Ds(e)},useOptimistic:function(e,t){return be="useOptimistic",w(),Ie(),np(e,t)},useMemoCache:function(e){return w(),fn(e)},useHostTransitionStatus:pa,useCacheRefresh:function(){return be="useCacheRefresh",Ie(),sn().memoizedState}};var T1={"react-stack-bottom-frame":function(e,t,a){var u=lr;lr=!0;try{return e(t,a)}finally{lr=u}}},vw=T1["react-stack-bottom-frame"].bind(T1),k1={"react-stack-bottom-frame":function(e){var t=lr;lr=!0;try{return e.render()}finally{lr=t}}},M1=k1["react-stack-bottom-frame"].bind(k1),A1={"react-stack-bottom-frame":function(e,t){try{t.componentDidMount()}catch(a){gn(e,e.return,a)}}},yw=A1["react-stack-bottom-frame"].bind(A1),O1={"react-stack-bottom-frame":function(e,t,a,u,p){try{t.componentDidUpdate(a,u,p)}catch(m){gn(e,e.return,m)}}},R1=O1["react-stack-bottom-frame"].bind(O1),I1={"react-stack-bottom-frame":function(e,t){var a=t.stack;e.componentDidCatch(t.value,{componentStack:a!==null?a:""})}},LR=I1["react-stack-bottom-frame"].bind(I1),D1={"react-stack-bottom-frame":function(e,t,a){try{a.componentWillUnmount()}catch(u){gn(e,t,u)}}},z1=D1["react-stack-bottom-frame"].bind(D1),N1={"react-stack-bottom-frame":function(e){e.resourceKind!=null&&console.error("Expected only SimpleEffects when enableUseEffectCRUDOverload is disabled, got %s",e.resourceKind);var t=e.create;return e=e.inst,t=t(),e.destroy=t}},BR=N1["react-stack-bottom-frame"].bind(N1),U1={"react-stack-bottom-frame":function(e,t,a){try{a()}catch(u){gn(e,t,u)}}},HR=U1["react-stack-bottom-frame"].bind(U1),P1={"react-stack-bottom-frame":function(e){var t=e._init;return t(e._payload)}},_u=P1["react-stack-bottom-frame"].bind(P1),Mh=null,zv=0,$t=null,xw,_1=xw=!1,$1={},j1={},L1={};S=function(e,t,a){if(a!==null&&typeof a=="object"&&a._store&&(!a._store.validated&&a.key==null||a._store.validated===2)){if(typeof a._store!="object")throw Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");a._store.validated=1;var u=de(e),p=u||"null";if(!$1[p]){$1[p]=!0,a=a._owner,e=e._debugOwner;var m="";e&&typeof e.tag=="number"&&(p=de(e))&&(m=`

Check the render method of \``+p+"`."),m||u&&(m=`

Check the top-level render call using <`+u+">.");var x="";a!=null&&e!==a&&(u=null,typeof a.tag=="number"?u=de(a):typeof a.name=="string"&&(u=a.name),u&&(x=" It was passed a child from "+u+".")),tt(t,function(){console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',m,x)})}}};var Ah=jl(!0),B1=jl(!1),xr=Ue(null),al=null,Oh=1,Nv=2,Ni=Ue(0),H1={},F1=new Set,q1=new Set,G1=new Set,V1=new Set,Y1=new Set,Z1=new Set,X1=new Set,Q1=new Set,K1=new Set,J1=new Set;Object.freeze(H1);var Sw={enqueueSetState:function(e,t,a){e=e._reactInternals;var u=Na(e),p=Co(u);p.payload=t,a!=null&&($n(a),p.callback=a),t=To(e,p,u),t!==null&&(jt(t,e,u),zl(t,e,u)),nn(e,u)},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var u=Na(e),p=Co(u);p.tag=b1,p.payload=t,a!=null&&($n(a),p.callback=a),t=To(e,p,u),t!==null&&(jt(t,e,u),zl(t,e,u)),nn(e,u)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Na(e),u=Co(a);u.tag=v1,t!=null&&($n(t),u.callback=t),t=To(e,u,a),t!==null&&(jt(t,e,a),zl(t,e,a)),Fe!==null&&typeof Fe.markForceUpdateScheduled=="function"&&Fe.markForceUpdateScheduled(e,a)}},ww=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rh=null,Ew=null,W1=Error("This is not a real error. It's an implementation detail of React's selective hydration feature. If this leaks into userspace, it's a bug in React. Please file an issue."),Fi=!1,eT={},tT={},nT={},iT={},Ih=!1,aT={},Cw={},Tw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},oT=!1,rT=null;rT=new Set;var sc=!1,ci=!1,kw=!1,sT=typeof WeakSet=="function"?WeakSet:Set,qi=null,Dh=null,zh=null,yi=null,co=!1,ls=null,Uv=8192,FR={getCacheForType:function(e){var t=Tn(Di),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},getOwner:function(){return Ii}};if(typeof Symbol=="function"&&Symbol.for){var Pv=Symbol.for;Pv("selector.component"),Pv("selector.has_pseudo_class"),Pv("selector.role"),Pv("selector.test_id"),Pv("selector.text")}var qR=[],GR=typeof WeakMap=="function"?WeakMap:Map,Go=0,Fa=2,cs=4,lc=0,_v=1,Nh=2,Mw=3,$f=4,rx=6,lT=5,cn=Go,On=null,qt=null,Vt=0,uo=0,$v=1,jf=2,jv=3,cT=4,Aw=5,Uh=6,Lv=7,Ow=8,Lf=9,bn=uo,Vo=null,$u=!1,Ph=!1,Rw=!1,ol=0,ai=lc,ju=0,Lu=0,Iw=0,Yo=0,Bf=0,Bv=null,qa=null,sx=!1,Dw=0,uT=300,lx=1/0,dT=500,Hv=null,Bu=null,VR=0,YR=1,ZR=2,Hf=0,fT=1,gT=2,pT=3,XR=4,zw=5,na=0,Hu=null,_h=null,Fu=0,Nw=0,Uw=null,hT=null,QR=50,Fv=0,Pw=null,_w=!1,cx=!1,KR=50,Ff=0,qv=null,$h=!1,ux=null,mT=!1,bT=new Set,JR={},dx=null,jh=null,$w=!1,jw=!1,fx=!1,Lw=!1,qf=0,Bw={};(function(){for(var e=0;e<iw.length;e++){var t=iw[e],a=t.toLowerCase();t=t[0].toUpperCase()+t.slice(1),So(a,"on"+t)}So(t1,"onAnimationEnd"),So(n1,"onAnimationIteration"),So(i1,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(OR,"onTransitionRun"),So(RR,"onTransitionStart"),So(IR,"onTransitionCancel"),So(a1,"onTransitionEnd")})(),je("onMouseEnter",["mouseout","mouseover"]),je("onMouseLeave",["mouseout","mouseover"]),je("onPointerEnter",["pointerout","pointerover"]),je("onPointerLeave",["pointerout","pointerover"]),ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gv)),gx="_reactListening"+Math.random().toString(36).slice(2),vT=!1,yT=!1,px=!1,xT=!1,hx=!1,mx=!1,ST=!1,bx={},WR=/\r\n?/g,e3=/\u0000|\uFFFD/g,Gf="http://www.w3.org/1999/xlink",Fw="http://www.w3.org/XML/1998/namespace",t3="javascript:throw new Error('React form unexpectedly submitted.')",n3="suppressHydrationWarning",vx="$",yx="/$",cc="$?",Vv="$!",i3=1,a3=2,o3=4,qw="F!",wT="F",ET="complete",r3="style",uc=0,Lh=1,xx=2,Gw=null,Vw=null,CT={dialog:!0,webview:!0},Yw=null,TT=typeof setTimeout=="function"?setTimeout:void 0,s3=typeof clearTimeout=="function"?clearTimeout:void 0,Vf=-1,kT=typeof Promise=="function"?Promise:void 0,l3=typeof queueMicrotask=="function"?queueMicrotask:typeof kT<"u"?function(e){return kT.resolve(null).then(e).catch(Xr)}:TT,Zw=null,Yf=0,Yv=1,MT=2,AT=3,Sr=4,wr=new Map,OT=new Set,dc=on.d;on.d={f:function(){var e=dc.f(),t=Gl();return e||t},r:function(e){var t=sa(e);t!==null&&t.tag===5&&t.type==="form"?$r(t):dc.r(e)},D:function(e){dc.D(e),Qr("dns-prefetch",e,null)},C:function(e,t){dc.C(e,t),Qr("preconnect",e,t)},L:function(e,t,a){dc.L(e,t,a);var u=Bh;if(u&&e&&t){var p='link[rel="preload"][as="'+di(t)+'"]';t==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+di(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+di(a.imageSizes)+'"]')):p+='[href="'+di(e)+'"]';var m=p;switch(t){case"style":m=Lo(e);break;case"script":m=Ys(e)}wr.has(m)||(e=St({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),wr.set(m,e),u.querySelector(p)!==null||t==="style"&&u.querySelector(wu(m))||t==="script"&&u.querySelector(Ql(m))||(t=u.createElement("link"),pi(t,"link",e),X(t),u.head.appendChild(t)))}},m:function(e,t){dc.m(e,t);var a=Bh;if(a&&e){var u=t&&typeof t.as=="string"?t.as:"script",p='link[rel="modulepreload"][as="'+di(u)+'"][href="'+di(e)+'"]',m=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ys(e)}if(!wr.has(m)&&(e=St({rel:"modulepreload",href:e},t),wr.set(m,e),a.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(m)))return}u=a.createElement("link"),pi(u,"link",e),X(u),a.head.appendChild(u)}}},X:function(e,t){dc.X(e,t);var a=Bh;if(a&&e){var u=I(a).hoistableScripts,p=Ys(e),m=u.get(p);m||(m=a.querySelector(Ql(p)),m||(e=St({src:e,async:!0},t),(t=wr.get(p))&&Lp(e,t),m=a.createElement("script"),X(m),pi(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}},S:function(e,t,a){dc.S(e,t,a);var u=Bh;if(u&&e){var p=I(u).hoistableStyles,m=Lo(e);t=t||"default";var x=p.get(m);if(!x){var E={loading:Yf,preload:null};if(x=u.querySelector(wu(m)))E.loading=Yv|Sr;else{e=St({rel:"stylesheet",href:e,"data-precedence":t},a),(a=wr.get(m))&&qb(e,a);var D=x=u.createElement("link");X(D),pi(D,"link",e),D._p=new Promise(function(U,ce){D.onload=U,D.onerror=ce}),D.addEventListener("load",function(){E.loading|=Yv}),D.addEventListener("error",function(){E.loading|=MT}),E.loading|=Sr,jp(x,t,u)}x={type:"stylesheet",instance:x,count:1,state:E},p.set(m,x)}}},M:function(e,t){dc.M(e,t);var a=Bh;if(a&&e){var u=I(a).hoistableScripts,p=Ys(e),m=u.get(p);m||(m=a.querySelector(Ql(p)),m||(e=St({src:e,async:!0,type:"module"},t),(t=wr.get(p))&&Lp(e,t),m=a.createElement("script"),X(m),pi(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}};var Bh=typeof document>"u"?null:document,Sx=null,Zv=null,Xw=null,wx=null,Zf=Kb,Xv={$$typeof:Ta,Provider:null,Consumer:null,_currentValue:Zf,_currentValue2:Zf,_threadCount:0},RT="%c%s%c ",IT="background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px",DT="",Ex=" ",c3=Function.prototype.bind,zT=!1,NT=null,UT=null,PT=null,_T=null,$T=null,jT=null,LT=null,BT=null,HT=null;NT=function(e,t,a,u){t=l(e,t),t!==null&&(a=n(t.memoizedState,a,0,u),t.memoizedState=a,t.baseState=a,e.memoizedProps=St({},e.memoizedProps),a=ca(e,2),a!==null&&jt(a,e,2))},UT=function(e,t,a){t=l(e,t),t!==null&&(a=d(t.memoizedState,a,0),t.memoizedState=a,t.baseState=a,e.memoizedProps=St({},e.memoizedProps),a=ca(e,2),a!==null&&jt(a,e,2))},PT=function(e,t,a,u){t=l(e,t),t!==null&&(a=r(t.memoizedState,a,u),t.memoizedState=a,t.baseState=a,e.memoizedProps=St({},e.memoizedProps),a=ca(e,2),a!==null&&jt(a,e,2))},_T=function(e,t,a){e.pendingProps=n(e.memoizedProps,t,0,a),e.alternate&&(e.alternate.pendingProps=e.pendingProps),t=ca(e,2),t!==null&&jt(t,e,2)},$T=function(e,t){e.pendingProps=d(e.memoizedProps,t,0),e.alternate&&(e.alternate.pendingProps=e.pendingProps),t=ca(e,2),t!==null&&jt(t,e,2)},jT=function(e,t,a){e.pendingProps=r(e.memoizedProps,t,a),e.alternate&&(e.alternate.pendingProps=e.pendingProps),t=ca(e,2),t!==null&&jt(t,e,2)},LT=function(e){var t=ca(e,2);t!==null&&jt(t,e,2)},BT=function(e){v=e},HT=function(e){h=e};var Cx=!0,Tx=null,Qw=!1,qu=null,Gu=null,Vu=null,Qv=new Map,Kv=new Map,Yu=[],u3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" "),kx=null;if(Xp.prototype.render=Zp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error("Cannot update an unmounted root.");var a=arguments;typeof a[1]=="function"?console.error("does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):Y(a[1])?console.error("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof a[1]<"u"&&console.error("You passed a second argument to root.render(...) but it only accepts one argument."),a=e;var u=t.current,p=Na(u);df(u,p,a,t,null,null)},Xp.prototype.unmount=Zp.prototype.unmount=function(){var e=arguments;if(typeof e[0]=="function"&&console.error("does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."),e=this._internalRoot,e!==null){this._internalRoot=null;var t=e.containerInfo;(cn&(Fa|cs))!==Go&&console.error("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),df(e.current,2,null,e,null,null),Gl(),t[Ws]=null}},Xp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ml();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Yu.length&&t!==0&&t<Yu[a].priority;a++);Yu.splice(a,0,e),a===0&&Zb(e)}},function(){var e=Qb.version;if(e!=="19.1.0")throw Error(`Incompatible React versions: The "react" and "react-dom" packages must have the exact same version. Instead got:
  - react:      `+(e+`
  - react-dom:  19.1.0
Learn more: https://react.dev/warnings/version-mismatch`))}(),typeof Map=="function"&&Map.prototype!=null&&typeof Map.prototype.forEach=="function"&&typeof Set=="function"&&Set.prototype!=null&&typeof Set.prototype.clear=="function"&&typeof Set.prototype.forEach=="function"||console.error("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://react.dev/link/react-polyfills"),on.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error("Unable to find node on an unmounted component."):(e=Object.keys(e).join(","),Error("Argument appears to not be a ReactComponent. Keys: "+e));return e=me(t),e=e!==null?J(e):null,e=e===null?null:e.stateNode,e},!function(){var e={bundleType:1,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.1.0"};return e.overrideHookState=NT,e.overrideHookStateDeletePath=UT,e.overrideHookStateRenamePath=PT,e.overrideProps=_T,e.overridePropsDeletePath=$T,e.overridePropsRenamePath=jT,e.scheduleUpdate=LT,e.setErrorHandler=BT,e.setSuspenseHandler=HT,e.scheduleRefresh=B,e.scheduleRoot=$,e.setRefreshHandler=Z,e.getCurrentFiber=FS,e.getLaneLabelMap=qS,e.injectProfilingHooks=Me,ke(e)}()&&ee&&window.top===window.self&&(-1<navigator.userAgent.indexOf("Chrome")&&navigator.userAgent.indexOf("Edge")===-1||-1<navigator.userAgent.indexOf("Firefox"))){var FT=window.location.protocol;/^(https?|file):$/.test(FT)&&console.info("%cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools"+(FT==="file:"?`
You might need to use a local HTTP server (instead of file://): https://react.dev/link/react-devtools-faq`:""),"font-weight:bold")}Zh.createRoot=function(e,t){if(!Y(e))throw Error("Target container is not a DOM element.");Qp(e);var a=!1,u="",p=t0,m=up,x=dp,E=null;return t!=null&&(t.hydrate?console.warn("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof t=="object"&&t!==null&&t.$$typeof===Jr&&console.error(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onUncaughtError!==void 0&&(p=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(E=t.unstable_transitionCallbacks)),t=Yb(e,1,!1,null,null,a,u,p,m,x,E,null),e[Ws]=t.current,rf(e),new Zp(t)},Zh.hydrateRoot=function(e,t,a){if(!Y(e))throw Error("Target container is not a DOM element.");Qp(e),t===void 0&&console.error("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var u=!1,p="",m=t0,x=up,E=dp,D=null,U=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(U=a.formState)),t=Yb(e,1,!0,t,a??null,u,p,m,x,E,D,U),t.context=hn(null),a=t.current,u=Na(a),u=Pn(u),p=Co(u),p.callback=null,To(a,p,u),a=u,t.current.lanes=a,Be(t,a),ao(t),e[Ws]=t.current,rf(e),new Xp(t)},Zh.version="19.1.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}(),Zh}var wE;function Fk(){if(wE)return oy.exports;wE=1;var f={};function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(f.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}}return f.NODE_ENV==="production"?(l(),oy.exports=Bk()):oy.exports=Hk(),oy.exports}var qx=Fk();const mo=us({__proto__:null,default:Ww(qx)},[qx]);nt("ShadowDomUtils");const qk=f=>{if(!f){R("[applyDarkMode] Shadow root is not available");return}f.host&&(f.host.classList.remove("light"),f.host.classList.add("dark"));const l=f.querySelector("#theme-variables");if(l)l.textContent=EE();else{const n=document.createElement("style");n.id="theme-variables",n.textContent=EE(),f.appendChild(n)}R("[applyDarkMode] Dark mode applied to Shadow DOM")},Gk=f=>{if(!f){R("[applyLightMode] Shadow root is not available");return}f.host&&(f.host.classList.remove("dark"),f.host.classList.add("light"));const l=f.querySelector("#theme-variables");if(l)l.textContent=CE();else{const n=document.createElement("style");n.id="theme-variables",n.textContent=CE(),f.appendChild(n)}R("[applyLightMode] Light mode applied to Shadow DOM")};function EE(){return`
    :host {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #293548;
      --text-primary: #f8fafc;
      --text-secondary: #94a3b8;
      --text-tertiary: #cbd5e1;
      --border-primary: #334155;
      --border-secondary: #475569;
      --hover-bg: #334155;
      --hover-bg-light: #3f4f6e;
      --shadow-color: rgba(0, 0, 0, 0.3);
    }
    
    /* Force common dark mode styles */
    :host(.dark) .bg-white, :host(.dark) [class*="bg-white"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-50, :host(.dark) [class*="bg-slate-50"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-100, :host(.dark) [class*="bg-slate-100"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-900, :host(.dark) [class*="bg-slate-900"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-800, :host(.dark) [class*="bg-slate-800"] {
      background-color: var(--bg-secondary) !important;
    }
    
    :host(.dark) .text-slate-900, :host(.dark) [class*="text-slate-900"] {
      color: var(--text-primary) !important;
    }
    
    :host(.dark) .text-slate-700, :host(.dark) [class*="text-slate-700"],
    :host(.dark) .text-slate-600, :host(.dark) [class*="text-slate-600"] {
      color: var(--text-tertiary) !important;
    }
    
    :host(.dark) .text-slate-500, :host(.dark) [class*="text-slate-500"],
    :host(.dark) .text-slate-400, :host(.dark) [class*="text-slate-400"] {
      color: var(--text-secondary) !important;
    }

    :host(.dark) .text-slate-300, :host(.dark) [class*="text-slate-300"],
    :host(.dark) .text-slate-200, :host(.dark) [class*="text-slate-200"],
    :host(.dark) .text-slate-100, :host(.dark) [class*="text-slate-100"] {
      color: var(--text-primary) !important;
    }
    
    :host(.dark) .border-slate-200, :host(.dark) [class*="border-slate-200"] {
      border-color: var(--border-primary) !important;
    }
    
    :host(.dark) .border-slate-300, :host(.dark) [class*="border-slate-300"] {
      border-color: var(--border-secondary) !important;
    }
    
    :host(.dark) .hover\\:bg-slate-100:hover, :host(.dark) .hover\\:bg-slate-200:hover {
      background-color: var(--hover-bg) !important;
    }
    
    /* Fix input area styles in dark mode */
    :host(.dark) textarea, :host(.dark) input[type="text"] {
      background-color: var(--bg-secondary) !important;
      color: var(--text-primary) !important;
      border-color: var(--border-primary) !important;
    }
    
    :host(.dark) .input-area {
      background-color: var(--bg-secondary) !important;
      border-color: var(--border-primary) !important;
    }
    
  `}function CE(){return`
    :host {
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-tertiary: #f1f5f9;
      --text-primary: #0f172a;
      --text-secondary: #334155;
      --text-tertiary: #64748b;
      --border-primary: #e2e8f0;
      --border-secondary: #cbd5e1;
      --hover-bg: #e2e8f0;
      --shadow-color: rgba(0, 0, 0, 0.1);
    }
    
    /* Force common light mode styles */
    :host(.light) .bg-white, :host(.light) [class*="bg-white"] {
      background-color: var(--bg-primary) !important;
    }

    :host(.light) .bg-card, :host(.light) [class*="bg-card"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.light) .bg-slate-50, :host(.light) [class*="bg-slate-50"] {
      background-color: var(--bg-secondary) !important;
    }
    
    :host(.light) .bg-slate-100, :host(.light) [class*="bg-slate-100"] {
      background-color: var(--bg-tertiary) !important;
    }

    
    :host(.light) .text-slate-900, :host(.light) [class*="text-slate-900"] {
      color: var(--text-primary) !important;
    }

    :host(.light) .text-slate-800, :host(.light) [class*="text-slate-800"] {
      color: var(--text-primary) !important;
    }
    
    :host(.light) .text-slate-700, :host(.light) [class*="text-slate-700"],
    :host(.light) .text-slate-600, :host(.light) [class*="text-slate-600"] {
      color: var(--text-secondary) !important;
    }
    
    :host(.light) .text-slate-500, :host(.light) [class*="text-slate-500"],
    :host(.light) .text-slate-400, :host(.light) [class*="text-slate-400"] {
      color: var(--text-tertiary) !important;
    }
    
    :host(.light) .border-slate-200, :host(.light) [class*="border-slate-200"] {
      border-color: var(--border-primary) !important;
    }
    
    :host(.light) .border-slate-300, :host(.light) [class*="border-slate-300"] {
      border-color: var(--border-secondary) !important;
    }
    
    :host(.light) .hover\\:bg-slate-100:hover, :host(.light) .hover\\:bg-slate-200:hover {
      background-color: var(--hover-bg) !important;
    }
    
    /* Fix input area styles in light mode */
    :host(.light) textarea, :host(.light) input[type="text"] {
      background-color: var(--bg-primary) !important;
      color: var(--text-primary) !important;
      border-color: var(--border-secondary) !important;
    }
    
    :host(.light) .input-area {
      background-color: var(--bg-primary) !important;
      border-color: var(--border-secondary) !important;
    }
  `}const Vk=async f=>{if(!f)throw new Error("Shadow root is not available for style injection");try{const l=chrome.runtime.getURL("content/index.css");R(`Fetching Tailwind CSS from: ${l}`);const n=await fetch(l);if(!n.ok)throw new Error(`Failed to fetch CSS: ${n.statusText}`);const r=await n.text();try{const d=new CSSStyleSheet;await d.replace(r),f.adoptedStyleSheets=[d],R("Successfully injected Tailwind CSS using Constructable Stylesheets")}catch(d){R(`Constructable Stylesheets not supported, falling back to style element: ${d instanceof Error?d.message:String(d)}`);const h=document.createElement("style");h.textContent=r,f.appendChild(h),R("Successfully injected Tailwind CSS using style element fallback")}const s=document.createElement("style");s.textContent=`
      :host {
        display: block;
      }
      *, :host {
        box-sizing: border-box;
      }
    `,f.appendChild(s),R("Tailwind CSS injection completed with browser compatibility handling")}catch(l){throw R(`Error injecting Tailwind CSS: ${l instanceof Error?l.message:String(l)}`),l}};class Yk{constructor(l){z(this,"container",null);z(this,"root",null);z(this,"_isVisible",!1);z(this,"siteType");z(this,"shadowHost",null);z(this,"shadowRoot",null);z(this,"_isPushContentMode",!1);z(this,"_initializationPromise",null);z(this,"_isInitialized",!1);z(this,"handleToolsUpdated",()=>{this._isVisible&&R("[BaseSidebarManager] Tools updated - letting React components handle updates")});z(this,"refreshInterval",null);this.siteType=l}getShadowHost(){return this.shadowHost}applyThemeClass(l){if(!this.shadowHost||!this.shadowRoot)return R("[BaseSidebarManager] Cannot apply theme: Shadow host or root not found."),!1;const n=window.matchMedia("(prefers-color-scheme: dark)").matches;return this.shadowHost.classList.remove("light","dark"),l==="dark"||l==="system"&&n?(this.shadowHost.classList.add("dark"),qk(this.shadowRoot),R(`[BaseSidebarManager] Applied dark theme (Selected: ${l}, System Prefers Dark: ${n})`)):(this.shadowHost.classList.add("light"),Gk(this.shadowRoot),R(`[BaseSidebarManager] Applied light theme (Selected: ${l}, System Prefers Dark: ${n})`)),R(`[BaseSidebarManager] Applied ${l} theme (CSS-only, no re-render)`),!0}setPushContentMode(l,n,r){if(this._isPushContentMode=l,l){const s=r?56:n||320;document.documentElement.style.setProperty("--sidebar-width-mcp",`${s}px`),document.documentElement.style.setProperty("position","relative","important"),document.documentElement.style.setProperty("margin-right",`${s}px`,"important"),document.documentElement.style.setProperty("width",`calc(100% - ${s}px)`,"important"),document.documentElement.style.setProperty("min-height","100vh","important"),document.documentElement.style.setProperty("box-sizing","border-box","important"),document.body.style.setProperty("margin-right","0","important"),document.body.style.setProperty("padding-right","0","important"),document.body.style.setProperty("box-sizing","border-box","important"),document.body.style.setProperty("max-width","none","important"),document.documentElement.classList.add("push-mode-enabled"),r?document.documentElement.classList.add("sidebar-collapsed"):document.documentElement.classList.remove("sidebar-collapsed"),R(`[BaseSidebarManager] Push mode enabled with width: ${s}px`),R(`[BaseSidebarManager] Applied styles - margin-right: ${document.documentElement.style.marginRight}, width: ${document.documentElement.style.width}`),R(`[BaseSidebarManager] HTML classes: ${document.documentElement.className}`);const d=window.getComputedStyle(document.documentElement);R(`[BaseSidebarManager] Computed styles - margin-right: ${d.marginRight}, width: ${d.width}`);const h=window.getComputedStyle(document.body);R(`[BaseSidebarManager] Body computed styles - margin-right: ${h.marginRight}, max-width: ${h.maxWidth}`),(!this._isVisible||this.shadowHost&&this.shadowHost.style.display!=="block")&&(R("[BaseSidebarManager] Push mode enabled but sidebar not visible, showing sidebar"),this.forceVisibility())}else document.documentElement.style.removeProperty("position"),document.documentElement.style.removeProperty("margin-right"),document.documentElement.style.removeProperty("width"),document.documentElement.style.removeProperty("min-height"),document.documentElement.style.removeProperty("box-sizing"),document.documentElement.style.removeProperty("transform"),document.body.style.removeProperty("margin-right"),document.body.style.removeProperty("padding-right"),document.body.style.removeProperty("box-sizing"),document.body.style.removeProperty("max-width"),document.documentElement.classList.remove("push-mode-enabled","sidebar-collapsed","push-mode-transform");this.ensurePushModeStyles(),R(`BaseSidebarManager: Push mode ${l?"enabled":"disabled"}`)}forceVisibility(){if(!this._isInitialized){R("[BaseSidebarManager] Cannot force visibility: not initialized");return}if(!this.shadowHost){R("[BaseSidebarManager] Cannot force visibility: no shadow host");return}this._isVisible=!0,this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized"),this.shadowHost.classList.remove("showing"),this.shadowHost.offsetHeight,this.render(),R("[BaseSidebarManager] Forced sidebar visibility")}updatePushModeStyles(l){this._isPushContentMode&&(document.documentElement.style.setProperty("--sidebar-width-mcp",`${l}px`),document.documentElement.style.setProperty("margin-right",`${l}px`,"important"),document.documentElement.style.setProperty("width",`calc(100% - ${l}px)`,"important"),R(`[BaseSidebarManager] Updated push mode styles to width: ${l}px`))}removePushModeStyles(){document.documentElement.style.removeProperty("position"),document.documentElement.style.removeProperty("margin-right"),document.documentElement.style.removeProperty("width"),document.documentElement.style.removeProperty("min-height"),document.documentElement.classList.remove("push-mode-enabled","sidebar-collapsed")}ensurePushModeStyles(){if(!document.getElementById("mcp-sidebar-push-styles")){const l=document.createElement("style");l.id="mcp-sidebar-push-styles",l.textContent=`
        /* High-priority push mode styles with !important to override website styles */
        html.push-mode-enabled {
          overflow-x: hidden !important;
          transition: margin-right 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important, 
                      width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important,
                      transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
          box-sizing: border-box !important;
        }
        
        /* Force position and dimensions for push mode */
        html.push-mode-enabled {
          position: relative !important;
        }
        
        /* Alternative transform-based push mode for websites that override margin/width */
        html.push-mode-enabled.push-mode-transform {
          transform: translateX(calc(var(--sidebar-width-mcp, 320px) * -1)) !important;
          width: 100vw !important;
          margin-right: 0 !important;
        }
        
        /* Ensure body also respects the new layout */
        html.push-mode-enabled body {
          margin-right: 0 !important;
          padding-right: 0 !important;
          overflow-x: hidden !important;
          box-sizing: border-box !important;
        }
        
        /* Ensure fixed elements don't overlap with sidebar */
        html.push-mode-enabled .sidebar {
          right: 0;
        }

        /* Add smooth resize styles */
        .sidebar {
          transition: width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        .sidebar.resizing {
          transition: none !important;
        }
        
        /* Enhanced shadow host animations */
        #mcp-sidebar-shadow-host {
          opacity: 0;
          transform: translateX(30px) scale(0.95);
          transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                      transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        #mcp-sidebar-shadow-host.initialized {
          opacity: 1;
          transform: translateX(0) scale(1);
        }
        
        #mcp-sidebar-shadow-host.showing {
          transition-duration: 0s;
        }
        
        #mcp-sidebar-shadow-host.hiding {
          opacity: 0;
          transform: translateX(20px) scale(0.98);
          transition: opacity 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53),
                      transform 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53);
        }
        
        /* Add subtle backdrop effect */
        body:has(#mcp-sidebar-shadow-host.initialized) {
          transition: filter 0.3s ease;
        }
        
        /* Smooth page content adjustments */
        body {
          transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
      `,document.head.appendChild(l)}}getPushContentMode(){return this._isPushContentMode}getIsVisible(){return this._isVisible}async initialize(){return this._isInitialized?(R("Sidebar manager already initialized."),Promise.resolve()):this._initializationPromise?(R("Sidebar initialization already in progress, waiting..."),this._initializationPromise):(R("Starting sidebar manager initialization..."),this._initializationPromise=new Promise(async(l,n)=>{try{document.body||(R("[BaseSidebarManager] Document body not ready, waiting briefly..."),await new Promise(r=>{const s=()=>{document.body?r():document.readyState==="complete"||document.readyState==="interactive"?(document.body||(document.body=document.createElement("body"),R("[BaseSidebarManager] Created minimal document body")),r()):setTimeout(s,10)};s()})),this.shadowHost=document.createElement("div"),this.shadowHost.id="mcp-sidebar-shadow-host",this.shadowHost.style.position="fixed",this.shadowHost.style.top="0",this.shadowHost.style.right="0",this.shadowHost.style.zIndex="9999",this.shadowHost.style.height="100vh",this.shadowHost.style.pointerEvents="none",this.shadowHost.style.display="none",this.shadowHost.setAttribute("data-shadow-host","true"),R("[BaseSidebarManager] Shadow host created and set to display: none."),document.body.appendChild(this.shadowHost),this.shadowRoot=this.shadowHost.attachShadow({mode:"open"}),this.container=document.createElement("div"),this.container.id="sidebar-container",this.container.style.pointerEvents="auto",this.container.style.height="100%",this.container.style.width="100%",this.shadowRoot.appendChild(this.container);try{await Vk(this.shadowRoot),R("[BaseSidebarManager] CSS injection successful")}catch(r){R(`[BaseSidebarManager] CSS injection failed but continuing: ${r instanceof Error?r.message:String(r)}`)}this.root=qx.createRoot(this.container),R("Sidebar manager initialized with Shadow DOM.");try{this.applyThemeClass("system")}catch(r){R(`[BaseSidebarManager] Theme application failed: ${r instanceof Error?r.message:String(r)}`)}this._isInitialized=!0,l()}catch(r){console.error("Error initializing Sidebar manager with Shadow DOM:",r),R(`Error initializing Sidebar manager with Shadow DOM: ${r instanceof Error?r.message:String(r)}`),this._isInitialized=!1,this.destroy(),n(r)}finally{this._initializationPromise=null}}),this._initializationPromise)}async show(){this._isVisible=!0,R("[BaseSidebarManager] Show requested, setting _isVisible = true");try{await this.initialize()}catch{R("Initialization failed during show(), cannot proceed."),this._isVisible=!1;return}if(!this.shadowHost||!this.root){R("Sidebar cannot be shown: Still not initialized or host/root missing after attempt."),this._isVisible=!1;return}this.shadowHost&&(this.shadowHost.style.display="block",this.shadowHost.style.opacity="0",this.shadowHost.style.transform="translateX(30px) scale(0.95)",this.shadowHost.classList.add("showing"),this.shadowHost.offsetHeight,requestAnimationFrame(()=>{this.shadowHost&&(this.shadowHost.style.transition="opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1)",this.shadowHost.style.opacity="1",this.shadowHost.style.transform="translateX(0) scale(1)",setTimeout(()=>{this.shadowHost&&(this.shadowHost.classList.add("initialized"),this.shadowHost.classList.remove("showing"))},100))}),setTimeout(()=>{this.render(),R("Sidebar shown with enhanced animations")},50))}hide(){R("[BaseSidebarManager] Hide method invoked."),this.shadowHost&&(this.shadowHost.classList.add("hiding"),this.shadowHost.classList.remove("initialized","showing"),this.shadowHost.style.transition="opacity 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53), transform 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53)",this.shadowHost.style.opacity="0",this.shadowHost.style.transform="translateX(20px) scale(0.98)",setTimeout(()=>{this.shadowHost&&(this.shadowHost.style.display="none",this.shadowHost.classList.remove("hiding"),this.shadowHost.style.transform="",R("[BaseSidebarManager] Sidebar hidden with smooth animation"))},300));const l=this._isVisible;this._isVisible=!1,this.setPushContentMode(!1),R(l?"[BaseSidebarManager] Sidebar hidden (was previously visible).":"[BaseSidebarManager] Sidebar state set to hidden (was already hidden or not shown yet).")}toggle(){this._isVisible?this.hide():this.show()}render(){if(!this.root||!this.container){R("Cannot render: Root or container not available.");return}try{const l=this.createSidebarContent();l?(R("Rendering sidebar content into container."),this.root.render(l)):(R("createSidebarContent returned null or undefined."),this.root.render(null))}catch(l){console.error("Error during React render:",l),R(`Error during React render: ${l instanceof Error?l.message:String(l)}`),this.root.render(Zu.createElement("div",{style:{color:"red",padding:"10px"}},"Error rendering sidebar content."))}}destroy(){if(window.removeEventListener("mcpToolsUpdated",this.handleToolsUpdated),this.removePushModeStyles(),this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null),this.root){try{this.root.unmount()}catch(l){console.error("Error unmounting React root:",l)}this.root=null}if(this.shadowHost&&this.shadowHost.parentNode)try{this.shadowHost.parentNode.removeChild(this.shadowHost)}catch(l){console.error("Error removing shadow host from DOM:",l)}this.shadowHost=null,this.shadowRoot=null,this.container=null,this._isVisible=!1,this._isInitialized=!1,R("Sidebar manager destroyed")}}const TE=f=>Symbol.iterator in f,kE=f=>"entries"in f,ME=(f,l)=>{const n=f instanceof Map?f:new Map(f.entries()),r=l instanceof Map?l:new Map(l.entries());if(n.size!==r.size)return!1;for(const[s,d]of n)if(!Object.is(d,r.get(s)))return!1;return!0},Zk=(f,l)=>{const n=f[Symbol.iterator](),r=l[Symbol.iterator]();let s=n.next(),d=r.next();for(;!s.done&&!d.done;){if(!Object.is(s.value,d.value))return!1;s=n.next(),d=r.next()}return!!s.done&&!!d.done};function Xk(f,l){return Object.is(f,l)?!0:typeof f!="object"||f===null||typeof l!="object"||l===null||Object.getPrototypeOf(f)!==Object.getPrototypeOf(l)?!1:TE(f)&&TE(l)?kE(f)&&kE(l)?ME(f,l):Zk(f,l):ME({entries:()=>Object.entries(f)},{entries:()=>Object.entries(l)})}function gs(f){const l=Zu.useRef(void 0);return n=>{const r=f(n);return Xk(l.current,r)?l.current:l.current=r}}const Gx=()=>Gi(gs(f=>({status:f.status,isConnected:f.status==="connected",isConnecting:f.status==="connecting",isReconnecting:f.isReconnecting,error:f.error,serverConfig:f.serverConfig,lastConnectedAt:f.lastConnectedAt,connectionAttempts:f.connectionAttempts,maxRetryAttempts:f.serverConfig.retryAttempts}))),AE=()=>Gi(gs(f=>({config:f.serverConfig,setConfig:f.setServerConfig}))),OE=()=>go(gs(f=>({tools:f.availableTools,setAvailableTools:f.setAvailableTools}))),Qk=()=>go(gs(f=>({executions:f.toolExecutions,isExecuting:f.isExecuting,lastExecutionId:f.lastExecutionId,startExecution:f.startToolExecution,updateExecution:f.updateToolExecution,completeExecution:f.completeToolExecution,getExecution:f.getToolExecution}))),Vx=()=>go(gs(f=>({enabledTools:f.enabledTools,isLoadingEnablement:f.isLoadingEnablement,enableTool:f.enableTool,disableTool:f.disableTool,enableAllTools:f.enableAllTools,disableAllTools:f.disableAllTools,isToolEnabled:f.isToolEnabled,loadToolEnablementState:f.loadToolEnablementState}))),Kk=()=>ia(gs(f=>({theme:f.theme,setTheme:f.setTheme}))),Jk=()=>ia(gs(f=>({isVisible:f.sidebar.isVisible,isMinimized:f.sidebar.isMinimized,position:f.sidebar.position,width:f.sidebar.width,toggleSidebar:f.toggleSidebar,toggleMinimize:f.toggleMinimize,resizeSidebar:f.resizeSidebar,setSidebarVisibility:f.setSidebarVisibility}))),ly=()=>ia(gs(f=>({preferences:f.preferences,updatePreferences:f.updatePreferences}))),Wk=()=>ia(gs(f=>({mcpEnabled:f.mcpEnabled,setMCPEnabled:f.setMCPEnabled}))),eM=()=>po(gs(f=>{const l=f.getActiveAdapter();return{activeAdapterName:f.activeAdapterName,activeAdapterRegistration:l,plugin:l==null?void 0:l.plugin,status:l==null?void 0:l.status,currentCapabilities:f.currentCapabilities,error:f.lastAdapterError}})),tM=nt("UseEventBus");function nM(){return K.useCallback((f,l)=>{try{ue.emit(f,l)}catch(n){tM.error(`Error emitting event ${String(f)}:`,n)}},[])}const cy=nt("UseAdapter");function RE(){const{activeAdapterName:f,plugin:l,status:n,currentCapabilities:r,error:s}=eM(),d=nM(),h=K.useCallback(async M=>{if(!l||!l.insertText)return cy.warn("[useCurrentAdapter] No active plugin for insertText"),!1;try{return d("tool:execution-started",{toolName:"insertText",callId:`adapter-${Date.now()}`}),await l.insertText(M)}catch(N){const k=N instanceof Error?N.message:"Unknown error";return d("tool:execution-failed",{toolName:"insertText",error:k,callId:`adapter-${Date.now()}`}),!1}},[l,d]),v=K.useCallback(async()=>{if(!l||!l.submitForm)return cy.warn("[useCurrentAdapter] No active plugin for submitForm"),!1;try{return d("tool:execution-started",{toolName:"submitForm",callId:`adapter-${Date.now()}`}),await l.submitForm()}catch(M){const N=M instanceof Error?M.message:"Unknown error";return d("tool:execution-failed",{toolName:"submitForm",error:N,callId:`adapter-${Date.now()}`}),!1}},[l,d]),S=K.useCallback(async M=>{if(!l)return cy.warn("[useCurrentAdapter] No active plugin for attachFile"),!1;if(!l.capabilities.includes("file-attachment"))return cy.warn("[useCurrentAdapter] Active plugin does not support file attachment"),!1;try{return d("tool:execution-started",{toolName:"attachFile",callId:`adapter-${Date.now()}`}),await l.attachFile(M)}catch(N){const k=N instanceof Error?N.message:"Unknown error";return d("tool:execution-failed",{toolName:"attachFile",error:k,callId:`adapter-${Date.now()}`}),!1}},[l,d]),w=K.useCallback(M=>r.includes(M),[r]);return{activeAdapterName:f,plugin:l,status:n,error:s,capabilities:r,insertText:h,submitForm:v,attachFile:S,hasCapability:w,isReady:!!l&&n==="active"&&!s}}nt("useSidebarPlugin");const IE=()=>{const f=Gx(),{tools:l}=OE(),{config:n,setConfig:r}=AE(),{isToolEnabled:s,isLoadingEnablement:d}=Vx(),h=go(),[v,S]=K.useState(!1),[w,M]=K.useState(null),[N,k]=K.useState(0);K.useEffect(()=>{(async()=>{try{if(!Cr.isReady())throw new Error("MCP Client not properly initialized");S(!0),M(null),R("[useMcpCommunication] Communication layer initialized successfully")}catch(he){const ne=he instanceof Error?he.message:String(he);M(ne),R(`[useMcpCommunication] Initialization failed: ${ne}`)}})()},[]);const A=K.useCallback(async(J,he)=>{if(!v)throw new Error("Communication layer not initialized");if(!f.isConnected)throw new Error("Not connected to MCP server");if(!l.find(Ce=>Ce.name===J))throw new Error(`Tool '${J}' not found in available tools. Please refresh the tool list.`);try{k(Date.now()),R(`[useMcpCommunication] Calling tool: ${J}`);const Ce=await Cr.callTool(J,he);return R(`[useMcpCommunication] Tool call successful: ${J}`),Ce}catch(Ce){const de=Ce instanceof Error?Ce.message:String(Ce);throw R(`[useMcpCommunication] Tool call failed: ${J} - ${de}`),new Error(`Tool execution failed: ${de}`)}},[v,f.isConnected,l]),$=K.useCallback(async(J=!1)=>{if(!v)throw new Error("Communication layer not initialized");try{k(Date.now()),R(`[useMcpCommunication] Refreshing tools (force: ${J})`);const he=await Cr.getAvailableTools(J),ne=he.filter(Ce=>Ce&&typeof Ce.name=="string"&&Ce.name.length>0);return ne.length!==he.length&&R(`[useMcpCommunication] Filtered out ${he.length-ne.length} invalid tools`),h.setAvailableTools(ne),R(`[useMcpCommunication] Successfully refreshed ${ne.length} tools`),ne}catch(he){const ne=he instanceof Error?he.message:String(he);throw R(`[useMcpCommunication] Tool refresh failed: ${ne}`),new Error(`Failed to refresh tools: ${ne}`)}},[v]),B=K.useCallback(async()=>{if(!v)throw new Error("Communication layer not initialized");try{k(Date.now()),R("[useMcpCommunication] Force reconnect requested");const J=await Cr.forceReconnect();if(J){R("[useMcpCommunication] Reconnection successful");try{await $(!0)}catch(he){R(`[useMcpCommunication] Warning: Failed to refresh tools after reconnect: ${he}`)}}else R("[useMcpCommunication] Reconnection failed");return J}catch(J){const he=J instanceof Error?J.message:String(J);throw R(`[useMcpCommunication] Force reconnect error: ${he}`),new Error(`Reconnection failed: ${he}`)}},[v,$]),Z=K.useCallback(async()=>{if(!v)throw new Error("Communication layer not initialized");try{k(Date.now()),R("[useMcpCommunication] Getting server config");const J=await Cr.getServerConfig();return r(J),R("[useMcpCommunication] Server config retrieved successfully"),J}catch(J){const he=J instanceof Error?J.message:String(J);throw R(`[useMcpCommunication] Failed to get server config: ${he}`),new Error(`Failed to get server configuration: ${he}`)}},[v,r]),Y=K.useCallback(async J=>{if(!v)throw new Error("Communication layer not initialized");if(J.uri&&typeof J.uri!="string")throw new Error("Server URI must be a string");if(J.connectionType&&!["sse","websocket","streamable-http"].includes(J.connectionType))throw new Error('Connection type must be either "sse", "websocket", or "streamable-http"');if(J.timeout&&(typeof J.timeout!="number"||J.timeout<=0))throw new Error("Timeout must be a positive number");try{k(Date.now()),R(`[useMcpCommunication] Updating server config: ${JSON.stringify(J)}`);const he=await Cr.updateServerConfig(J);return he?(r({...n,...J}),R("[useMcpCommunication] Server config updated successfully")):R("[useMcpCommunication] Server config update failed"),he}catch(he){const ne=he instanceof Error?he.message:String(he);throw R(`[useMcpCommunication] Failed to update server config: ${ne}`),new Error(`Failed to update server configuration: ${ne}`)}},[v,n,r]),ie=K.useCallback(async J=>{try{let he=J.name,ne=J.args||{};if(J.toolName&&J.rawArguments!==void 0){he=J.toolName;try{ne=JSON.parse(J.rawArguments)}catch(de){return`Error: Invalid JSON arguments: ${de instanceof Error?de.message:String(de)}`}}if(!he||typeof he!="string")return"Error: Tool name is required and must be a string";const Ce=await A(he,ne);return typeof Ce=="string"?Ce:JSON.stringify(Ce,null,2)}catch(he){return`Error: ${he instanceof Error?he.message:String(he)}`}},[A]),pe=K.useMemo(()=>{const J=l.map(ne=>({name:ne.name,description:ne.description||"",schema:typeof ne.schema=="string"?ne.schema:JSON.stringify(ne.input_schema||{}),input_schema:ne.input_schema})),he=J.filter(ne=>s(ne.name));return he.length>0&&R(`[useMcpCommunication] Tools normalized and filtered: ${he.length}/${J.length} enabled`),he},[l,s]);K.useEffect(()=>{const J=pe.length;J>0&&R(`[useMcpCommunication] Available tool names: ${pe.map(he=>he.name).slice(0,3).join(", ")}${J>3?`...and ${J-3} more`:""}`)},[pe.length]),K.useEffect(()=>{if(pe.length>0){R("[useMcpCommunication] Schema status for available tools:");const J=pe.filter(he=>he.input_schema&&Object.keys(he.input_schema).length>0||he.schema&&he.schema!=="{}");R(`  ${J.length}/${pe.length} tools have valid schemas`)}},[pe.length]);const oe=f.status,me={isHealthy:f.isConnected&&!f.error,lastConnectedAt:f.lastConnectedAt,connectionAttempts:f.connectionAttempts,maxRetryAttempts:f.maxRetryAttempts,lastOperationTime:N};return{connectionStatus:f.status,isConnected:f.isConnected,isConnecting:f.status==="connecting",isReconnecting:f.isReconnecting,availableTools:pe,lastConnectionError:f.error||"",serverConfig:n,connectionHealth:me,isInitialized:v,initializationError:w,isLoadingToolEnablement:d,callTool:A,refreshTools:$,forceReconnect:B,forceConnectionStatusCheck:K.useCallback(async()=>{if(!v)throw new Error("Communication layer not initialized");return await Cr.forceConnectionStatusCheck()},[v]),getServerConfig:Z,updateServerConfig:Y,serverStatus:oe,sendMessage:ie,getTool:K.useCallback(J=>pe.find(he=>he.name===J)||null,[pe]),hasToolAvailable:K.useCallback(J=>pe.some(he=>he.name===J),[pe]),getConnectionSummary:K.useCallback(()=>({status:f.status,isConnected:f.isConnected,isReconnecting:f.isReconnecting,error:f.error,lastConnectedAt:f.lastConnectedAt,connectionAttempts:f.connectionAttempts,toolCount:pe.length,isInitialized:v,initializationError:w,lastOperationTime:N}),[f,pe,v,w,N])}};function DE(f){var l,n,r="";if(typeof f=="string"||typeof f=="number")r+=f;else if(typeof f=="object")if(Array.isArray(f)){var s=f.length;for(l=0;l<s;l++)f[l]&&(n=DE(f[l]))&&(r&&(r+=" "),r+=n)}else for(n in f)f[n]&&(r&&(r+=" "),r+=n);return r}function zE(){for(var f,l,n=0,r="",s=arguments.length;n<s;n++)(f=arguments[n])&&(l=DE(f))&&(r&&(r+=" "),r+=l);return r}const Yx="-",iM=f=>{const l=oM(f),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=f;return{getClassGroupId:h=>{const v=h.split(Yx);return v[0]===""&&v.length!==1&&v.shift(),NE(v,l)||aM(h)},getConflictingClassGroupIds:(h,v)=>{const S=n[h]||[];return v&&r[h]?[...S,...r[h]]:S}}},NE=(f,l)=>{var h;if(f.length===0)return l.classGroupId;const n=f[0],r=l.nextPart.get(n),s=r?NE(f.slice(1),r):void 0;if(s)return s;if(l.validators.length===0)return;const d=f.join(Yx);return(h=l.validators.find(({validator:v})=>v(d)))==null?void 0:h.classGroupId},UE=/^\[(.+)\]$/,aM=f=>{if(UE.test(f)){const l=UE.exec(f)[1],n=l==null?void 0:l.substring(0,l.indexOf(":"));if(n)return"arbitrary.."+n}},oM=f=>{const{theme:l,classGroups:n}=f,r={nextPart:new Map,validators:[]};for(const s in n)Zx(n[s],r,s,l);return r},Zx=(f,l,n,r)=>{f.forEach(s=>{if(typeof s=="string"){const d=s===""?l:PE(l,s);d.classGroupId=n;return}if(typeof s=="function"){if(rM(s)){Zx(s(r),l,n,r);return}l.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([d,h])=>{Zx(h,PE(l,d),n,r)})})},PE=(f,l)=>{let n=f;return l.split(Yx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},rM=f=>f.isThemeGetter,sM=f=>{if(f<1)return{get:()=>{},set:()=>{}};let l=0,n=new Map,r=new Map;const s=(d,h)=>{n.set(d,h),l++,l>f&&(l=0,r=n,n=new Map)};return{get(d){let h=n.get(d);if(h!==void 0)return h;if((h=r.get(d))!==void 0)return s(d,h),h},set(d,h){n.has(d)?n.set(d,h):s(d,h)}}},Xx="!",Qx=":",lM=Qx.length,cM=f=>{const{prefix:l,experimentalParseClassName:n}=f;let r=s=>{const d=[];let h=0,v=0,S=0,w;for(let $=0;$<s.length;$++){let B=s[$];if(h===0&&v===0){if(B===Qx){d.push(s.slice(S,$)),S=$+lM;continue}if(B==="/"){w=$;continue}}B==="["?h++:B==="]"?h--:B==="("?v++:B===")"&&v--}const M=d.length===0?s:s.substring(S),N=uM(M),k=N!==M,A=w&&w>S?w-S:void 0;return{modifiers:d,hasImportantModifier:k,baseClassName:N,maybePostfixModifierPosition:A}};if(l){const s=l+Qx,d=r;r=h=>h.startsWith(s)?d(h.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:h,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=d=>n({className:d,parseClassName:s})}return r},uM=f=>f.endsWith(Xx)?f.substring(0,f.length-1):f.startsWith(Xx)?f.substring(1):f,dM=f=>{const l=Object.fromEntries(f.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let d=[];return r.forEach(h=>{h[0]==="["||l[h]?(s.push(...d.sort(),h),d=[]):d.push(h)}),s.push(...d.sort()),s}},fM=f=>({cache:sM(f.cacheSize),parseClassName:cM(f),sortModifiers:dM(f),...iM(f)}),gM=/\s+/,pM=(f,l)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:d}=l,h=[],v=f.trim().split(gM);let S="";for(let w=v.length-1;w>=0;w-=1){const M=v[w],{isExternal:N,modifiers:k,hasImportantModifier:A,baseClassName:$,maybePostfixModifierPosition:B}=n(M);if(N){S=M+(S.length>0?" "+S:S);continue}let Z=!!B,Y=r(Z?$.substring(0,B):$);if(!Y){if(!Z){S=M+(S.length>0?" "+S:S);continue}if(Y=r($),!Y){S=M+(S.length>0?" "+S:S);continue}Z=!1}const ie=d(k).join(":"),pe=A?ie+Xx:ie,oe=pe+Y;if(h.includes(oe))continue;h.push(oe);const me=s(Y,Z);for(let J=0;J<me.length;++J){const he=me[J];h.push(pe+he)}S=M+(S.length>0?" "+S:S)}return S};function hM(){let f=0,l,n,r="";for(;f<arguments.length;)(l=arguments[f++])&&(n=_E(l))&&(r&&(r+=" "),r+=n);return r}const _E=f=>{if(typeof f=="string")return f;let l,n="";for(let r=0;r<f.length;r++)f[r]&&(l=_E(f[r]))&&(n&&(n+=" "),n+=l);return n};function mM(f,...l){let n,r,s,d=h;function h(S){const w=l.reduce((M,N)=>N(M),f());return n=fM(w),r=n.cache.get,s=n.cache.set,d=v,v(S)}function v(S){const w=r(S);if(w)return w;const M=pM(S,n);return s(S,M),M}return function(){return d(hM.apply(null,arguments))}}const wi=f=>{const l=n=>n[f]||[];return l.isThemeGetter=!0,l},$E=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bM=/^\d+\/\d+$/,vM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,SM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eg=f=>bM.test(f),Ht=f=>!!f&&!Number.isNaN(Number(f)),hc=f=>!!f&&Number.isInteger(Number(f)),Kx=f=>f.endsWith("%")&&Ht(f.slice(0,-1)),ll=f=>vM.test(f),EM=()=>!0,CM=f=>yM.test(f)&&!xM.test(f),LE=()=>!1,TM=f=>SM.test(f),kM=f=>wM.test(f),MM=f=>!We(f)&&!et(f),AM=f=>tg(f,GE,LE),We=f=>$E.test(f),Ku=f=>tg(f,VE,CM),Jx=f=>tg(f,zM,Ht),BE=f=>tg(f,FE,LE),OM=f=>tg(f,qE,kM),uy=f=>tg(f,YE,TM),et=f=>jE.test(f),Xh=f=>ng(f,VE),RM=f=>ng(f,NM),HE=f=>ng(f,FE),IM=f=>ng(f,GE),DM=f=>ng(f,qE),dy=f=>ng(f,YE,!0),tg=(f,l,n)=>{const r=$E.exec(f);return r?r[1]?l(r[1]):n(r[2]):!1},ng=(f,l,n=!1)=>{const r=jE.exec(f);return r?r[1]?l(r[1]):n:!1},FE=f=>f==="position"||f==="percentage",qE=f=>f==="image"||f==="url",GE=f=>f==="length"||f==="size"||f==="bg-size",VE=f=>f==="length",zM=f=>f==="number",NM=f=>f==="family-name",YE=f=>f==="shadow",UM=mM(()=>{const f=wi("color"),l=wi("font"),n=wi("text"),r=wi("font-weight"),s=wi("tracking"),d=wi("leading"),h=wi("breakpoint"),v=wi("container"),S=wi("spacing"),w=wi("radius"),M=wi("shadow"),N=wi("inset-shadow"),k=wi("text-shadow"),A=wi("drop-shadow"),$=wi("blur"),B=wi("perspective"),Z=wi("aspect"),Y=wi("ease"),ie=wi("animate"),pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],me=()=>[...oe(),et,We],J=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto","contain","none"],ne=()=>[et,We,S],Ce=()=>[eg,"full","auto",...ne()],de=()=>[hc,"none","subgrid",et,We],Ue=()=>["auto",{span:["full",hc,et,We]},hc,et,We],De=()=>[hc,"auto",et,We],Ze=()=>["auto","min","max","fr",et,We],Je=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ct=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...ne()],q=()=>[eg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ne()],W=()=>[f,et,We],Re=()=>[...oe(),HE,BE,{position:[et,We]}],_=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",IM,AM,{size:[et,We]}],ge=()=>[Kx,Xh,Ku],re=()=>["","none","full",w,et,We],Oe=()=>["",Ht,Xh,Ku],He=()=>["solid","dashed","dotted","double"],ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Ht,Kx,HE,BE],Me=()=>["","none",$,et,We],_e=()=>["none",Ht,et,We],at=()=>["none",Ht,et,We],Xe=()=>[Ht,et,We],ft=()=>[eg,"full",...ne()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ll],breakpoint:[ll],color:[EM],container:[ll],"drop-shadow":[ll],ease:["in","out","in-out"],font:[MM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ll],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ll],shadow:[ll],spacing:["px",Ht],text:[ll],"text-shadow":[ll],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eg,We,et,Z]}],container:["container"],columns:[{columns:[Ht,We,et,v]}],"break-after":[{"break-after":pe()}],"break-before":[{"break-before":pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:me()}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ce()}],"inset-x":[{"inset-x":Ce()}],"inset-y":[{"inset-y":Ce()}],start:[{start:Ce()}],end:[{end:Ce()}],top:[{top:Ce()}],right:[{right:Ce()}],bottom:[{bottom:Ce()}],left:[{left:Ce()}],visibility:["visible","invisible","collapse"],z:[{z:[hc,"auto",et,We]}],basis:[{basis:[eg,"full","auto",v,...ne()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ht,eg,"auto","initial","none",We]}],grow:[{grow:["",Ht,et,We]}],shrink:[{shrink:["",Ht,et,We]}],order:[{order:[hc,"first","last","none",et,We]}],"grid-cols":[{"grid-cols":de()}],"col-start-end":[{col:Ue()}],"col-start":[{"col-start":De()}],"col-end":[{"col-end":De()}],"grid-rows":[{"grid-rows":de()}],"row-start-end":[{row:Ue()}],"row-start":[{"row-start":De()}],"row-end":[{"row-end":De()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ze()}],"auto-rows":[{"auto-rows":Ze()}],gap:[{gap:ne()}],"gap-x":[{"gap-x":ne()}],"gap-y":[{"gap-y":ne()}],"justify-content":[{justify:[...Je(),"normal"]}],"justify-items":[{"justify-items":[...ct(),"normal"]}],"justify-self":[{"justify-self":["auto",...ct()]}],"align-content":[{content:["normal",...Je()]}],"align-items":[{items:[...ct(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ct(),{baseline:["","last"]}]}],"place-content":[{"place-content":Je()}],"place-items":[{"place-items":[...ct(),"baseline"]}],"place-self":[{"place-self":["auto",...ct()]}],p:[{p:ne()}],px:[{px:ne()}],py:[{py:ne()}],ps:[{ps:ne()}],pe:[{pe:ne()}],pt:[{pt:ne()}],pr:[{pr:ne()}],pb:[{pb:ne()}],pl:[{pl:ne()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":ne()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ne()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[v,"screen",...q()]}],"min-w":[{"min-w":[v,"screen","none",...q()]}],"max-w":[{"max-w":[v,"screen","none","prose",{screen:[h]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,Xh,Ku]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,et,Jx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Kx,We]}],"font-family":[{font:[RM,We,l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,et,We]}],"line-clamp":[{"line-clamp":[Ht,"none",et,Jx]}],leading:[{leading:[d,...ne()]}],"list-image":[{"list-image":["none",et,We]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",et,We]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...He(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ht,"from-font","auto",et,Ku]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Ht,"auto",et,We]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et,We]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et,We]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Re()}],"bg-repeat":[{bg:_()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hc,et,We],radial:["",et,We],conic:[hc,et,We]},DM,OM]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:ge()}],"gradient-via-pos":[{via:ge()}],"gradient-to-pos":[{to:ge()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:Oe()}],"border-w-x":[{"border-x":Oe()}],"border-w-y":[{"border-y":Oe()}],"border-w-s":[{"border-s":Oe()}],"border-w-e":[{"border-e":Oe()}],"border-w-t":[{"border-t":Oe()}],"border-w-r":[{"border-r":Oe()}],"border-w-b":[{"border-b":Oe()}],"border-w-l":[{"border-l":Oe()}],"divide-x":[{"divide-x":Oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...He(),"hidden","none"]}],"divide-style":[{divide:[...He(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...He(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ht,et,We]}],"outline-w":[{outline:["",Ht,Xh,Ku]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",M,dy,uy]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",N,dy,uy]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:Oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Ht,Ku]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":Oe()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",k,dy,uy]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[Ht,et,We]}],"mix-blend":[{"mix-blend":[...ke(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ke()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ht]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[et,We]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":oe()}],"mask-image-conic-pos":[{"mask-conic":[Ht]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Re()}],"mask-repeat":[{mask:_()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",et,We]}],filter:[{filter:["","none",et,We]}],blur:[{blur:Me()}],brightness:[{brightness:[Ht,et,We]}],contrast:[{contrast:[Ht,et,We]}],"drop-shadow":[{"drop-shadow":["","none",A,dy,uy]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",Ht,et,We]}],"hue-rotate":[{"hue-rotate":[Ht,et,We]}],invert:[{invert:["",Ht,et,We]}],saturate:[{saturate:[Ht,et,We]}],sepia:[{sepia:["",Ht,et,We]}],"backdrop-filter":[{"backdrop-filter":["","none",et,We]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[Ht,et,We]}],"backdrop-contrast":[{"backdrop-contrast":[Ht,et,We]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ht,et,We]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ht,et,We]}],"backdrop-invert":[{"backdrop-invert":["",Ht,et,We]}],"backdrop-opacity":[{"backdrop-opacity":[Ht,et,We]}],"backdrop-saturate":[{"backdrop-saturate":[Ht,et,We]}],"backdrop-sepia":[{"backdrop-sepia":["",Ht,et,We]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ne()}],"border-spacing-x":[{"border-spacing-x":ne()}],"border-spacing-y":[{"border-spacing-y":ne()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",et,We]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ht,"initial",et,We]}],ease:[{ease:["linear","initial",Y,et,We]}],delay:[{delay:[Ht,et,We]}],animate:[{animate:["none",ie,et,We]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,et,We]}],"perspective-origin":[{"perspective-origin":me()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:at()}],"scale-x":[{"scale-x":at()}],"scale-y":[{"scale-y":at()}],"scale-z":[{"scale-z":at()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[et,We,"","none","gpu","cpu"]}],"transform-origin":[{origin:me()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ft()}],"translate-x":[{"translate-x":ft()}],"translate-y":[{"translate-y":ft()}],"translate-z":[{"translate-z":ft()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et,We]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et,We]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Ht,Xh,Ku,Jx]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function ot(...f){return UM(zE(f))}const Nn=({name:f,size:l="md",className:n})=>{const r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},s=()=>{switch(f){case"settings":return T.jsxs("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});case"info":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"chevron-right":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})});case"chevron-left":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})});case"chevron-down":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});case"chevron-up":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})});case"refresh":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});case"search":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})});case"check":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"x":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"play":return T.jsxs("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]});case"tools":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})});case"server":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})});case"lightning":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})});case"menu":return T.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})});case"sun":return T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("circle",{cx:"12",cy:"12",r:"4"}),T.jsx("path",{d:"M12 2v2"}),T.jsx("path",{d:"M12 20v2"}),T.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),T.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),T.jsx("path",{d:"M2 12h2"}),T.jsx("path",{d:"M20 12h2"}),T.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),T.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]});case"moon":return T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:T.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})});case"laptop":return T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:T.jsx("path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"})});case"alert-triangle":return T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),T.jsx("path",{d:"M12 9v4"}),T.jsx("path",{d:"M12 17h.01"})]});case"tool":return T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:T.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})});case"box":return T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),T.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),T.jsx("path",{d:"M12 22V12"})]});case"file-text":return T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),T.jsx("polyline",{points:"14 2 14 8 20 8"}),T.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),T.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),T.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]});case"arrow-up-right":return T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),T.jsx("polyline",{points:"7 7 17 7 17 17"})]});default:return null}};return T.jsx("div",{className:ot(r[l],n),children:s()})},PM=({onResize:f,minWidth:l=280,maxWidth:n=500,className:r,defaultWidth:s=320})=>{const[d,h]=K.useState(!1),v=K.useRef(null),S=K.useRef(0),w=K.useRef(s),M=K.useRef(s),N=K.useRef(null),k=A=>{var Z;A.preventDefault();const $=(Z=v.current)==null?void 0:Z.parentElement,B=$?parseInt(getComputedStyle($).width,10):s;S.current=A.clientX,w.current=B,M.current=B,h(!0),document.body.style.cursor="ew-resize",document.body.style.userSelect="none"};return K.useEffect(()=>{const A=B=>{d&&(N.current!==null&&cancelAnimationFrame(N.current),N.current=requestAnimationFrame(()=>{var ie;const Z=S.current-B.clientX,Y=Math.max(l,Math.min(n,w.current+Z));if(Math.abs(Y-M.current)>=1){M.current=Y;const pe=(ie=v.current)==null?void 0:ie.parentElement;pe&&(pe.style.width=`${Y}px`,pe.style.transition="none"),f(Y)}}))},$=()=>{var Z;N.current!==null&&(cancelAnimationFrame(N.current),N.current=null),h(!1),document.body.style.cursor="",document.body.style.userSelect="";const B=(Z=v.current)==null?void 0:Z.parentElement;B&&(B.style.transition="")};return d&&(document.addEventListener("mousemove",A),document.addEventListener("mouseup",$)),()=>{N.current!==null&&cancelAnimationFrame(N.current),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",$)}},[d,l,n,f]),T.jsx("div",{ref:v,className:ot("absolute left-0 top-0 bottom-0 w-1 cursor-ew-resize group",d?"bg-blue-500":"bg-transparent hover:bg-blue-400/30",r),onMouseDown:k,children:T.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 h-16 w-4 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx("div",{className:"h-10 w-1 rounded-full bg-blue-500/70 shadow-md"})})})},_M=({label:f,checked:l,onChange:n,className:r,size:s="md"})=>{const d=()=>{n(!l)},h={sm:{container:"w-8 h-4",circle:"w-3 h-3",translate:"translate-x-4"},md:{container:"w-10 h-5",circle:"h-4 w-4",translate:"translate-x-5"}};return T.jsx("div",{className:ot("flex items-center",r),children:T.jsxs("button",{type:"button",role:"switch","aria-checked":l,onClick:d,className:ot("relative inline-flex flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ease-in-out","border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 focus:ring-offset-background",h[s].container,l?"bg-blue-600 dark:bg-blue-500 border-transparent":"bg-slate-300 dark:bg-slate-700 border-transparent"),children:[T.jsx("span",{className:"sr-only",children:f}),T.jsx("span",{"aria-hidden":"true",className:ot("pointer-events-none inline-block transform rounded-full shadow ring-0 transition duration-200 ease-in-out",h[s].circle,l?`${h[s].translate} bg-white dark:bg-white border-none`:"translate-x-0 bg-white dark:bg-slate-400 border-none")})]})})},un=({variant:f,className:l,children:n})=>{const r="font-inter",s={h1:"scroll-m-20 text-2xl font-semibold tracking-tight text-slate-900 dark:text-slate-50",h2:"scroll-m-20 text-xl font-semibold tracking-tight text-slate-900 dark:text-slate-50",h3:"scroll-m-20 text-lg font-semibold tracking-tight text-slate-900 dark:text-slate-50",h4:"scroll-m-20 text-base font-semibold tracking-tight text-slate-900 dark:text-slate-50",subtitle:"text-sm font-medium text-slate-600 dark:text-slate-400",body:"text-sm text-slate-700 dark:text-slate-300",small:"text-xs text-slate-700 dark:text-slate-300",caption:"text-xs text-slate-500 dark:text-slate-500"},d=f==="h1"?"h1":f==="h2"?"h2":f==="h3"?"h3":f==="h4"?"h4":"div";return T.jsx(d,{className:ot(r,s[f],l),children:n})},ZE=f=>typeof f=="boolean"?`${f}`:f===0?"0":f,XE=zE,$M=(f,l)=>n=>{var r;if((l==null?void 0:l.variants)==null)return XE(f,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:d}=l,h=Object.keys(s).map(w=>{const M=n==null?void 0:n[w],N=d==null?void 0:d[w];if(M===null)return null;const k=ZE(M)||ZE(N);return s[w][k]}),v=n&&Object.entries(n).reduce((w,M)=>{let[N,k]=M;return k===void 0||(w[N]=k),w},{}),S=l==null||(r=l.compoundVariants)===null||r===void 0?void 0:r.reduce((w,M)=>{let{class:N,className:k,...A}=M;return Object.entries(A).every($=>{let[B,Z]=$;return Array.isArray(Z)?Z.includes({...d,...v}[B]):{...d,...v}[B]===Z})?[...w,N,k]:w},[]);return XE(f,h,S,n==null?void 0:n.class,n==null?void 0:n.className)},QE=K.forwardRef(({children:f,...l},n)=>!f||!K.isValidElement(f)?null:K.cloneElement(f,l));QE.displayName="Slot";const jM=$M("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-primary/80 dark:hover:bg-primary/70",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 dark:bg-destructive/80 dark:hover:bg-destructive/70",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground dark:border-input dark:bg-background dark:hover:bg-accent dark:hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-secondary/80 dark:hover:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent dark:hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline dark:text-primary-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ya=K.forwardRef(({className:f,variant:l,size:n,asChild:r=!1,...s},d)=>{const h=r?QE:"button";return T.jsx(h,{className:ot(jM({variant:l,size:n,className:f})),ref:d,...s})});Ya.displayName="Button";const mc=K.forwardRef(({className:f,...l},n)=>T.jsx("div",{ref:n,className:ot("rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-card-dark dark:text-card-foreground-dark dark:border-border-dark",f),...l}));mc.displayName="Card";const KE=K.forwardRef(({className:f,...l},n)=>T.jsx("div",{ref:n,className:ot("flex flex-col space-y-1.5 p-6",f),...l}));KE.displayName="CardHeader";const LM=K.forwardRef(({className:f,...l},n)=>T.jsx("div",{ref:n,className:ot("text-2xl font-semibold leading-none tracking-tight dark:text-card-title-dark",f),...l}));LM.displayName="CardTitle";const BM=K.forwardRef(({className:f,...l},n)=>T.jsx("div",{ref:n,className:ot("text-sm text-muted-foreground dark:text-card-description-dark",f),...l}));BM.displayName="CardDescription";const bc=K.forwardRef(({className:f,...l},n)=>T.jsx("div",{ref:n,className:ot("p-6 pt-0",f),...l}));bc.displayName="CardContent";const HM=K.forwardRef(({className:f,...l},n)=>T.jsx("div",{ref:n,className:ot("flex items-center p-6 pt-0",f),...l}));HM.displayName="CardFooter";const FM=nt("ServerStatus"),qM=({status:f})=>{const{status:l,isConnected:n,isReconnecting:r,error:s}=Gx(),{config:d,setConfig:h}=AE(),[v,S]=K.useState(!1),[w,M]=K.useState(!1),[N,k]=K.useState(!1),[A,$]=K.useState(""),[B,Z]=K.useState(d.uri||""),[Y,ie]=K.useState(d.connectionType||"sse"),[pe,oe]=K.useState(""),[me,J]=K.useState(!1),[he,ne]=K.useState(!1),[Ce,de]=K.useState(!1),[Ue,De]=K.useState(""),[Ze,Je]=K.useState(!1),[ct,F]=K.useState(!1),[q,W]=K.useState(!1),[Re,_]=K.useState(!1),P=IE(),ge=l||f||"unknown";K.useEffect(()=>{FM.debug(`Status update - connectionStatus: ${l}, initialStatus: ${f}, final: ${ge}, isConnected: ${n}`)},[l,f,ge,n]);const re=K.useCallback(async()=>{try{if(!P.forceReconnect)throw new Error("Communication method unavailable");return await P.forceReconnect()}catch(Ae){return R(`[ServerStatus] Force reconnect error: ${Ae instanceof Error?Ae.message:String(Ae)}`),J(!0),!1}},[P]),Oe=P.lastConnectionError||"",He=K.useCallback(async(Ae=!1)=>{try{if(!P.refreshTools)throw new Error("Communication method unavailable");return await P.refreshTools(Ae)}catch(st){return R(`[ServerStatus] Refresh tools error: ${st instanceof Error?st.message:String(st)}`),J(!0),[]}},[P]),ke=K.useCallback(async()=>{try{if(!P.getServerConfig)throw new Error("Communication method unavailable");return await P.getServerConfig()}catch(Ae){throw R(`[ServerStatus] Get server config error: ${Ae instanceof Error?Ae.message:String(Ae)}`),J(!0),Ae}},[P]),Pe=K.useCallback(async Ae=>{try{if(!P.updateServerConfig)throw new Error("Communication method unavailable");return await P.updateServerConfig(Ae)}catch(st){return R(`[ServerStatus] Update server config error: ${st instanceof Error?st.message:String(st)}`),J(!0),!1}},[P]);K.useEffect(()=>{d.uri&&!he&&(Z(d.uri),R(`[ServerStatus] Updated server URI from config: ${d.uri}`)),d.connectionType&&!Ce&&(ie(d.connectionType),R(`[ServerStatus] Updated connection type from config: ${d.connectionType}`))},[d.uri,d.connectionType,he,Ce]),K.useEffect(()=>{const st=setTimeout(async()=>{if(P.forceConnectionStatusCheck)try{R("[ServerStatus] Forcing immediate connection status check on mount"),await P.forceConnectionStatusCheck()}catch(kt){R(`[ServerStatus] Immediate status check failed: ${kt instanceof Error?kt.message:String(kt)}`)}},100);return()=>clearTimeout(st)},[]),K.useEffect(()=>{if(!(N||r))if(me)oe("Extension background services unavailable. Try reloading the page.");else switch(ge){case"connected":oe("MCP Server is connected and ready"),n||(F(!0),setTimeout(()=>F(!1),1e3));break;case"disconnected":oe("MCP Server is unavailable. Some features will be limited.");break;case"error":oe(s||"Error connecting to extension services. Try reloading the page.");break;default:oe("Checking MCP Server status...")}},[ge,s,me,N,r,n]),K.useEffect(()=>{const Ae=[],st=ue.on("connection:status-changed",$e=>{R(`[ServerStatus] Connection status event: ${$e.status}${$e.error?` (${$e.error})`:""}`),$e.error?De($e.error):De(""),$e.status==="connected"&&($(new Date().toLocaleTimeString()),F(!0),setTimeout(()=>F(!1),1e3))});Ae.push(st);const kt=ue.on("context:bridge-invalidated",$e=>{R(`[ServerStatus] Context bridge invalidated: ${$e.error}`),J(!0),oe(`Extension context invalidated: ${$e.error}`)});Ae.push(kt);const Be=ue.on("context:bridge-restored",()=>{R("[ServerStatus] Context bridge restored"),J(!1)});Ae.push(Be);const it=ue.on("connection:heartbeat",$e=>{R(`[ServerStatus] Heartbeat received: ${$e.timestamp}`)});return Ae.push(it),()=>{Ae.forEach($e=>$e())}},[]),K.useEffect(()=>{const Ae=()=>{const kt=typeof P.forceReconnect=="function"&&typeof P.refreshTools=="function"&&typeof P.getServerConfig=="function"&&typeof P.updateServerConfig=="function";!kt&&!me?(J(!0),oe("Extension background services unavailable. Try reloading the page.")):kt&&me&&J(!1)};Ae();const st=setInterval(Ae,3e4);return()=>clearInterval(st)},[P,me]),K.useEffect(()=>{const Ae=async()=>{try{R("[ServerStatus] Fetching initial server configuration from background storage");const st=await ke();st?(st.uri&&(Z(st.uri),R(`[ServerStatus] Initial server URI loaded: ${st.uri}`)),st.connectionType&&(ie(st.connectionType),R(`[ServerStatus] Initial connection type loaded: ${st.connectionType}`)),Je(!0)):(R("[ServerStatus] No valid server configuration received from background storage"),Z(""),Je(!0))}catch(st){R(`[ServerStatus] Error fetching server config: ${st instanceof Error?st.message:String(st)}`),Z(""),Je(!0)}};P&&typeof P.getServerConfig=="function"&&!Ze&&!he&&!Ce&&Ae().catch(()=>{R("[ServerStatus] Failed to fetch server configuration"),Z("")})},[P,he,Ce,Ze,ke]),K.useEffect(()=>{if(!N)if(me)oe("Extension background services unavailable. Try reloading the page.");else switch(ge){case"connected":oe("MCP Server is connected and ready");break;case"disconnected":oe("MCP Server is unavailable. Some features will be limited.");break;case"error":oe("Error connecting to extension services. Try reloading the page.");break;default:oe("Checking MCP Server status...")}},[ge,me,N]);const Me=async()=>{const Ae=Date.now(),st=1200;try{if(R("[ServerStatus] Reconnect button clicked"),k(!0),oe("Attempting to reconnect to MCP server..."),me){if(R("[ServerStatus] Attempting to recover background connection"),await new Promise(ut=>setTimeout(ut,2e3)),!P.forceReconnect)throw new Error("Background services still unavailable");J(!1)}R("[ServerStatus] Calling forceReconnect method");const kt=await re();R(`[ServerStatus] Reconnection ${kt?"succeeded":"failed"}`),$(new Date().toLocaleTimeString());const it=Date.now()-Ae,$e=Math.max(0,st-it);if($e>0&&(R(`[ServerStatus] Waiting ${$e}ms for smooth transition`),await new Promise(ut=>setTimeout(ut,$e))),kt){oe("Successfully reconnected to MCP server"),R("[ServerStatus] Reconnection successful, fetching fresh tool list");try{const ut=await He(!0);R(`[ServerStatus] Successfully fetched ${ut.length} tools after reconnection`)}catch(ut){R(`[ServerStatus] Error fetching tools after reconnection: ${ut instanceof Error?ut.message:String(ut)}`)}}else oe("Failed to reconnect to MCP server. Some features will be limited.")}catch(kt){const Be=Date.now()-Ae,it=Math.max(0,st-Be);it>0&&await new Promise(ut=>setTimeout(ut,it)),R(`[ServerStatus] Reconnection error: ${kt instanceof Error?kt.message:String(kt)}`);const $e=kt instanceof Error?kt.message:String(kt);De($e),$e.includes("404")||$e.includes("not found")?oe("Server URL not found (404). Please verify your MCP server URL and ensure the server is running."):$e.includes("403")?oe("Access forbidden (403). Please check server permissions and authentication settings."):$e.includes("500")||$e.includes("502")||$e.includes("503")?oe("Server error detected. The MCP server may be experiencing issues."):$e.includes("Connection refused")||$e.includes("ECONNREFUSED")?oe("Connection refused. Please verify the MCP server is running at the configured URL."):$e.includes("timeout")||$e.includes("ETIMEDOUT")?oe("Connection timeout. The server may be slow to respond or unreachable."):$e.includes("ENOTFOUND")?oe("Server not found. Please check the server URL and your network connection."):oe(`Connection failed: ${$e}`)}finally{k(!1)}},_e=()=>{_(!0),setTimeout(()=>{S(!v),_(!1)},150),R(`[ServerStatus] Details ${v?"hidden":"shown"}, status: ${ge}`)},at=()=>{W(!0),setTimeout(()=>{M(!w),W(!1)},150),R(`[ServerStatus] Settings ${w?"hidden":"shown"}`)},Xe=Ae=>{Z(Ae.target.value),ne(!0)},ft=()=>{ne(!0)},yt=()=>{},nn=Ae=>{ie(Ae.target.value),de(!0)},Ei=()=>{de(!0)},Un=()=>{},Tt=async()=>{if(!P.updateServerConfig||me){R("[ServerStatus] Background communication not available");return}k(!0),$(new Date().toLocaleTimeString()),oe("Saving configuration and connecting..."),De("");const st=Date.now(),kt=1500;try{R(`[ServerStatus] Saving server URI: ${B} with connection type: ${Y}`),h({uri:B,connectionType:Y}),await Pe({uri:B,connectionType:Y}),R("[ServerStatus] Server config updated successfully"),ne(!1),de(!1);const Be=await re();R(`[ServerStatus] Reconnection ${Be?"succeeded":"failed"}`);const it=Date.now()-st,$e=Math.max(0,kt-it);if($e>0&&(R(`[ServerStatus] Waiting ${$e}ms to prevent visual jitter`),await new Promise(ut=>setTimeout(ut,$e))),Be){oe("Successfully connected to MCP server");try{const ut=await He(!0);R(`[ServerStatus] Successfully refreshed ${ut.length} tools after server change`)}catch(ut){R(`[ServerStatus] Error refreshing tools: ${ut instanceof Error?ut.message:String(ut)}`)}}else oe("Failed to connect to new MCP server");M(!1)}catch(Be){const it=Date.now()-st,$e=Math.max(0,kt-it);$e>0&&await new Promise(Pn=>setTimeout(Pn,$e));const ut=Be instanceof Error?Be.message:String(Be);De(ut),oe(`Configuration failed: ${ut}`),R(`[ServerStatus] Save config error: ${ut}`)}finally{k(!1)}},Ne=(()=>{const Ae={emerald:{text:"text-emerald-500",bg:"bg-emerald-100",darkBg:"dark:bg-emerald-900/20"},amber:{text:"text-amber-500",bg:"bg-amber-100",darkBg:"dark:bg-amber-900/20"},rose:{text:"text-rose-500",bg:"bg-rose-100",darkBg:"dark:bg-rose-900/20"},slate:{text:"text-slate-500",bg:"bg-slate-100",darkBg:"dark:bg-slate-900/20"}};switch(N?"reconnecting":ge){case"connected":return{color:Ae.emerald.text,bgColor:ot(Ae.emerald.bg,Ae.emerald.darkBg),icon:T.jsx(Nn,{name:"check",className:Ae.emerald.text}),label:"Connected"};case"reconnecting":return{color:Ae.amber.text,bgColor:ot(Ae.amber.bg,Ae.amber.darkBg),icon:T.jsx(Nn,{name:"refresh",className:ot(Ae.amber.text,"animate-spin")}),label:"Reconnecting"};case"disconnected":return{color:Ae.rose.text,bgColor:ot(Ae.rose.bg,Ae.rose.darkBg),icon:T.jsx(Nn,{name:"x",className:Ae.rose.text}),label:"Disconnected"};case"error":return{color:Ae.rose.text,bgColor:ot(Ae.rose.bg,Ae.rose.darkBg),icon:T.jsx(Nn,{name:"info",className:Ae.rose.text}),label:"Error"};default:return{color:Ae.slate.text,bgColor:ot(Ae.slate.bg,Ae.slate.darkBg),icon:T.jsx(Nn,{name:"info",className:Ae.slate.text}),label:"Unknown"}}})(),Gt=ge==="disconnected"||ge==="error";return T.jsxs("div",{className:ot("relative px-4 py-3 border-b border-slate-200 dark:border-slate-800 transition-all duration-300 ease-out server-status-stable",Gt&&"bg-gradient-to-r from-rose-50 to-red-50 dark:from-rose-900/10 dark:to-red-900/10 border border-rose-200 dark:border-rose-800/50 rounded-sm shadow-sm"),children:[ct&&T.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-100 to-green-100 dark:from-emerald-900/20 dark:to-green-900/20 opacity-30 animate-pulse rounded-sm"}),T.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:ot("relative flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 ease-out server-status-icon",Ne.bgColor,N?"animate-spin":Gt&&"animate-pulse"),children:T.jsx("div",{className:"transition-transform duration-200",children:Ne.icon})}),T.jsxs("div",{className:"flex flex-col",children:[T.jsxs(un,{variant:"body",className:ot("font-semibold transition-colors duration-200 leading-tight",Gt?"text-rose-700 dark:text-rose-400":ge==="connected"?"text-emerald-700 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"),children:["Server ",Ne.label]}),T.jsx("div",{className:ot("text-xs mt-0.5 transition-all duration-200 ease-out max-h-20 overflow-hidden status-message-stable",Gt?"text-rose-600 dark:text-rose-400 font-medium":"text-slate-500 dark:text-slate-400"),children:pe})]})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("button",{onClick:Me,disabled:N,className:ot("group relative p-2 rounded-lg transition-all duration-200 ease-out hover:scale-105 active:scale-95",N?"opacity-60 cursor-not-allowed":"hover:shadow-md",Gt?"text-rose-600 hover:text-rose-700 hover:bg-rose-100 dark:text-rose-400 dark:hover:text-rose-300 dark:hover:bg-rose-900/30":"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/30"),"aria-label":"Reconnect to server",title:"Reconnect to server",children:T.jsx(Nn,{name:"refresh",size:"sm",className:ot("transition-transform duration-300",N?"animate-spin":"group-hover:rotate-180")})}),T.jsx("button",{onClick:at,disabled:q,className:ot("group relative p-2 rounded-lg transition-all duration-200 ease-out hover:scale-105 active:scale-95","text-slate-500 hover:text-slate-700 hover:bg-slate-100 hover:shadow-md dark:text-slate-400 dark:hover:text-slate-300 dark:hover:bg-slate-800"),"aria-label":"Server settings",title:"Server settings",children:T.jsx(Nn,{name:"settings",size:"sm",className:ot("transition-transform duration-200",w?"rotate-90":"group-hover:rotate-45")})}),T.jsx("button",{onClick:_e,disabled:Re,className:ot("group relative p-2 rounded-lg transition-all duration-200 ease-out hover:scale-105 active:scale-95","text-slate-500 hover:text-slate-700 hover:bg-slate-100 hover:shadow-md dark:text-slate-400 dark:hover:text-slate-300 dark:hover:bg-slate-800"),"aria-label":"Show details",title:"Show details",children:T.jsx(Nn,{name:"info",size:"sm",className:"transition-transform duration-200 group-hover:scale-110"})})]})]}),Gt&&T.jsx("div",{className:"mt-2 p-2 bg-rose-100 dark:bg-rose-900/20 rounded-md border border-rose-200 dark:border-rose-800/50",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Nn,{name:"alert-triangle",size:"sm",className:"text-rose-600 dark:text-rose-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx(un,{variant:"small",className:"text-rose-600 dark:text-rose-400 font-medium",children:ge==="disconnected"?"Server connection lost. Click the refresh button to reconnect.":"Server connection error. Check your configuration and try again."}),(Oe||Ue)&&T.jsxs(un,{variant:"small",className:"text-rose-500 dark:text-rose-300 mt-1 text-xs",children:["Details: ",Oe||Ue]})]})]})}),(me||!P.sendMessage)&&T.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border-b border-amber-200/50 dark:border-amber-800/30 p-2 flex-shrink-0",children:T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("div",{className:"animate-spin w-3 h-3 border border-amber-500 border-t-transparent rounded-full"}),T.jsx(un,{variant:"caption",className:"text-amber-700 dark:text-amber-300 text-xs",children:"Connecting to extension services..."})]})}),w&&T.jsx("div",{className:"mt-3 animate-in slide-in-from-top-2 duration-200",children:T.jsx(mc,{className:"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg",children:T.jsxs(bc,{className:"p-4 text-xs text-slate-700 dark:text-slate-300",children:[T.jsx(un,{variant:"h4",className:"mb-3 text-slate-800 dark:text-slate-100 font-semibold",children:"Server Configuration"}),T.jsxs("div",{className:"mb-4",children:[T.jsx("label",{htmlFor:"connection-type",className:"block mb-2 text-slate-600 dark:text-slate-400 font-medium",children:"Connection Type"}),T.jsxs("select",{id:"connection-type",value:Y,onChange:nn,onFocus:Ei,onBlur:Un,className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-white dark:bg-slate-800 dark:border-slate-600 dark:text-slate-200 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600 focus:border-transparent outline-none transition-all duration-200 hover:border-slate-400 dark:hover:border-slate-500",children:[T.jsx("option",{value:"sse",children:"Server-Sent Events (SSE)"}),T.jsx("option",{value:"websocket",children:"WebSocket"}),T.jsx("option",{value:"streamable-http",children:"Streamable HTTP"})]}),T.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:Y==="sse"?"HTTP-based streaming connection (traditional)":Y==="websocket"?"Full-duplex WebSocket connection (faster, more features)":"Advanced HTTP streaming (modern MCP protocol)"})]}),T.jsxs("div",{className:"mb-4",children:[T.jsx("label",{htmlFor:"server-uri",className:"block mb-2 text-slate-600 dark:text-slate-400 font-medium",children:"Server URI"}),T.jsx("input",{id:"server-uri",type:"text",value:B,onChange:Xe,onFocus:ft,onBlur:yt,placeholder:Y==="sse"?"http://localhost:3006/sse":Y==="websocket"?"ws://localhost:3006/message":"http://localhost:3006/mcp",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-white dark:bg-slate-800 dark:border-slate-600 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600 focus:border-transparent outline-none transition-all duration-200 hover:border-slate-400 dark:hover:border-slate-500"}),T.jsxs("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:[T.jsx("div",{className:"mb-2",children:T.jsx("strong",{children:"To start MCP SuperAssistant Proxy:"})}),T.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-2 rounded font-mono text-xs border",children:["npx @srbhptl39/mcp-superassistant-proxy@latest --config ./config.json --outputTransport ",Y==="sse"?"sse":Y==="websocket"?"ws":"streamableHttp"]}),T.jsxs("div",{className:"mt-2 text-xs",children:[T.jsxs("div",{className:"mb-1",children:["Available transports: ",T.jsx("code",{children:"streamableHttp"}),", ",T.jsx("code",{children:"sse"}),", ",T.jsx("code",{children:"ws"})]}),T.jsxs("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[T.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:" Public Endpoints Supported:"}),T.jsxs("div",{className:"text-blue-700 dark:text-blue-300 space-y-1",children:[T.jsxs("div",{children:[" ",T.jsx("strong",{children:"Zapier:"})," Public MCP endpoints with CORS enabled"]}),T.jsxs("div",{children:[" ",T.jsx("strong",{children:"Composio:"})," SSE and Streamable HTTP endpoints"]}),T.jsxs("div",{children:[" ",T.jsx("strong",{children:"Custom servers:"})," Any MCP server with CORS headers"]})]}),T.jsxs("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:[T.jsx("strong",{children:"Note:"})," WebSocket connections require local servers or proxy due to browser security restrictions."]})]})]})]})]}),T.jsxs("div",{className:"flex justify-end gap-2",children:[T.jsx(Ya,{onClick:()=>{M(!1),ne(!1),de(!1),d.uri&&Z(d.uri),d.connectionType&&ie(d.connectionType)},variant:"outline",size:"sm",className:"h-8 px-3 text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95",children:"Cancel"}),T.jsx(Ya,{onClick:Tt,variant:"default",size:"sm",className:"h-8 px-3 text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white dark:text-white save-button-stable",disabled:me||N,children:N?T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):"Save & Reconnect"})]}),me&&T.jsx("div",{className:"mt-3 p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg border border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-200",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Nn,{name:"alert-triangle",size:"sm",className:"text-rose-600 dark:text-rose-400"}),T.jsx("p",{className:"font-medium",children:"Extension background services unavailable. Try reloading the page."})]})})]})})}),v&&T.jsx("div",{className:"mt-3 animate-in slide-in-from-top-2 duration-200",children:T.jsx(mc,{className:"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg",children:T.jsxs(bc,{className:"p-4 text-xs text-slate-700 dark:text-slate-300",children:[T.jsx(un,{variant:"h4",className:"mb-3 text-slate-800 dark:text-slate-100 font-semibold",children:"Connection Details"}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex justify-between items-center py-1",children:[T.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Status:"}),T.jsx("span",{className:ot("px-2 py-1 rounded-full text-xs font-medium",ge==="connected"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400":ge==="disconnected"?"bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-400":"bg-slate-100 text-slate-700 dark:bg-slate-900/20 dark:text-slate-400"),children:Ne.label})]}),T.jsxs("div",{className:"flex justify-between items-start py-1",children:[T.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Server URI:"}),T.jsx("span",{className:"text-right text-slate-600 dark:text-slate-300 max-w-[200px] break-all",children:B||"Not configured"})]}),T.jsxs("div",{className:"flex justify-between items-center py-1",children:[T.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Connection Type:"}),T.jsx("span",{className:ot("px-2 py-1 rounded-full text-xs font-medium",Y==="websocket"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":Y==="streamable-http"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"),children:Y==="websocket"?"WebSocket":Y==="streamable-http"?"Streamable HTTP":"SSE"})]}),T.jsxs("div",{className:"flex justify-between items-center py-1",children:[T.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Last updated:"}),T.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:new Date().toLocaleTimeString()})]}),A&&T.jsxs("div",{className:"flex justify-between items-center py-1",children:[T.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Last reconnect:"}),T.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:A})]})]}),ge==="disconnected"&&T.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200",children:T.jsxs("div",{className:"flex items-start gap-2",children:[T.jsx(Nn,{name:"info",size:"sm",className:"text-amber-600 dark:text-amber-400 mt-0.5"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-medium mb-2",children:"Troubleshooting tips:"}),T.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-xs",children:[T.jsx("li",{children:"Check if the MCP server is running at the configured URI"}),T.jsx("li",{children:"Verify network connectivity to the server"}),T.jsx("li",{children:"Restart the MCP server if needed"}),T.jsx("li",{children:"Use the Reconnect button to try again"})]}),(Oe||Ue)&&T.jsxs("div",{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-800/50 rounded border border-amber-200 dark:border-amber-700",children:[T.jsx("p",{className:"font-medium text-xs mb-1",children:"Last Error:"}),T.jsx("p",{className:"text-xs break-words",children:Oe||Ue})]})]})]})}),me&&T.jsx("div",{className:"mt-4 p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg border border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-200",children:T.jsxs("div",{className:"flex items-start gap-2",children:[T.jsx(Nn,{name:"alert-triangle",size:"sm",className:"text-rose-600 dark:text-rose-400 mt-0.5"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-medium mb-2",children:"Extension Communication Issue:"}),T.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-xs",children:[T.jsx("li",{children:"Try reloading the current page"}),T.jsx("li",{children:"If the issue persists, restart your browser"}),T.jsx("li",{children:"You may need to reinstall the extension if problems continue"})]})]})]})})]})})})]})},JE=nt("AvailableTools"),GM=({tools:f,onExecute:l,onRefresh:n,isRefreshing:r})=>{const{tools:s}=OE(),{executions:d,isExecuting:h}=Qk(),{enabledTools:v,enableTool:S,disableTool:w,enableAllTools:M,disableAllTools:N,isToolEnabled:k,loadToolEnablementState:A,isLoadingEnablement:$}=Vx(),[B,Z]=K.useState(""),[Y,ie]=K.useState(new Set),[pe,oe]=K.useState(!0),[me,J]=K.useState(!1),[he,ne]=K.useState(new Set),[Ce,de]=K.useState(!1),Ue=s.length>0?s:f,De=K.useMemo(()=>Ue.length,[Ue.length]);K.useEffect(()=>{De>0&&R(`[AvailableTools] ${De} tools available`)},[De]),K.useEffect(()=>{const Me=setTimeout(()=>{J(!0)},300);return()=>clearTimeout(Me)},[]),K.useEffect(()=>{Ue.length>0&&A()},[Ue.length,A]);const Ze=Me=>{Z(Me.target.value)},Je=Me=>{const _e=new Set(Y);_e.has(Me)?_e.delete(Me):_e.add(Me),ie(_e)},ct=()=>{oe(!pe),R(`[AvailableTools] Component ${pe?"collapsed":"expanded"}`)},{groupedTools:F,ungroupedTools:q}=K.useMemo(()=>{const Me=(Ue||[]).filter(Xe=>Xe.name.toLowerCase().includes(B.toLowerCase())||Xe.description&&Xe.description.toLowerCase().includes(B.toLowerCase())),_e={},at=[];return Me.forEach(Xe=>{const ft=Xe.name.indexOf(".");if(ft>0){const yt=Xe.name.substring(0,ft),nn=Xe.name.substring(ft+1);_e[yt]||(_e[yt]=[]),_e[yt].push({...Xe,displayName:nn,originalName:Xe.name})}else at.push(Xe)}),Object.keys(_e).forEach(Xe=>{_e[Xe].sort((ft,yt)=>{if(!Ce){const Un=k(ft.originalName||ft.name),Tt=k(yt.originalName||yt.name);if(Un&&!Tt)return-1;if(!Un&&Tt)return 1}const nn=ft.displayName||ft.name,Ei=yt.displayName||yt.name;return nn.localeCompare(Ei)})}),at.sort((Xe,ft)=>{if(!Ce){const yt=k(Xe.name),nn=k(ft.name);if(yt&&!nn)return-1;if(!yt&&nn)return 1}return Xe.name.localeCompare(ft.name)}),{groupedTools:_e,ungroupedTools:at}},[Ue,B,v,Ce]),W=()=>{R("[AvailableTools] Refreshing available tools"),n()},Re=Me=>{de(!0),ne(_e=>{const at=new Set(_e);return at.has(Me)?at.delete(Me):at.add(Me),at}),k(Me)?(w(Me),R(`[AvailableTools] Tool disabled: ${Me}`)):(S(Me),R(`[AvailableTools] Tool enabled: ${Me}`))},_=()=>{de(!1),ne(new Set),R("[AvailableTools] Tool changes saved and sorted")},P=()=>{he.forEach(Me=>{k(Me)?w(Me):S(Me)}),de(!1),ne(new Set),R("[AvailableTools] Tool changes discarded")},ge=()=>{de(!0),M(),R("[AvailableTools] All tools enabled")},re=()=>{de(!0),N(),R("[AvailableTools] All tools disabled")},Oe=(Me,_e)=>{de(!0);const at=_e.every(Xe=>k(Xe.originalName||Xe.name));_e.forEach(Xe=>{const ft=Xe.originalName||Xe.name;at?w(ft):S(ft)}),R(`[AvailableTools] Group ${Me} ${at?"disabled":"enabled"}`)},He=K.useMemo(()=>Object.values(F).reduce((_e,at)=>_e+at.length,0)+q.length,[F,q]),ke=Me=>Me.every(_e=>k(_e.originalName||_e.name)),Pe=Me=>{const _e=Me.filter(at=>k(at.originalName||at.name)).length;return _e>0&&_e<Me.length};return T.jsxs(mc,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[T.jsxs(KE,{className:"p-4 pb-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("button",{onClick:ct,className:"p-1 mr-2 rounded transition-colors bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600","aria-label":pe?"Collapse tools":"Expand tools",children:T.jsx(Nn,{name:"chevron-right",size:"sm",className:ot("text-slate-600 dark:text-slate-300 transition-transform",pe?"rotate-90":"")})}),T.jsx(un,{variant:"h3",children:"Available Tools"})]}),T.jsx(Ya,{onClick:W,disabled:r,size:"sm",variant:"outline",className:ot("h-9 w-9 p-0",r?"opacity-50":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"),"aria-label":"Refresh tools",children:T.jsx(Nn,{name:"refresh",size:"sm",className:ot("text-slate-700 dark:text-slate-300",r?"animate-spin":"")})})]}),pe&&T.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[T.jsx("div",{className:"flex items-center gap-2",children:T.jsxs(un,{variant:"small",className:"text-slate-600 dark:text-slate-400",children:[v.size," of ",He," tools enabled"]})}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Ya,{onClick:ge,size:"sm",variant:"outline",disabled:r||$||He===0,className:"h-8 px-3 text-xs bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:"Enable All"}),T.jsx(Ya,{onClick:re,size:"sm",variant:"outline",disabled:r||$||He===0,className:"h-8 px-3 text-xs bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800",children:"Disable All"}),Ce&&T.jsxs(T.Fragment,{children:[T.jsx(Ya,{onClick:_,size:"sm",variant:"outline",className:"h-8 px-3 text-xs bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Save Changes"}),T.jsx(Ya,{onClick:P,size:"sm",variant:"outline",className:"h-8 px-3 text-xs bg-orange-50 hover:bg-orange-100 dark:bg-orange-900/20 dark:hover:bg-orange-900/30 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Discard"})]})]})]})]}),pe&&T.jsxs(bc,{className:"p-4 pt-4 bg-white dark:bg-slate-900",children:[T.jsx("div",{className:"mb-4",children:T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"text",placeholder:"Search tools...",value:B,onChange:Ze,className:"w-full px-3 py-2 pl-10 border border-slate-300 dark:border-slate-600 rounded text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100"}),T.jsx("div",{className:"absolute left-3 top-2.5",children:T.jsx(Nn,{name:"search",size:"sm",className:"text-slate-400 dark:text-slate-500"})})]})}),(r||$)&&T.jsxs("div",{className:"flex items-center justify-center py-8 text-slate-500 dark:text-slate-400",children:[T.jsx(Nn,{name:"refresh",className:"w-8 h-8 animate-spin mr-3"}),T.jsx(un,{variant:"body",className:"text-lg",children:r?"Refreshing tools...":"Loading tool preferences..."})]}),!r&&!$&&He===0&&T.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:B?T.jsxs(T.Fragment,{children:[T.jsx(Nn,{name:"search",className:"w-12 h-12 mx-auto mb-3"}),T.jsx(un,{variant:"body",className:"text-lg",children:"No tools match your search"}),T.jsx(un,{variant:"small",className:"mt-1",children:"Try a different search term"})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),T.jsx(un,{variant:"body",className:"text-lg",children:me?"No tools available":"Loading tools..."}),T.jsx(un,{variant:"small",className:"mt-1",children:me?T.jsxs(T.Fragment,{children:["Check your server connection or"," ",T.jsx("button",{onClick:W,className:"text-slate-700 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100",children:"refresh"})]}):"Please wait while we connect to the server"})]})}),!r&&!$&&He>0&&T.jsxs("div",{className:"space-y-4",children:[Object.entries(F).map(([Me,_e])=>{const at=ke(_e),Xe=Pe(_e),ft=Y.has(Me);return T.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[T.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-3",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("button",{onClick:()=>Je(Me),className:"p-1 mr-2 rounded transition-colors hover:bg-slate-200 dark:hover:bg-slate-700","aria-label":ft?"Collapse group":"Expand group",children:T.jsx(Nn,{name:"chevron-right",size:"sm",className:ot("text-slate-600 dark:text-slate-400 transition-transform",ft?"rotate-90":"")})}),T.jsx("input",{type:"checkbox",checked:at,ref:yt=>{yt&&(yt.indeterminate=Xe)},onChange:()=>Oe(Me,_e),className:"w-4 h-4 mr-3 text-blue-600 bg-white border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600"}),T.jsx(un,{variant:"subtitle",className:"text-slate-800 dark:text-slate-200 font-semibold",children:Me}),T.jsxs(un,{variant:"small",className:"ml-2 text-slate-500 dark:text-slate-400",children:["(",_e.length," tools)"]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[Xe&&T.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded",children:"Partial"}),!at&&!Xe&&T.jsx("span",{className:"px-2 py-1 text-xs bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded",children:"Disabled"})]})]})}),ft&&T.jsx("div",{className:"bg-white dark:bg-slate-900",children:_e.map(yt=>{const nn=yt.originalName||yt.name,Ei=yt.displayName||yt.name,Un=k(nn),Tt=Y.has(nn);return T.jsxs("div",{className:"border-b border-slate-100 dark:border-slate-800 last:border-b-0",children:[T.jsx("div",{className:ot("flex items-center justify-between p-3 cursor-pointer transition-colors",Un?"hover:bg-slate-50 dark:hover:bg-slate-800/50":"hover:bg-slate-50 dark:hover:bg-slate-800/30 opacity-60"),onClick:()=>Je(nn),children:T.jsxs("div",{className:"flex items-center",children:[T.jsx(Nn,{name:"chevron-right",size:"sm",className:ot("mr-2 text-slate-400 dark:text-slate-500 transition-transform",Tt?"rotate-90":"")}),T.jsx("input",{type:"checkbox",checked:Un,onChange:En=>{En.stopPropagation(),Re(nn)},onClick:En=>{En.stopPropagation()},className:"w-4 h-4 mr-3 text-blue-600 bg-white border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600"}),T.jsx(un,{variant:"body",className:ot("font-medium transition-colors",Un?"text-slate-800 dark:text-slate-200":"text-slate-500 dark:text-slate-400"),children:Ei}),!Un&&T.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded",children:"Disabled"})]})}),Tt&&T.jsxs("div",{className:ot("p-3 bg-slate-50 dark:bg-slate-800/50",!Un&&"opacity-60"),children:[yt.description&&T.jsx(un,{variant:"body",className:ot("mb-2",Un?"text-slate-600 dark:text-slate-300":"text-slate-500 dark:text-slate-400"),children:yt.description}),T.jsxs("div",{className:"mt-2",children:[T.jsx(un,{variant:"caption",className:ot("mb-1",Un?"text-slate-500 dark:text-slate-400":"text-slate-400 dark:text-slate-500"),children:"Schema"}),T.jsx("pre",{className:ot("text-xs p-2 whitespace-pre-wrap max-h-60 overflow-y-auto rounded border",Un?"bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700":"bg-slate-100 dark:bg-slate-800/50 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-600"),children:(()=>{try{const En=yt.schema||yt.input_schema;if(!En)return"No schema available";const Ne=typeof En=="string"?JSON.parse(En):En;return JSON.stringify(Ne,null,2)}catch(En){JE.error("Error processing tool schema:",En);const Ne=yt.schema||yt.input_schema;return typeof Ne=="string"?Ne:"Invalid schema format"}})()})]})]})]},nn)})})]},Me)}),q.length>0&&T.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[T.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-3",children:[T.jsx(un,{variant:"body",className:"text-slate-800 dark:text-slate-200 font-semibold",children:"Individual Tools"}),T.jsxs(un,{variant:"small",className:"text-slate-500 dark:text-slate-400",children:["(",q.length," tools)"]})]}),T.jsx("div",{className:"bg-white dark:bg-slate-900",children:q.map(Me=>{const _e=k(Me.name),at=Y.has(Me.name);return T.jsxs("div",{className:"border-b border-slate-100 dark:border-slate-800 last:border-b-0",children:[T.jsx("div",{className:ot("flex items-center justify-between p-3 cursor-pointer transition-colors",_e?"hover:bg-slate-50 dark:hover:bg-slate-800/50":"hover:bg-slate-50 dark:hover:bg-slate-800/30 opacity-60"),onClick:()=>Je(Me.name),children:T.jsxs("div",{className:"flex items-center",children:[T.jsx(Nn,{name:"chevron-right",size:"sm",className:ot("mr-2 text-slate-400 dark:text-slate-500 transition-transform",at?"rotate-90":"")}),T.jsx("input",{type:"checkbox",checked:_e,onChange:Xe=>{Xe.stopPropagation(),Re(Me.name)},onClick:Xe=>{Xe.stopPropagation()},className:"w-4 h-4 mr-3 text-blue-600 bg-white border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600"}),T.jsx(un,{variant:"body",className:ot("font-medium transition-colors",_e?"text-slate-800 dark:text-slate-200":"text-slate-500 dark:text-slate-400"),children:Me.name}),!_e&&T.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded",children:"Disabled"})]})}),at&&T.jsxs("div",{className:ot("p-3 bg-slate-50 dark:bg-slate-800/50",!_e&&"opacity-60"),children:[Me.description&&T.jsx(un,{variant:"body",className:ot("mb-2",_e?"text-slate-600 dark:text-slate-300":"text-slate-500 dark:text-slate-400"),children:Me.description}),T.jsxs("div",{className:"mt-2",children:[T.jsx(un,{variant:"caption",className:ot("mb-1",_e?"text-slate-500 dark:text-slate-400":"text-slate-400 dark:text-slate-500"),children:"Schema"}),T.jsx("pre",{className:ot("text-xs p-2 whitespace-pre-wrap max-h-60 overflow-y-auto rounded border",_e?"bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700":"bg-slate-100 dark:bg-slate-800/50 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-600"),children:(()=>{try{const Xe=Me.schema||Me.input_schema;if(!Xe)return"No schema available";const ft=typeof Xe=="string"?JSON.parse(Xe):Xe;return JSON.stringify(ft,null,2)}catch(Xe){JE.error("Error processing tool schema:",Xe);const ft=Me.schema||Me.input_schema;return typeof ft=="string"?ft:"Invalid schema format"}})()})]})]})]},Me.name)})})]})]})]})]})},VM=`
How SuperAssistant works:
  1. PRINT the function JSON event like function_calls to be executed as part of the output/response
  2. As part of your response there is a DOM observer tool which needs text to run that function manually, so make sure you print the function JSON events with correct function name, parameters and call_id.
  3. Upon Capturing the function JSON events, it will be executed with the call_id provided.
  4. The result of the function execution will be provided in <function_results> tag.
  5. DO NOT USE canvas / can mode.
  6. All other tools and functions are disabled except for the ones available to superassistant.
`,YM=`
How you work as SuperAssistant:
  1. PRINT the function JSON commands to be executed as part of the output/response
  2. There is a Capturing tool which needs printed text to run that tool manually, SO make sure you print the function JSON commands with correct function name, parameters and call_id.
  3. Upon Capturing the fucntion JSON commands, it will be executed with the call_id provided.
  4. The result of the function execution will be provided in <function_results> tag.
  5. DO NOT GENERATE python tool code like 'print(notion.notion_retrieve_block_children(...))' command generation, now that WON'T work, that will result in error like 'NameError: name 'notion' is not defined'. You can still use python tool code for tools which are part of other tool sets, apart from tools given to you below.
  6. ONLY BELOW SCHEMA WILL WORK FOR TOOL/FUNTION CALLING.

Example of a properly formatted tool call for Gemini:

\`\`\`json
{"type": "function_call_start", "name": "function_name", "call_id": 1}
{"type": "description", "text": "Short 1 line of what this function does"}
{"type": "parameter", "key": "parameter_1", "value": "value_1"}
{"type": "parameter", "key": "parameter_2", "value": "value_2"}
{"type": "function_call_end", "call_id": 1}
\`\`\`

`;nt("InstructionGeneratorJSON");const ZM=(f,l,n)=>{if(!f||f.length===0)return`# No tools available

Connect to the MCP server to see available tools.`;let r="";r+=`
[SuperAssistant Operational Instructions][IMPORTANT]

<system>
You are having a SuperAssistant with you whose capabilities are to invoke functions and make the best use of it during your assistance, a knowledgeable assistant focused on answering questions and providing information on any topics.
In this environment SuperAssistant has access to a set of tools it can use to answer the user's question.
It has access to a set of functions it can use to answer the user's question. You do NOT currently have the ability to inspect files or interact with external resources, except by invoking the below functions. ASK SUPERASSISTANT to use these functions to help you with your request.

Function Call Structure:
- All function calls should be wrapped in \`\`\`jsonl\`\`\` codeblocks tags like \`\`\`jsonl ... \`\`\` in a NEW LINE. This is strict requirement.
- Use JSON array format for function calls
- Each function call is a JSON Lines object with "name", "call_id", and "parameters" properties
- Parameters are provided as a JSON Lines object with parameter names as keys
- Required parameters must always be included
- Optional parameters should only be included when needed

The instructions regarding function calls specify that:
- When invoking functions, use a JSON Lines object with "name" property specifying the function name.
- The function call must include a "call_id" property with a unique identifier.
- Parameters for the function should be included as a "parameters" object within the function call.
- Include all required parameters for each function call, while optional parameters should only be included when necessary.
- Do not refer to function/tool names when speaking directly to users - focus on what I'm doing rather than the tool I'm using.
- When invoking a function, ensure all necessary context is provided for the function to execute properly.
- Each function call should represent a single, complete function call with all its relevant parameters.
- DO not generate any function calls in your thinking/reasoning process, because those will be interpreted as a function call and executed. Just formulate the correct parameters for the function call.

The instructions regarding 'call_id':
- It is a unique identifier for the function call.
- It is a number that is incremented by 1 for each new function call, starting from 1.

You can invoke one or more functions by writing a JSON Lines code block like the following as part of your reply to the user, MAKE SURE TO INVOKE ONLY ONE FUNCTION AT A TIME, It should be a JSON Lines code block like this:

<example_function_call>
### Add New Line Here
\`\`\`jsonl
{"type": "function_call_start", "name": "function_name", "call_id": 1}
{"type": "description", "text": "Short 1 line of what this function does"}
{"type": "parameter", "key": "parameter_1", "value": "value_1"}
{"type": "parameter", "key": "parameter_2", "value": "value_2"}
{"type": "function_call_end", "call_id": 1}
\`\`\`
</example_function_call>

When a user makes a request:
1. ALWAYS analyze what function calls would be appropriate for the task
2. ALWAYS format your function call usage EXACTLY as specified in the schema
3. NEVER skip required parameters in function calls
4. NEVER invent functions that aren't available to you
5. ALWAYS wait for function call execution results before continuing
6. After invoking a function, STOP. 
7. NEVER invoke multiple functions in a single response
8. DO NOT STRICTLY GENERATE or form function results.
9. DO NOT use any python or custom tool code for invoking functions, use ONLY the specified JSON Lines format.

Answer the user's request using the relevant tool(s), if they are available. Check that all the required parameters for each tool call are provided or can reasonably be inferred from context. IF there are no relevant tools or there are missing values for required parameters, ask the user to supply these values; otherwise proceed with the tool calls. If the user provides a specific value for a parameter (for example provided in quotes), make sure to use that value EXACTLY. DO NOT make up values for or ask about optional parameters. Carefully analyze descriptive terms in the request as they may indicate required parameter values that should be included even if not explicitly quoted.




<response_format>

<thoughts optional="true">
User is asking...
My Thoughts ...
Observations made ...
Solutions i plan to use ...
Best function for this task ... with call id call_id to be used $CALL_ID + 1 = $CALL_ID
</thoughts>

\`\`\`jsonl
{"type": "function_call_start", "name": "function_name", "call_id": 1}
{"type": "description", "text": "Short 1 line of what this function does"}
{"type": "parameter", "key": "parameter_1", "value": "value_1"}
{"type": "parameter", "key": "parameter_2", "value": "value_2"}
{"type": "function_call_end", "call_id": 1}
\`\`\`

</response_format>

Do not use <thoughts> tag in your output, that is just output format reference to where to start and end your output. Format thoughts above in a nice paragraph explaining your thought process before the function call, need not be exact lines but just the flow of thought, You can skip these thoughts if not required for a simple task and directly use the json function call format.
`;const s=window.location.hostname;return s.includes("gemini")&&(r+=YM),s.includes("chatgpt")&&(r+=VM),r+=`## AVAILABLE TOOLS FOR SUPERASSISTANT

`,f.forEach(d=>{r+=` - ${d.name}
`;try{const h=JSON.parse(d.schema);if(d.description&&(r+=`**Description**: ${d.description}
`),h.properties&&Object.keys(h.properties).length>0){r+=`**Parameters**:
`;const v=Array.isArray(h.required)?h.required:[];Object.entries(h.properties).forEach(([S,w])=>{const M=v.includes(S);r+=`- \`${S}\`: ${w.description?w.description:""} (${w.type||"any"}) (${M?"required":"optional"})
`,w.type==="object"&&w.properties&&(r+=`  - Properties:
`,Object.entries(w.properties).forEach(([N,k])=>{r+=`    - \`${N}\`: ${k.description||"No description"} (${k.type||"any"})
`})),w.type==="array"&&w.items&&w.items.type==="object"&&w.items.properties&&(r+=`  - Array items (objects) with properties:
`,Object.entries(w.items.properties).forEach(([N,k])=>{r+=`    - \`${N}\`: ${k.description||"No description"} (${k.type||"any"})
`}))}),r+=`
`}}catch{r+="Schema information not available. No Tools Available"}}),n&&l&&l.trim()&&(r+=`<custom_instructions>
`,r+=l.trim(),r+=`
</custom_instructions>

`),r+="<\\system>",r+=`

`,r+=`IMPORTANT: You need to place function call jsonl tags in proper jsonl code block like:

`,r+=`\`\`\`jsonl
{"type": "function_call_start", "name": "function_name", "call_id": 1}
{"type": "description", "text": "Short 1 line of what this function does"}
{"type": "parameter", "key": "parameter_1", "value": "value_1"}
{"type": "parameter", "key": "parameter_2", "value": "value_2"}
{"type": "function_call_end", "call_id": 1}
\`\`\`

`,r+=`

`,r+="User Interaction Starts here:",r+=`


`,r+=`

`,r+=`

`,r+=`

`,r},vc=nt("InstructionManager"),yn={instructions:"",updating:!1,setInstructions:f=>{if(yn.instructions!==f){if(yn.updating){vc.warn("[InstructionsState] Prevented recursive update");return}yn.updating=!0,yn.instructions=f,vc.debug(`Broadcasting instruction update to ${yn.listeners.length} listeners`);try{yn.listeners.forEach((l,n)=>{try{l(f)}catch(r){vc.error(`Error in listener ${n}:`,r)}})}finally{yn.updating=!1}}},listeners:[],subscribe:f=>(yn.listeners.push(f),vc.debug(`Listener subscribed (total: ${yn.listeners.length})`),()=>{const l=yn.listeners.indexOf(f);l!==-1&&(yn.listeners.splice(l,1),vc.debug(`Listener unsubscribed (total: ${yn.listeners.length})`))})},ig=({onClick:f,disabled:l,loading:n,success:r,color:s,label:d})=>{const h={blue:"text-blue-700 dark:text-blue-500 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-800/40",green:"text-green-700 dark:text-green-500 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-800/40",red:"text-red-700 dark:text-red-500 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-800/40",amber:"text-amber-700 dark:text-amber-500 bg-amber-100 dark:bg-amber-900/30 hover:bg-amber-200 dark:hover:bg-amber-800/40",purple:"text-purple-700 dark:text-purple-500 bg-purple-100 dark:bg-purple-900/30 hover:bg-purple-200 dark:hover:bg-purple-800/40",slate:"bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400"};return T.jsx("button",{onClick:f,disabled:l||n,className:ot("px-2 py-1 text-xs font-medium rounded transition-colors w-[70px] text-center",l||n?h.slate:h[s]),children:n?`${d}...`:r?`${d} `:d})},XM=({adapter:f,tools:l})=>{const{preferences:n,updatePreferences:r}=ly(),{enabledTools:s,isToolEnabled:d}=Vx(),[h,v]=K.useState(""),[S,w]=K.useState(!1),[M,N]=K.useState(!1),[k,A]=K.useState(!1),[$,B]=K.useState(!1),[Z,Y]=K.useState(!1),[ie,pe]=K.useState(!1),[oe,me]=K.useState(!1),[J,he]=K.useState(n.customInstructions||""),[ne,Ce]=K.useState(n.customInstructionsEnabled||!1),[de,Ue]=K.useState(!1),De=K.useMemo(()=>l.map(ke=>`${ke.name}:${ke.description||""}`).sort().join("|"),[l]),Ze=K.useMemo(()=>l.filter(Pe=>d(Pe.name)).map(Pe=>Pe.name).sort().join("|"),[l,d]),Je=K.useMemo(()=>l.filter(ke=>d(ke.name)),[l,d]),ct=K.useMemo(()=>`${ne}:${J}`,[J,ne]);K.useEffect(()=>{he(n.customInstructions||""),Ce(n.customInstructionsEnabled||!1)},[n]);const F=K.useCallback(()=>ZM(Je,J,ne),[Je,J,ne]),q=K.useMemo(()=>F(),[F]);K.useEffect(()=>(l.length>0&&(R(`[InstructionManager] Regenerating instructions based on ${Je.length}/${l.length} enabled tools`),v(q),yn.setInstructions(q)),()=>{R("[InstructionManager] Cleaning up instruction generator effect")}),[De,Ze,ct,q,Je.length,l.length]);const W=K.useCallback(()=>{if(l.length>0){const ke=F();R(`[InstructionManager] Force updating instructions based on ${Je.length}/${l.length} enabled tools`),v(ke),yn.setInstructions(ke)}},[l.length,F,Je.length]),[Re,_]=K.useState(Je.length);K.useEffect(()=>{Re!==Je.length&&(_(Je.length),setTimeout(()=>{W()},50))},[Je.length,Re,W]),K.useEffect(()=>{R(`[InstructionManager] Instructions updated (${h.length} chars)`)},[h]),K.useEffect(()=>{let ke;return ke=setInterval(()=>{if(l.length>0){const Me=F();Me!==h&&(R("[InstructionManager] Detected tool enablement change, updating instructions"),v(Me),yn.setInstructions(Me))}},500),()=>{clearInterval(ke)}},[l.length,F,h]),K.useEffect(()=>{yn.updating||yn.instructions!==h&&h&&(R("[InstructionManager] Updating global state with new instructions"),yn.setInstructions(h))},[h]),K.useEffect(()=>yn.subscribe(Pe=>{Pe!==h&&(R("[InstructionManager] Syncing instructions from global state"),v(Pe))}),[]),K.useCallback(async()=>{if(h){N(!0),pe(!1);try{R("Inserting instructions into chat"),f.insertTextIntoInput(h),pe(!0),setTimeout(()=>pe(!1),2e3)}catch(ke){vc.error("Error inserting instructions:",ke)}finally{N(!1)}}},[f,h]),K.useCallback(async()=>{if(h){B(!0),Y(!1);try{R("Copying instructions to clipboard"),await navigator.clipboard.writeText(h),Y(!0),setTimeout(()=>Y(!1),2e3)}catch(ke){vc.error("Error copying instructions to clipboard:",ke)}finally{B(!1)}}},[h]),K.useCallback(async()=>{if(!(!h||!f.supportsFileUpload())){A(!0),me(!1);try{const ke=f.name==="Perplexity",Pe=f.name==="Gemini",Me=ke||Pe?"text/plain":"text/markdown",at=`instructions${ke||Pe?".txt":".md"}`;R(`Attaching instructions as ${at}`);const Xe=new File([h],at,{type:Me});await f.attachFile(Xe),me(!0),setTimeout(()=>me(!1),2e3)}catch(ke){vc.error("Error attaching instructions as file:",ke)}finally{A(!1)}}},[f,h]);const P=K.useCallback(()=>{w(!1),yn.setInstructions(h)},[h]),ge=K.useCallback(()=>{const ke=F();v(ke),yn.setInstructions(ke),w(!1)},[F]),re=K.useCallback(async ke=>{Ce(ke);try{r({customInstructionsEnabled:ke}),R(`Custom instructions ${ke?"enabled":"disabled"}`)}catch(Pe){R(`Error saving custom instructions toggle: ${Pe}`)}},[r]),Oe=K.useCallback(async()=>{Ue(!1);try{r({customInstructions:J}),R("Custom instructions saved")}catch(ke){R(`Error saving custom instructions: ${ke}`)}},[J,r]),He=K.useCallback(()=>{he(n.customInstructions||""),Ue(!1)},[n]);return T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"rounded-lg bg-white dark:bg-slate-900 shadow-sm border border-slate-200 dark:border-slate-800 sidebar-card",children:[T.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(un,{variant:"h4",className:"text-slate-700 dark:text-slate-300",children:"Custom Instructions"}),T.jsxs("label",{className:"flex items-center gap-1.5",children:[T.jsx("input",{type:"checkbox",checked:ne,onChange:ke=>re(ke.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),T.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Enable"})]})]}),T.jsx("div",{className:"flex items-center gap-1.5",children:de?T.jsxs(T.Fragment,{children:[T.jsx(ig,{onClick:Oe,color:"green",label:"Save"}),T.jsx(ig,{onClick:He,color:"red",label:"Cancel"})]}):T.jsx(ig,{onClick:()=>Ue(!0),color:"blue",label:"Edit",disabled:!ne})})]}),T.jsx("div",{className:"p-3 bg-white dark:bg-slate-900",children:de?T.jsx("textarea",{value:J,onChange:ke=>he(ke.target.value),placeholder:"Enter your custom instructions here...",className:"w-full h-32 p-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-200"}):T.jsx("div",{className:"max-h-32 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",children:ne&&J?T.jsx("pre",{className:"text-xs bg-slate-50 dark:bg-slate-800 p-3 rounded overflow-x-auto text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:J}):T.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic p-3",children:ne?"No custom instructions set":"Custom instructions disabled"})})})]}),T.jsxs("div",{className:"rounded-lg bg-white dark:bg-slate-900 shadow-sm border border-slate-200 dark:border-slate-800 sidebar-card",children:[T.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[T.jsx(un,{variant:"h4",className:"text-slate-700 dark:text-slate-300",children:"Instructions"}),T.jsx("div",{className:"flex items-center gap-1.5",children:S?T.jsxs(T.Fragment,{children:[T.jsx(ig,{onClick:P,color:"green",label:"Save"}),T.jsx(ig,{onClick:ge,color:"red",label:"Cancel"})]}):T.jsx(T.Fragment,{children:T.jsx(ig,{onClick:()=>w(!0),color:"blue",label:"Edit"})})})]}),T.jsx("div",{className:"p-3 bg-white dark:bg-slate-900",children:S?T.jsx("textarea",{value:h,onChange:ke=>v(ke.target.value),className:"w-full h-64 p-2 text-sm font-mono border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-200"}):T.jsx("div",{className:"max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",children:T.jsx("pre",{className:"text-xs bg-slate-50 dark:bg-slate-800 p-3 rounded overflow-x-auto text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:h})})})]})]})};var QM={};const dt=nt("AutomationService");let Yi={getUserPreferences:null,getCurrentAdapterState:null};async function KM(){try{Yi.getUserPreferences=async()=>{const{useUIStore:f}=await Promise.resolve().then(()=>sE);return f.getState().preferences},Yi.getCurrentAdapterState=async()=>{const{useAdapterStore:f}=await Promise.resolve().then(()=>yk),l=f.getState(),n=l.getActiveAdapter(),r=n==null?void 0:n.plugin;return{plugin:r,insertText:r!=null&&r.insertText?r.insertText.bind(r):null,attachFile:r!=null&&r.attachFile?r.attachFile.bind(r):null,submitForm:r!=null&&r.submitForm?r.submitForm.bind(r):null,isReady:!!r&&n.status==="active"&&!l.lastAdapterError}},dt.debug("[AutomationService] Store access functions initialized")}catch(f){dt.error("[AutomationService] Error initializing store access:",f)}}const cd=class cd{constructor(){z(this,"isInitialized",!1);z(this,"eventListener",null)}static getInstance(){return cd.instance||(cd.instance=new cd),cd.instance}async initialize(){if(this.isInitialized){dt.debug("[AutomationService] Already initialized, skipping");return}dt.debug("[AutomationService] Initializing automation service"),await KM(),this.setupToolExecutionListener(),this.setupMCPStateListener(),await this.exposeAutomationStateToWindow(),this.isInitialized=!0,dt.debug("[AutomationService] Automation service initialized successfully")}cleanup(){this.isInitialized&&(dt.debug("[AutomationService] Cleaning up automation service"),this.eventListener&&(document.removeEventListener("mcp:tool-execution-complete",this.eventListener),this.eventListener=null),this.isInitialized=!1,dt.debug("[AutomationService] Automation service cleaned up"))}setupToolExecutionListener(){this.eventListener&&document.removeEventListener("mcp:tool-execution-complete",this.eventListener),this.eventListener=l=>{this.handleToolExecutionComplete(l)},document.addEventListener("mcp:tool-execution-complete",this.eventListener),dt.debug("[AutomationService] Tool execution event listener registered")}setupMCPStateListener(){ue.on("connection:status-changed",({status:l})=>{dt.debug("[AutomationService] MCP connection status changed:",l)})}async handleToolExecutionComplete(l){if(!l.detail){dt.warn("[AutomationService] Tool execution complete event received without detail");return}const n=l.detail;dt.debug("[AutomationService] Tool execution complete event received:",n);try{const r=await this.getAutomationState();if(!r){dt.debug("[AutomationService] Could not get automation state, skipping automation");return}await this.exposeAutomationStateToWindow(),dt.debug("[AutomationService] Current automation state:",r),r.autoExecute&&this.handleAutoExecute(n),r.autoInsert&&!n.skipAutoInsertCheck?await this.handleAutoInsert(n)&&r.autoSubmit&&await this.handleAutoSubmit(n):dt.debug("[AutomationService] Auto Insert disabled, skipping insert and submit actions")}catch(r){dt.error("[AutomationService] Error handling tool execution complete:",r)}}async getAutomationState(){try{if(!Yi.getUserPreferences)return dt.error("[AutomationService] Store access not initialized"),null;const l=await Yi.getUserPreferences();return{autoInsert:l.autoInsert||!1,autoSubmit:l.autoSubmit||!1,autoExecute:l.autoExecute||!1,autoInsertDelay:l.autoInsertDelay||0,autoSubmitDelay:l.autoSubmitDelay||0,autoExecuteDelay:l.autoExecuteDelay||0}}catch(l){return dt.error("[AutomationService] Error getting automation state:",l),null}}async handleAutoExecute(l){var s;const n=await((s=Yi.getUserPreferences)==null?void 0:s.call(Yi)),r=(n==null?void 0:n.autoExecuteDelay)||0;r>0&&(dt.debug(`Auto Execute: Waiting ${r} seconds before execution`),await new Promise(d=>setTimeout(d,r*1e3))),dt.debug("[AutomationService] Auto Execute: Tool execution completed",{functionName:l.functionName,callId:l.callId,hasResult:!!l.result,isFileAttachment:l.isFileAttachment,fileName:l.fileName,appliedDelay:r})}async handleAutoInsert(l){var s,d;const n=await((s=Yi.getUserPreferences)==null?void 0:s.call(Yi)),r=(n==null?void 0:n.autoInsertDelay)||0;if(r>0&&(dt.debug(`Auto Insert: Waiting ${r} seconds before insertion`),await new Promise(h=>setTimeout(h,r*1e3))),dt.debug("[AutomationService] Handling auto insert",{appliedDelay:r}),l.skipAutoInsertCheck)return dt.debug("[AutomationService] Skipping auto insert due to skipAutoInsertCheck flag"),!1;try{if(!Yi.getCurrentAdapterState)return dt.error("[AutomationService] Adapter store access not initialized"),!1;const{plugin:h,insertText:v,attachFile:S,isReady:w}=await Yi.getCurrentAdapterState();if(!w||!h)return dt.warn("[AutomationService] No active adapter available for auto insert"),!1;if(dt.debug("[AutomationService] Using adapter for auto insert:",h.name),l.isFileAttachment&&l.file&&S){dt.debug("[AutomationService] Auto inserting file:",l.file.name);try{return await S(l.file)?(dt.debug("[AutomationService] File attached successfully via auto insert"),l.confirmationText&&v&&(dt.debug("[AutomationService] Inserting file confirmation text"),setTimeout(async()=>{try{await v(l.confirmationText)}catch(N){dt.error("[AutomationService] Error inserting confirmation text:",N)}},100)),!0):(dt.warn("[AutomationService] File attachment failed"),!1)}catch(M){return dt.error("[AutomationService] Error calling attachFile method:",M),dt.error("[AutomationService] attachFile context info:",{hasAttachFile:!!S,attachFileType:typeof S,activePluginName:h==null?void 0:h.name,fileName:(d=l.file)==null?void 0:d.name}),!1}}else if(l.result&&v){dt.debug("[AutomationService] Auto inserting text result");try{return await v(l.result)?(dt.debug("[AutomationService] Text inserted successfully via auto insert"),!0):(dt.warn("[AutomationService] Text insertion failed"),!1)}catch(M){return dt.error("[AutomationService] Error calling insertText method:",M),dt.error("[AutomationService] insertText context info:",{hasInsertText:!!v,insertTextType:typeof v,activePluginName:h==null?void 0:h.name}),!1}}else return dt.warn("[AutomationService] No valid insertion method found for auto insert",{hasResult:!!l.result,isFileAttachment:l.isFileAttachment,hasFile:!!l.file,hasInsertText:!!v,hasAttachFile:!!S}),!1}catch(h){return dt.error("[AutomationService] Error during auto insert:",h),!1}}async handleAutoSubmit(l){var s;const n=await((s=Yi.getUserPreferences)==null?void 0:s.call(Yi)),r=(n==null?void 0:n.autoSubmitDelay)||0;r>0&&(dt.debug(`Auto Submit: Waiting ${r} seconds before submission`),await new Promise(d=>setTimeout(d,r*1e3))),dt.debug("[AutomationService] Handling auto submit",{appliedDelay:r});try{if(!Yi.getCurrentAdapterState)return dt.error("[AutomationService] Adapter store access not initialized"),!1;const{plugin:d,submitForm:h,isReady:v}=await Yi.getCurrentAdapterState();if(!v||!d||!h)return dt.warn("[AutomationService] No active adapter or submit capability available for auto submit"),!1;dt.debug("[AutomationService] Using adapter for auto submit:",d.name),await new Promise(S=>setTimeout(S,800));try{return await h()?(dt.debug("[AutomationService] Form submitted successfully via auto submit"),!0):(dt.warn("[AutomationService] Form submission failed"),!1)}catch(S){return dt.error("[AutomationService] Error calling submitForm method:",S),dt.error("[AutomationService] submitForm context info:",{hasSubmitForm:!!h,submitFormType:typeof h,activePluginName:d==null?void 0:d.name}),!1}}catch(d){return dt.error("[AutomationService] Error during auto submit:",d),!1}}isServiceInitialized(){return this.isInitialized}async getCurrentAutomationState(){return await this.getAutomationState()}async triggerTestAutomation(l){dt.debug("[AutomationService] Triggering test automation"),await this.handleToolExecutionComplete(new CustomEvent("mcp:tool-execution-complete",{detail:l}))}async exposeAutomationStateToWindow(){try{const l=await this.getAutomationState();l&&(window.__mcpAutomationState=l,dt.debug("[AutomationService] Exposed automation state to window:",l))}catch(l){dt.error("[AutomationService] Error exposing automation state to window:",l)}}async updateAutomationStateOnWindow(){await this.exposeAutomationStateToWindow()}};z(cd,"instance",null);let yc=cd;const xc=yc.getInstance();async function JM(){await xc.initialize()}function WM(){xc.cleanup()}typeof window<"u"&&QM.NODE_ENV==="development"&&(window.__automationService={service:xc,getState:async()=>await xc.getCurrentAutomationState(),testAutoInsert:async f=>xc.triggerTestAutomation({result:f,isFileAttachment:!1,skipAutoInsertCheck:!1}),testAutoSubmit:async()=>xc.triggerTestAutomation({result:"Test result for auto submit",isFileAttachment:!1,skipAutoInsertCheck:!0}),testFileAttachment:async(f="test.txt",l="Test file content")=>{const n=new File([l],f,{type:"text/plain"});return xc.triggerTestAutomation({isFileAttachment:!0,file:n,fileName:f,confirmationText:`File ${f} attached successfully`,skipAutoInsertCheck:!1})}},dt.debug("[AutomationService] Debug utilities exposed on window.__automationService"));const WE=Object.freeze(Object.defineProperty({__proto__:null,AutomationService:yc,automationService:xc,cleanupAutomationService:WM,initializeAutomationService:JM},Symbol.toStringTag,{value:"Module"})),Wx=nt("Settings"),fy={autoInsertDelay:2,autoSubmitDelay:2,autoExecuteDelay:2},eA=()=>{const{preferences:f,updatePreferences:l}=ly(),n=(r,s)=>{const d=Math.max(0,parseInt(s)||0);Wx.debug(`${r} delay changed to: ${d}`),l({[`${r}Delay`]:d});try{const h=JSON.parse(localStorage.getItem("mcpDelaySettings")||"{}");localStorage.setItem("mcpDelaySettings",JSON.stringify({...h,[`${r}Delay`]:d}))}catch(h){Wx.error("[Settings] Error storing delay settings:",h)}yc.getInstance().updateAutomationStateOnWindow().catch(console.error)};return Zu.useEffect(()=>{try{const r=JSON.parse(localStorage.getItem("mcpDelaySettings")||"{}");Object.keys(r).length===0?(l(fy),localStorage.setItem("mcpDelaySettings",JSON.stringify(fy))):l(r)}catch(r){Wx.error("[Settings] Error loading stored delay settings:",r),l(fy),localStorage.setItem("mcpDelaySettings",JSON.stringify(fy))}},[l]),T.jsx("div",{className:"p-4 space-y-4",children:T.jsx(mc,{className:"border-slate-200 dark:border-slate-700 dark:bg-slate-800",children:T.jsxs(bc,{className:"p-4",children:[T.jsx(un,{variant:"h4",className:"mb-4 text-slate-700 dark:text-slate-300",children:"Automation Delay Settings"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"auto-insert-delay",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Auto Insert Delay (seconds)"}),T.jsx("input",{id:"auto-insert-delay",type:"number",min:"0",value:f.autoInsertDelay||0,onChange:r=>n("autoInsert",r.target.value),disabled:!1,className:ot("w-full p-2 text-sm border rounded-md","bg-white dark:bg-slate-900","border-slate-300 dark:border-slate-600","text-slate-900 dark:text-slate-100")}),T.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Delay before auto-inserting content"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"auto-submit-delay",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Auto Submit Delay (seconds)"}),T.jsx("input",{id:"auto-submit-delay",type:"number",min:"0",value:f.autoSubmitDelay||0,onChange:r=>n("autoSubmit",r.target.value),disabled:!1,className:ot("w-full p-2 text-sm border rounded-md","bg-white dark:bg-slate-900","border-slate-300 dark:border-slate-600","text-slate-900 dark:text-slate-100")}),T.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Delay before auto-submitting form"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"auto-execute-delay",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Auto Execute Delay (seconds)"}),T.jsx("input",{id:"auto-execute-delay",type:"number",min:"0",value:f.autoExecuteDelay||0,onChange:r=>n("autoExecute",r.target.value),disabled:!1,className:ot("w-full p-2 text-sm border rounded-md","bg-white dark:bg-slate-900","border-slate-300 dark:border-slate-600","text-slate-900 dark:text-slate-100")}),T.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Delay before auto-executing functions"})]})]})]})})})};var tA={};nt("Sidebar");const eC=()=>{const f=!!window.activeSidebarManager;return R(`[Sidebar] checkActiveSidebarManager: ${f}`),f},eS=["light","dark","system"],tC=56,gy=320,nA=({initialPreferences:f})=>{const l=K.useRef(`sidebar-${Date.now()}-${Math.random().toString(36).substring(2,11)}`);R(`[Sidebar] Component initializing with preferences: ${f?"loaded":"null"} (ID: ${l.current})`);const n=RE(),r=K.useMemo(()=>({insertTextIntoInput:Be=>n.insertText(Be),triggerSubmission:()=>n.submitForm(),supportsFileUpload:()=>n.hasCapability("file-attachment"),attachFile:Be=>n.attachFile(Be),name:n.activeAdapterName||"Unknown",isReady:n.isReady,status:n.status,capabilities:n.capabilities}),[n]),{theme:s,setTheme:d}=Kk(),{isVisible:h,isMinimized:v,width:S,toggleSidebar:w,toggleMinimize:M,resizeSidebar:N,setSidebarVisibility:k}=Jk(),{preferences:A,updatePreferences:$}=ly(),{status:B}=Gx(),[Z,Y]=K.useState(null),[ie,pe]=K.useState(!1),[oe,me]=K.useState(!1),[J,he]=K.useState(0),[ne,Ce]=K.useState(!0);let de;try{de=IE()}catch(Be){Be instanceof Error&&Be.message.includes("Extension context invalidated")?(R("[Sidebar] Extension context invalidated during hook initialization"),Zu.useEffect(()=>{pe(!0),Y("Extension was reloaded. Please refresh the page to restore functionality.")},[]),de={availableTools:[],sendMessage:async()=>"Extension context invalidated",refreshTools:async()=>[],forceReconnect:async()=>!1,serverStatus:"disconnected",updateServerConfig:async()=>!1,getServerConfig:async()=>({uri:""})}):(R(`[Sidebar] Unexpected error in useMcpCommunication: ${Be instanceof Error?Be.message:String(Be)}`),de={availableTools:[],sendMessage:async()=>"Communication error",refreshTools:async()=>[],forceReconnect:async()=>!1,serverStatus:"disconnected",updateServerConfig:async()=>!1,getServerConfig:async()=>({uri:""})})}const Ue=B||(de==null?void 0:de.serverStatus)||"disconnected",De=(de==null?void 0:de.availableTools)||[],Ze=(de==null?void 0:de.sendMessage)||(async()=>"Communication not available"),Je=(de==null?void 0:de.refreshTools)||(async()=>[]),ct=(de==null?void 0:de.forceReconnect)||(async()=>!1);K.useEffect(()=>{me(!0),R(`[Sidebar] Component mounted (ID: ${l.current})`);const Be=setTimeout(()=>{Ce(!1),R(`[Sidebar] Component initialization completed (ID: ${l.current})`)},100);return()=>{clearTimeout(Be),me(!1),R(`[Sidebar] Component unmounting (ID: ${l.current})`)}},[]);const F=oe&&!ne;K.useEffect(()=>{F&&R(`[Sidebar] serverStatus changed to: "${Ue}", passing to ServerStatus component`)},[Ue,F]),K.useEffect(()=>{eC();const Be=setInterval(()=>{eC()||R("[Sidebar] WARNING: activeSidebarManager reference lost - this may cause push mode issues")},2e3);return()=>{clearInterval(Be)}},[]),K.useEffect(()=>{const Be=[],it=ue.on("connection:status-changed",Cn=>{R(`[Sidebar] Connection status event received: ${Cn.status}${Cn.error?` (${Cn.error})`:""}`),Cn.status==="connected"&&(R("[Sidebar] Connection established, refreshing tools..."),Je(!0).catch(ml=>{R(`[Sidebar] Failed to refresh tools after connection: ${ml}`)}))});Be.push(it);const $e=ue.on("tool:list-updated",Cn=>{R(`[Sidebar] Tool list updated event received: ${Cn.tools.length} tools`)});Be.push($e);const ut=ue.on("tool:execution-completed",Cn=>{R(`[Sidebar] Tool execution completed: ${Cn.execution.toolName} (ID: ${Cn.execution.id})`)});Be.push(ut);const Pn=ue.on("tool:execution-failed",Cn=>{R(`[Sidebar] Tool execution failed: ${Cn.toolName} - ${Cn.error}`)});Be.push(Pn);const Vn=ue.on("context:bridge-invalidated",Cn=>{R(`[Sidebar] Context bridge invalidated: ${Cn.error}`),pe(!0),Y("Extension was reloaded. Please refresh the page to restore functionality.")});Be.push(Vn);const hl=ue.on("context:bridge-restored",()=>{R("[Sidebar] Context bridge restored"),pe(!1),Z!=null&&Z.includes("Extension was reloaded")&&Y(null),ct().catch(Cn=>{R(`[Sidebar] Failed to reconnect after context restoration: ${Cn}`)})});return Be.push(hl),()=>{Be.forEach(Cn=>Cn())}},[Je,ct,Z]),K.useEffect(()=>{const it=setTimeout(async()=>{if(Ue==="connected"&&De.length===0){R("[Sidebar] Component mounted with connection, loading initial tools...");try{await Je(!0)}catch($e){R(`[Sidebar] Failed to load initial tools: ${$e}`)}}},1e3);return()=>clearTimeout(it)},[Ue,De.length]);const q=v??(f==null?void 0:f.isMinimized)??!1,W=S||(f==null?void 0:f.sidebarWidth)||gy,Re=A.isPushMode??(f==null?void 0:f.isPushMode)??!1;A.autoSubmit??(f==null||f.autoSubmit),K.useEffect(()=>{R(`[Sidebar] State update - visible: ${h}, minimized: ${q}, pushMode: ${Re}, width: ${W}`)},[h,q,Re,W]);const[_,P]=K.useState("availableTools"),[ge,re]=K.useState(!1),[Oe,He]=K.useState(!1),[ke,Pe]=K.useState(!1),Me=K.useRef(null),_e=K.useRef(null),at=K.useRef(!1),Xe=K.useRef(gy),ft=K.useRef(null),yt=K.useCallback(async(Be=10,it=50)=>{for(let $e=0;$e<Be;$e++){const ut=window.activeSidebarManager;if(ut)return R(`[Sidebar] activeSidebarManager found after ${$e} attempts`),ut;const Pn=it*Math.pow(2,$e);R(`[Sidebar] activeSidebarManager not available, retrying in ${Pn}ms (attempt ${$e+1}/${Be})`),await new Promise(Vn=>setTimeout(Vn,Pn))}return R(`[Sidebar] activeSidebarManager not available after ${Be} attempts`),null},[]),nn=K.useCallback(async Be=>{try{const it=await yt(5,50);if(!it){R("[Sidebar] Sidebar manager not available for theme application - will apply when ready.");return}try{it.applyThemeClass(Be)||R("[Sidebar] Theme application failed but continuing...")}catch($e){R(`[Sidebar] Theme application error: ${$e instanceof Error?$e.message:String($e)}`)}}catch(it){R(`[Sidebar] Error waiting for SidebarManager during theme application: ${it instanceof Error?it.message:String(it)}`)}},[yt]),Ei=K.useRef(0);K.useEffect(()=>{const Be=Date.now();if(Be-Ei.current<100)return;Ei.current=Be;try{nn(s)}catch(ut){R(`[Sidebar] Theme application error during useEffect: ${ut instanceof Error?ut.message:String(ut)}`)}const it=window.matchMedia("(prefers-color-scheme: dark)"),$e=()=>{if(s==="system"){const ut=Date.now();if(ut-Ei.current<100)return;Ei.current=ut;try{nn("system")}catch(Pn){R(`[Sidebar] Theme reapplication error: ${Pn instanceof Error?Pn.message:String(Pn)}`)}}};return it.addEventListener("change",$e),()=>{it.removeEventListener("change",$e)}},[s,nn]),K.useEffect(()=>{R(`[Sidebar] Push mode effect triggered - visible: ${h}, pushMode: ${Re}, minimized: ${q}, width: ${W}`),(async()=>{try{const it=await yt();if(it){R("[Sidebar] activeSidebarManager available: true");try{h?(R(`[Sidebar] Applying push mode (${Re}, minimized: ${q}) and width (${W})`),it.setPushContentMode(Re,q?tC:W,q)):(R("[Sidebar] Disabling push mode - sidebar not visible"),it.setPushContentMode(!1))}catch($e){R(`[Sidebar] Error applying push mode settings: ${$e instanceof Error?$e.message:String($e)}`)}}else R("[Sidebar] activeSidebarManager not available after retries - cannot apply push mode")}catch(it){R(`[Sidebar] Error in push mode application process: ${it instanceof Error?it.message:String(it)}`)}})()},[Re,W,q,h,yt]),K.useEffect(()=>()=>{(async()=>{try{const it=await yt(5,50);it?(R("[Sidebar] Component unmounting - disabling push mode"),it.setPushContentMode(!1)):R("[Sidebar] Component unmounting - could not access SidebarManager for cleanup")}catch(it){R(`[Sidebar] Error during push mode cleanup: ${it instanceof Error?it.message:String(it)}`)}})()},[yt]);const Un=()=>{ft.current!==null&&clearTimeout(ft.current),He(!0),Me.current&&Me.current.classList.add("sidebar-transitioning"),ft.current=window.setTimeout(()=>{He(!1),Me.current&&Me.current.classList.remove("sidebar-transitioning"),ft.current=null},500)},Tt=()=>{Un(),Me.current&&(Me.current.style.transform="scale(0.98)",setTimeout(()=>{Me.current&&(Me.current.style.transform="")},100)),M("user action")},En=K.useCallback(Be=>{at.current||(at.current=!0,Me.current&&Me.current.classList.add("resizing"));const it=Math.max(gy,Be);if(Re)try{const $e=window.activeSidebarManager;$e&&typeof $e.updatePushModeStyles=="function"&&$e.updatePushModeStyles(it)}catch($e){R(`[Sidebar] Error updating push mode styles: ${$e instanceof Error?$e.message:String($e)}`)}window.requestAnimationFrame?window.requestAnimationFrame(()=>{N(it),ft.current!==null&&clearTimeout(ft.current),ft.current=window.setTimeout(()=>{Me.current&&Me.current.classList.remove("resizing"),Xe.current=it,at.current=!1,ft.current=null},200)}):N(it)},[Re]),Ne=Be=>{$({isPushMode:Be}),R(`[Sidebar] Push mode ${Be?"enabled":"disabled"}`)},Gt=async()=>{R("[Sidebar] Refreshing tools"),re(!0);try{await Je(!0),R("[Sidebar] Tools refreshed successfully")}catch(Be){R(`[Sidebar] Error refreshing tools (non-blocking): ${Be instanceof Error?Be.message:String(Be)}`)}finally{re(!1)}},Ae=()=>{const it=(eS.indexOf(s)+1)%eS.length,$e=eS[it];d($e),R(`[Sidebar] Theme toggled to: ${$e}`)},st=De.map(Be=>({name:Be.name,schema:Be.schema,description:Be.description||""}));typeof window<"u"&&(window.availableTools=De);const kt=()=>{switch(s){case"light":return"sun";case"dark":return"moon";case"system":return"laptop";default:return"laptop"}};return T.jsxs("div",{ref:Me,className:ot("fixed top-0 right-0 h-screen bg-white dark:bg-slate-900 shadow-lg z-50 flex flex-col border-l border-slate-200 dark:border-slate-700 sidebar",Re?"push-mode":"",at.current?"resizing":"",q?"collapsed":"",Oe?"sidebar-transitioning":""),style:{width:q?`${tC}px`:`${W}px`},children:[!q&&T.jsx(PM,{onResize:En,minWidth:gy,maxWidth:500,className:"absolute left-0 top-0 bottom-0 w-1 cursor-ew-resize hover:bg-indigo-400 dark:hover:bg-indigo-600 z-[60] transition-colors duration-300"}),T.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex items-center justify-between flex-shrink-0 shadow-sm sidebar-header",children:q?T.jsx(Ya,{variant:"ghost",size:"icon",onClick:Tt,"aria-label":"Expand sidebar",className:"mx-auto hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-all duration-200 hover:scale-110",children:T.jsx(Nn,{name:"chevron-left",className:"h-4 w-4 text-slate-700 dark:text-slate-300"})}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsxs("a",{href:"https://mcpsuperassistant.ai/",target:"_blank",rel:"noopener noreferrer","aria-label":"Visit MCP Super Assistant Website",className:"block",children:[" ",T.jsx("img",{src:chrome.runtime.getURL("icon-34.png"),alt:"MCP Logo",className:"w-8 h-8 rounded-md "})]}),T.jsxs(T.Fragment,{children:[T.jsx("a",{href:"https://mcpsuperassistant.ai/",target:"_blank",rel:"noopener noreferrer",className:"text-slate-800 dark:text-slate-100 hover:text-slate-600 dark:hover:text-slate-300 transition-colors duration-150 no-underline","aria-label":"Visit MCP Super Assistant Website",children:T.jsx(un,{variant:"h4",className:"font-semibold",children:"MCP SuperAssistant"})}),T.jsx("a",{href:"https://mcpsuperassistant.ai/",target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 transition-colors duration-150","aria-label":"Visit MCP Super Assistant Website",children:T.jsx(Nn,{name:"arrow-up-right",size:"xs",className:"inline-block align-baseline"})})]})]}),T.jsxs("div",{className:"flex items-center space-x-2 pr-1",children:[T.jsxs(Ya,{variant:"ghost",size:"icon",onClick:Ae,"aria-label":`Toggle theme (current: ${s})`,className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-all duration-200 hover:scale-105",children:[T.jsx(Nn,{name:kt(),size:"sm",className:"transition-all text-indigo-600 dark:text-indigo-400"}),T.jsx("span",{className:"sr-only",children:"Toggle theme"})]}),T.jsx(Ya,{variant:"ghost",size:"icon",onClick:Tt,"aria-label":"Minimize sidebar",className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-all duration-200 hover:scale-105",children:T.jsx(Nn,{name:"chevron-right",className:"h-4 w-4 text-slate-700 dark:text-slate-300"})})]})]})}),T.jsx("div",{className:"sidebar-inner-content flex-1 relative overflow-hidden bg-white dark:bg-slate-900",children:T.jsx("div",{ref:_e,className:ot("absolute top-0 bottom-0 right-0 transition-transform duration-200 ease-in-out",q?"translate-x-full":"translate-x-0",Oe?"will-change-transform":""),style:{width:`${W}px`},children:T.jsxs("div",{className:"flex flex-col h-full",children:[Z&&T.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 p-3 flex-shrink-0",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-start space-x-2",children:[T.jsx(Nn,{name:"alert-triangle",size:"sm",className:"text-red-600 dark:text-red-400 mt-0.5"}),T.jsxs("div",{className:"flex-1",children:[T.jsx(un,{variant:"subtitle",className:"text-red-800 dark:text-red-200 font-medium",children:ie?"Extension Reloaded":"Warning"}),T.jsx(un,{variant:"caption",className:"text-red-700 dark:text-red-300",children:ie?"The extension was reloaded. Please refresh this page to restore full functionality.":`Some features may be limited: ${Z}`}),ie&&T.jsx("div",{className:"mt-2",children:T.jsx(Ya,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800 mr-2",children:"Refresh Page"})})]})]}),!ie&&T.jsx(Ya,{variant:"outline",size:"sm",onClick:()=>Y(null),className:"border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800",children:"Dismiss"})]})}),T.jsxs("div",{className:"py-4 px-4 space-y-4 overflow-y-auto flex-shrink-0",children:[T.jsx(qM,{status:Ue}),T.jsx(mc,{className:"sidebar-card border-slate-200 dark:border-slate-700 dark:bg-slate-800 flex-shrink-0 overflow-hidden rounded-lg shadow-sm transition-shadow duration-300",children:T.jsxs(bc,{className:"p-3 space-y-3",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx(un,{variant:"subtitle",className:"text-slate-700 dark:text-slate-300 font-medium",children:"Push Content Mode"}),T.jsx(_M,{label:"Push Content Mode",checked:Re,onChange:Ne})]}),tA.NODE_ENV==="development"&&T.jsx(Ya,{variant:"outline",size:"sm",className:"w-full mt-2 border-slate-200 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-700",onClick:()=>{var it;const Be=(it=window.activeSidebarManager)==null?void 0:it.getShadowHost();Be&&Be.shadowRoot?R("Shadow DOM debug requested"):R("Cannot debug: Shadow DOM not found")},children:"Debug Styles"})]})}),T.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-2",children:T.jsxs("div",{className:"flex",children:[T.jsx("button",{className:ot("py-2 px-4 font-medium text-sm transition-all duration-200",_==="availableTools"?"border-b-2 border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-t-lg"),onClick:()=>P("availableTools"),children:"Available Tools"}),T.jsx("button",{className:ot("py-2 px-4 font-medium text-sm transition-all duration-200",_==="instructions"?"border-b-2 border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-t-lg"),onClick:()=>P("instructions"),children:"Instructions"}),T.jsx("button",{className:ot("py-2 px-4 font-medium text-sm transition-all duration-200",_==="settings"?"border-b-2 border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-t-lg"),onClick:()=>P("settings"),children:"Settings"})]})})]}),T.jsxs("div",{className:"flex-1 min-h-0 px-4 pb-4 overflow-hidden",children:[T.jsx("div",{className:ot("h-full overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",{hidden:_!=="availableTools"}),children:T.jsx(mc,{className:"border-slate-200 dark:border-slate-700 dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300",children:T.jsx(bc,{className:"p-0",children:T.jsx(GM,{tools:De,onExecute:Ze,onRefresh:Gt,isRefreshing:ge})})})}),T.jsx("div",{className:ot("h-full overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",{hidden:_!=="instructions"}),children:T.jsx(mc,{className:"border-slate-200 dark:border-slate-700 dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300",children:T.jsx(bc,{className:"p-0",children:T.jsx(XM,{adapter:r,tools:st})})})}),T.jsx("div",{className:ot("h-full overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",{hidden:_!=="settings"}),children:T.jsx(eA,{})})]})]})})})]})},tS=()=>{try{const f=JSON.parse(localStorage.getItem("mcp-super-assistant-ui-store")||"{}");if(f.state&&f.state.preferences)return f.state.preferences}catch(f){R(`[SidebarManager] Error reading Zustand store: ${f}`)}return{autoSubmit:!1,autoInsert:!1,autoExecute:!1,autoInsertDelay:500,autoSubmitDelay:1e3,autoExecuteDelay:500,notifications:!0,theme:"system",language:navigator.language||"en-US",isPushMode:!1,sidebarWidth:320,isMinimized:!1,customInstructions:"",customInstructionsEnabled:!1}},Ye=class Ye extends Yk{constructor(n){super(n);z(this,"lastToolOutputsHash","");z(this,"lastMcpToolsHash","");z(this,"isFirstLoad",!0);z(this,"isRendering",!1);z(this,"lastRenderTime",0);z(this,"isInitializing",!1);z(this,"initializationTimeout",null);window.activeSidebarManager=this}static getInstance(n){switch(n){case"perplexity":return Ye.perplexityInstance||(Ye.perplexityInstance=new Ye(n)),Ye.perplexityInstance;case"aistudio":return Ye.aistudioInstance||(Ye.aistudioInstance=new Ye(n)),Ye.aistudioInstance;case"chatgpt":return Ye.chatgptInstance||(Ye.chatgptInstance=new Ye(n)),Ye.chatgptInstance;case"grok":return Ye.grokInstance||(Ye.grokInstance=new Ye(n)),Ye.grokInstance;case"gemini":return Ye.geminiInstance||(Ye.geminiInstance=new Ye(n)),Ye.geminiInstance;case"openrouter":return Ye.openrouterInstance||(Ye.openrouterInstance=new Ye(n)),Ye.openrouterInstance;case"deepseek":return Ye.deepseekInstance||(Ye.deepseekInstance=new Ye(n)),Ye.deepseekInstance;case"kagi":return Ye.kagiInstance||(Ye.kagiInstance=new Ye(n)),Ye.kagiInstance;case"t3chat":return Ye.t3chatInstance||(Ye.t3chatInstance=new Ye(n)),Ye.t3chatInstance;default:return R(`Creating new SidebarManager for unknown site type: ${n}`),new Ye(n)}}async show(n=!0){(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(R("[SidebarManager] Ensuring window.activeSidebarManager reference is set during show()"),window.activeSidebarManager=this),R("[SidebarManager] Loading preferences from Zustand store before show()");try{const r=tS();if(R(`[SidebarManager] Loaded Zustand preferences for show(): ${JSON.stringify(r)}`),await this.initialize(),this.shadowHost){const s=r.isMinimized??!1;this.shadowHost.setAttribute("data-initial-minimized",s?"true":"false"),R(`[SidebarManager] Set data-initial-minimized to '${s?"true":"false"}'`)}n&&(this.syncZustandVisibilityState(!0),R("[SidebarManager] Synced visibility state to true (user-triggered show)"))}catch(r){R(`[SidebarManager] Error loading Zustand preferences in show(): ${r instanceof Error?r.message:String(r)}`)}return super.show()}createSidebarContent(){const n=tS();return R("[SidebarManager] Creating sidebar content with fresh Zustand preferences"),T.jsx(nA,{initialPreferences:n})}showWithToolOutputs(){if((!window.activeSidebarManager||window.activeSidebarManager!==this)&&(R("[SidebarManager] Ensuring window.activeSidebarManager reference is set in showWithToolOutputs()"),window.activeSidebarManager=this),this.isInitializing){R("[SidebarManager] Already initializing, skipping duplicate call");return}this.initializationTimeout&&(clearTimeout(this.initializationTimeout),this.initializationTimeout=null),this.isInitializing=!0,R("[SidebarManager] Scheduling sidebar initialization with 500ms delay"),this.initializationTimeout=setTimeout(async()=>{var n,r;try{R("[SidebarManager] Starting delayed sidebar initialization"),(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(R("[SidebarManager] Re-setting window.activeSidebarManager reference after delay"),window.activeSidebarManager=this);const s=JSON.parse(localStorage.getItem("mcp-super-assistant-ui-store")||"{}"),d=((n=s.state)==null?void 0:n.mcpEnabled)??!0,h=(r=s.state)==null?void 0:r.sidebar,v=h&&typeof h.isVisible=="boolean"?h.isVisible:!0;if(R(`[SidebarManager] MCP enabled: ${d}, Last visibility state: ${v}, Storage exists: ${!!h}`),!d){R("[SidebarManager] MCP is disabled, skipping sidebar initialization");return}R("[SidebarManager] MCP is enabled, initializing sidebar..."),await this.initializeCollapsedStateWithErrorHandling(),v?R("[SidebarManager] Sidebar shown successfully with preferences restored"):(R("[SidebarManager] Hiding sidebar UI (MCP still active in background)"),this.shadowHost&&(this.shadowHost.style.display="none",this.shadowHost.style.opacity="0",this._isVisible=!1),R("[SidebarManager] Sidebar UI hidden (MCP active in background)"))}catch(s){R(`[SidebarManager] Error during initialization: ${s instanceof Error?s.message:String(s)}`),await this.fallbackInitialization()}finally{this.isInitializing=!1,this.isFirstLoad=!1,this.initializationTimeout=null}},500)}getIsInitialized(){return!this.isFirstLoad}async initializeCollapsedState(){this.isFirstLoad=!1,(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(R("[SidebarManager] Ensuring window.activeSidebarManager reference is set in initializeCollapsedState()"),window.activeSidebarManager=this),await this.initialize();try{const n=tS(),r=n.isMinimized??!1,s=n.isPushMode??!1,d=n.sidebarWidth||320;if(R(`[SidebarManager] Using Zustand preferences for initialization: minimized=${r}, pushMode=${s}, width=${d}`),this.shadowHost&&(r?(this.shadowHost.setAttribute("data-initial-minimized","true"),this.shadowHost.style.width="56px"):this.shadowHost.setAttribute("data-initial-minimized","false"),this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized")),this._isVisible=!0,s){const h=r?56:d;this.setPushContentMode(!0,h,r),this.verifyAndRetryPushMode(h,r)}setTimeout(()=>{(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(R("[SidebarManager] Final check: Re-setting window.activeSidebarManager reference before React render"),window.activeSidebarManager=this),R("[SidebarManager] Rendering React component with all initial state ready"),this.render(),R(`[SidebarManager] Sidebar fully initialized: minimized=${r}, pushMode=${s}`)},20)}catch(n){R(`[SidebarManager] Error during initialization: ${n instanceof Error?n.message:String(n)}`),await this.initialize(),this.shadowHost&&(this.shadowHost.setAttribute("data-initial-minimized","false"),this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized"),this._isVisible=!0,this.render(),R("[SidebarManager] Fallback initialization completed"))}}async initializeCollapsedStateWithErrorHandling(){try{await this.initializeCollapsedState()}catch(n){R(`[SidebarManager] Error in initializeCollapsedState: ${n instanceof Error?n.message:String(n)}`),await this.fallbackInitialization()}}async safeInitialize(){try{await this.initialize()}catch(n){R(`[SidebarManager] Error in safeInitialize: ${n instanceof Error?n.message:String(n)}`)}}async fallbackInitialization(){try{await this.initialize(),this.shadowHost&&(this.shadowHost.setAttribute("data-initial-minimized","false"),this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized"),this._isVisible=!0,setTimeout(()=>{try{this.render(),R("[SidebarManager] Fallback initialization completed")}catch(n){R(`[SidebarManager] Fallback render failed: ${n instanceof Error?n.message:String(n)}`)}},50))}catch(n){R(`[SidebarManager] Even fallback initialization failed: ${n instanceof Error?n.message:String(n)}`)}}verifyAndRetryPushMode(n,r){const s=document.documentElement.classList.contains("push-mode-enabled"),d=document.documentElement.style.marginRight!=="",h=document.documentElement.style.width!=="",v=s&&d&&h,w=window.getComputedStyle(document.documentElement).marginRight,M=`${n}px`,N=w===M;!v||!N?(R(`[SidebarManager] Push mode verification failed. Applied: ${v}, Margin correct: ${N} (expected: ${M}, got: ${w})`),N||(R("[SidebarManager] Falling back to transform-based push mode"),document.documentElement.classList.add("push-mode-transform"),document.documentElement.style.setProperty("transform",`translateX(-${n}px)`,"important")),setTimeout(()=>{this.setPushContentMode(!0,n,r),setTimeout(()=>{const k=document.documentElement.classList.contains("push-mode-enabled"),A=document.documentElement.style.marginRight!=="";document.documentElement.style.width;const $=window.getComputedStyle(document.documentElement),B=$.marginRight===M||$.transform.includes("translateX");k&&(A||B)?R("[SidebarManager] Push mode successfully applied after retry"):(R("[SidebarManager] Push mode still failed after retry - website may be interfering"),R(`[SidebarManager] Final state - margin-right: ${$.marginRight}, transform: ${$.transform}`))},100)},50)):R("[SidebarManager] Push mode verification successful")}refreshContent(){if(R("[SidebarManager] Content refresh requested - relying on React state updates instead of full re-render"),this.shadowHost){const n=new CustomEvent("mcpSidebarRefresh",{detail:{timestamp:Date.now()}});this.shadowHost.dispatchEvent(n)}}render(){const n=Date.now();if(this.isRendering){R("[SidebarManager] BLOCKED: Render already in progress, skipping duplicate render");return}if(n-this.lastRenderTime<100){R("[SidebarManager] BLOCKED: Render throttled, too soon since last render");return}this.isRendering=!0,this.lastRenderTime=n;try{R("[SidebarManager] Starting protected render"),super.render(),R("[SidebarManager] Protected render completed successfully")}catch(r){R(`[SidebarManager] Error in protected render: ${r instanceof Error?r.message:String(r)}`)}finally{setTimeout(()=>{this.isRendering=!1},50)}}syncZustandVisibilityState(n){try{ia.getState().setSidebarVisibility(n,"sidebar-manager-sync"),R(`[SidebarManager] Synced Zustand visibility state to: ${n}`)}catch(r){R(`[SidebarManager] Error syncing Zustand visibility state: ${r}`);try{const s=JSON.parse(localStorage.getItem("mcp-super-assistant-ui-store")||"{}");s.state&&s.state.sidebar?(s.state.sidebar.isVisible=n,localStorage.setItem("mcp-super-assistant-ui-store",JSON.stringify(s)),R(`[SidebarManager] Fallback: Synced Zustand visibility state to: ${n}`)):R("[SidebarManager] Could not find Zustand sidebar state to update")}catch(s){R(`[SidebarManager] Fallback sync also failed: ${s}`)}}}destroy(){switch(window.activeSidebarManager===this&&(window.activeSidebarManager=void 0),this.siteType){case"perplexity":Ye.perplexityInstance===this&&(Ye.perplexityInstance=null);break;case"chatgpt":Ye.chatgptInstance===this&&(Ye.chatgptInstance=null);break;case"grok":Ye.grokInstance===this&&(Ye.grokInstance=null);break;case"gemini":Ye.geminiInstance===this&&(Ye.geminiInstance=null);break;case"aistudio":Ye.aistudioInstance===this&&(Ye.aistudioInstance=null);break;case"openrouter":Ye.openrouterInstance===this&&(Ye.openrouterInstance=null);break;case"deepseek":Ye.deepseekInstance===this&&(Ye.deepseekInstance=null);break;case"kagi":Ye.kagiInstance===this&&(Ye.kagiInstance=null);break;case"t3chat":Ye.t3chatInstance===this&&(Ye.t3chatInstance=null);break}R(`[SidebarManager] Destroyed sidebar manager for site type: ${this.siteType}`),super.destroy()}isNavigationEvent(){return window.location.hostname==="gemini.google.com"&&window.location.href.includes("/app")}safeDestroy(){if(this.isNavigationEvent()){R(`[SidebarManager] Skipping destroy during navigation for ${this.siteType}`);return}R(`[SidebarManager] Performing actual destroy for ${this.siteType}`),this.destroy()}async hide(){return this.syncZustandVisibilityState(!1),super.hide()}};z(Ye,"perplexityInstance",null),z(Ye,"chatgptInstance",null),z(Ye,"grokInstance",null),z(Ye,"geminiInstance",null),z(Ye,"aistudioInstance",null),z(Ye,"openrouterInstance",null),z(Ye,"deepseekInstance",null),z(Ye,"kagiInstance",null),z(Ye,"t3chatInstance",null);let nS=Ye;const dn=nt("SidebarPlugin");class iA{constructor(){z(this,"name","sidebar-plugin");z(this,"version","1.0.0");z(this,"hostnames",[/.*/]);z(this,"capabilities",["dom-manipulation"]);z(this,"context",null);z(this,"sidebarManager",null);z(this,"isActive",!1);z(this,"cleanupFunctions",[]);z(this,"isShowingSidebar",!1)}async initialize(l){this.context=l,dn.debug("Initializing sidebar plugin..."),this.setupEventListeners(),dn.debug("Sidebar plugin initialized successfully")}async activate(){var r;if(this.isActive){dn.warn("Plugin already active");return}const l=window.location.hostname,n=window.location.pathname;if((l==="github.com"||l.endsWith(".github.com"))&&!n.startsWith("/copilot")){dn.debug(`Skipping activation on GitHub page: ${n}`);return}dn.debug("Activating sidebar plugin...");try{await this.initializeSidebarManager(),await this.showSidebar(),this.isActive=!0,dn.debug("Sidebar plugin activated successfully"),(r=this.context)==null||r.eventBus.emit("plugin:activated",{pluginName:this.name,timestamp:Date.now()})}catch(s){throw dn.error("Failed to activate:",s),s}}async deactivate(){if(!this.isActive){dn.warn("Plugin not active");return}dn.debug("Deactivating sidebar plugin...");try{this.isActive=!1,this.isShowingSidebar=!1,dn.debug("Sidebar plugin deactivated successfully")}catch(l){dn.error("Error during deactivation:",l)}}async cleanup(){dn.debug("Cleaning up sidebar plugin...");try{this.isActive&&await this.deactivate(),this.sidebarManager&&(this.sidebarManager.destroy(),this.sidebarManager=null),this.cleanupFunctions.forEach(l=>{try{l()}catch(n){dn.error("Error in cleanup function:",n)}}),this.cleanupFunctions=[],this.isActive=!1,this.isShowingSidebar=!1,dn.debug("Sidebar plugin cleanup completed")}catch(l){dn.error("Error during cleanup:",l)}}isSupported(){return!0}getStatus(){return this.context?this.isActive?"active":"inactive":"pending"}async showSidebar(){var l;if(this.isShowingSidebar){(l=this.context)==null||l.logger.warn("Sidebar already showing, skipping to prevent loop");return}if(this.sidebarManager||await this.initializeSidebarManager(),this.sidebarManager){dn.debug("Showing sidebar (respects stored preferences)..."),this.isShowingSidebar=!0;try{this.sidebarManager.showWithToolOutputs(),dn.debug("Sidebar show request completed")}catch(n){throw dn.error("Error showing sidebar:",n),this.isShowingSidebar=!1,n}}}hideSidebar(){this.sidebarManager&&(dn.debug("Hiding sidebar..."),this.isShowingSidebar=!1,this.sidebarManager.hide(),ia.setState(l=>({sidebar:{...l.sidebar,isVisible:!1}})),dn.debug("Sidebar hidden successfully"))}toggleSidebar(){this.isShowingSidebar?this.hideSidebar():this.showSidebar()}getSidebarManager(){return this.sidebarManager}async initializeSidebarManager(){if(!this.sidebarManager)try{dn.debug("Initializing sidebar manager...");const l=window.location.hostname,n=this.determineSiteType(l);this.sidebarManager=nS.getInstance(n),window.activeSidebarManager=this.sidebarManager,dn.debug(`Sidebar manager initialized for site type: ${n}`)}catch(l){throw dn.error("Failed to initialize sidebar manager:",l),l}}determineSiteType(l){return l.includes("perplexity.ai")?"perplexity":l.includes("chatgpt.com")||l.includes("chat.openai.com")?"chatgpt":l.includes("x.ai")||l.includes("grok")?"grok":l.includes("gemini.google.com")?"gemini":l.includes("z.ai")?"zai":l.includes("aistudio.google.com")?"aistudio":l.includes("openrouter.ai")?"openrouter":l.includes("chat.deepseek.com")?"deepseek":l.includes("kagi.com")?"kagi":l.includes("t3.chat")?"t3chat":"perplexity"}setupEventListeners(){if(!this.context)return;const l=this.context.eventBus.on("app:site-changed",async n=>{dn.debug(`Site changed to: ${n.hostname}`);const r=this.determineSiteType(n.hostname),s=this.sidebarManager?this.determineSiteType(window.location.hostname):null;if(s&&r===s){dn.debug(`URL changed within same site (${r}), preserving sidebar manager`);return}dn.debug(`Actual site change detected: ${s} -> ${r}`),this.isShowingSidebar=!1,this.sidebarManager&&(this.sidebarManager.destroy(),this.sidebarManager=null),this.isActive&&(await this.initializeSidebarManager(),await this.showSidebar())});this.cleanupFunctions.push(l)}onPageChanged(l,n){dn.debug(`Page changed from ${n} to ${l}`),this.isActive&&n&&new URL(l).hostname!==new URL(n).hostname&&this.initializeSidebarManager().then(()=>{this.showSidebar()}).catch(r=>{dn.error("Error reinitializing after page change:",r)})}onHostChanged(l,n){dn.debug(`Host changed from ${n} to ${l}`),this.isActive&&this.initializeSidebarManager().then(()=>{this.showSidebar()}).catch(r=>{dn.error("Error reinitializing after host change:",r)})}}const aA=nt("ChatGPTAdapter"),Eg=class Eg extends ho{constructor(){super();z(this,"name","ChatGPTAdapter");z(this,"version","2.0.0");z(this,"hostnames",["chatgpt.com"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'#prompt-textarea, .ProseMirror[contenteditable="true"], div[contenteditable="true"][data-id*="prompt"]',SUBMIT_BUTTON:'button[data-testid="send-button"], button[aria-label*="Send"], button[data-testid="fruitjuice-send-button"], button:has(svg) + button:has(svg[viewBox="0 0 20 20"])',FILE_UPLOAD_BUTTON:'#upload-file-btn, button[aria-label*="Add photos"], button[data-testid="composer-action-file-upload"] button',FILE_INPUT:'input[type="file"][multiple]',MAIN_PANEL:'main, .chat-container, [data-testid="conversation-turn-wrapper"]',DROP_ZONE:'#prompt-textarea, .ProseMirror, [data-testid="composer-text-input"], .composer-parent',FILE_PREVIEW:'.file-preview, .attachment-preview, [data-testid="file-attachment"]',BUTTON_INSERTION_CONTAINER:'[grid-area="leading"], .composer-leading-actions, [data-testid="composer-plus-btn"]',FALLBACK_INSERTION:'.composer-parent, .relative.flex.w-full.items-end, [data-testid="composer-trailing-actions"]'});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mcpPopoverRoot",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"chatgptStylesInjected",!1);Eg.instanceCount++,this.instanceId=Eg.instanceCount,aA.debug(`Instance #${this.instanceId} created. Total instances: ${Eg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`ChatGPT adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing ChatGPT adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`ChatGPT adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating ChatGPT adapter instance #${this.instanceId}...`),this.injectChatGPTButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("ChatGPT adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating ChatGPT adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up ChatGPT adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers();const n=document.getElementById("mcp-chatgpt-button-styles");n&&(n.remove(),this.chatgptStylesInjected=!1),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.chatgptStylesInjected=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into ChatGPT chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find ChatGPT chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=s.textContent||"";s.focus();const h=s.querySelector("[data-placeholder]");h&&h.remove();const v=d?d+`
`+n:n;s.innerHTML="";const S=document.createElement("p");S.textContent=v,s.appendChild(S);const w=document.createRange(),M=window.getSelection();return M&&S.firstChild&&(w.setStartAfter(S.lastChild||S),w.collapse(!0),M.removeAllRanges(),M.addRange(w)),s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:d.length,newLength:n.length,totalLength:v.length}),this.context.logger.debug(`Text inserted successfully. Original: ${d.length}, Added: ${n.length}, Total: ${v.length}`),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into ChatGPT chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit ChatGPT chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.error("Could not find ChatGPT submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("ChatGPT submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("ChatGPT submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("ChatGPT chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting ChatGPT chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let d=(r==null?void 0:r.inputElement)||null;if(d||(d=document.querySelector(this.selectors.FILE_INPUT)),d){const v=new DataTransfer;v.items.add(n),d.files=v.files,d.dispatchEvent(new Event("change",{bubbles:!0}))}else if(!await this.simulateFileDrop(n))return this.emitExecutionFailed("attachFile","Failed to simulate file drop"),!1;return await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:!0,method:d?"file-input":"drag-drop-simulation"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0):(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!1,method:d?"file-input":"drag-drop-simulation"}),this.context.logger.debug(`File attachment initiated (preview not confirmed): ${n.name}`),!0)}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to ChatGPT: ${h}`),this.emitExecutionFailed("attachFile",h),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if ChatGPT adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by ChatGPT adapter`),!1;const h=[/^https:\/\/chatgpt\.com\/$/,/^https:\/\/chatgpt\.com\/c\/.*/,/^https:\/\/chatgpt\.com\/g\/.*/,/^https:\/\/chatgpt\.com\/\?.*/].some(v=>v.test(r));return h?this.context.logger.debug(`ChatGPT adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for ChatGPT");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}getChatGPTButtonStyles(){return`
      /* ChatGPT MCP Button Styles - Matching composer-btn design */
      .mcp-chatgpt-button-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-sizing: border-box;
        min-width: 36px;
        height: 36px;
        padding: 8px;
        margin: 0 2px;
        border: none;
        border-radius: 8px;
        background: transparent;
        color: #8e8ea0;
        font-family: "Shne", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", sans-serif;
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.15s ease;
        overflow: hidden;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        outline: none;
        text-align: center;
        white-space: nowrap;
      }

      /* Hover state - matches ChatGPT's composer button hover */
      .mcp-chatgpt-button-base:hover {
        background-color: rgba(142, 142, 160, 0.1);
        color: #acacbe;
      }

      /* Active/pressed state */
      .mcp-chatgpt-button-base:active {
        background-color: rgba(142, 142, 160, 0.15);
        transform: scale(0.98);
      }

      /* Focus state for accessibility */
      .mcp-chatgpt-button-base:focus-visible {
        outline: 2px solid #1e90ff;
        outline-offset: 2px;
      }

      /* Active toggle state - matches ChatGPT's active button state */
      .mcp-chatgpt-button-base.mcp-button-active {
        background-color: rgba(30, 144, 255, 0.1);
        color: #1e90ff;
      }

      .mcp-chatgpt-button-base.mcp-button-active:hover {
        background-color: rgba(30, 144, 255, 0.15);
      }

      /* Button content container */
      .mcp-chatgpt-button-content {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        position: relative;
        z-index: 1;
      }

      /* Text styling to match ChatGPT's typography */
      .mcp-chatgpt-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        white-space: nowrap;
      }

      /* Icon styling matching ChatGPT's icon system */
      .mcp-chatgpt-button-base .mcp-button-icon {
        width: 20px;
        height: 20px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 1;
        flex-shrink: 0;
      }

      /* Dark mode support - ChatGPT's dark theme */
      @media (prefers-color-scheme: dark) {
        .mcp-chatgpt-button-base {
          color: #c5c5d2;
        }

        .mcp-chatgpt-button-base:hover {
          background-color: rgba(197, 197, 210, 0.1);
          color: #ececf1;
        }

        .mcp-chatgpt-button-base:active {
          background-color: rgba(197, 197, 210, 0.15);
        }

        .mcp-chatgpt-button-base.mcp-button-active {
          background-color: rgba(30, 144, 255, 0.15);
          color: #4da6ff;
        }

        .mcp-chatgpt-button-base.mcp-button-active:hover {
          background-color: rgba(30, 144, 255, 0.2);
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        .mcp-chatgpt-button-base {
          border: 1px solid currentColor;
        }

        .mcp-chatgpt-button-base:focus-visible {
          outline-width: 3px;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        .mcp-chatgpt-button-base {
          transition: none;
        }

        .mcp-chatgpt-button-base:active {
          transform: none;
        }
      }

      /* Integration with ChatGPT's composer layout */
      [data-testid="composer-footer-actions"] .mcp-chatgpt-button-base,
      .composer-footer-actions .mcp-chatgpt-button-base,
      [grid-area="leading"] .mcp-chatgpt-button-base {
        margin: 0 4px;
      }

      /* Specific styling for leading area placement next to plus button */
      [grid-area="leading"] .mcp-chatgpt-button-base {
        margin-left: 8px;
        margin-right: 4px;
      }

      /* Ensure proper stacking with ChatGPT's UI elements */
      .mcp-chatgpt-button-base {
        position: relative;
        z-index: 1;
      }

      /* Responsive design for mobile */
      @media (max-width: 768px) {
        .mcp-chatgpt-button-base {
          min-width: 32px;
          height: 32px;
          padding: 6px;
        }

        .mcp-chatgpt-button-base .mcp-button-icon {
          width: 18px;
          height: 18px;
          font-size: 18px;
        }

        .mcp-chatgpt-button-text {
          font-size: 13px;
        }
      }

      /* Tooltip styling for better UX */
      .mcp-chatgpt-button-base[title]:hover::after {
        content: attr(title);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        white-space: nowrap;
        z-index: 1000;
        pointer-events: none;
        margin-bottom: 4px;
      }

      /* Ensure button looks consistent with ChatGPT's composer */
      .relative.flex.w-full.items-end .mcp-chatgpt-button-base {
        align-self: flex-end;
        margin-bottom: 2px;
      }
    `}injectChatGPTButtonStyles(){if(this.chatgptStylesInjected){this.context.logger.debug("ChatGPT button styles already injected, skipping");return}try{const n="mcp-chatgpt-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getChatGPTButtonStyles(),document.head.appendChild(s),this.chatgptStylesInjected=!0,this.context.logger.debug("ChatGPT button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject ChatGPT button styles:",n)}}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for ChatGPT adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for ChatGPT adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for ChatGPT adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for ChatGPT adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for ChatGPT adapter");try{if(this.mcpPopoverRoot){try{this.mcpPopoverRoot.unmount(),this.context.logger.debug("React root unmounted successfully")}catch(r){this.context.logger.warn("Error unmounting React root during cleanup:",r)}this.mcpPopoverRoot=null}const n=document.getElementById("mcp-popover-container");if(n)if(n.isConnected&&n.parentNode)try{n.parentNode.removeChild(n),this.context.logger.debug("MCP popover container removed successfully")}catch(r){this.context.logger.warn("Error removing popover container, trying alternative method:",r);try{n.remove(),this.context.logger.debug("MCP popover container removed using alternative method")}catch(s){this.context.logger.error("Failed to remove popover container with both methods:",s)}}else this.context.logger.debug("MCP popover container already disconnected from DOM")}catch(n){this.context.logger.error("Error during UI integration cleanup:",n)}this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in ChatGPT adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("ChatGPT adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover next to plus button");const n=document.querySelector('[data-testid="composer-plus-btn"]');if(n&&n.parentElement)return this.context.logger.debug("Found plus button, inserting MCP button after it"),{container:n.parentElement,insertAfter:n};const r=document.querySelector('[grid-area="leading"]');if(r){this.context.logger.debug("Found leading area, looking for plus button within it");const d=r.querySelector("button");return d?{container:r,insertAfter:d}:{container:r,insertAfter:null}}const s=['[data-testid="composer-footer-actions"]',".composer-footer-actions",'.flex.items-center[data-testid*="composer"]',".relative.flex.w-full.items-end",'[data-testid="composer-trailing-actions"]'];for(const d of s){const h=document.querySelector(d);if(h){this.context.logger.debug(`Found fallback insertion point: ${d}`);const v=h.querySelectorAll("button"),S=v.length>0?v[v.length-1]:null;return{container:h,insertAfter:S}}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into ChatGPT interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block";const{container:s,insertAfter:d}=n;s.matches('[grid-area="leading"]')||s.closest('[grid-area="leading"]')?r.style.margin="0 0 0 8px":r.style.margin="0 4px",d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{if(!n||!n.isConnected){this.context.logger.warn("Container is not connected to DOM, skipping render");return}Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{if(!n||!n.isConnected){this.context.logger.warn("Container became invalid during async import, aborting render");return}const h=this.createToggleStateManager(),v={className:"mcp-chatgpt-button-base",contentClassName:"mcp-chatgpt-button-content",textClassName:"mcp-chatgpt-button-text",activeClassName:"mcp-button-active"};try{if(this.mcpPopoverRoot){this.context.logger.debug("Unmounting existing React root before creating new one");try{this.mcpPopoverRoot.unmount()}catch(S){this.context.logger.warn("Error unmounting existing React root:",S)}this.mcpPopoverRoot=null}this.mcpPopoverRoot=s.createRoot(n),this.mcpPopoverRoot.render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}catch(S){if(this.context.logger.error("Error during React render:",S),this.mcpPopoverRoot){try{this.mcpPopoverRoot.unmount()}catch(w){this.context.logger.warn("Error cleaning up failed React root:",w)}this.mcpPopoverRoot=null}}}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async simulateFileDrop(n){try{const r=this.selectors.DROP_ZONE.split(", ");let s=null;for(const w of r)if(s=document.querySelector(w.trim()),s)break;if(!s)return this.context.logger.error("No drop zone found for file simulation"),!1;const d=new DataTransfer;d.items.add(n);const h=new DragEvent("dragenter",{bubbles:!0,dataTransfer:d}),v=new DragEvent("dragover",{bubbles:!0,dataTransfer:d}),S=new DragEvent("drop",{bubbles:!0,dataTransfer:d});return s.dispatchEvent(h),s.dispatchEvent(v),s.dispatchEvent(S),!0}catch(r){return this.context.logger.error("Error simulating file drop:",r),!1}}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`chatgpt-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`ChatGPT page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.injectChatGPTButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`ChatGPT host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("ChatGPT adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in ChatGPT adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};z(Eg,"instanceCount",0);let iS=Eg;const oA=nt("KimiAdapter"),Cg=class Cg extends ho{constructor(){super();z(this,"name","KimiAdapter");z(this,"version","2.0.0");z(this,"hostnames",["kimi.com"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:'.chat-input-editor[contenteditable="true"], div[contenteditable="true"][data-lexical-editor="true"], .chat-input-editor, .chat-input, textarea[placeholder*="Ask"]',SUBMIT_BUTTON:'.send-button, .send-icon, svg.send-icon, button[aria-label*="Send"], .send-button-container:not(.disabled) .send-button',FILE_UPLOAD_BUTTON:'.attachment-button, .attachment-icon, input[type="file"], label.attachment-button',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .main-content, .conversation-container, .chat-interface, .chat-editor",DROP_ZONE:".chat-editor, .chat-input-editor-container, .chat-input, .file-drop-area",FILE_PREVIEW:".file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:".chat-editor-action .right-area, .right-area, .chat-editor-action, .actions-wrapper",FALLBACK_INSERTION:".chat-editor-action, .chat-input-editor-container, .left-area, .right-area"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");Cg.instanceCount++,this.instanceId=Cg.instanceCount,oA.debug(`Instance #${this.instanceId} created. Total instances: ${Cg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Kimi adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Kimi adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Kimi adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Kimi adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Kimi adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Kimi adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Kimi adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Kimi chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Kimi chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,h=d.value,v=h?h+`

`+n:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),d.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`Text inserted into textarea successfully. Original: ${h.length}, Added: ${n.length}, Total: ${v.length}`)}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"";s.focus();let h=!1;try{const v=navigator.userAgent.toLowerCase().includes("firefox");if(navigator.clipboard&&window.ClipboardEvent){let S=!0;if(v)try{await navigator.clipboard.readText().catch(()=>{})}catch(w){this.context.logger.warn("Firefox clipboard read test failed, trying write anyway:",w)}if(S){let w="";try{v||(w=await navigator.clipboard.readText())}catch(A){this.context.logger.warn("Could not read clipboard, continuing without backup:",A)}await navigator.clipboard.writeText(n);const M=new DataTransfer;M.setData("text/plain",n),M.setData("text/html",n.replace(/\n/g,"<br>"));const N=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:M}),k=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertFromPaste",data:n});s.dispatchEvent(N),s.dispatchEvent(k),v&&(s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0}))),!v&&w&&setTimeout(async()=>{try{await navigator.clipboard.writeText(w)}catch(A){this.context.logger.warn("Could not restore clipboard:",A)}},100),h=!0,this.context.logger.debug(`Text inserted using clipboard simulation method (${v?"Firefox":"Chrome"} mode)`)}}else throw new Error("Clipboard API not available")}catch(v){if(this.context.logger.warn("Clipboard method failed, trying Firefox-specific method:",v),navigator.userAgent.toLowerCase().includes("firefox"))try{const w=document.createElement("textarea");if(w.value=n,w.style.position="fixed",w.style.left="-9999px",w.style.top="-9999px",w.style.opacity="0",w.style.pointerEvents="none",document.body.appendChild(w),w.select(),w.setSelectionRange(0,n.length),document.execCommand("copy"))if(s.focus(),document.execCommand("paste"))h=!0,this.context.logger.debug("Text inserted using Firefox hidden textarea method");else{const k=window.getSelection();k==null||k.removeAllRanges();const A=document.createRange();A.selectNodeContents(s),A.collapse(!1),k==null||k.addRange(A),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),h=!0,this.context.logger.debug("Text inserted using Firefox execCommand fallback")}document.body.removeChild(w),h&&(s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new InputEvent("input",{bubbles:!0,inputType:"insertFromPaste",data:n})))}catch(w){this.context.logger.warn("Firefox-specific method failed:",w)}if(!h)try{const w=window.getSelection();w==null||w.removeAllRanges();const M=document.createRange();M.selectNodeContents(s),M.collapse(!1),w==null||w.addRange(M),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),n.split(`
`).forEach((k,A)=>{A>0&&document.execCommand("insertLineBreak",!1),k.trim()!==""&&document.execCommand("insertText",!1,k)}),h=!0,this.context.logger.debug("Text inserted using execCommand method with line breaks")}catch(w){this.context.logger.warn("execCommand method failed, trying DOM manipulation:",w);try{let M="";d&&d.trim()!==""?M=d+`

`+n:M=n,s.innerHTML="";const N=M.split(`
`),k=document.createDocumentFragment();N.forEach((B,Z)=>{Z>0&&k.appendChild(document.createElement("br")),B.trim()!==""?k.appendChild(document.createTextNode(B)):Z<N.length-1&&k.appendChild(document.createTextNode(""))}),s.appendChild(k);const A=window.getSelection(),$=document.createRange();$.selectNodeContents(s),$.collapse(!1),A==null||A.removeAllRanges(),A==null||A.addRange($),h=!0,this.context.logger.debug("Text inserted using DOM manipulation fallback")}catch(M){this.context.logger.error("DOM manipulation method also failed:",M)}}}if(h)s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new Event("paste",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{key:"Enter",bubbles:!0})),this.context.logger.debug("Text inserted into Kimi Lexical editor with preserved formatting");else throw new Error("All insertion methods failed")}else{const d=s.value||s.textContent||"",h=d?d+`

`+n:n;"value"in s?s.value=h:s.textContent=h,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted using fallback method")}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,targetElementType:s.tagName,insertedLength:n.length}),!0}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Kimi chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Kimi chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const h of s)if(r=document.querySelector(h.trim()),r){this.context.logger.debug(`Found submit button using selector: ${h.trim()}`);break}if(!r)return this.context.logger.warn("Could not find Kimi submit button, trying Enter key press"),this.tryEnterKeySubmission();try{if(r.disabled)return this.context.logger.warn("Kimi submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const h=r.getBoundingClientRect();return h.width===0||h.height===0?(this.context.logger.warn("Kimi submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Kimi chat input submitted successfully"),!0)}catch(h){const v=h instanceof Error?h.message:String(h);return this.context.logger.error(`Error submitting Kimi chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async tryEnterKeySubmission(){try{const n=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0].trim());if(!n)return this.context.logger.error("Cannot find chat input for Enter key submission"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key submission"),!1;const r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return n.focus(),n.dispatchEvent(r),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey",fallback:!0}),this.context.logger.debug("Kimi chat input submitted using Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting Kimi chat input via Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let s=null;return r!=null&&r.inputElement?s=r.inputElement:s=document.querySelector(this.selectors.FILE_INPUT),s&&await this.attachFileToInput(n,s)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"fileInput"},{success:!0,attachmentMethod:"direct-input"}),!0):await this.simulateFileDrop(n)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"dragDrop"},{success:!0,attachmentMethod:"drag-drop-simulation"}),!0):(this.emitExecutionFailed("attachFile","All file attachment methods failed"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to Kimi: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileToInput(n,r){try{const s=new DataTransfer;return s.items.add(n),r.files=s.files,r.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`File attached directly to input: ${n.name}`),!0}catch(s){return this.context.logger.error("Error attaching file to input:",s),!1}}async simulateFileDrop(n){try{const r=this.selectors.DROP_ZONE.split(", ");let s=null;for(const w of r)if(s=document.querySelector(w.trim()),s)break;if(!s)return this.context.logger.warn("No drop zone found for file drop simulation"),!1;const d=new DataTransfer;d.items.add(n);const h=new DragEvent("dragenter",{bubbles:!0,dataTransfer:d}),v=new DragEvent("dragover",{bubbles:!0,dataTransfer:d}),S=new DragEvent("drop",{bubbles:!0,dataTransfer:d});return s.dispatchEvent(h),s.dispatchEvent(v),s.dispatchEvent(S),this.context.logger.debug(`File drop simulated for: ${n.name}`),!0}catch(r){return this.context.logger.error("Error simulating file drop:",r),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Kimi adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Kimi adapter`),!1;const h=[/^https?:\/\/(?:www\.)?kimi\.com\/.*/,/^https?:\/\/(?:www\.)?kimi\.com$/].some(v=>v.test(r));return h?this.context.logger.debug(`Kimi adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Kimi");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Kimi adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Kimi adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Kimi adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Kimi adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Kimi adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Kimi adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Kimi adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".chat-editor-action .right-area");if(n){this.context.logger.debug("Found Kimi button container (.right-area)");const s=n.querySelector(".attachment-button");if(s)return this.context.logger.debug("Found attachment button, will insert after it"),{container:n,insertAfter:s};const d=n.querySelector(".prompt-library-button");if(d)return this.context.logger.debug("Found prompt library button, will insert after it"),{container:n,insertAfter:d};const h=n.lastElementChild;if(h)return this.context.logger.debug("Using last child element as insertion point"),{container:n,insertAfter:h}}const r=[".chat-editor-action",".right-area",".chat-editor",".chat-input-editor-container",".chat-input-actions",".input-actions",".actions-wrapper"];for(const s of r){const d=document.querySelector(s);if(d)return this.context.logger.debug(`Found fallback insertion point: ${s}`),d.parentElement?{container:d.parentElement,insertAfter:d}:{container:d,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Kimi interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:h})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`kimi-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Kimi page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Kimi host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Kimi adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Kimi adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};z(Cg,"instanceCount",0);let aS=Cg;const Tg=class Tg extends ho{constructor(){super();z(this,"name","ZAdapter");z(this,"version","1.0.0");z(this,"hostnames",["z.ai","chat.z.ai"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:"#chat-input",SUBMIT_BUTTON:'#send-message-button, #send-message-button[type="submit"]',FILE_UPLOAD_BUTTON:'button[aria-label*="More"], button[aria-label*="more"]',FILE_INPUT:'input[type="file"][multiple][accept*=".pdf,.docx,.doc,.xls,.xlsx,.ppt,.pptx,.png,.jpg,.jpeg,.csv,.py,.txt,.md,.bmp,.gif"], input[type="file"][multiple]',MAIN_PANEL:"form.w-full.flex.gap-1.5",DROP_ZONE:'input[type="file"][multiple][hidden]',FILE_PREVIEW:"div.flex.relative.w-full.h-full > div > div.px-3.pb-3 > div.w-full.font-primary > div.transparent > div > div > form > div > div:nth-of-type(1)",BUTTON_INSERTION_CONTAINER:'button[aria-label="More"], button[type="submit"]',FALLBACK_INSERTION:"#chat-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"adapterStylesInjected",!1);Tg.instanceCount++,this.instanceId=Tg.instanceCount,console.debug(`[ZAdapter] Instance #${this.instanceId} created. Total instances: ${Tg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Z adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Z adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Z adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Z adapter instance #${this.instanceId}...`),this.injectZButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Z adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Z adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Z adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-z-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Z chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Z chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=window.location.href;return this.context.logger.debug("Using InputEvent method for text insertion for all pages"),await this.insertTextViaInputEvent(s,n)}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Z chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async insertTextViaInputEvent(n,r){try{const s=this.getElementContent(n);n.focus();const d=document.createRange();d.selectNodeContents(n);const h=window.getSelection();h&&(h.removeAllRanges(),h.addRange(d));const v=s?s+`

`+r:r;return n.value=v,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:r},{success:!0,originalLength:s.length,newLength:r.length,totalLength:v.length}),this.context.logger.debug(`Text inserted successfully. Original: ${s.length}, Added: ${r.length}, Total: ${v.length}`),!0}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`InputEvent method failed: ${d}`),this.emitExecutionFailed("insertText",`InputEvent method failed: ${d}`),!1}}isContentEditableElement(n){return n.isContentEditable||n.getAttribute("contenteditable")==="true"||n.hasAttribute("contenteditable")}getElementContent(n){return this.isContentEditableElement(n)?n.textContent||n.innerText||"":n.value||""}async submitForm(n){var d,h;this.context.logger.debug("Attempting to submit Z chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const v of s)if(r=document.querySelector(v.trim()),r){this.context.logger.debug(`Found submit button using selector: ${v.trim()}`);break}if(!r){const v=document.querySelector(this.selectors.CHAT_INPUT);v&&(r=(d=v.parentElement)==null?void 0:d.querySelector("button"),r&&this.context.logger.debug("Found submit button near chat input"))}if(r)try{if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled")){this.context.logger.warn("Z submit button is disabled, waiting for it to be enabled");const w=5e3,M=Date.now();for(;Date.now()-M<w&&(await new Promise(A=>setTimeout(A,300)),!!(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))););if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))return this.context.logger.warn("Submit button remained disabled, falling back to Enter key"),this.submitWithEnterKey()}const S=r.getBoundingClientRect();return S.width===0||S.height===0?(this.context.logger.warn("Z submit button is not visible, falling back to Enter key"),this.submitWithEnterKey()):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((h=n==null?void 0:n.formElement)==null?void 0:h.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(w=>document.querySelector(w.trim())===r)}),this.context.logger.debug("Z chat input submitted successfully via button click"),!0)}catch(v){const S=v instanceof Error?v.message:String(v);return this.context.logger.error(`Error clicking submit button: ${S}, falling back to Enter key`),this.submitWithEnterKey()}else return this.context.logger.warn("Could not find Z submit button, falling back to Enter key"),this.submitWithEnterKey()}async submitWithEnterKey(){try{const n=document.querySelector(this.selectors.CHAT_INPUT);if(!n)return this.emitExecutionFailed("submitForm","Chat input element not found for Enter key fallback"),!1;n.focus();const r=["keydown","keypress","keyup"];for(const d of r)n.dispatchEvent(new KeyboardEvent(d,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}));const s=n.closest("form");return s&&(this.context.logger.debug("Submitting form as additional fallback"),s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey+formSubmit"}),this.context.logger.debug("Z chat input submitted successfully via Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting with Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;if(await this.attachFileViaInput(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"file-input"}),this.context.logger.debug(`File attached successfully via input: ${n.name}`),!0;if(await this.attachFileViaDragDrop(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"drag-drop"}),this.context.logger.debug(`File attached successfully via drag-drop: ${n.name}`),!0;const h=await this.attachFileViaClipboard(n);return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:h,method:"clipboard"}),h?this.context.logger.debug(`File copied to clipboard for manual paste: ${n.name}`):this.context.logger.warn(`All file attachment methods failed for: ${n.name}`),h}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to Z: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileViaInput(n){try{const r=this.selectors.FILE_INPUT.split(", ");let s=null;for(const v of r)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found file input using selector: ${v.trim()}`);break}if(!s)return this.context.logger.debug("No file input element found"),!1;const d=new DataTransfer;d.items.add(n),s.files=d.files;const h=new Event("change",{bubbles:!0});return s.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`File input method failed: ${r}`),!1}}async attachFileViaDragDrop(n){try{const r=document.querySelector(this.selectors.CHAT_INPUT);if(!r)return this.context.logger.debug("No chat input found for drag-drop"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),h=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.addEventListener("dragover",v=>v.preventDefault(),{once:!0}),r.dispatchEvent(d),r.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`Drag-drop method failed: ${r}`),!1}}async attachFileViaClipboard(n){try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})]);const r=document.querySelector(this.selectors.CHAT_INPUT);return r&&r.focus(),!0}catch(r){return this.context.logger.debug(`Clipboard method failed: ${r}`),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Z adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Z adapter`),!1;const h=[/^https:\/\/(?:chat\.)?z\.ai\/search\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`Z adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Z");const n=this.selectors.FILE_INPUT.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found file input with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;const s=this.selectors.DROP_ZONE.split(", ");for(const d of s)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;return this.context.logger.debug("No file upload support detected"),!1}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Z adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Z adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Z adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Z adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Z adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Z adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Z adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(this.selectors.BUTTON_INSERTION_CONTAINER);if(n){const d=n.closest("div.flex");if(d){this.context.logger.debug("Found Tools container, placing MCP button next to it");const h=n.parentElement;return{container:d,insertAfter:h}}}const r=document.querySelector("div.flex.items-end.gap-sm");if(r){this.context.logger.debug("Found actions container (fallback)");const d=r.querySelector('button[aria-label*="Attach"]');return{container:r,insertAfter:d}}const s=[".input-area .actions",".chat-input-actions",".conversation-input .actions"];for(const d of s){const h=document.querySelector(d);if(h)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:h,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Z interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-z-button-base",contentClassName:"mcp-z-button-content",textClassName:"mcp-z-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`z-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Z page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.adapterStylesInjected=!1,this.injectZButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Z host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Z adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Z adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}getZButtonStyles(){return`
      .mcp-z-button-base {
        /* Base button styling matching Z's segmented-control design */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        outline: none;
        cursor: pointer;
        white-space: nowrap;
        user-select: none;
        border-radius: 8px;
        height: 32px;
        min-width: 36px;
        padding: 0 0px;
        gap: 6px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        background: transparent;
        transition: all 300ms ease-out;
        
        /* Default colors - using Z's actual theme colors */
        color: oklch(var(--text-color-200, 50.2% 0.008 106.677)); /* Inactive text */
        
        /* Focus states */
        &:focus {
          outline: none;
        }
        
        /* Hover states */
        &:hover {
          color: oklch(var(--text-color-100, 30.4% 0.04 213.681)); /* Active text on hover */
        }
        
        /* Active/selected state - matches the checked segmented control */
        &.mcp-button-active {
          color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538)); /* Super color for active state */
        }
        
        /* Active button overlay styling (matches data-state="checked" div) */
        &.mcp-button-active::before {
          content: '';
          position: absolute;
          inset: 0;
          pointer-events: none;
          border-radius: 8px;
          border: 1px solid oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
          background-color: oklch(0.963 0.007 106.523); /* Light background */
          box-shadow: 0 1px 3px 0 oklch(var(--text-super-color-100, 55.3% 0.086 208.538) / 0.3);
          transition: all 300ms ease-out;
          opacity: 1;
        }
      }
      
      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-z-button-base {
          color: oklch(var(--dark-text-color-200, 65.3% 0.005 197.042)); /* Dark mode inactive text */
          
          &:hover {
            color: oklch(var(--dark-text-color-100, 93% 0.003 106.451)); /* Dark mode hover text */
          }
          
          &.mcp-button-active {
            color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538)); /* Keep super color in dark mode */
          }
          
          &.mcp-button-active::before {
            background-color: oklch(var(--lt-color-text-dark, 0.113 0.005 247.858)); /* Dark background equivalent */
            border-color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
            box-shadow: 0 1px 3px 0 oklch(var(--text-super-color-100, 55.3% 0.086 208.538) / 0.2);
          }
        }
      }
      
      .mcp-z-button-content {
        /* Content container styling - matches the inner div structure */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        min-width: 0;
        font-weight: 500;
        position: relative;
        z-index: 10; /* matches relative z-10 */
        height: 32px;
        min-width: 36px;
        padding: 4px 10px; /* matches py-xs px-2.5 equivalent */
      }
      
      .mcp-z-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 1.2;
        color: inherit; /* Inherit color from parent */
      }
      
      /* Icon styling within button */
      .mcp-z-button-base svg,
      .mcp-z-button-base img {
        width: 16px;
        height: 16px;
        transition: all 300ms ease-out;
        flex-shrink: 0;
      }
      
      .mcp-z-button-base img {
        border-radius: 50%;
        margin-right: 1px;
      }
      
      /* Integration with Z's button group layout */
      .gap-xs .mcp-z-button-base,
      .gap-sm .mcp-z-button-base,
      .flex.items-center .mcp-z-button-base {
        margin: 0 2px;
      }
      
      /* Special styling for group context (matches p-two flex items-center structure) */
      .p-two .mcp-z-button-base,
      [class*="p-"] .mcp-z-button-base {
        margin: 0 1px;
      }
      
      /* Focus-visible styling for accessibility */
      .mcp-z-button-base:focus-visible {
        outline: 2px solid oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
        outline-offset: 2px;
        outline-style: dashed;
      }
      
      .mcp-z-button-base:focus-visible::before {
        border-style: dashed !important;
      }
      
      /* Responsive adjustments */
      @media (max-width: 640px) {
        .mcp-z-button-base {
          height: 28px;
          min-width: 32px;
          padding: 0 8px;
          font-size: 13px;
        }
        
        .mcp-z-button-content {
          height: 28px;
          min-width: 32px;
          padding: 2px 8px;
        }
        
        .mcp-z-button-base svg,
        .mcp-z-button-base img {
          width: 14px;
          height: 14px;
        }
        
        /* Adjust ring size for mobile */
        .mcp-z-button-base.mcp-button-active::before {
          border-width: 1px; /* Keep consistent border width on mobile */
        }
      }
      
    `}injectZButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-z-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getZButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("Z button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Z button styles:",n)}}};z(Tg,"instanceCount",0);let oS=Tg;const rA=nt("QwenAdapter"),kg=class kg extends ho{constructor(){super();z(this,"name","QwenAdapter");z(this,"version","1.0.0");z(this,"hostnames",["qwen.ai","chat.qwen.ai"]);z(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);z(this,"selectors",{CHAT_INPUT:"#chat-input",SUBMIT_BUTTON:"#send-message-button, button._sendMessageButton_71e98_48",FILE_UPLOAD_BUTTON:'button[aria-controls*="upload"], input[type="file"]',FILE_INPUT:'input[type="file"][multiple], input#filesUpload',MAIN_PANEL:"form.flex.w-full.gap-1.5",DROP_ZONE:"textarea#chat-input",FILE_PREVIEW:"div._fileListBox_71e98_10",BUTTON_INSERTION_CONTAINER:"div.scrollbar-none.flex.items-center.left-content.operationBtn, div.flex.items-center.pr-2",FALLBACK_INSERTION:"#chat-input"});z(this,"lastUrl","");z(this,"urlCheckInterval",null);z(this,"mcpPopoverContainer",null);z(this,"mutationObserver",null);z(this,"popoverCheckInterval",null);z(this,"storeEventListenersSetup",!1);z(this,"domObserversSetup",!1);z(this,"uiIntegrationSetup",!1);z(this,"instanceId");z(this,"adapterStylesInjected",!1);kg.instanceCount++,this.instanceId=kg.instanceCount,rA.debug(`Instance #${this.instanceId} created. Total instances: ${kg.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Qwen adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Qwen adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Qwen adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Qwen adapter instance #${this.instanceId}...`),this.injectQwenButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Qwen adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Qwen adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Qwen adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-qwen-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Qwen chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const h of d)if(s=document.querySelector(h.trim()),s){this.context.logger.debug(`Found chat input using selector: ${h.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Qwen chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{return this.context.logger.debug("Using textarea value method for text insertion"),await this.insertTextViaTextareaValue(s,n)}catch(d){const h=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Qwen chat input: ${h}`),this.emitExecutionFailed("insertText",h),!1}}async insertTextViaTextareaValue(n,r){try{const s=this.getElementContent(n);n.focus();const d=s?s+`

`+r:r;return n instanceof HTMLTextAreaElement,n.value=d,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:r},{success:!0,originalLength:s.length,newLength:r.length,totalLength:d.length}),this.context.logger.debug(`Text inserted successfully. Original: ${s.length}, Added: ${r.length}, Total: ${d.length}`),!0}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Textarea value method failed: ${d}`),this.emitExecutionFailed("insertText",`Textarea value method failed: ${d}`),!1}}isContentEditableElement(n){return n.isContentEditable||n.getAttribute("contenteditable")==="true"||n.hasAttribute("contenteditable")}getElementContent(n){return this.isContentEditableElement(n)?n.textContent||n.innerText||"":n.value||""}async submitForm(n){var d,h;this.context.logger.debug("Attempting to submit Qwen chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const v of s)if(r=document.querySelector(v.trim()),r){this.context.logger.debug(`Found submit button using selector: ${v.trim()}`);break}if(!r){const v=document.querySelector(this.selectors.CHAT_INPUT);v&&(r=(d=v.closest("form"))==null?void 0:d.querySelector('button[type="submit"]'),r&&this.context.logger.debug("Found submit button near chat input"))}if(r)try{if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled")){this.context.logger.warn("Qwen submit button is disabled, waiting for it to be enabled");const w=5e3,M=Date.now();for(;Date.now()-M<w&&(await new Promise(A=>setTimeout(A,300)),!!(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))););if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))return this.context.logger.warn("Submit button remained disabled, falling back to Enter key"),this.submitWithEnterKey()}const S=r.getBoundingClientRect();return S.width===0||S.height===0?(this.context.logger.warn("Qwen submit button is not visible, falling back to Enter key"),this.submitWithEnterKey()):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((h=n==null?void 0:n.formElement)==null?void 0:h.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(w=>document.querySelector(w.trim())===r)}),this.context.logger.debug("Qwen chat input submitted successfully via button click"),!0)}catch(v){const S=v instanceof Error?v.message:String(v);return this.context.logger.error(`Error clicking submit button: ${S}, falling back to Enter key`),this.submitWithEnterKey()}else return this.context.logger.warn("Could not find Qwen submit button, falling back to Enter key"),this.submitWithEnterKey()}async submitWithEnterKey(){try{const n=document.querySelector(this.selectors.CHAT_INPUT);if(!n)return this.emitExecutionFailed("submitForm","Chat input element not found for Enter key fallback"),!1;n.focus();const r=["keydown","keypress","keyup"];for(const d of r)n.dispatchEvent(new KeyboardEvent(d,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}));const s=n.closest("form");return s&&(this.context.logger.debug("Submitting form as additional fallback"),s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey+formSubmit"}),this.context.logger.debug("Z chat input submitted successfully via Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting with Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;if(await this.attachFileViaInput(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"file-input"}),this.context.logger.debug(`File attached successfully via input: ${n.name}`),!0;if(await this.attachFileViaDragDrop(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"drag-drop"}),this.context.logger.debug(`File attached successfully via drag-drop: ${n.name}`),!0;const h=await this.attachFileViaClipboard(n);return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:h,method:"clipboard"}),h?this.context.logger.debug(`File copied to clipboard for manual paste: ${n.name}`):this.context.logger.warn(`All file attachment methods failed for: ${n.name}`),h}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to Qwen: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileViaInput(n){try{const r=this.selectors.FILE_INPUT.split(", ");let s=null;for(const v of r)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found file input using selector: ${v.trim()}`);break}if(!s)return this.context.logger.debug("No file input element found"),!1;const d=new DataTransfer;d.items.add(n),s.files=d.files;const h=new Event("change",{bubbles:!0});return s.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`File input method failed: ${r}`),!1}}async attachFileViaDragDrop(n){try{const r=document.querySelector(this.selectors.CHAT_INPUT);if(!r)return this.context.logger.debug("No chat input found for drag-drop"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),h=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.addEventListener("dragover",v=>v.preventDefault(),{once:!0}),r.dispatchEvent(d),r.dispatchEvent(h),!0}catch(r){return this.context.logger.debug(`Drag-drop method failed: ${r}`),!1}}async attachFileViaClipboard(n){try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})]);const r=document.querySelector(this.selectors.CHAT_INPUT);return r&&r.focus(),!0}catch(r){return this.context.logger.debug(`Clipboard method failed: ${r}`),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Qwen adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Qwen adapter`),!1;const h=[/^https:\/\/(?:chat\.)?qwen\.ai\/.*/].some(v=>v.test(r));return h?this.context.logger.debug(`Qwen adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),h}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Qwen");const n=this.selectors.FILE_INPUT.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found file input with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;const s=this.selectors.DROP_ZONE.split(", ");for(const d of s)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;return this.context.logger.debug("No file upload support detected"),!1}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Qwen adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Qwen adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Qwen adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,h=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(h,500)};setTimeout(h,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Qwen adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Qwen adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Qwen adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Qwen adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(this.selectors.SUBMIT_BUTTON);if(n){const h=n.parentElement;if(h)return this.context.logger.debug("Found submit button container, placing MCP button to its left"),{container:h,insertAfter:null,insertBefore:n}}const r=document.querySelector("div.flex.items-end.absolute.right-3");if(r){this.context.logger.debug("Found absolute positioned container");const h=r.querySelector("#send-message-button");if(h)return{container:r,insertAfter:null,insertBefore:h}}const s=document.querySelector(this.selectors.BUTTON_INSERTION_CONTAINER);if(s){const h=s.closest("div.flex");if(h){this.context.logger.debug("Found Tools container, placing MCP button next to it");const v=s.parentElement;return{container:h,insertAfter:v}}}const d=document.querySelector("div.flex.items-end");return d?(this.context.logger.debug("Found actions container (fallback)"),{container:d,insertAfter:null}):(this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null)}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Qwen interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-flex",r.style.margin="0 8px 0 0";const{container:s,insertAfter:d,insertBefore:h}=n;h&&h.parentNode===s?(s.insertBefore(r,h),this.context.logger.debug("Inserted popover container before specified element (submit button)")):d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>fo).then(r=>{Promise.resolve().then(()=>mo).then(s=>{Promise.resolve().then(()=>vo).then(({MCPPopover:d})=>{const h=this.createToggleStateManager(),v={className:"mcp-qwen-button-base",contentClassName:"mcp-qwen-button-content",textClassName:"mcp-qwen-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:h,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,h=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${h}, autoSubmit=${v}`),{mcpEnabled:h,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,h;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(h=n.stores.ui)!=null&&h.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(S=>{n.logger.error("Error showing sidebar:",S)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(S=>{n.logger.error("Error hiding sidebar:",S)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),h=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(h)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`qwen-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Qwen page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.adapterStylesInjected=!1,this.injectQwenButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Qwen host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Qwen adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Qwen adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}getQwenButtonStyles(){return`
      .mcp-qwen-button-base {
        /* Base button styling matching Qwen's design */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        outline: none;
        cursor: pointer;
        white-space: nowrap;
        user-select: none;
        border-radius: 8px;
        height: 32px;
        min-width: 36px;
        padding: 0 8px;
        gap: 6px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        background: transparent;
        transition: all 300ms ease-out;
        
        /* Default colors - using Qwen's theme colors */
        color: #666;
        
        /* Focus states */
        &:focus {
          outline: none;
        }
        
        /* Hover states */
        &:hover {
          color: #333;
          background-color: rgba(0, 0, 0, 0.05);
        }
        
        /* Active/selected state */
        &.mcp-button-active {
          color: #1890ff;
          background-color: rgba(24, 144, 255, 0.1);
        }
        
        /* Active button border styling */
        &.mcp-button-active::before {
          content: '';
          position: absolute;
          inset: 0;
          pointer-events: none;
          border-radius: 8px;
          border: 1px solid #1890ff;
          transition: all 300ms ease-out;
          opacity: 1;
        }
      }
      
      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-qwen-button-base {
          color: #ccc;
          
          &:hover {
            color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
          }
          
          &.mcp-button-active {
            color: #40a9ff;
            background-color: rgba(64, 169, 255, 0.15);
          }
          
          &.mcp-button-active::before {
            border-color: #40a9ff;
          }
        }
      }
      
      .mcp-qwen-button-content {
        /* Content container styling */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        min-width: 0;
        font-weight: 500;
        position: relative;
        z-index: 10;
        height: 32px;
        min-width: 36px;
        padding: 4px 8px;
      }
      
      .mcp-qwen-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 1.2;
        color: inherit;
      }
      
      /* Icon styling within button */
      .mcp-qwen-button-base svg,
      .mcp-qwen-button-base img {
        width: 16px;
        height: 16px;
        transition: all 300ms ease-out;
        flex-shrink: 0;
      }
      
      .mcp-qwen-button-base img {
        border-radius: 50%;
        margin-right: 1px;
      }
      
      /* Integration with Qwen's button group layout */
      .flex.items-center .mcp-qwen-button-base {
        margin: 0 2px;
      }
      
      /* Focus-visible styling for accessibility */
      .mcp-qwen-button-base:focus-visible {
        outline: 2px solid #1890ff;
        outline-offset: 2px;
        outline-style: dashed;
      }
      
      .mcp-qwen-button-base:focus-visible::before {
        border-style: dashed !important;
      }
      
      /* Responsive adjustments */
      @media (max-width: 640px) {
        .mcp-qwen-button-base {
          height: 28px;
          min-width: 32px;
          padding: 0 6px;
          font-size: 13px;
        }
        
        .mcp-qwen-button-content {
          height: 28px;
          min-width: 32px;
          padding: 2px 6px;
        }
        
        .mcp-qwen-button-base svg,
        .mcp-qwen-button-base img {
          width: 14px;
          height: 14px;
        }
      }
    `}injectQwenButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-qwen-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getQwenButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("Qwen button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Qwen button styles:",n)}}};z(kg,"instanceCount",0);let rS=kg;class sA{constructor(){z(this,"name","remote-config-plugin");z(this,"version","1.0.0");z(this,"type","extension");z(this,"hostnames",[/.*/]);z(this,"capabilities",["dom-manipulation"]);z(this,"context",null);z(this,"isActive",!1);z(this,"fetchInterval",null);z(this,"userProperties",{});z(this,"retryCount",0);z(this,"maxRetries",3)}async initialize(l){this.context=l,await this.initializeUserProperties(),this.setupEventListeners(),l.logger.debug("[RemoteConfigPlugin] Remote Config plugin initialized successfully")}async activate(){var l,n,r,s;if(!this.isActive){(l=this.context)==null||l.logger.debug("[RemoteConfigPlugin] Activating Remote Config plugin");try{await this.fetchConfig(!0),this.startPeriodicFetch(),this.isActive=!0,(n=this.context)==null||n.eventBus.emit("remote-config:initialized",{timestamp:Date.now(),version:this.version}),(r=this.context)==null||r.logger.debug("[RemoteConfigPlugin] Remote Config plugin activated successfully")}catch(d){throw(s=this.context)==null||s.logger.error("[RemoteConfigPlugin] Failed to activate:",d),d}}}async deactivate(){var l,n;this.isActive&&((l=this.context)==null||l.logger.debug("[RemoteConfigPlugin] Deactivating Remote Config plugin"),this.stopPeriodicFetch(),this.isActive=!1,(n=this.context)==null||n.logger.debug("[RemoteConfigPlugin] Remote Config plugin deactivated"))}async cleanup(){await this.deactivate(),this.context=null,this.userProperties={},this.retryCount=0}isSupported(){return typeof window<"u"&&typeof chrome<"u"&&!!chrome.runtime}getStatus(){return this.isActive?"active":"inactive"}async fetchConfig(l=!1){var n,r,s,d,h,v;if(this.context)try{const S=await this.getLastFetchTime(),w=Date.now();if(!l&&S&&w-S<36e5){this.context.logger.debug("[RemoteConfigPlugin] Skipping fetch due to minimum interval");return}this.context.logger.debug("[RemoteConfigPlugin] Fetching remote config via background script...");const N=(r=(n=this.context.stores).config)==null?void 0:r.call(n);N==null||N.setLoading(!0),N==null||N.setError(null);const k=await chrome.runtime.sendMessage({command:"remote-config:fetch",force:l});if(!k.success)throw new Error(k.error||"Failed to fetch remote config");await this.processConfigurationFromBackground(),await this.setLastFetchTime(w),N==null||N.updateLastFetchTime(w),this.retryCount=0,this.context.eventBus.emit("remote-config:fetched",{timestamp:w,success:!0,configCount:k.configCount||0}),this.context.logger.debug("[RemoteConfigPlugin] Remote config fetched successfully")}catch(S){this.retryCount++;const w=S instanceof Error?S.message:String(S);this.context.logger.error("[RemoteConfigPlugin] Failed to fetch config:",w);const M=(d=(s=this.context.stores).config)==null?void 0:d.call(s);if(M==null||M.setError(w),this.context.eventBus.emit("remote-config:fetch-failed",{error:w,timestamp:Date.now(),retryCount:this.retryCount}),this.retryCount<=this.maxRetries){const N=Math.pow(2,this.retryCount)*1e3;setTimeout(()=>this.fetchConfig(l),N)}throw S}finally{const S=(v=(h=this.context.stores).config)==null?void 0:v.call(h);S==null||S.setLoading(!1)}}async processConfigurationFromBackground(){if(this.context)try{const l=await chrome.runtime.sendMessage({command:"remote-config:get-config"});if(!l.success)throw new Error(l.error||"Failed to get config from background");const n=l.config||{},r=[];await this.processFeatureFlagsFromBackground(n,r),await this.processNotificationsFromBackground(n,r),await this.processUserConfigurationFromBackground(n,r),r.length>0&&this.context.eventBus.emit("remote-config:updated",{changes:r,timestamp:Date.now()})}catch(l){throw this.context.logger.error("[RemoteConfigPlugin] Failed to process configuration:",l),l}}async processFeatureFlagsFromBackground(l,n){var r,s,d,h,v,S;try{const w=l.features;if(w){const M=JSON.parse(w);if(M&&typeof M=="object"){const N=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);N==null||N.updateFeatureFlags(M),n.push("feature_flags"),(h=this.context)==null||h.eventBus.emit("feature-flags:updated",{flags:M,timestamp:Date.now()}),(v=this.context)==null||v.logger.debug(`[RemoteConfigPlugin] Updated ${Object.keys(M).length} feature flags`)}}}catch(w){(S=this.context)==null||S.logger.error("[RemoteConfigPlugin] Failed to process feature flags:",w)}}async processNotificationsFromBackground(l,n){var r,s,d,h,v,S,w,M,N,k;try{const A=l.active_notifications;if(A){const $=JSON.parse(A);if(Array.isArray($)){const B=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);for(const Z of $)if(B!=null&&B.canShowNotification(Z)){(h=this.context)==null||h.eventBus.emit("notification:remote-received",{notification:Z,timestamp:Date.now()});const Y=(w=(v=this.context)==null?void 0:(S=v.stores).ui)==null?void 0:w.call(S);Y!=null&&Y.addRemoteNotification&&Y.addRemoteNotification(Z),B==null||B.markNotificationShown(Z.id),B==null||B.addNotificationToHistory(Z.id)}else(M=this.context)==null||M.eventBus.emit("notification:frequency-limited",{notificationId:Z.id,reason:"Frequency limits or targeting criteria not met"});n.push("notifications"),(N=this.context)==null||N.logger.debug(`[RemoteConfigPlugin] Processed ${$.length} notifications`)}}}catch(A){(k=this.context)==null||k.logger.error("[RemoteConfigPlugin] Failed to process notifications:",A)}}async processUserConfigurationFromBackground(l,n){var r,s,d,h;try{const v=l.notifications_config;if(v){const S=JSON.parse(v);if(S&&typeof S=="object"){const w=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);w==null||w.updateNotificationConfig(S),n.push("notification_config")}}}catch(v){(h=this.context)==null||h.logger.error("[RemoteConfigPlugin] Failed to process user configuration:",v)}}isFeatureEnabled(l){var r,s,d;const n=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);return(n==null?void 0:n.isFeatureEnabled(l))||!1}getFeatureConfig(l){var r,s,d;const n=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);return n==null?void 0:n.getFeatureConfig(l)}async initializeUserProperties(){var l,n,r,s,d,h,v,S;try{const w=(r=(l=this.context)==null?void 0:(n=l.stores).app)==null?void 0:r.call(n),M=(h=(s=this.context)==null?void 0:(d=s.stores).config)==null?void 0:h.call(d),N={extensionVersion:chrome.runtime.getManifest().version,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,installDate:await this.getInstallDate(),userSegment:await this.getUserSegment()};this.userProperties=N,M==null||M.setUserProperties(N),(v=this.context)==null||v.logger.debug("[RemoteConfigPlugin] User properties initialized:",N)}catch(w){(S=this.context)==null||S.logger.error("[RemoteConfigPlugin] Failed to initialize user properties:",w)}}setupEventListeners(){this.context&&(this.context.eventBus.on("app:version-updated",async l=>{var n;(n=this.context)==null||n.logger.debug("[RemoteConfigPlugin] Extension version updated, fetching config"),await this.handleVersionUpdate(l)}),this.context.eventBus.on("user:segment-changed",l=>{var n;(n=this.context)==null||n.logger.debug("[RemoteConfigPlugin] User segment changed:",l),this.fetchConfig(!0)}))}startPeriodicFetch(){var l;this.fetchInterval=setInterval(()=>{this.fetchConfig(!1)},12*60*60*1e3),(l=this.context)==null||l.logger.debug("[RemoteConfigPlugin] Started periodic config fetching")}stopPeriodicFetch(){var l;this.fetchInterval&&(clearInterval(this.fetchInterval),this.fetchInterval=null,(l=this.context)==null||l.logger.debug("[RemoteConfigPlugin] Stopped periodic config fetching"))}async getLastFetchTime(){var n;const l=await((n=this.context)==null?void 0:n.chrome.storage.local.get(["remoteConfigLastFetch"]));return(l==null?void 0:l.remoteConfigLastFetch)||null}async setLastFetchTime(l){var n;await((n=this.context)==null?void 0:n.chrome.storage.local.set({remoteConfigLastFetch:l}))}async getInstallDate(){var n,r;const l=await((n=this.context)==null?void 0:n.chrome.storage.local.get(["installDate"]));if(l!=null&&l.installDate)return l.installDate;{const s=new Date().toISOString();return await((r=this.context)==null?void 0:r.chrome.storage.local.set({installDate:s})),s}}async getUserSegment(){var n,r,s;const l=(s=(n=this.context)==null?void 0:(r=n.stores).config)==null?void 0:s.call(r);return(l==null?void 0:l.userSegment)||"new"}async handleVersionUpdate(l){var n,r;try{const s=await chrome.runtime.sendMessage({command:"remote-config:get-config",key:"update_notifications"});if(s.success&&s.value&&JSON.parse(s.value).enabled){const h={id:`version-update-${l.newVersion}`,type:"info",title:`Updated to v${l.newVersion}`,message:"MCP SuperAssistant has been updated. Check out what's new!",actions:[{text:"View Changelog",action:"view-changelog",style:"primary"},{text:"Dismiss",action:"dismiss",style:"secondary"}],campaignId:"version-update",priority:1};(n=this.context)==null||n.eventBus.emit("notification:remote-received",{notification:h,timestamp:Date.now()})}}catch(s){(r=this.context)==null||r.logger.error("[RemoteConfigPlugin] Failed to process update notification:",s)}}}const Ge=nt("PluginRegistry");class lA{constructor(){z(this,"plugins",new Map);z(this,"adapterFactories",new Map);z(this,"activePlugin",null);z(this,"context",null);z(this,"isInitialized",!1);z(this,"initializationPromise",null);z(this,"isPerformingInitialActivation",!1)}async initialize(l){return this.initializationPromise?this.initializationPromise:(this.initializationPromise=this.performInitialization(l),this.initializationPromise)}async performInitialization(l){try{this.context=l,this.setupEventListeners(),this.isInitialized=!0,await this.registerBuiltInAdapters(),ue.emit("plugin:registry-initialized",{registeredPlugins:this.plugins.size,timestamp:Date.now()}),Ge.debug("[PluginRegistry] Initialized with",this.plugins.size,"plugins")}catch(n){this.isInitialized=!1,this.context=null;const r=n instanceof Error?n.message:"Unknown initialization error";throw Va.handleError(n,{component:"plugin-registry",operation:"initialization",source:"[PluginRegistry]",details:{pluginCount:this.plugins.size,errorMessage:r}}),new Error(`Plugin registry initialization failed: ${r}`)}}setupEventListeners(){if(!this.context)return;const l=ue.on("app:site-changed",async({hostname:s})=>{if(Ge.debug(` Site change event received for ${s}, initial activation flag: ${this.isPerformingInitialActivation}`),this.isPerformingInitialActivation){Ge.debug(` Skipping site-change activation for ${s} (initial activation in progress)`);return}Ge.debug(` Site changed to ${s}, attempting plugin activation`),await this.activatePluginForHostname(s)}),n=ue.on("plugin:activation-requested",async({pluginName:s})=>{await this.activatePlugin(s)}),r=ue.on("plugin:deactivation-requested",async({pluginName:s})=>{var d;((d=this.activePlugin)==null?void 0:d.name)===s&&await this.deactivateCurrentPlugin()});this.context.cleanupFunctions=this.context.cleanupFunctions||[],this.context.cleanupFunctions.push(l,n,r)}async register(l,n){if(!this.isInitialized||!this.context)throw new Error("Plugin registry not initialized");const r=l.name;if(this.plugins.has(r)){Ge.warn(` Plugin ${r} is already registered`);return}try{this.validatePlugin(l);const s={plugin:l,config:this.createPluginConfig(l,n),registeredAt:Date.now(),lastUsedAt:void 0,status:"registered"};await l.initialize(this.context),this.plugins.set(r,s);try{await po.getState().registerPlugin(l,{id:s.config.id,name:s.config.name,description:s.config.description,version:s.config.version,enabled:s.config.enabled,priority:s.config.priority||0,settings:s.config.settings||{}}),Ge.debug(` Also registered ${r} in AdapterStore for React integration`)}catch(d){Ge.warn(` Failed to register ${r} in AdapterStore:`,d)}ue.emit("plugin:registered",{name:r,version:l.version}),Ge.debug(` Registered plugin: ${r} v${l.version}`)}catch(s){const d=s instanceof Error?s.message:"Unknown registration error";throw Va.handleError(s,{component:"plugin-registry",operation:"registration",source:"[PluginRegistry]",details:{pluginName:r,error:d}}),ue.emit("adapter:error",{name:r,error:d}),new Error(`Failed to register plugin ${r}: ${d}`)}}registerAdapterFactory(l){if(!this.isInitialized)throw new Error("Plugin registry not initialized");const n=l.name;if(this.adapterFactories.has(n)){Ge.warn(` Adapter factory ${n} is already registered`);return}if(this.plugins.has(n)){Ge.warn(` Plugin ${n} is already registered as instance`);return}try{this.validateAdapterFactory(l);const r={factory:l,registeredAt:Date.now()};this.adapterFactories.set(n,r),Ge.debug(` Registered adapter factory: ${n} v${l.version}`)}catch(r){const s=r instanceof Error?r.message:"Unknown factory registration error";throw Ge.error(` Failed to register adapter factory ${n}:`,s),new Error(`Failed to register adapter factory ${n}: ${s}`)}}async initializeAdapterFromFactory(l){const n=this.adapterFactories.get(l);if(!n||!this.context)return null;try{Ge.debug(` Lazily initializing adapter: ${l}`);const r=n.factory.create();return await this.register(r,n.factory.config),this.adapterFactories.delete(l),Ge.debug(` Successfully initialized adapter: ${l}`),r}catch(r){const s=r instanceof Error?r.message:"Unknown initialization error";return Ge.error(` Failed to initialize adapter ${l}:`,s),Va.handleError(r,{component:"plugin-registry",operation:"lazy-initialization",source:"[PluginRegistry]",details:{factoryName:l,error:s}}),null}}async unregister(l){var r;const n=this.plugins.get(l);if(!n){Ge.warn(` Plugin ${l} is not registered`);return}try{((r=this.activePlugin)==null?void 0:r.name)===l&&await this.deactivateCurrentPlugin(),await n.plugin.cleanup(),this.plugins.delete(l),ue.emit("plugin:unregistered",{name:l}),Ge.debug(` Unregistered plugin: ${l}`)}catch(s){const d=s instanceof Error?s.message:"Unknown unregistration error";throw Va.handleError(s,{component:"plugin-registry",operation:"unregistration",source:"[PluginRegistry]",details:{pluginName:l,error:d}}),s}}async activatePluginForHostname(l,n=!1){var r;n&&(this.isPerformingInitialActivation=!0);try{Ge.debug(` activatePluginForHostname called for: ${l}${n?" (initial)":""}`);const s=await this.findOrInitializePluginForHostname(l);if(!s){Ge.debug(` No plugin found for hostname: ${l}`),this.activePlugin&&await this.deactivateCurrentPlugin();return}if(((r=this.activePlugin)==null?void 0:r.name)===s.name){Ge.debug(` Plugin ${s.name} already active for ${l}, skipping activation`);return}Ge.debug(` Activating plugin ${s.name} for hostname: ${l}`),await this.activatePlugin(s.name)}finally{n&&(this.isPerformingInitialActivation=!1)}}async activatePlugin(l){const n=this.plugins.get(l);if(!n)throw new Error(`Plugin ${l} is not registered`);if(this.activePlugin&&this.activePlugin.name===l&&n.status==="active"){Ge.debug(` Plugin ${l} is already active, skipping activation`);return}try{this.activePlugin&&this.activePlugin.name!==l&&this.activePlugin.name!=="sidebar-plugin"&&await this.deactivateCurrentPlugin();const r=n.plugin;await Qn.time(`plugin-activation-${l}`,async()=>{await r.activate()}),l!=="sidebar-plugin"&&(this.activePlugin=r),n.instance=r,n.status="active",n.lastUsedAt=Date.now();try{await po.getState().activateAdapter(l),Ge.debug(` Also activated ${l} in AdapterStore for React integration`)}catch(s){Ge.warn(` Failed to activate ${l} in AdapterStore:`,s)}ue.emit("adapter:activated",{pluginName:l,timestamp:Date.now()}),Ge.debug(` Activated plugin: ${l}`)}catch(r){const s=r instanceof Error?r.message:"Unknown activation error";throw Va.handleError(r,{component:"plugin-registry",operation:"activation",source:"[PluginRegistry]",details:{pluginName:l,error:s}}),ue.emit("plugin:activation-failed",{name:l,error:s}),new Error(`Failed to activate plugin ${l}: ${s}`)}}async deactivateCurrentPlugin(){if(!this.activePlugin)return;const l=this.activePlugin.name;try{await Qn.time(`plugin-deactivation-${l}`,async()=>{await this.activePlugin.deactivate()});try{await po.getState().deactivateAdapter(l,"manual-deactivation"),Ge.debug(` Also deactivated ${l} in AdapterStore`)}catch(n){Ge.warn(` Failed to deactivate ${l} in AdapterStore:`,n)}ue.emit("adapter:deactivated",{pluginName:l,reason:"manual-deactivation",timestamp:Date.now()}),this.activePlugin=null,Ge.debug(` Deactivated plugin: ${l}`)}catch(n){const r=n instanceof Error?n.message:"Unknown deactivation error";Va.handleError(n,{component:"plugin-registry",operation:"deactivation",source:"[PluginRegistry]",details:{pluginName:l,error:r}}),this.activePlugin=null,ue.emit("adapter:error",{name:l,error:r})}}findPluginForHostname(l){Ge.debug(` findPluginForHostname called with hostname: ${l}`);let n=null,r=0;for(const[,s]of this.plugins){const{plugin:d,config:h}=s;if(!h.enabled){Ge.debug(` Skipping disabled plugin: ${d.name}`);continue}if(d.name==="sidebar-plugin"){Ge.debug(` Skipping sidebar plugin: ${d.name}`);continue}const v=d.type||"website-adapter";if(Ge.debug(` Checking plugin: ${d.name} (type: ${v})`),v!=="website-adapter"){Ge.debug(` Skipping non-website-adapter plugin: ${d.name} (type: ${v})`);continue}for(const S of d.hostnames){let w=!1,M=0;if(typeof S=="string"?(Ge.debug(` Checking string hostname: ${S} against ${l}`),l.includes(S)&&(w=!0,M=S.length,Ge.debug(` String match found: ${S} matches ${l}`))):(Ge.debug(` Checking RegExp hostname: ${S.source} against ${l}`),S.test(l)&&(w=!0,M=S.source.length,Ge.debug(` RegExp match found: ${S.source} matches ${l}`))),w){const N=M+(h.priority||0);Ge.debug(` Match found for ${d.name}: score ${N} (length: ${M}, priority: ${h.priority||0})`),N>r&&(n=d,r=N,Ge.debug(` New best match: ${d.name} with score ${N}`))}}}return Ge.debug(` Best plugin match for ${l}:`,(n==null?void 0:n.name)||"none"),n}findFactoryForHostname(l){Ge.debug(` findFactoryForHostname called with hostname: ${l}`);let n=null,r=0;for(const[,s]of this.adapterFactories){const{factory:d}=s;if(Ge.debug(` Checking factory: ${d.name} (type: ${d.type}) with hostnames:`,d.hostnames),d.type!=="website-adapter"){Ge.debug(` Skipping factory ${d.name} - not a website-adapter (type: ${d.type})`);continue}for(const h of d.hostnames){let v=!1,S=0;if(typeof h=="string"?(Ge.debug(` Checking string hostname: ${h} against ${l}`),l.includes(h)&&(v=!0,S=h.length,Ge.debug(` String match found: ${h} matches ${l}`))):(Ge.debug(` Checking RegExp hostname: ${h.source} against ${l}`),h.test(l)&&(v=!0,S=h.source.length,Ge.debug(` RegExp match found: ${h.source} matches ${l}`))),v){const w=d.config.priority||0,M=S+w;Ge.debug(` Match found for ${d.name}: score ${M} (length: ${S}, priority: ${w})`),M>r&&(n=d,r=M,Ge.debug(` New best match: ${d.name} with score ${M}`))}}}return Ge.debug(` Best factory match for ${l}:`,(n==null?void 0:n.name)||"none"),n}async findOrInitializePluginForHostname(l){Ge.debug(` findOrInitializePluginForHostname called with: ${l}`);let n=this.findPluginForHostname(l);if(n)return Ge.debug(` Found initialized plugin for ${l}: ${n.name}`),n;const r=this.findFactoryForHostname(l);return r&&(Ge.debug(` Found factory for ${l}: ${r.name}, initializing lazily`),n=await this.initializeAdapterFromFactory(r.name),n)?(Ge.debug(` Successfully initialized ${n.name} for ${l}`),n):(Ge.debug(` No plugin or factory found for hostname: ${l}`),null)}validatePlugin(l){const n=["name","version","hostnames","capabilities","initialize","activate","deactivate","cleanup"];for(const r of n)if(!(r in l))throw new Error(`Plugin missing required property: ${r}`);if(!Array.isArray(l.hostnames)||l.hostnames.length===0)throw new Error("Plugin must specify at least one hostname");if(!Array.isArray(l.capabilities)||l.capabilities.length===0)throw new Error("Plugin must specify at least one capability");if(l.type&&!["sidebar","website-adapter","core-ui","extension"].includes(l.type))throw new Error(`Plugin has invalid type: ${l.type}`)}validateAdapterFactory(l){const n=["name","version","type","hostnames","capabilities","create"];for(const r of n)if(!(r in l))throw new Error(`Adapter factory missing required property: ${r}`);if(!Array.isArray(l.hostnames)||l.hostnames.length===0)throw new Error("Adapter factory must specify at least one hostname");if(!Array.isArray(l.capabilities)||l.capabilities.length===0)throw new Error("Adapter factory must specify at least one capability");if(typeof l.create!="function")throw new Error("Adapter factory must have a create function")}createPluginConfig(l,n){const r={};return l.capabilities&&l.capabilities.forEach(d=>{r[d]=!0}),{id:(n==null?void 0:n.id)||l.name,name:(n==null?void 0:n.name)||l.name,description:(n==null?void 0:n.description)||`Configuration for ${l.name}`,version:(n==null?void 0:n.version)||l.version,enabled:(n==null?void 0:n.enabled)!==void 0?n.enabled:!0,priority:(n==null?void 0:n.priority)||0,settings:(n==null?void 0:n.settings)||{},customSelectors:(n==null?void 0:n.customSelectors)||{},features:{...r,...(n==null?void 0:n.features)||{}}}}async registerBuiltInAdapters(){try{const l=new sA;await this.register(l,{id:"remote-config-plugin",name:"Remote Config Plugin",description:"Firebase Remote Config integration for feature flags and notifications",version:"1.0.0",enabled:!0,priority:2,settings:{logLevel:"info",autoActivate:!0}});const n=new iA;await this.register(n,{id:"sidebar-plugin",name:"Sidebar Plugin",description:"Universal sidebar management plugin that auto-shows on page load",version:"1.0.0",enabled:!0,priority:1,settings:{logLevel:"info",autoShow:!0,showDelay:1e3}}),this.registerAdapterFactory({name:"gemini-adapter",version:"1.0.0",type:"website-adapter",hostnames:["gemini.google.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Dx,config:{id:"gemini-adapter",name:"Gemini Adapter",description:"Specialized adapter for Google Gemini with chat input, form submission, and file attachment support",version:"1.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"github-copilot-adapter",version:"2.0.0",type:"website-adapter",hostnames:["github.com"],capabilities:["text-insertion","form-submission"],create:()=>new zx,config:{id:"github-copilot-adapter",name:"GitHub Copilot Adapter",description:"Specialized adapter for GitHub Copilot with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"chatgpt-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chatgpt.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new iS,config:{id:"chatgpt-adapter",name:"ChatGPT Adapter",description:"Specialized adapter for OpenAI ChatGPT with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"deepseek-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chat.deepseek.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Nx,config:{id:"deepseek-adapter",name:"DeepSeek Adapter",description:"Specialized adapter for DeepSeek Chat with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"grok-adapter",version:"2.0.0",type:"website-adapter",hostnames:["grok.com",/x\.com.*grok/,/twitter\.com.*grok/],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Ux,config:{id:"grok-adapter",name:"Grok Adapter",description:"Specialized adapter for Grok (X.com/Grok.com) with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"perplexity-adapter",version:"2.0.0",type:"website-adapter",hostnames:["perplexity.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Px,config:{id:"perplexity-adapter",name:"Perplexity Adapter",description:"Specialized adapter for Perplexity AI with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"aistudio-adapter",version:"2.0.0",type:"website-adapter",hostnames:["aistudio.google.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new _x,config:{id:"aistudio-adapter",name:"AI Studio Adapter",description:"Specialized adapter for Google AI Studio with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"openrouter-adapter",version:"2.0.0",type:"website-adapter",hostnames:["openrouter.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new $x,config:{id:"openrouter-adapter",name:"OpenRouter Adapter",description:"Specialized adapter for OpenRouter with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"t3chat-adapter",version:"2.0.0",type:"website-adapter",hostnames:["t3.chat"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new jx,config:{id:"t3chat-adapter",name:"T3Chat Adapter",description:"Specialized adapter for T3 Chat with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"mistralchat-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chat.mistral.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Lx,config:{id:"mistralchat-adapter",name:"Mistral Adapter",description:"Specialized adapter for Mistral chat with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"kimi-adapter",version:"2.0.0",type:"website-adapter",hostnames:["kimi.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new aS,config:{id:"kimi-adapter",name:"Kimi Adapter",description:"Specialized adapter for Kimi AI with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"z-adapter",version:"2.0.0",type:"website-adapter",hostnames:["z.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new oS,config:{id:"z-adapter",name:"Z Adapter",description:"Specialized adapter for Z (GLM) AI with chat input, form submission, and file attachment support",version:"1.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"qwen-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chat.qwen.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new rS,config:{id:"qwen-adapter",name:"Qwen Adapter",description:"Specialized adapter for Qwen AI with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),Ge.debug(` Successfully registered SidebarPlugin (initialized) and ${this.adapterFactories.size} adapter factories (lazy)`)}catch(l){const n=l instanceof Error?l.message:"Unknown registration error";throw Ge.error("[PluginRegistry] Failed to register built-in adapters:",n),new Error(`Built-in adapter registration failed: ${n}`)}}getActivePlugin(){return this.activePlugin}getRegisteredPlugins(){return Array.from(this.plugins.entries()).map(([l,n])=>({name:l,plugin:n.plugin,config:n.config}))}getRegisteredFactories(){return Array.from(this.adapterFactories.entries()).map(([l,n])=>({name:l,factory:n.factory}))}getPluginByName(l){const n=this.plugins.get(l);return n?n.plugin:null}isPluginRegistered(l){return this.plugins.has(l)}isFactoryRegistered(l){return this.adapterFactories.has(l)}updatePluginConfig(l,n){const r=this.plugins.get(l);if(!r)throw new Error(`Plugin ${l} is not registered`);const s={...r.config,...n};r.config=s,ue.emit("plugin:config-updated",{name:l,config:s,timestamp:Date.now()})}setInitialActivationFlag(l){Ge.debug(` setInitialActivationFlag called with: ${l}, current flag: ${this.isPerformingInitialActivation}`),this.isPerformingInitialActivation=l,Ge.debug(` Initial activation flag set to: ${l}`)}getDebugInfo(){var l;return{isInitialized:this.isInitialized,activePlugin:((l=this.activePlugin)==null?void 0:l.name)||null,registeredPluginsCount:this.plugins.size,registeredFactoriesCount:this.adapterFactories.size,plugins:Array.from(this.plugins.keys()),factories:Array.from(this.adapterFactories.keys())}}async cleanup(){var l;try{await this.deactivateCurrentPlugin();for(const[n,r]of this.plugins.entries())try{await r.plugin.cleanup(),Ge.debug(` Cleaned up plugin: ${n}`)}catch(s){const d=s instanceof Error?s.message:"Unknown cleanup error";Ge.error(` Failed to cleanup plugin ${n}:`,d)}if(this.plugins.clear(),this.adapterFactories.clear(),(l=this.context)!=null&&l.cleanupFunctions){for(const n of this.context.cleanupFunctions)try{n()}catch(r){Ge.error("[PluginRegistry] Error during context cleanup:",r)}this.context.cleanupFunctions=[]}this.isInitialized=!1,this.activePlugin=null,this.context=null,this.initializationPromise=null,Ge.debug("[PluginRegistry] Cleanup completed")}catch(n){const r=n instanceof Error?n.message:"Unknown cleanup error";throw Ge.error("[PluginRegistry] Cleanup failed:",r),n}}}const Qh=new lA;async function cA(){const f={eventBus:ue,stores:{app:Er,connection:Gi,tool:go,ui:ia,adapter:po,config:Wf},utils:{createElement:(l,n,r)=>{const s=document.createElement(l);return n&&Object.entries(n).forEach(([d,h])=>{s.setAttribute(d,String(h))}),r&&r.forEach(d=>{s.appendChild(typeof d=="string"?document.createTextNode(d):d)}),s},waitForElement:async(l,n=5e3,r=document)=>new Promise(s=>{const d=r.querySelector(l);if(d){s(d);return}const h=new MutationObserver(()=>{const v=r.querySelector(l);v&&(h.disconnect(),s(v))});h.observe(r,{childList:!0,subtree:!0}),setTimeout(()=>{h.disconnect(),s(null)},n)}),injectCSS:(l,n)=>{const r=document.createElement("style");return r.textContent=l,n&&(r.id=n),document.head.appendChild(r),r},observeChanges:(l,n,r)=>{const s=new MutationObserver(n);return s.observe(l,r),s},debounce:(l,n)=>{let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>l(...s),n)}},throttle:(l,n)=>{let r=0;return(...s)=>{const d=Date.now();if(d-r>=n)return r=d,l(...s)}},getUniqueId:(l="id")=>`${l}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`},chrome:typeof chrome<"u"?{runtime:chrome.runtime,storage:chrome.storage,tabs:chrome.tabs}:{runtime:{},storage:{}},logger:{debug:(...l)=>Ge.debug("[Plugin]",...l),info:(...l)=>Ge.info("[Plugin]",...l),warn:(...l)=>Ge.warn("[Plugin]",...l),error:(...l)=>Ge.error("[Plugin]",...l)},cleanupFunctions:[]};await Qh.initialize(f)}const Kh=Object.freeze(Object.defineProperty({__proto__:null,initializePluginRegistry:cA,pluginRegistry:Qh},Symbol.toStringTag,{value:"Module"})),nC=nt("Stores");async function uA(){var l,n,r;nC.debug("Initializing all stores..."),Gi.getState(),go.getState(),ia.getState(),po.getState(),Wf.getState().setUserProperties({extensionVersion:((r=(n=(l=chrome==null?void 0:chrome.runtime)==null?void 0:l.getManifest)==null?void 0:n.call(l))==null?void 0:r.version)||"0.0.0",lastActiveDate:new Date().toISOString(),browserVersion:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}),Er.getState().isInitialized||await Er.getState().initialize(),nC.debug("All stores accessed/initialized.")}const Ju=nt("DOMUtils");function dA(f,l={},n=[]){const r=document.createElement(f);for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&r.setAttribute(s,l[s]);return n.forEach(s=>{typeof s=="string"?r.appendChild(document.createTextNode(s)):r.appendChild(s)}),Ju.debug(`Created <${f}> element.`),r}function fA(f,l=5e3,n=document){return Ju.debug(`Waiting for selector: "${f}" with timeout ${l}ms.`),new Promise(r=>{const s=Date.now(),d=new MutationObserver((v,S)=>{const w=n.querySelector(f);if(w){S.disconnect(),Ju.debug(`Element "${f}" found.`),r(w);return}Date.now()-s>l&&(S.disconnect(),Ju.warn(`Timeout waiting for element "${f}".`),r(null))}),h=n.querySelector(f);if(h){Ju.debug(`Element "${f}" already exists.`),r(h);return}d.observe(n===document?document.documentElement:n,{childList:!0,subtree:!0})})}function gA(f,l){const n=document.createElement("style");return l&&(n.id=l),n.textContent=f,document.head.appendChild(n),Ju.debug(`CSS injected${l?" with ID: "+l:""}.`),n}function pA(f,l,n){const r=new MutationObserver(l);return r.observe(f,n),Ju.debug("[Utils.observeChanges] Mutation observer started."),r}function hA(f,l){let n=null;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{f.apply(this,r)},l)}}function mA(f,l){let n=0,r=null;return function(...s){const d=Date.now(),h=l-(d-n);h<=0?(r&&(clearTimeout(r),r=null),n=d,f.apply(this,s)):r||(r=setTimeout(()=>{n=Date.now(),r=null,f.apply(this,s)},h))}}function bA(f="id_"){const l=()=>((1+Math.random())*65536|0).toString(16).substring(1),n=`${l()}${l()}-${l()}-${l()}-${l()}-${l()}${l()}${l()}`,r=f+n;return console.debug(`[Utils.getUniqueId] Generated ID: ${r}`),r}const vA={createElement:dA,waitForElement:fA,injectCSS:gA,observeChanges:pA,debounce:hA,throttle:mA,getUniqueId:bA};function yA(f){return{eventBus:ue,stores:{app:Er.getState,connection:Gi.getState,tool:go.getState,ui:ia.getState,adapter:po.getState,config:Wf.getState},utils:vA,chrome:{runtime:chrome.runtime,storage:chrome.storage,tabs:chrome.tabs},logger:nt(f),getConfig:()=>{var r;return(r=po.getState().registeredPlugins[f])==null?void 0:r.config.settings}}}var xA={};const iC=nt("Index");async function aC(){try{const{pluginRegistry:f}=await Promise.resolve().then(()=>Kh);await f.cleanup(),iC.debug("[Plugin System] Cleaned up successfully")}catch(f){iC.error("[Plugin System] Failed to cleanup:",f)}}xA.NODE_ENV==="development"&&(window.__pluginSystem={async getRegistry(){const{pluginRegistry:f}=await Promise.resolve().then(()=>Kh);return f},cleanup:aC,async initialize(){const{initializePluginRegistry:f}=await Promise.resolve().then(()=>Kh);return f()}});const vs=class vs{constructor(){z(this,"isInitialized",!1);z(this,"heartbeatInterval",null);z(this,"HEARTBEAT_INTERVAL",3e4);this.initialize()}initialize(){if(this.isInitialized){R("[McpClient] Already initialized");return}try{R("[McpClient] Starting initialization..."),Aa.initialize(),R("[McpClient] Context bridge initialized"),this.setupMessageListeners(),R("[McpClient] Message listeners setup complete"),this.startHeartbeat(),R("[McpClient] Heartbeat started"),this.isInitialized=!0,this.requestInitialState().catch(l=>{R(`[McpClient] Initial state request failed (non-blocking): ${l instanceof Error?l.message:String(l)}`)}),R("[McpClient] Initialized successfully")}catch(l){const n=l instanceof Error?l.message:String(l);throw R(`[McpClient] Initialization failed: ${n}`),this.isInitialized=!1,ue.emit("error:unhandled",{error:l instanceof Error?l:new Error(n),context:"mcp-client-initialization"}),l}}async requestInitialState(){let n=0;for(;n<3;)try{R(`[McpClient] Requesting initial state from background (attempt ${n+1}/3)...`);try{const r=await this.getCurrentConnectionStatus();if(r){R(`[McpClient] Initial connection status: ${r.status} (isConnected: ${r.isConnected})`);const s=r.status;this.handleConnectionStatusChange(s,void 0)}}catch(r){R(`[McpClient] Failed to get initial connection status: ${r instanceof Error?r.message:String(r)}`)}try{const r=await this.getServerConfig();Gi.getState().setServerConfig(r),R(`[McpClient] Initial server config loaded: ${JSON.stringify(r)}`)}catch(r){R(`[McpClient] Failed to get server config: ${r instanceof Error?r.message:String(r)}`),Gi.getState().setServerConfig({uri:"http://localhost:3006/sse",connectionType:"sse",timeout:5e3,retryAttempts:3,retryDelay:2e3})}try{const r=await this.getAvailableTools(!0);R(`[McpClient] Initial tools loaded: ${r.length} tools`)}catch(r){R(`[McpClient] Failed to get initial tools: ${r instanceof Error?r.message:String(r)}`)}R("[McpClient] Initial state request completed successfully");return}catch(r){n++;const s=r instanceof Error?r.message:String(r);if(R(`[McpClient] Initial state request attempt ${n} failed: ${s}`),n>=3){R("[McpClient] All 3 initial state request attempts failed. Continuing with degraded functionality."),ue.emit("error:unhandled",{error:r instanceof Error?r:new Error(s),context:"mcp-client-initial-state"});return}const d=Math.min(1e3*Math.pow(2,n-1),5e3);R(`[McpClient] Retrying in ${d}ms...`),await new Promise(h=>setTimeout(h,d))}}setupMessageListeners(){Aa.onMessage("connection:status-changed",l=>{try{const{status:n,error:r,isConnected:s}=l.payload??{};R(`[McpClient] Received connection status message: ${JSON.stringify(l)}`),n?(R(`[McpClient] Processing status: ${n}, error: ${r}, isConnected: ${s}`),this.handleConnectionStatusChange(n,r)):R(`[McpClient] Warning: No status in connection message payload. Received: ${JSON.stringify(l)}`)}catch(n){R(`[McpClient] Error processing connection status message: ${n instanceof Error?n.message:String(n)}`)}}),Aa.onMessage("mcp:tool-update",l=>{try{const n=Array.isArray(l.payload)?l.payload:[];R(`[McpClient] Received tool update: ${n.length} tools`),this.handleToolUpdate(n)}catch(n){R(`[McpClient] Error processing tool update: ${n instanceof Error?n.message:String(n)}`)}}),Aa.onMessage("mcp:server-config-updated",l=>{try{const{config:n}=l.payload??{};n?(R(`[McpClient] Received server config update: ${JSON.stringify(n)}`),this.handleServerConfigUpdate(n)):R("[McpClient] Warning: No config in server config update message")}catch(n){R(`[McpClient] Error processing server config update: ${n instanceof Error?n.message:String(n)}`)}}),Aa.onMessage("mcp:heartbeat-response",l=>{try{const{timestamp:n,isConnected:r}=l.payload??{};if(n){if(typeof r=="boolean"){const s=Gi.getState().status,d=r?"connected":"disconnected";s!==d&&(R(`[McpClient] Heartbeat indicates status should be ${d}, updating from ${s}`),this.handleConnectionStatusChange(d))}this.handleHeartbeatResponse(n)}else R("[McpClient] Warning: No timestamp in heartbeat response")}catch(n){R(`[McpClient] Error processing heartbeat response: ${n instanceof Error?n.message:String(n)}`)}}),R("[McpClient] Message listeners configured successfully")}handleConnectionStatusChange(l,n){const r=Gi.getState();switch(R(`[McpClient] Connection status changed to: ${l}${n?` (${n})`:""}`),l){case"connected":r.setConnected(Date.now()),ue.emit("connection:status-changed",{status:l,error:void 0}),R("[McpClient] Emitted connected status to event bus"),this.getAvailableTools(!0).then(s=>{R(`[McpClient] Auto-fetched ${s.length} tools after connection`)}).catch(s=>{R(`[McpClient] Failed to auto-fetch tools after connection: ${s instanceof Error?s.message:String(s)}`)});break;case"reconnecting":r.startReconnecting(),ue.emit("connection:status-changed",{status:l,error:void 0}),R("[McpClient] Emitted reconnecting status to event bus");break;case"error":r.setDisconnected(n??"Unknown connection error"),ue.emit("connection:status-changed",{status:l,error:n??"Unknown connection error"}),R("[McpClient] Emitted error status to event bus");break;case"disconnected":default:r.setDisconnected(n),ue.emit("connection:status-changed",{status:"disconnected",error:n}),R("[McpClient] Emitted disconnected status to event bus")}}handleToolUpdate(l){R(`[McpClient] Received tool update with ${l.length} tools`);const n=l.map(r=>({name:r.name,description:r.description||"",input_schema:r.input_schema||r.schema||{},schema:typeof r.schema=="string"?r.schema:JSON.stringify(r.input_schema||{})}));go.getState().setAvailableTools(n),ue.emit("tool:list-updated",{tools:n})}handleServerConfigUpdate(l){R("[McpClient] Server config updated from background"),Gi.getState().setServerConfig(l)}handleHeartbeatResponse(l){ue.emit("connection:heartbeat",{timestamp:l})}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.sendHeartbeat().catch(l=>{R(`[McpClient] Heartbeat failed: ${l instanceof Error?l.message:String(l)}`)})},this.HEARTBEAT_INTERVAL),R("[McpClient] Heartbeat started")}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null,R("[McpClient] Heartbeat stopped"))}async sendHeartbeat(){try{await Aa.sendMessage("background","mcp:heartbeat",{timestamp:Date.now()},{timeout:5e3})}catch(l){const n=l instanceof Error?l.message:String(l);R(`[McpClient] Heartbeat failed: ${n}`)}}async callTool(l,n){if(!this.isInitialized)throw new Error("McpClient not initialized");if(!l||typeof l!="string")throw new Error("Tool name is required and must be a string");const r=Gi.getState();if(r.status!=="connected")throw new Error(`Not connected to MCP server. Current status: ${r.status}. Please check your connection.`);R(`[McpClient] Calling tool: ${l} with args: ${JSON.stringify(n)}`);const s=Qh.getActivePlugin(),d=(s==null?void 0:s.name)||window.location.hostname||"unknown",h=go.getState().startToolExecution(l,n);try{const v=await Aa.sendMessage("background","mcp:call-tool",{toolName:l,args:n,adapterName:d},{timeout:3e4});return R(`[McpClient] Tool call successful: ${l}`),go.getState().completeToolExecution(h,v,"success"),ue.emit("tool:execution-completed",{execution:{id:h,toolName:l,parameters:n,result:v,timestamp:Date.now(),status:"success"}}),v}catch(v){const S=v instanceof Error?v.message:String(v);throw R(`[McpClient] Tool call failed: ${l} - ${S}`),go.getState().completeToolExecution(h,null,"error",S),ue.emit("tool:execution-failed",{toolName:l,error:S,callId:h}),this.isConnectionError(S)&&(R("[McpClient] Tool call failed due to connection issue, updating connection status"),r.setDisconnected(`Tool call failed: ${S}`)),v}}isConnectionError(l){return[/connection refused/i,/econnrefused/i,/timeout/i,/etimedout/i,/network error/i,/server unavailable/i,/could not connect/i,/connection failed/i,/transport error/i,/fetch failed/i,/chrome runtime error/i].some(r=>r.test(l))}async getAvailableTools(l=!1){if(!this.isInitialized)throw new Error("McpClient not initialized");R(`[McpClient] Getting available tools (forceRefresh: ${l})`);try{const n=await Aa.sendMessage("background","mcp:get-tools",{forceRefresh:l},{timeout:1e4}),s=(Array.isArray(n)?n:[]).map(d=>({name:d.name,description:d.description||"",input_schema:d.input_schema||d.schema||{},schema:typeof d.schema=="string"?d.schema:JSON.stringify(d.input_schema||{})}));return go.getState().setAvailableTools(s),R(`[McpClient] Retrieved ${s.length} tools`),s}catch(n){const r=n instanceof Error?n.message:String(n);throw R(`[McpClient] Failed to get available tools: ${r}`),n}}async forceReconnect(){if(!this.isInitialized)throw new Error("McpClient not initialized");R("[McpClient] Force reconnect requested");const l=Gi.getState();try{l.startReconnecting(),ue.emit("connection:status-changed",{status:"reconnecting",error:void 0});const n=await Aa.sendMessage("background","mcp:force-reconnect",{},{timeout:25e3}),r=(n==null?void 0:n.isConnected)??!1;if(r){l.setConnected(Date.now()),R("[McpClient] Force reconnect successful"),ue.emit("connection:status-changed",{status:"connected",error:void 0});try{await this.getAvailableTools(!0),R("[McpClient] Tools refreshed after successful reconnection")}catch(s){R(`[McpClient] Failed to refresh tools after reconnect: ${s instanceof Error?s.message:String(s)}`)}}else{const s=(n==null?void 0:n.error)||"Reconnect attempt failed";l.setDisconnected(s),R(`[McpClient] Force reconnect failed: ${s}`),ue.emit("connection:status-changed",{status:"disconnected",error:s})}return r}catch(n){const r=n instanceof Error?n.message:String(n);throw l.setDisconnected(`Reconnect failed: ${r}`),R(`[McpClient] Force reconnect error: ${r}`),ue.emit("connection:status-changed",{status:"error",error:`Reconnect failed: ${r}`}),n}}async forceConnectionStatusCheck(){if(!this.isInitialized)throw new Error("McpClient not initialized");R("[McpClient] Forcing immediate connection status check");try{const l=await this.getCurrentConnectionStatus();if(l){R(`[McpClient] Immediate connection status: ${l.status} (isConnected: ${l.isConnected})`);const n=l.status;this.handleConnectionStatusChange(n,void 0)}}catch(l){const n=l instanceof Error?l.message:String(l);R(`[McpClient] Failed to get immediate connection status: ${n}`)}}async getServerConfig(){if(!this.isInitialized)throw new Error("McpClient not initialized");R("[McpClient] Getting server config");try{const l=await Aa.sendMessage("background","mcp:get-server-config",{},{timeout:5e3});return R("[McpClient] Server config retrieved successfully"),l}catch(l){const n=l instanceof Error?l.message:String(l);throw R(`[McpClient] Failed to get server config: ${n}`),l}}async getCurrentConnectionStatus(){if(!this.isInitialized)throw new Error("McpClient not initialized");R("[McpClient] Getting current connection status");try{const l=await Aa.sendMessage("background","mcp:get-connection-status",{},{timeout:5e3});return R(`[McpClient] Current connection status retrieved: ${l.status}`),l}catch(l){const n=l instanceof Error?l.message:String(l);throw R(`[McpClient] Failed to get current connection status: ${n}`),l}}async updateServerConfig(l){if(!this.isInitialized)throw new Error("McpClient not initialized");R(`[McpClient] Updating server config: ${JSON.stringify(l)}`);try{const n=await Aa.sendMessage("background","mcp:update-server-config",{config:l},{timeout:15e3}),r=!!(n!=null&&n.success);return r?(Gi.getState().setServerConfig(l),R("[McpClient] Server config updated successfully")):R("[McpClient] Server config update failed"),r}catch(n){const r=n instanceof Error?n.message:String(n);throw R(`[McpClient] Failed to update server config: ${r}`),n}}getConnectionStatus(){return Gi.getState().status}isReady(){return this.isInitialized}cleanup(){this.stopHeartbeat(),this.isInitialized=!1,R("[McpClient] Cleanup completed")}static getInstance(){return vs.instance||(vs.instance=new vs),vs.instance}static resetInstance(){vs.instance&&(vs.instance.cleanup(),vs.instance=null)}};z(vs,"instance",null);let sS=vs;const Cr=sS.getInstance(),oC=nt("CircuitBreaker");class SA{constructor(l={failureThreshold:5,resetTimeout:6e4,monitoringWindow:3e5}){z(this,"state","closed");z(this,"failureCount",0);z(this,"successCount",0);z(this,"lastFailureTime",0);z(this,"nextAttemptTime",0);z(this,"eventBus");this.config=l}initialize(l){l!=null&&l.eventBus?this.eventBus=l.eventBus:this.eventBus=ue,oC.debug("[CircuitBreaker] Initialized with config:",this.config)}async execute(l,n="unknown"){var r,s;if(this.state==="open")if(Date.now()<this.nextAttemptTime){const d=new Error(`Circuit breaker is OPEN for operation: ${n}`);throw(r=this.eventBus)==null||r.emit("error:circuit-breaker-blocked",{operation:n,state:this.state,nextAttemptTime:this.nextAttemptTime,error:d}),d}else this.state="half-open",(s=this.eventBus)==null||s.emit("error:circuit-breaker-half-open",{operation:n,state:this.state});try{const d=await l();return this.onSuccess(n),d}catch(d){throw this.onFailure(d,n),d}}executeSync(l,n="unknown"){var r,s;if(this.state==="open")if(Date.now()<this.nextAttemptTime){const d=new Error(`Circuit breaker is OPEN for operation: ${n}`);throw(r=this.eventBus)==null||r.emit("error:circuit-breaker-blocked",{operation:n,state:this.state,nextAttemptTime:this.nextAttemptTime,error:d}),d}else this.state="half-open",(s=this.eventBus)==null||s.emit("error:circuit-breaker-half-open",{operation:n,state:this.state});try{const d=l();return this.onSuccess(n),d}catch(d){throw this.onFailure(d,n),d}}onSuccess(l){var n;this.successCount++,this.state==="half-open"&&(this.state="closed",this.failureCount=0,(n=this.eventBus)==null||n.emit("error:circuit-breaker-closed",{operation:l,state:this.state,stats:this.getStats()}))}onFailure(l,n){var s;this.failureCount++,this.lastFailureTime=Date.now();const r=Date.now()-this.config.monitoringWindow;this.lastFailureTime<r&&(this.failureCount=1),this.failureCount>=this.config.failureThreshold&&(this.state="open",this.nextAttemptTime=Date.now()+this.config.resetTimeout,(s=this.eventBus)==null||s.emit("error:circuit-breaker-opened",{operation:n,state:this.state,error:l,failureCount:this.failureCount,nextAttemptTime:this.nextAttemptTime,stats:this.getStats()}))}getStats(){return{state:this.state,failureCount:this.failureCount,successCount:this.successCount,lastFailureTime:this.lastFailureTime,nextAttemptTime:this.nextAttemptTime}}forceOpen(l){var n;this.state="open",this.nextAttemptTime=Date.now()+(l||this.config.resetTimeout),(n=this.eventBus)==null||n.emit("error:circuit-breaker-forced-open",{state:this.state,nextAttemptTime:this.nextAttemptTime})}forceClose(){var l;this.state="closed",this.failureCount=0,this.nextAttemptTime=0,(l=this.eventBus)==null||l.emit("error:circuit-breaker-forced-closed",{state:this.state})}isOperational(){return this.state==="closed"||this.state==="half-open"||this.state==="open"&&Date.now()>=this.nextAttemptTime}cleanup(){this.state="closed",this.failureCount=0,this.successCount=0,this.lastFailureTime=0,this.nextAttemptTime=0,oC.debug("[CircuitBreaker] Cleaned up")}}const ag=new SA;nt("UILogger");const lS=nt("AnalyticsService");"update_url"in chrome.runtime.getManifest();const rC=typeof window<"u";async function Wu(f,l,n){{lS.warn("[GA4] Analytics tracking is disabled. Ensure CEB_GA_MEASUREMENT_ID and CEB_GA_API_SECRET are set in your .env file and the build process is using them.");return}}function wA(){try{const f=(navigator==null?void 0:navigator.userAgent)||"Unknown",l=(navigator==null?void 0:navigator.language)||"en";let n="Unknown",r="Unknown",s="Unknown",d="Unknown";if(f.indexOf("Firefox")>-1){n="Firefox";const k=f.match(/Firefox\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Edg")>-1){n="Edge";const k=f.match(/Edg\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Chrome")>-1){n="Chrome";const k=f.match(/Chrome\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Safari")>-1){n="Safari";const k=f.match(/Version\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("MSIE")>-1||f.indexOf("Trident/")>-1){n="Internet Explorer";const k=f.match(/(?:MSIE |rv:)(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}if(f.indexOf("Windows")>-1){s="Windows";const k=f.match(/Windows NT (\d+\.\d+)/),A=k&&k[1]?k[1]:"Unknown";d={"10.0":"10/11","6.3":"8.1","6.2":"8","6.1":"7","6.0":"Vista","5.2":"XP x64","5.1":"XP"}[A]||A}else if(f.indexOf("Mac")>-1){s="macOS";const k=f.match(/Mac OS X ([\d_]+)/);d=k&&k[1]?k[1].replace(/_/g,"."):"Unknown"}else if(f.indexOf("Linux")>-1){s="Linux";const k=f.match(/Linux ([\w\d\.]+)/);d=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Android")>-1){s="Android";const k=f.match(/Android ([\d\.]+)/);d=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("iOS")>-1||f.indexOf("iPhone")>-1||f.indexOf("iPad")>-1){s="iOS";const k=f.match(/OS ([\d_]+)/);d=k&&k[1]?k[1].replace(/_/g,"."):"Unknown"}let h="desktop";/Mobi|Android|iPhone|iPad|iPod/i.test(f)&&(h=/iPad|tablet/i.test(f)?"tablet":"mobile");const v=l.split("-")[1]||l;let S="Unknown",w=1,M="Unknown",N=0;if(rC&&typeof window<"u")try{S=`${window.screen.width}x${window.screen.height}`,w=window.devicePixelRatio||1,M=Intl.DateTimeFormat().resolvedOptions().timeZone,N=new Date().getTimezoneOffset()/-60}catch(k){lS.debug("[GA4] Window-dependent features not available:",k)}return{browser:n,browser_version:r,operating_system:s,os_version:d,language:l,region:v,screen_resolution:S,pixel_ratio:w,device_type:h,timezone:M,timezone_offset:N,user_agent:f,context:rC?"content_script":"background_service_worker"}}catch(f){return lS.error("[GA4] Error collecting demographic data:",f),{browser:"Unknown",browser_version:"Unknown",operating_system:"Unknown",os_version:"Unknown",language:"en",region:"Unknown",screen_resolution:"Unknown",pixel_ratio:1,device_type:"desktop",timezone:"Unknown",timezone_offset:0,user_agent:"Unknown",context:"error",error:"Failed to collect demographic data"}}}const ed=nt("AnalyticsService"),ud=class ud{constructor(){z(this,"sessionStartTime",Date.now());z(this,"sessionToolExecutions",0);z(this,"sessionUniqueTools",new Set);z(this,"sessionAdapters",new Set);z(this,"sessionConnections",0);z(this,"sessionErrors",0);z(this,"lastUserAction","none");z(this,"userProperties",{});z(this,"demographicData",{});z(this,"currentConnectionStatus","disconnected");z(this,"connectionStartTime",null);z(this,"currentTransportType",null);z(this,"toolsAvailableCount",0);z(this,"activeAdapter",null);z(this,"lastConnectionTrackTime",0);z(this,"CONNECTION_TRACK_DEBOUNCE",2e3);this.initialize()}static getInstance(){return ud.instance||(ud.instance=new ud),ud.instance}async initialize(){try{const l=await chrome.storage.local.get(["installDate","version","userProperties","ga4UserPropertiesSet"]);this.demographicData=wA(),this.userProperties={extension_version:chrome.runtime.getManifest().version,install_date:l.installDate||new Date().toISOString(),...this.demographicData,...l.userProperties||{}},ed.debug("[AnalyticsService] Initialized with user properties:",this.userProperties),l.ga4UserPropertiesSet||(await this.setGA4UserProperties(),await chrome.storage.local.set({ga4UserPropertiesSet:!0}))}catch(l){ed.error("[AnalyticsService] Initialization failed:",l)}}async setGA4UserProperties(){try{const l={extension_version:{value:this.userProperties.extension_version},install_date:{value:this.userProperties.install_date},browser:{value:this.demographicData.browser},browser_version:{value:this.demographicData.browser_version},operating_system:{value:this.demographicData.operating_system},os_version:{value:this.demographicData.os_version},device_type:{value:this.demographicData.device_type},language:{value:this.demographicData.language},region:{value:this.demographicData.region},screen_resolution:{value:this.demographicData.screen_resolution},pixel_ratio:{value:this.demographicData.pixel_ratio},timezone:{value:this.demographicData.timezone},timezone_offset:{value:this.demographicData.timezone_offset}};await Wu("user_properties_initialized",{},l),ed.debug("[AnalyticsService] GA4 user properties set successfully")}catch(l){ed.error("[AnalyticsService] Failed to set GA4 user properties:",l)}}getCommonParameters(){return{extension_version:this.userProperties.extension_version,session_duration_ms:Date.now()-this.sessionStartTime,user_segment:this.getUserSegment(),days_since_install:this.getDaysSinceInstall()}}async trackToolExecution(l){this.sessionToolExecutions,this.sessionToolExecutions++,this.sessionUniqueTools.add(l.tool_name),l.adapter_name||this.activeAdapter,await Wu("mcp_tool_executed",{...l,...this.getCommonParameters(),connection_status:this.currentConnectionStatus,tools_available_count:this.toolsAvailableCount,session_tool_count:this.sessionToolExecutions,unique_tools_used:this.sessionUniqueTools.size}),l.execution_status==="error"&&this.sessionErrors++}async trackConnectionChange(l){const n=Date.now();if(!(l.tools_discovered&&l.tools_discovered>0&&this.toolsAvailableCount===0)&&n-this.lastConnectionTrackTime<this.CONNECTION_TRACK_DEBOUNCE){ed.debug("[AnalyticsService] Connection event debounced (too soon after last event)"),this.currentConnectionStatus=l.connection_status,this.currentTransportType=l.transport_type,l.tools_discovered&&(this.toolsAvailableCount=l.tools_discovered);return}this.lastConnectionTrackTime=n,this.currentConnectionStatus,this.connectionStartTime&&Date.now()-this.connectionStartTime,this.currentConnectionStatus=l.connection_status,this.currentTransportType=l.transport_type,l.connection_status==="connected"?(this.connectionStartTime=Date.now(),this.sessionConnections++,this.toolsAvailableCount=l.tools_discovered||0):l.connection_status==="disconnected"&&(this.connectionStartTime=null,this.toolsAvailableCount=0),await Wu("mcp_connection_changed",{...l,...this.getCommonParameters(),session_connections_count:this.sessionConnections,active_adapter:this.activeAdapter||"none"}),l.connection_status==="error"&&this.sessionErrors++}async trackAdapterActivation(l){this.activeAdapter,this.activeAdapter=l.adapter_name,this.sessionAdapters.add(l.adapter_name),this.toolsAvailableCount=l.tools_available,await Wu("adapter_activated",{...l,...this.getCommonParameters(),session_adapter_switches:this.sessionAdapters.size,connection_status:this.currentConnectionStatus})}async trackFeatureUsage(l){this.lastUserAction=l.feature_name,await Wu("feature_used",{...l,...this.getCommonParameters(),active_adapter:this.activeAdapter||"none",connection_status:this.currentConnectionStatus,tools_available:this.toolsAvailableCount})}async trackError(l){var n;this.sessionErrors++,await Wu("extension_error",{...l,...this.getCommonParameters(),error_stack:(n=l.error_stack)==null?void 0:n.substring(0,500),user_action_before_error:this.lastUserAction,tools_available_when_error:this.toolsAvailableCount,connection_status:this.currentConnectionStatus,active_adapter:this.activeAdapter||"none",session_errors_count:this.sessionErrors})}async trackSessionSummary(){Date.now()-this.sessionStartTime,await Wu("session_summary",{...this.getCommonParameters(),tools_executed_count:this.sessionToolExecutions,unique_tools_used:this.sessionUniqueTools.size,unique_adapters_used:this.sessionAdapters.size,adapters_activated:Array.from(this.sessionAdapters),connections_made:this.sessionConnections,errors_encountered:this.sessionErrors,final_connection_status:this.currentConnectionStatus})}async updateUserProperties(l){this.userProperties={...this.userProperties,...l},await chrome.storage.local.set({userProperties:this.userProperties}),ed.debug("[AnalyticsService] User properties updated:",this.userProperties)}resetSession(){this.sessionStartTime=Date.now(),this.sessionToolExecutions=0,this.sessionUniqueTools.clear(),this.sessionAdapters.clear(),this.sessionConnections=0,this.sessionErrors=0,this.lastUserAction="none",ed.debug("[AnalyticsService] Session reset")}getDaysSinceInstall(){const l=this.userProperties.install_date;if(!l)return 0;const n=new Date(l).getTime(),r=Date.now();return Math.floor((r-n)/(1e3*60*60*24))}getUserSegment(){const l=this.getDaysSinceInstall(),n=this.sessionToolExecutions;return l<7?"new_user":l<30?n>20?"engaged_new_user":"recent_user":n>100?"power_user":n>30?"active_user":n>5?"regular_user":"casual_user"}getSessionState(){return{sessionDuration:Date.now()-this.sessionStartTime,toolExecutions:this.sessionToolExecutions,uniqueTools:this.sessionUniqueTools.size,adapters:Array.from(this.sessionAdapters),connections:this.sessionConnections,errors:this.sessionErrors,connectionStatus:this.currentConnectionStatus,activeAdapter:this.activeAdapter,toolsAvailable:this.toolsAvailableCount,userSegment:this.getUserSegment(),daysSinceInstall:this.getDaysSinceInstall()}}};z(ud,"instance",null);let cS=ud;const og=cS.getInstance(),bo=nt("AnalyticsListener");function EA(){bo.debug("[AnalyticsListener] Initializing event listeners..."),ue.on("adapter:activated",async f=>{try{const l=window.location.hostname;await og.trackAdapterActivation({adapter_name:f.pluginName,hostname:l,mcp_enabled:!0,tools_available:0}),bo.debug("[AnalyticsListener] Tracked adapter activation:",f.pluginName)}catch(l){bo.warn("[AnalyticsListener] Failed to track adapter activation:",l)}}),ue.on("ui:sidebar-toggle",async f=>{try{await og.trackFeatureUsage({feature_name:"sidebar_toggle",interaction_type:"click",feature_state:{visible:f.visible}})}catch(l){bo.warn("[AnalyticsListener] Failed to track feature usage:",l)}}),ue.on("ui:sidebar-minimize",async f=>{try{await og.trackFeatureUsage({feature_name:"sidebar_minimize",interaction_type:"click",feature_state:{minimized:f.minimized}})}catch(l){bo.warn("[AnalyticsListener] Failed to track feature usage:",l)}}),ue.on("error:unhandled",async f=>{try{const l=CA(f.context);await og.trackError({error_message:f.error.message,error_category:l,error_stack:f.error.stack,recovery_attempted:!1})}catch(l){bo.warn("[AnalyticsListener] Failed to track error:",l)}}),ue.on("app:shutdown",async()=>{try{await og.trackSessionSummary(),bo.debug("[AnalyticsListener] Tracked session summary on shutdown")}catch(f){bo.warn("[AnalyticsListener] Failed to track session summary:",f)}}),bo.debug("[AnalyticsListener] Event listeners initialized")}function CA(f){if(!f)return"unknown";const n=(typeof f=="string"?f:JSON.stringify(f)).toLowerCase();return n.includes("connection")||n.includes("connect")?"connection":n.includes("tool")||n.includes("execute")?"tool_execution":n.includes("adapter")||n.includes("plugin")?"adapter":n.includes("ui")||n.includes("sidebar")||n.includes("button")?"ui":"unknown"}let rg=null;function TA(){rg&&clearInterval(rg),rg=window.setInterval(async()=>{try{await og.trackSessionSummary(),bo.debug("[AnalyticsListener] Tracked periodic session summary")}catch(f){bo.warn("[AnalyticsListener] Failed to track periodic session summary:",f)}},5*60*1e3),bo.debug("[AnalyticsListener] Started periodic session tracking")}function kA(){rg&&(clearInterval(rg),rg=null,bo.debug("[AnalyticsListener] Stopped periodic session tracking"))}var MA={};const Ft=nt("MainInitializer");let cl=!1,uS=!1,py=0;async function AA(){Ft.debug("Initializing core services..."),MA.NODE_ENV==="development"&&(Ft.debug("Development mode enabled."),typeof window<"u"&&(window._appDebug={eventBus:ue,stores:{app:Er,connection:Gi,tool:go,ui:ia,adapter:po},services:{globalErrorHandler:Va,performanceMonitor:Qn,circuitBreaker:ag,contextBridge:Aa},getStats:()=>({performance:Qn.getStats(),errors:Va.getErrorStats(),circuitBreaker:ag.getStats()}),clearData:()=>{Qn.clear(),Va.clearErrorReports()}},Ft.debug("Debug utilities exposed on window._appDebug"))),await KT(),Ft.debug("Event bus initialized."),Va.initialize(ue,ag),Ft.debug("GlobalErrorHandler initialized."),Qn.initialize(ue),Ft.debug("PerformanceMonitor initialized."),ag.initialize({eventBus:ue}),Ft.debug("CircuitBreaker initialized."),Aa.initialize(),Ft.debug("ContextBridge initialized."),dk(),Ft.debug("GlobalEventHandlers initialized."),await Qn.time("store-initialization",async()=>{await uA()}),Ft.debug("All stores initialized.")}async function OA(){Ft.debug("Initializing plugin system..."),await Qn.time("plugin-system-initialization",async()=>{const f=yA("system");await Qh.initialize(f),Ft.debug("Plugin system initialized successfully.")})}async function RA(){Ft.debug("Activating sidebar plugin...");try{await Qn.time("sidebar-plugin-activation",async()=>{await Qh.activatePlugin("sidebar-plugin"),Ft.debug("Sidebar plugin activated successfully.")})}catch(f){Ft.error("Failed to activate sidebar plugin:",f)}}async function IA(){if(uS){Ft.warn("Application state already initialized, skipping.");return}Ft.debug("Initializing application state..."),await Qn.time("app-state-initialization",async()=>{if(Er.getState().isInitialized||(await Er.getState().initialize(),Ft.debug("AppStore initialized (settings loaded, etc.).")),typeof window<"u"&&window.location&&window.location.hostname){const n=window.location.hostname,r=window.location.href,{pluginRegistry:s}=await Promise.resolve().then(()=>Kh);s.setInitialActivationFlag(!0);try{Er.getState().setCurrentSite({site:r,host:n}),Ft.debug(`Current site set to: ${n}`),Ft.debug(`Attempting to auto-activate adapter for hostname: ${n}`),await s.activatePluginForHostname(n,!0),Ft.debug(`Adapter auto-activation completed for hostname: ${n}`)}finally{s.setInitialActivationFlag(!1)}}const l=Gi.getState().serverConfig;l&&l.uri&&(Ft.debug("Server configuration found, connection will be handled by background script and MCP client"),await ag.execute(async()=>{Ft.debug("Deferring connection management to background script")},"config-check"))}),uS=!0,Ft.debug("Application state initialization completed.")}async function sC(){if(cl){Ft.warn("Application already initialized.");return}py=performance.now(),Ft.debug("Application initialization started...");try{Qn.mark("app-init-start"),await AA(),Qn.mark("core-services-initialized"),await OA(),Qn.mark("plugin-system-initialized"),await RA(),Qn.mark("sidebar-plugin-activated"),await IA(),Qn.mark("app-state-initialized"),EA(),TA(),Qn.mark("analytics-initialized"),Qn.mark("app-init-complete");const f=performance.now()-py;Qn.measure("total-initialization","app-init-start","app-init-complete"),cl=!0,Ft.debug(`Application initialization completed successfully in ${f.toFixed(2)}ms`),ue.emit("app:initialized",{version:"1.0.0",timestamp:Date.now(),initializationTime:f})}catch(f){const l=performance.now()-py;throw Ft.error(`Application initialization failed after ${l.toFixed(2)}ms:`,f),Va.handleError(f instanceof Error?f:new Error(String(f)),{component:"main-initializer",operation:"application-initialization",metadata:{initializationTime:l}},"critical"),ue.emit("app:initialization-failed",{error:f instanceof Error?f:new Error(String(f)),timestamp:Date.now(),initializationTime:l}),f}}async function hy(){if(!cl){Ft.warn("Application not initialized, nothing to clean up.");return}Ft.debug("Application cleanup started...");try{Qn.mark("app-cleanup-start"),kA(),Ft.debug("Analytics tracking stopped."),await aC(),Ft.debug("Plugin system cleaned up."),Aa.cleanup(),ag.cleanup(),Qn.cleanup(),Va.cleanup(),Ft.debug("Core services cleaned up."),fk(),Ft.debug("Global event handlers cleaned up."),Qn.mark("app-cleanup-complete"),cl=!1,uS=!1,Ft.debug("Application cleanup completed."),ue.emit("app:shutdown",{reason:"Application cleanup initiated",timestamp:Date.now()})}catch(f){Ft.error("Error during application cleanup:",f),Va.handleError(f instanceof Error?f:new Error(String(f)),{component:"main-initializer",operation:"application-cleanup"},"high")}}function DA(){return{isInitialized:cl,initializationTime:cl?performance.now()-py:void 0,errorCount:Va.getErrorStats().totalErrors,performanceStats:Qn.getStats()}}async function zA(){Ft.warn("Force re-initialization requested..."),cl&&await hy(),cl=!1,await sC()}typeof window<"u"&&window.addEventListener("beforeunload",()=>{hy().catch(f=>{Ft.error("Error during beforeunload cleanup:",f)})}),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onSuspend&&chrome.runtime.onSuspend.addListener(()=>{hy().catch(f=>{Ft.error("Error during extension suspend cleanup:",f)})});const NA={getStatus:DA,forceReinit:zA,isInitialized:()=>cl},UA={knownLanguages:["xml","html","python","javascript","js","ruby","bash","shell","css","json","java","c","cpp","csharp","php","typescript","ts","go","rust","swift","kotlin","sql"],handleLanguageTags:!0,maxLinesAfterLangTag:3,targetSelectors:["pre","code"],enableDirectMonitoring:!0,streamingContainerSelectors:[".pre",".code"],function_result_selector:[],updateThrottle:25,streamingMonitoringInterval:100,largeContentThreshold:Number.MAX_SAFE_INTEGER,progressiveUpdateInterval:250,maxContentPreviewLength:Number.MAX_SAFE_INTEGER,usePositionFixed:!1,stabilizeTimeout:500,debug:!0,useHostTheme:!0,enableStalledStreamDetection:!0,stalledStreamTimeout:3e3,stalledStreamCheckInterval:1e3,useCodeMirrorExtraction:!1},PA=[{urlPattern:"aistudio",config:{targetSelectors:["pre"],streamingContainerSelectors:[".pre"],function_result_selector:["div.user-prompt-container"]}},{urlPattern:"perplexity",config:{targetSelectors:["pre"],streamingContainerSelectors:[".pre"],function_result_selector:["div.group\\/query",".group\\/query",'div[class*="group/query"]']}},{urlPattern:"gemini",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:["div.query-content"]}},{urlPattern:"grok.com",config:{targetSelectors:["code"],streamingContainerSelectors:["code"],function_result_selector:["div.relative.items-end"]}},{urlPattern:"openrouter.ai",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:["div.min-w-0.w-full.overflow-hidden"]}},{urlPattern:"chatgpt.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[data-message-author-role="user"]']}},{urlPattern:"chat.openai.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[data-message-author-role="user"]']}},{urlPattern:"kagi.com",config:{targetSelectors:[".content pre",".codehilite","pre"],streamingContainerSelectors:["pre",".content"],function_result_selector:['div[data-author="user"]']}},{urlPattern:"chat.deepseek.com",config:{targetSelectors:["pre","code"],streamingContainerSelectors:["pre","code"],function_result_selector:["div._9663006"]}},{urlPattern:"t3.chat",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[aria-label="Your message"]']}},{urlPattern:"chat.mistral.ai",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[data-message-part-type="answer"]',".select-text"]}},{urlPattern:"github.com/copilot",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:[".UserMessage-module__container--cAvvK",".ChatMessage-module__userMessage--xvIFp"]}},{urlPattern:"kimi.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[class*="user-content"]']}},{urlPattern:"chat.z.ai",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:["div.chat-user"],useCodeMirrorExtraction:!0}},{urlPattern:"chat.qwen.ai",config:{targetSelectors:["pre","code"],streamingContainerSelectors:["pre","code"],function_result_selector:[".user-message-text-content","div.user-message-content"],useCodeMirrorExtraction:!0}}];function _A(){const f=window.location.href;let l={...UA};for(const n of PA){const{urlPattern:r,config:s}=n;if(typeof r=="string"?f.includes(r):r.test(f)){l={...l,...s};break}}return l}const Se=_A(),lC=f=>{if(!Se.handleLanguageTags)return{tag:null,content:f};const l=[/^```(\w+)[\s:]?\s*\n([\s\S]+)$/,/^\[(\w+)\]\s*\n([\s\S]+)$/];for(const d of l){const h=f.match(d);if(h){const v=h[1].toLowerCase();if(Se.knownLanguages.includes(v))return{tag:v,content:h[2]}}}const n=[/^\/\/\s*language:\s*(\w+)\s*\n([\s\S]+)$/i,/^#\s*language:\s*(\w+)\s*\n([\s\S]+)$/i,/^<!--\s*language:\s*(\w+)\s*-->\s*\n([\s\S]+)$/i];for(const d of n){const h=f.match(d);if(h){const v=h[1].toLowerCase();if(Se.knownLanguages.includes(v))return{tag:v,content:h[2]}}}const r=f.split(`
`),s=Math.min(Se.maxLinesAfterLangTag,r.length);for(let d=0;d<s;d++){const h=r[d].trim().toLowerCase();if(d===0&&h.startsWith("#!")){if(h.includes("python"))return{tag:"python",content:f};if(h.includes("node"))return{tag:"javascript",content:f};if(h.includes("bash")||h.includes("/sh"))return{tag:"bash",content:f};if(h.includes("ruby"))return{tag:"ruby",content:f}}if(h.includes("<?php"))return{tag:"php",content:f};if(h.includes("<!doctype html>")||h.includes("<html"))return{tag:"html",content:f};if(h.match(/^(import|from)\s+[\w.]+\s+import/))return{tag:"python",content:f};if(h.match(/^(const|let|var)\s+\w+\s*=/))return{tag:"javascript",content:f};if(h.match(/^function\s+\w+\(/))return{tag:"javascript",content:f};if(h.match(/^package\s+\w+;?/))return{tag:"java",content:f};if(h.match(/^using\s+[\w.]+;/))return{tag:"csharp",content:f};if(h.match(/^#include\s+[<"][\w.]+[>"]/))return{tag:"c",content:f}}return{tag:null,content:f}},ra=nt("parseJSONLine"),dS=f=>{try{const l=f.trim();if(!l)return null;const n=fS(l);if(!n)return null;const r=JSON.parse(n);return!r.type||typeof r.type!="string"?null:r}catch{return null}},fS=f=>{let n=f.trim().replace(/^```\s*(javascript|typescript|markdown|csharp|kotlin|python|jsonl|bash|rust|java|scala|swift|shell|json|text|perl|yaml|toml|html|ruby|cpp|php|lua|css|sql|yml|ini|xml|ts|js|py|sh|md|cs|go|rb|c|r)?\s*/i,"");return n=n.replace(/^(javascript|typescript|markdown|csharp|kotlin|python|jsonl|bash|rust|java|scala|swift|shell|json|text|perl|yaml|toml|html|ruby|cpp|php|lua|css|sql|yml|ini|xml|ts|js|py|sh|md|cs|go|rb|c|r)(\s*copy(\s*code)?)?\s*/i,""),n=n.replace(/^[cC]opy(\s+code)?\s*/i,""),n};function $A(f){const l=[];let n="",r=0,s=!1;for(const d of f){const h=d.trim();if(h){for(const v of h)v==="{"?(r++,s=!0):v==="}"&&r--;n+=(n?" ":"")+h,s&&r===0&&(l.push(n),n="",s=!1)}}return n.trim()&&l.push(n),l}const jA=f=>{var A,$;let l=((A=f.textContent)==null?void 0:A.trim())||"";const n=f.querySelector("code");n&&n.textContent&&(l=n.textContent.trim());const r={hasFunctionCalls:!1,isComplete:!1,hasInvoke:!1,hasParameters:!1,hasClosingTags:!1,languageTag:null,detectedBlockType:null,partialTagDetected:!1};Se.debug&&(ra.debug("[JSON Parser] Checking element:",f.tagName,f.className),ra.debug("[JSON Parser] Content length:",l.length),ra.debug("[JSON Parser] First 200 chars:",l.substring(0,200)));const s=l.includes('"type"')||l.includes("'type'")||l.includes("type:"),d=l.includes("function_call")||l.includes('"type"')&&/function_call_\w*/.test(l)||l.includes('"type"')&&l.includes("function_ca"),h=l.includes('"parameter"')||l.includes("'parameter'")||l.includes("parameter"),v=l.includes('{"type"')||l.includes('{ "type"');if(Se.debug&&ra.debug("[JSON Parser] Pattern check:",{hasTypeField:s,hasFunctionCall:d,hasParameter:h,looksLikeJSONStart:v,willProceed:s&&(d||h||v)}),!(s&&(d||h||v)))return Se.debug&&ra.debug("[JSON Parser] Quick check failed - not JSON function call"),r;Se.debug&&ra.debug("[JSON Parser] Quick check passed - parsing JSON lines");const S={hasFunctionStart:!1,hasFunctionEnd:!1,functionName:null,callId:null,description:null,parameterCount:0,lines:[]};let w=l.split(`
`),M=!1;const N=w.length===1&&(l.match(/\{/g)||[]).length>1,k=w.length>1&&(l.includes(`{
`)||l.includes(`{ 
`)||w.some(B=>B.trim()==="{"));N?(Se.debug&&ra.debug("[JSON Parser] Detected single-line multiple JSON objects format"),w=l.split(/\}\s*\{/).map((Z,Y,ie)=>Y===0?Z+"}":Y===ie.length-1?"{"+Z:"{"+Z+"}"),Se.debug&&ra.debug("[JSON Parser] Split into",w.length,"separate JSON objects")):k&&(Se.debug&&ra.debug("[JSON Parser] Detected pretty-printed multi-line JSON format"),w=$A(w),Se.debug&&(ra.debug("[JSON Parser] Reconstructed into",w.length,"compact JSON objects"),w.length>0&&ra.debug("[JSON Parser] First reconstructed object:",w[0].substring(0,100))));for(const B of w){const Z=dS(B);if(!Z){const Y=B.trim();Y.startsWith("{")&&!Y.endsWith("}")&&(M=!0,Se.debug&&ra.debug("[JSON Parser] Detected partial JSON line:",Y.substring(0,50)));continue}switch(S.lines.push(Z),Z.type){case"function_call_start":S.hasFunctionStart=!0,S.functionName=Z.name||null,S.callId=(($=Z.call_id)==null?void 0:$.toString())||null;break;case"description":S.description=Z.text||null;break;case"parameter":S.parameterCount++;break;case"function_call_end":S.hasFunctionEnd=!0;break}}return(S.hasFunctionStart||M&&v)&&(r.hasFunctionCalls=!0,r.detectedBlockType="json",r.hasInvoke=S.hasFunctionStart,r.hasParameters=S.parameterCount>0,r.hasClosingTags=S.hasFunctionEnd,r.isComplete=S.hasFunctionStart&&S.hasFunctionEnd,r.invokeName=S.functionName||void 0,r.textContent=S.description||void 0,r.partialTagDetected=M),typeof window<"u"&&window.__DEBUG_JSON_PARSER&&ra.debug("[JSON Parser] Final result:",{hasFunctionCalls:r.hasFunctionCalls,detectedBlockType:r.detectedBlockType,isComplete:r.isComplete,functionName:S.functionName,paramCount:S.parameterCount,hasEnd:S.hasFunctionEnd}),r},cC=f=>{var d;const l=f.split(`
`);let n=null,r=null,s=null;for(const h of l){const v=dS(h);if(!v){let S=h.trim();if(S=S.replace(/^(javascript|typescript|markdown|csharp|kotlin|python|jsonl|bash|rust|java|scala|swift|shell|json|text|perl|yaml|toml|html|ruby|cpp|php|lua|css|sql|yml|ini|xml|ts|js|py|sh|md|cs|go|rb|c|r)(\s*copy(\s*code)?)?\s*/i,""),S.startsWith("{")&&S.includes('"type"')&&S.includes("function_call_start")){const w=S.match(/"name"\s*:\s*"([^"]+)"/);w&&(n=w[1]);const M=S.match(/"call_id"\s*:\s*(\d+|"[^"]+")/);M&&(r=M[1].replace(/"/g,""))}continue}if(v.type==="function_call_start"?(n=v.name||null,r=((d=v.call_id)==null?void 0:d.toString())||null):v.type==="description"&&(s=v.text||null),n&&r&&s)break}return{functionName:n,callId:r,description:s}},sg=f=>{const l={};if(!f||typeof f!="string")return Se.debug&&ra.debug("[JSON Parser] extractJSONParameters: Invalid content"),l;const n=f.split(`
`);for(const d of n){const h=dS(d);h&&h.type==="parameter"&&h.key&&(l[h.key]=h.value??"")}const r=/"type"\s*:\s*"parameter"[^}]*"key"\s*:\s*"([^"]+)"[^}]*"value"\s*:\s*"((?:[^"\\]|\\.)*)/g;let s;for(;(s=r.exec(f))!==null;){const d=s[1],h=s[2];if(!l.hasOwnProperty(d)){const v=h.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\\\/g,"\\");l[d]=v,Se.debug&&ra.debug(`Extracted partial parameter via regex: ${d} (${v.length} chars)`)}}return Se.debug&&Object.keys(l).length>0&&ra.debug("[JSON Parser] extractJSONParameters result:",Object.keys(l)),l},LA=f=>{var h;const l=((h=f.textContent)==null?void 0:h.trim())||"",n={hasFunctionCalls:!1,isComplete:!1,hasInvoke:!1,hasParameters:!1,hasClosingTags:!1,languageTag:null,detectedBlockType:null,partialTagDetected:!1},r=jA(f);if(r.hasFunctionCalls){const{description:v}=cC(l);return{...r,description:v}}if(!l.includes("<")&&!l.includes("<function_calls>")&&!l.includes("<invoke")&&!l.includes("</invoke>")&&!l.includes("<parameter"))return n;const s=lC(l);s.tag&&(n.languageTag=s.tag);const d=s.content||l;if(d.includes("<function_calls>")||d.includes("<invoke")){if(n.hasFunctionCalls=!0,n.detectedBlockType="antml",n.hasInvoke=d.includes("<invoke"),n.hasParameters=d.includes("<parameter"),n.hasInvoke){const w=d.match(/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/);w&&w[1]&&(n.invokeName=w[1])}const v=d.includes("<function_calls>"),S=d.includes("</function_calls>");n.hasClosingTags=v&&S,n.isComplete=n.hasClosingTags}return n},my=new Map,td=new Map,BA=f=>{const l=f.trim();return l.includes('"type"')&&(l.includes("function_call_start")||l.includes("parameter"))},HA=(f,l=null)=>{const n=[],r=sg(f),s=l?my.get(l)||{}:{},d={},h=!f.includes('"type":"function_call_end"')&&!f.includes('"type": "function_call_end"');return Object.entries(r).forEach(([v,S])=>{const w=typeof S=="object"?JSON.stringify(S,null,2):String(S);l&&w.length>Se.largeContentThreshold&&td.set(`${l}-${v}`,w.length);const M=!s[v]||s[v]!==w;d[v]=w,n.push({name:v,value:w,isComplete:!h,isStreaming:h,isNew:M,originalContent:w,contentLength:w.length,isLargeContent:w.length>Se.largeContentThreshold})}),l&&my.set(l,d),n},FA=(f,l=null)=>{if(BA(f))return HA(f,l);const n=[],r=/<parameter\s+(?:name="([^"]+)"[^>]*|[^>]*name="([^"]+)")(?:>|$)/g,s=l?my.get(l)||{}:{};let d;const h={};for(;(d=r.exec(f))!==null;){const v=d[1]||d[2],S=d[0],w=d.index+S.length;if(!S.endsWith(">")){const $=f.substring(w);h[v]=$,n.push({name:v,value:$,isComplete:!1,isNew:!s[v]||s[v]!==$,isStreaming:!0,originalContent:$,isIncompleteTag:!0});continue}let N=w,k=1,A=!1;for(let $=w;$<f.length;$++)if($+10<f.length&&f.substring($,$+10)==="<parameter")(f.charAt($+10)===" "||f.charAt($+10)===">")&&k++;else if($+12<f.length&&f.substring($,$+12)==="</parameter>"){if(k--,k===0){N=$,A=!0;break}$+=11}if(A){const $=f.substring(w,N);l&&$.length>Se.largeContentThreshold&&td.set(`${l}-${v}`,$.length),n.push({name:v,value:$,isComplete:!0})}else{const $=f.substring(w);if(h[v]=$,l){const B=`${l}-${v}`,Z=td.get(B)||0,Y=$.length;td.set(B,Y);const ie=Y>Se.largeContentThreshold,pe=Y>Z,oe=!s[v]||s[v]!==$;n.push({name:v,value:$,isComplete:!1,isNew:oe||pe,isStreaming:!0,originalContent:$,isLargeContent:ie,contentLength:Y,truncated:ie})}else n.push({name:v,value:$,isComplete:!1,isNew:!s[v]||s[v]!==$,isStreaming:!0,originalContent:$})}}if(l&&f.includes("<parameter")){const v=/<parameter(?:\s+(?:name="([^"]*)")?[^>]*)?$/,S=f.match(v);if(S){const N=S[1]||"unnamed_parameter",k=S[0];h[`__partial_tag_${Date.now()}`]=k,N!=="unnamed_parameter"&&(n.find($=>$.name===N)||n.push({name:N,value:"(streaming...)",isComplete:!1,isStreaming:!0,isIncompleteTag:!0}))}const w=/<parameter\s+(?:name="([^"]+)"[^>]*|[^>]*name="([^"]+)")>([^<]*?)$/i,M=f.match(w);if(M){const N=M[1]||M[2],k=M[3]||"";N&&k&&(h[`__streaming_content_${N}`]=k,n.find($=>$.name===N)||n.push({name:N,value:k,isComplete:!1,isStreaming:!0,originalContent:k}))}}return l&&my.set(l,h),n},Jh=nt("STORAGE_KEY"),uC="mcp_url_based_function_history",dC=(f,l,n,r)=>{const s=window.location.href,d={functionName:f,callId:l,contentSignature:r,executedAt:Date.now(),params:n},h=fC(f,l,r),v=by();v[s]||(v[s]={}),v[s][h]=d;try{let w=0,M=!1;for(;!M&&w<3;)try{localStorage.setItem(uC,JSON.stringify(v)),M=!0}catch{w++,w<3&&Jh.warn(`Storage write failed, retrying (${w}/3)`)}M||Jh.error("Failed to store executed function after multiple attempts")}catch(S){Jh.error("Failed to store executed function:",S)}return d},fC=(f,l,n)=>`${f}:${l}:${n}`,by=()=>{try{const f=localStorage.getItem(uC);return f?JSON.parse(f):{}}catch(f){return Jh.error("Failed to retrieve URL-based function history:",f),{}}},qA=()=>{const f=window.location.href,l=by();return l[f]?Object.values(l[f]):[]},vy=(f,l,n)=>{const r=window.location.href,s=by();if(!s[r])return null;const d=fC(f,l,n);return s[r][d]||null},GA=(f,l)=>{const n=window.location.href,r=by();if(!r[n])return null;const s=Object.entries(r[n]).find(([d,h])=>h.callId===f&&h.contentSignature===l);return s?s[1]:null},gC=(f,l)=>{try{const n={};Object.keys(l).sort().forEach(d=>{n[d]=l[d]});const r=JSON.stringify({name:f,params:n});let s=0;for(let d=0;d<r.length;d++){const h=r.charCodeAt(d);s=(s<<5)-s+h,s=s&s}return s.toString(16)}catch(n){return Jh.error("Failed to generate content signature:",n),Date.now().toString(16)}},VA=f=>{try{return new Date(f).toLocaleString()}catch{return"Unknown date"}},gS=nt("FunctionHistory"),pC=(f,l,n)=>{if(f.querySelectorAll(".function-history-panel").forEach(d=>d.remove()),f.classList.contains("function-buttons")){const d=f.closest(".function-block");d&&d.querySelectorAll(".function-history-panel").forEach(v=>v.remove())}const s=document.createElement("div");if(s.className="function-history-panel",s.style.display="none",f.classList.contains("function-buttons")){const d=f.closest(".function-block");d?d.appendChild(s):f.appendChild(s)}else f.appendChild(s);return s},pS=(f,l,n)=>{f.innerHTML="";const r=document.createElement("div");r.className="function-history-header",r.textContent="Execution History",f.appendChild(r);const s=document.createElement("div");s.className="function-execution-info";const d=VA(l.executedAt);s.innerHTML=`
    <div>Function: <strong>${l.functionName}</strong></div>
    <div>Last executed: <strong>${d}</strong></div>
  `,f.appendChild(s);const h=document.createElement("button");h.className="function-reexecute-button",h.textContent="Re-execute",h.onclick=async()=>{var w,M;let v=(w=f.parentElement)==null?void 0:w.querySelector(`.function-results-panel[data-call-id="${l.callId}"]`);v&&(v.style.overflow="auto",v.style.maxHeight="200px"),v?(v.style.display="block",v.innerHTML=""):(v=document.createElement("div"),v.className="function-results-panel",v.setAttribute("data-call-id",l.callId),v.setAttribute("data-function-name",l.functionName),v.style.display="block",(M=f.parentElement)==null||M.appendChild(v));const S=document.createElement("div");S.className="function-results-loading",S.textContent="Executing...",v.appendChild(S);try{if(!n){ps(v,S,!1,"Error: mcpClient not found");return}if(!n.isReady||!n.isReady()){ps(v,S,!1,"Error: MCP client not ready");return}gS.debug(`Re-executing function ${l.functionName} with arguments:`,l.params);try{const N=await n.callTool(l.functionName,l.params);ps(v,S,!0,N);const k=dC(l.functionName,l.callId,l.params,l.contentSignature);pS(f,k,n)}catch(N){let k=N instanceof Error?N.message:String(N);k.includes("not connected")||k.includes("connection")?k="Connection lost. Please check your MCP server connection.":k.includes("timeout")?k="Request timed out. Please try again.":(k.includes("server unavailable")||k.includes("SERVER_UNAVAILABLE"))&&(k="MCP server is unavailable. Please check the server status."),ps(v,S,!1,k)}}catch(N){const k=N instanceof Error?N.message:String(N);gS.error("Re-execute error:",N),ps(v,S,!1,`Unexpected error: ${k}`)}},f.appendChild(h),f.style.display="block"},YA=(f,l,n,r)=>{const s=qA(),d=vy(l,n,r),h=d?[d]:[];if(d||s.filter(S=>S.callId===n&&S.contentSignature===r).forEach(S=>h.push(S)),h.length>0){const v=h.sort((M,N)=>N.executedAt-M.executedAt)[0],S=pC(f),w=window.mcpClient;pS(S,v,w),gS.debug(`Showing only the latest execution from ${h.length} matches for function ${l}`)}},ht=nt("AdapterAccess");function yy(){var f,l;try{const n=window.pluginRegistry;if(n&&typeof n.getActivePlugin=="function"){const s=n.getActivePlugin();if(s&&s.capabilities&&s.capabilities.length>0)return ht.debug("[AdapterAccess] Using active plugin adapter:",s.name),s}const r=window.mcpAdapter||((f=window.getCurrentAdapter)==null?void 0:f.call(window));return r?(ht.debug("[AdapterAccess] Using legacy adapter access"),r):(ht.warn("[AdapterAccess] No adapter found through plugin registry or legacy access"),null)}catch(n){ht.error("[AdapterAccess] Error getting current adapter:",n);try{const r=window.mcpAdapter||((l=window.getCurrentAdapter)==null?void 0:l.call(window));if(r)return ht.debug("[AdapterAccess] Using legacy adapter as fallback"),r}catch(r){ht.error("[AdapterAccess] Fallback adapter access also failed:",r)}return null}}function xy(f){var l;try{const n=yy();if(!n)return!1;if(n.capabilities&&Array.isArray(n.capabilities))return n.capabilities.includes(f);switch(f){case"text-insertion":return typeof n.insertText=="function";case"form-submission":return typeof n.submitForm=="function";case"file-attachment":return typeof n.attachFile=="function"&&((l=n.supportsFileUpload)==null?void 0:l.call(n))===!0;case"dom-manipulation":return typeof n.insertText=="function";default:return!1}}catch(n){return ht.error("[AdapterAccess] Error checking capability:",n),!1}}const Sy=39e3,hC=["perplexity"],mC=window.location.hostname.toLowerCase().replace(/^www\./i,"").split(".")[0],ZA=/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/,bC=/<parameter\s+name="([^"]+)"\s*(?:type="([^"]+)")?\s*>(.*?)<\/parameter>/gs,vC=/<!\[CDATA\[([\s\S]*?)\]\]>/,XA=/^-?\d+(\.\d+)?$/,QA=/^(true|false)$/i,Pi={CODE:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z" fill="currentColor"/></svg>',PLAY:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z" fill="currentColor"/></svg>',INSERT:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 12l-7-7v4H2v6h7v4l7-7z" fill="currentColor"/></svg>',ATTACH:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="2" width="16" height="20" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><path d="M8 6h8M8 10h8M8 14h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>',SPINNER:'<svg width="16" height="16" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-linecap="round" stroke-dasharray="31.4 31.4" transform="rotate(-90 25 25)"><animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.8s" repeatCount="indefinite"/></circle></svg>'};class Wh{static get(l,n){const r=`${l}:${n||""}`,s=this.pools.get(r)||[];if(s.length>0){const h=s.pop();return h.innerHTML="",h.className=n||"",h.removeAttribute("style"),h}const d=document.createElement(l);return n&&(d.className=n),d}static release(l){const n=`${l.tagName.toLowerCase()}:${l.className}`,r=this.pools.get(n)||[];r.length<10&&(r.push(l),this.pools.set(n,r))}}z(Wh,"pools",new Map);const Zi=(f,l={})=>{const n=Wh.get(f,l.className);return l.textContent&&(n.textContent=l.textContent),l.innerHTML&&(n.innerHTML=l.innerHTML),l.styles&&Object.assign(n.style,l.styles),l.attributes&&Object.entries(l.attributes).forEach(([r,s])=>{n.setAttribute(r,s)}),n},KA=(f,l)=>{var M;if(f.querySelector(".raw-toggle"))return;const n=f.getAttribute("data-block-id");if(n){const N=document.querySelector(`div[data-block-id="${n}"]`);N&&(l=((M=N.textContent)==null?void 0:M.trim())||l)}const r=document.createDocumentFragment(),s=Zi("div",{className:"function-results-panel xml-results-panel",styles:{display:"none",marginTop:"12px",marginBottom:"4px"}}),d=Zi("pre",{textContent:l,styles:{whiteSpace:"pre-wrap",margin:"0",padding:"12px",fontFamily:"inherit",fontSize:"13px",lineHeight:"1.5"}}),h=Zi("button",{className:"raw-toggle",innerHTML:`${Pi.CODE}<span>Show Raw Info</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"}}),v=h.querySelector("span");let S=!1;h.onclick=()=>{S=!S,requestAnimationFrame(()=>{s.style.display=S?"block":"none",v.textContent=S?"Hide Raw Info":"Show Raw Info"})},s.appendChild(d),r.appendChild(h);const w=f.classList.contains("function-buttons")&&f.closest(".function-block")||f;f.appendChild(r),w.appendChild(s)},JA=(f,l)=>{if(f.querySelector(".execute-button"))return;const n=l.includes('"type"')&&l.includes("function_call"),r=WA(l);let s,d;if(n){s=sg(l),Se.debug&&ht.debug("[Execute Button] Extracted JSON parameters:",s);const A=l.split(`
`);let $=null;for(const B of A)try{const Z=fS(B);if(!Z)continue;const Y=JSON.parse(Z);if(Y.type==="function_call_start"&&Y.call_id){$=Y.call_id.toString();break}}catch{}d=$||`call-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}else{s=hS(l),Se.debug&&ht.debug("[Execute Button] Extracted XML parameters:",s);const A=ZA.exec(l);d=(A==null?void 0:A[2])||`call-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}if(!r){Se.debug&&ht.debug("[Execute Button] No function name found, skipping button");return}Se.debug&&ht.debug("[Execute Button] Creating button for:",r,"with params:",Object.keys(s));const h=gC(r,s),v=document.createDocumentFragment(),S=Zi("button",{className:"execute-button",innerHTML:`${Pi.PLAY}<span>Run</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",marginLeft:"0"}}),w=Zi("div",{className:"function-results-panel",styles:{display:"none",maxHeight:"200px",overflow:"auto"},attributes:{"data-call-id":d,"data-function-name":r}}),M=Zi("div",{className:"function-loading",styles:{display:"none",marginTop:"12px",padding:"10px",borderRadius:"8px",backgroundColor:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.06)"}}),N=S.querySelector("span");S.onclick=async()=>{S.disabled=!0,N.style.display="none";const A=Zi("span",{className:"execute-spinner",innerHTML:Pi.SPINNER,styles:{display:"inline-flex",marginLeft:"8px"}});S.appendChild(A),w.style.display="none",w.innerHTML="";const $=()=>{S.disabled=!1,N.style.display="",S.contains(A)&&(S.removeChild(A),Wh.release(A))};try{const B=window.mcpClient;if(!B){$(),ps(w,M,!1,"Error: mcpClient not found"),w.style.display="block";return}if(!B.isReady||!B.isReady()){$(),ps(w,M,!1,"Error: MCP client not ready"),w.style.display="block";return}ht.debug(`Executing function ${r}, call_id: ${d} with arguments:`,s),w.style.display="block",w.innerHTML="",w.appendChild(M);try{const Z=await B.callTool(r,s);$(),ps(w,M,!0,Z);const Y=dC(r,d,s,h),ie=f.querySelector(".function-history-panel")||pC(f,d,h);pS(ie,Y,B)}catch(Z){$();let Y=Z instanceof Error?Z.message:String(Z);Y.includes("not connected")||Y.includes("connection")?Y="Connection lost. Please check your MCP server connection.":Y.includes("timeout")?Y="Request timed out. Please try again.":(Y.includes("server unavailable")||Y.includes("SERVER_UNAVAILABLE"))&&(Y="MCP server is unavailable. Please check the server status."),ps(w,M,!1,Y)}}catch(B){$(),w.style.display="block";const Z=B instanceof Error?B.message:String(B);ht.error("Execute button error:",B),ps(w,M,!1,`Unexpected error: ${Z}`)}},v.appendChild(S),f.appendChild(v),(f.classList.contains("function-buttons")&&f.closest(".function-block")||f).appendChild(w),YA(f,r,d,h)},WA=f=>{if(f.includes('"type"')&&f.includes("function_call_start")){const r=f.split(`
`);for(const s of r)try{const d=fS(s);if(!d)continue;const h=JSON.parse(d);if(h.type==="function_call_start"&&h.name)return h.name}catch{}return null}const n=f.match(/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/);return n&&n[1]?n[1]:null},hS=f=>{const l={};let n;for(;(n=bC.exec(f))!==null;){const r=n[1],s=n[2]||"string";let d=n[3].trim();const h=vC.exec(d);if(h)try{d=h[1].trim(),Se.debug&&ht.debug(`Extracted CDATA content for parameter ${r}`)}catch(v){ht.error(`Failed to extract CDATA content for parameter ${r}:`,v)}switch(s){case"json":try{d=JSON.parse(d)}catch(S){ht.warn(`Failed to parse JSON for parameter '${r}'.`,S)}break;case"number":const v=parseFloat(d);isNaN(v)||(d=v);break;case"boolean":d=d.toLowerCase()==="true";break;default:if(XA.test(d))d=parseFloat(d);else if(QA.test(d))d=d.toLowerCase()==="true";else{const S=d.trim();if(S.startsWith("{")&&S.endsWith("}")||S.startsWith("[")&&S.endsWith("]"))try{d=JSON.parse(S),Se.debug&&ht.debug(`Auto-parsed JSON for parameter ${r}:`,d)}catch{Se.debug&&ht.debug(`Failed to auto-parse JSON for parameter ${r}, keeping as string`)}}}l[r]=d}return bC.lastIndex=0,vC.lastIndex=0,l},mS=async(f,l,n,r,s,d,h=!1)=>{if(!f)return ht.error("No adapter provided for file attachment."),(()=>{const A=s.classList.contains("insert-result-button")?"Insert":"Attach File";s.innerHTML=`${Pi.ATTACH}<span>No Adapter</span>`,s.classList.add("attach-error"),setTimeout(()=>{s.innerHTML=`${Pi.ATTACH}<span>${A}</span>`,s.classList.remove("attach-error")},2e3)})(),{success:!1,message:null};if(!xy("file-attachment"))return ht.error("Current adapter does not support file attachment."),(()=>{const A=s.classList.contains("insert-result-button")?"Insert":"Attach File";s.innerHTML=`${Pi.ATTACH}<span>Attach Not Supported</span>`,s.classList.add("attach-error"),setTimeout(()=>{s.innerHTML=`${Pi.ATTACH}<span>${A}</span>`,s.classList.remove("attach-error")},2e3)})(),{success:!1,message:null};const v=`${l}_result_call_id_${n}.txt`,S=new File([r],v,{type:"text/plain"});s.textContent;let w=null;const M=(k,A,$=!0)=>{s.innerHTML="";const B=Zi("span",{innerHTML:Pi.ATTACH,styles:{display:"inline-flex",marginRight:"6px"}}),Z=Zi("span",{textContent:k});s.appendChild(B),s.appendChild(Z),s.disabled=$,A&&s.classList.add(A)},N=(k=2e3)=>{setTimeout(()=>{s.innerHTML=`${Pi.ATTACH}<span>Attach File</span>`,s.classList.remove("attach-success","attach-error"),s.disabled=!1},k)};try{if(M("Attaching...",void 0,!0),typeof f.attachFile=="function")try{if(await f.attachFile(S)){if(w=`File attached successfully: ${v}`,M("Attached!","attach-success",!0),typeof f.insertText=="function")try{await f.insertText(w),ht.debug("Confirmation text inserted successfully")}catch($){if(ht.warn("Failed to insert confirmation text:",$),typeof f.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:w,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(B){ht.warn("Legacy insertion also failed:",B)}}else if(typeof f.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:w,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch($){ht.warn("Legacy insertion failed:",$)}const A={file:S,result:w,isFileAttachment:!0,fileName:v,confirmationText:w,skipAutoInsertCheck:h};return requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:A}))}),N(),{success:!0,message:w}}else throw new Error("Adapter attachFile method returned false")}catch(k){if(ht.error("New adapter attachFile method failed:",k),w=`File attachment initiated: ${v}`,M("Attached!","attach-success",!0),typeof f.insertText=="function")try{await f.insertText(w),ht.debug("Confirmation text inserted successfully")}catch($){if(ht.warn("Failed to insert confirmation text:",$),typeof f.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:w,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(B){ht.warn("Legacy insertion also failed:",B)}}else if(typeof f.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:w,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch($){ht.warn("Legacy insertion failed:",$)}const A={file:S,result:w,isFileAttachment:!0,fileName:v,confirmationText:w,skipAutoInsertCheck:h};return requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:A}))}),N(),{success:!0,message:w}}else{if(ht.debug("Adapter does not have attachFile method, using optimistic success"),w=`File attachment completed: ${v}`,M("Attached!","attach-success",!0),typeof f.insertText=="function")try{await f.insertText(w),ht.debug("Confirmation text inserted successfully")}catch(A){if(ht.warn("Failed to insert confirmation text:",A),typeof f.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:w,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch($){ht.warn("Legacy insertion also failed:",$)}}else if(typeof f.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:w,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(A){ht.warn("Legacy insertion failed:",A)}const k={file:S,result:w,isFileAttachment:!0,fileName:v,confirmationText:w,skipAutoInsertCheck:h};return requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:k}))}),N(),{success:!0,message:w}}}catch(k){ht.error("File attachment error:",k),M("Failed","attach-error",!0),N()}return{success:!1,message:null}},ps=(f,l,n,r)=>{var S;const s=f.getAttribute("data-call-id")||"",d=f.getAttribute("data-function-name")||"",h=()=>{var N;l.parentNode===f&&f.removeChild(l),f.querySelectorAll(".function-result-success, .function-result-error").forEach(k=>f.removeChild(k));const M=f.nextElementSibling;M!=null&&M.classList.contains("insert-button-container")&&((N=M.parentNode)==null||N.removeChild(M))},v=w=>{let M="";if(typeof w=="string"?M=w:w&&typeof w=="object"?M=w.message||"An unknown error occurred":M="An unknown error occurred",typeof M=="string"){const N={SERVER_UNAVAILABLE:"Server is disconnected. Please check your connection settings.",CONNECTION_ERROR:"Connection to server failed. Please try reconnecting.",RECONNECT_ERROR:"Connection to server failed. Please try reconnecting.",SERVER_ERROR:"Server error occurred. Please check server status."};for(const[k,A]of Object.entries(N))if(M.includes(k))return A}return M};if(h(),l.style.display="none",n){let w="";const M=Zi("div",{className:"function-result-success"});if(typeof r=="object")try{if(r&&r.content&&Array.isArray(r.content)){const Z=r.content.filter(Y=>Y.type==="text"&&Y.text).map(Y=>Y.text);if(Z.length>0)w=Z.join(`
`),M.textContent=w;else{w=JSON.stringify(r,null,2);const Y=Zi("pre",{textContent:w,styles:{fontFamily:"inherit",fontSize:"13px",lineHeight:"1.5",padding:"0",margin:"0"}});M.appendChild(Y)}}else{w=JSON.stringify(r,null,2);const Z=Zi("pre",{textContent:w,styles:{fontFamily:"inherit",fontSize:"13px",lineHeight:"1.5",padding:"0",margin:"0"}});M.appendChild(Z)}}catch{w=String(r),M.textContent=w}else w=String(r),M.textContent=w;f.appendChild(M);const N=document.createDocumentFragment(),k=Zi("div",{className:"function-buttons insert-button-container",styles:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}}),A=Zi("button",{className:"insert-result-button",innerHTML:`${Pi.INSERT}<span>Insert</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},attributes:{"data-result-id":`result-${s}-${Date.now()}`}});A.querySelector("span"),A.onclick=async()=>{const Z=yy();if(!Z){(()=>{A.textContent="Failed (No Adapter)",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3)})(),ht.error("No adapter available for text insertion.");return}if(!xy("text-insertion")){(()=>{A.textContent="Not Supported",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3)})(),ht.error("Current adapter does not support text insertion.");return}const Y=`<function_result call_id="${s}">
${w}
</function_result>`;if(w.length>Sy&&hC.includes(mC))ht.debug(`Result length (${Y.length}) exceeds ${Sy}. Attaching as file.`),await mS(Z,d,s,Y,A,A.querySelector("span"),!0);else if(typeof Z.insertText=="function")try{if(await Z.insertText(Y))A.textContent="Inserted!",A.classList.add("insert-success"),A.disabled=!0,setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-success"),A.disabled=!1},2e3),requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:Y,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))});else throw new Error("Adapter insertText method returned false")}catch(ie){ht.error("New adapter insertText method failed:",ie),typeof Z.insertTextIntoInput=="function"?(ht.debug("Falling back to legacy insertTextIntoInput method"),requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:Y,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))}),A.textContent="Inserted!",A.classList.add("insert-success"),A.disabled=!0,setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-success"),A.disabled=!1},2e3)):(ht.error("No valid insert method found on adapter"),A.textContent="Failed (No Insert Method)",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3))}else typeof Z.insertTextIntoInput=="function"?(ht.debug("Using legacy insertTextIntoInput method"),requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:Y,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))}),A.textContent="Inserted!",A.classList.add("insert-success"),A.disabled=!0,setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-success"),A.disabled=!1},2e3)):(ht.error("Adapter has no insert method available"),A.textContent="Failed (No Insert Method)",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Pi.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3))};const $=Zi("button",{className:"attach-file-button",innerHTML:`${Pi.ATTACH}<span>Attach File</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},attributes:{"data-result-id":`attach-${s}-${Date.now()}`}});$.onclick=async()=>{const Z=yy();await mS(Z,d,s,w,$,null,!0)},k.appendChild(A);const B=yy();if(B&&xy("file-attachment")&&k.appendChild($),N.appendChild(k),(S=f.parentNode)==null||S.insertBefore(N,f.nextSibling),w.length>Sy&&B&&xy("file-attachment")&&hC.includes(mC)){ht.debug(`Auto-attaching file: Result length (${w.length}) exceeds ${Sy}`);const Z={button:Zi("button",{className:"insert-result-button",styles:{display:"none"}})};mS(B,d,s,w,Z.button,null,!0).then(async({success:Y,message:ie})=>{if(Y&&ie){if(ht.debug(`Auto-attached file successfully: ${ie}`),typeof B.insertText=="function")try{await B.insertText(ie),ht.debug("Auto-attachment confirmation text inserted successfully")}catch(pe){if(ht.warn("Failed to insert auto-attachment confirmation text:",pe),typeof B.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:ie,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(oe){ht.warn("Legacy insertion for auto-attachment also failed:",oe)}}else if(typeof B.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:ie,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(pe){ht.warn("Legacy insertion for auto-attachment failed:",pe)}}else ht.error("Failed to auto-attach file."),setTimeout(()=>$.click(),100);Wh.release(Z.button)}).catch(Y=>{ht.error("Error auto-attaching file:",Y),Wh.release(Z.button)})}else{const Z=`<function_result call_id="${s}">
${w}
</function_result>`;requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:Z,skipAutoInsertCheck:!1}}))})}}else{const w=v(r),M=Zi("div",{className:"function-result-error",textContent:w});f.appendChild(M)}},xn=nt("FunctionBlockRenderer"),eO=16,lg=3,tO=1e3,nO=1500,nd={paramStartRegex:/<parameter\s+name="([^"]+)"[^>]*>/gs,invokeMatch:/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/i,cdataMatch:/<!\[CDATA\[(.*?)(?:\]\]>)?$/s,endParameterTag:"</parameter>"},yC=new WeakMap,ul=new WeakMap,Sc=new Map,bS=new Map,hs=new Map;let vS=!1;function iO(){const f=window.__mcpAutomationState;if(f)return{autoInsert:f.autoInsert||!1,autoSubmit:f.autoSubmit||!1,autoExecute:f.autoExecute||!1};const l=window.toggleState;return{autoInsert:(l==null?void 0:l.autoInsert)===!0,autoSubmit:(l==null?void 0:l.autoSubmit)===!0,autoExecute:(l==null?void 0:l.autoExecute)===!0}}const wy={pre:{margin:"0",padding:"12px 14px",whiteSpace:"pre-wrap",wordWrap:"break-word",width:"100%",fontFamily:"var(--font-mono)",fontSize:"13px",lineHeight:"1.5",transition:"opacity 0.1s ease-out",transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000px",color:"inherit",background:"transparent",border:"none",overflow:"auto",maxHeight:"300px",scrollBehavior:"smooth"},paramValue:{transition:"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)",transformOrigin:"top left",willChange:"auto",contain:"layout style paint",minHeight:"1.2em",position:"relative"},contentWrapper:{position:"relative",overflow:"hidden",minHeight:"inherit"},paramsContainer:{display:"flex",flexDirection:"column",gap:"4px",width:"100%"}},vt={applyStyles:(f,l)=>{Object.assign(f.style,l)},createElement:(f,l,n,r)=>{const s=document.createElement(f);return l&&(s.className=l),n&&Object.entries(n).forEach(([d,h])=>{s.setAttribute(d,h)}),r&&vt.applyStyles(s,r),s},setContent:(f,l,n=!1)=>{n?f.innerHTML=l:f.textContent=l},updateTextIfChanged:(f,l)=>f.textContent!==l?(f.textContent=l,!0):!1},yS={generateContentHash:f=>{let l=0;for(let n=0;n<f.length;n++){const r=f.charCodeAt(n);l=(l<<5)-l+r,l=l&l}return l.toString(36)},getCachedElements:f=>{const l=Date.now();let n=ul.get(f);return(!n||l-n.lastCacheTime>tO)&&(n={functionNameElement:f.querySelector(".function-name")||void 0,paramsContainer:f.querySelector(".function-params")||void 0,buttonContainer:f.querySelector(".function-buttons")||void 0,lastCacheTime:l},ul.set(f,n)),n},parseContentEfficiently:(f,l)=>{const n=yS.generateContentHash(l);let r=yC.get(f);if(r&&r.lastHash===n)return{functionName:r.functionName,callId:r.callId,parameters:r.parameters};const s=nd.invokeMatch.exec(l),d=s?s[1]:"function",h=s&&s[2]?s[2]:`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,v={};nd.paramStartRegex.lastIndex=0;let S;for(;(S=nd.paramStartRegex.exec(l))!==null;){const w=S[1],M=S.index+S[0].length,N=l.indexOf(nd.endParameterTag,M);let k=N!==-1?l.substring(M,N):l.substring(M);const A=nd.cdataMatch.exec(k);k=A?A[1]:k.trim(),v[w]=k}return r={content:l,functionName:d,callId:h,parameters:v,lastHash:n},yC.set(f,r),{functionName:d,callId:h,parameters:v}}},id={batchDOMOperation:(f,l)=>{Sc.has(f)||Sc.set(f,[]),Sc.get(f).push(l),vS||(vS=!0,requestAnimationFrame(()=>{Sc.forEach(n=>{n.forEach(r=>r())}),Sc.clear(),vS=!1}))},batchStreamingUpdate:(f,l)=>{const n=bS.get(f);n&&clearTimeout(n),bS.set(f,window.setTimeout(()=>{requestAnimationFrame(()=>{l(),bS.delete(f)})},eO))},cleanupTimeout:f=>{const l=hs.get(f);l&&(clearTimeout(l),hs.delete(f))},setManagedTimeout:(f,l,n)=>{id.cleanupTimeout(f);const r=window.setTimeout(()=>{l(),hs.delete(f)},n);hs.set(f,r)}},cg={createScrollHandler:f=>{let l;const n=()=>{f._userHasScrolled=!0,l&&clearTimeout(l),l=window.setTimeout(()=>{f.scrollTop>=f.scrollHeight-f.clientHeight-50&&(f._userHasScrolled=!1)},3e3)},r=()=>{f.removeEventListener("scroll",n),l&&clearTimeout(l),f._scrollInitialized=!1};return f.addEventListener("scroll",n,{passive:!0}),f._scrollInitialized=!0,f._scrollCleanup=r,{element:f,timeout:l,cleanup:r}},setupScrollTracking:f=>{if(!f._scrollHandlersInitialized){cg.createScrollHandler(f);const l=f.querySelector("pre");l&&cg.createScrollHandler(l),f._scrollHandlersInitialized=!0}},performOptimizedScroll:(f,l=!1)=>{requestAnimationFrame(()=>{if(f.scrollHeight>f.clientHeight&&(l||!f._userHasScrolled)){const s=f.scrollHeight-f.clientHeight,d=f.scrollTop,h=s-d;h>10?f.scrollTo({top:s,behavior:"smooth"}):h>0&&(f.scrollTop=s)}const n=f.querySelector("pre");if(n&&n.scrollHeight>n.clientHeight&&(l||!n._userHasScrolled)){const s=n.scrollHeight-n.clientHeight,d=n.scrollTop,h=s-d;h>10?n.scrollTo({top:s,behavior:"smooth"}):h>0&&(n.scrollTop=s)}})},performStreamingScroll:f=>{f._userHasScrolled=!1;const l=f.querySelector("pre");l&&(l._userHasScrolled=!1),cg.performOptimizedScroll(f,!0)}},aO=()=>{if(typeof window<"u"&&window.monaco)try{window.monaco.editor.onDidCreateEditor(f=>{f.updateOptions({wordBasedSuggestions:!1,snippetSuggestions:!1,suggestOnTriggerCharacters:!1,semanticHighlighting:{enabled:!1},codeLens:!1,formatOnType:!1,folding:!1})}),window.MonacoEnvironment={getWorkerUrl:()=>'data:text/javascript;charset=utf-8,logger.debug("Monaco worker disabled for CSP compatibility");'},xn.debug("Monaco editor configured for CSP compatibility")}catch(f){xn.error("Failed to configure Monaco editor for CSP:",f)}},oO=(()=>{let f=!1;return()=>{if(f)return;f=!0;const l=vt.createElement("style");l.textContent=`
      .streaming-param-name {
        position: relative;
      }
      
      .param-value[data-streaming="true"] {
        position: relative;
        background: linear-gradient(135deg, 
          rgba(0, 212, 255, 0.03) 0%, 
          rgba(0, 153, 204, 0.01) 100%);
        border-left: 2px solid rgba(0, 212, 255, 0.2);
        padding-left: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .param-value[data-streaming="true"] .content-wrapper {
        animation: subtle-breathe 3s ease-in-out infinite;
      }
      
      @keyframes subtle-breathe {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.001); }
      }
      
      /* Enhanced scrolling styles */
      .param-value[data-streaming="true"] {
        overflow-y: auto !important;
        max-height: 300px !important;
        scroll-behavior: smooth !important;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar {
        width: 6px;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 3px;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar-thumb {
        background: rgba(0, 212, 255, 0.5);
        border-radius: 3px;
        transition: background 0.2s ease;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 212, 255, 0.8);
      }
      
      /* Fix text color inheritance for both themes */
      .function-block.theme-light .param-value[data-streaming="true"] pre,
      .function-block:not(.theme-dark) .param-value[data-streaming="true"] pre {
        color: inherit !important;
      }
      
      .function-block.theme-dark .param-value[data-streaming="true"] pre {
        color: inherit !important;
      }
      
      /* Spinner animation styles - ensure they're loaded */
      .spinner {
        display: inline-block;
        width: 14px;
        height: 14px;
        border: 2px solid rgba(26, 115, 232, 0.3);
        border-top: 2px solid #1a73e8;
        border-radius: 50%;
        animation: spinner-spin 1s linear infinite;
        flex-shrink: 0;
        will-change: transform;
        transform: translate3d(0, 0, 0);
        backface-visibility: hidden;
        contain: layout style;
      }
      
      .function-block.theme-dark .spinner {
        border: 2px solid rgba(138, 180, 248, 0.3);
        border-top: 2px solid #8ab4f8;
      }
      
      @keyframes spinner-spin {
        0% { transform: rotate(0deg) translate3d(0,0,0); }
        100% { transform: rotate(360deg) translate3d(0,0,0); }
      }
    `,document.head.appendChild(l)}})(),em=new WeakSet,Tr=new Map,ms={attempts:new Map,executed:new Set,executedFunctions:new Set,isFunctionExecuted(f,l,n){xn.debug(`isFunctionExecuted called with: callId='${f}', signature='${l}', funcName='${n||"undefined"}'`);let r=n;if(typeof r>"u"||r===null){let s="";for(const d of this.executedFunctions){const h=d.split(":");if(h.length===3&&h[1]===f&&h[2]===l){s=h[0];break}}s&&(r=s,xn.debug(`Found functionName='${r}' from executedFunctions set`))}if(typeof r=="string"){const s=`${r}:${f}:${l}`,d=this.executedFunctions.has(s),h=vy(r,f,l)!==null;return xn.debug(`isFunctionExecuted (Standard Check): Key='${s}', inMemory=${d}, inStorage=${h}`),d||h}else{const s=`${f}:${l}`,d=this.executedFunctions.has(s)||this.executedFunctions.has(`:${f}:${l}`),h=GA(f,l)!==null;return xn.debug(`isFunctionExecuted (Legacy Check): Key='${s}', inMemory=${d}, inStorage=${h}`),d||h}},markFunctionExecuted(f,l,n){const r=n?`${n}:${f}:${l}`:`${f}:${l}`;this.executedFunctions.add(r)},isBlockExecuted(f){return this.executed.has(f)===!0},markBlockExecuted(f){this.executed.add(f)},getAttempts(f){return this.attempts.get(f)||0},incrementAttempts(f){const n=this.getAttempts(f)+1;return this.attempts.set(f,n),n},cleanupBlock(f){this.attempts.delete(f)}},Ey={expandBlock:(f,l=!0)=>{if(f.classList.contains("expanded"))return;const n=f.querySelector(".expand-button"),r=f.querySelector(".expandable-content");if(!(!n||!r))if(f.classList.add("expanded","auto-expanded"),l){vt.applyStyles(r,{display:"block",maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"});const s=r.scrollHeight+24;requestAnimationFrame(()=>{vt.applyStyles(r,{maxHeight:s+"px",opacity:"1",paddingTop:"12px",paddingBottom:"12px",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"});const d=n.querySelector("svg path");d&&d.setAttribute("d","M16 14l-4-4-4 4"),n.title="Collapse function details"})}else vt.applyStyles(r,{display:"block",maxHeight:"none",opacity:"1",paddingTop:"12px",paddingBottom:"12px"})},collapseBlock:(f,l=!0)=>{if(!f.classList.contains("expanded")||!f.classList.contains("auto-expanded"))return;const n=f.querySelector(".expand-button"),r=f.querySelector(".expandable-content");if(!(!n||!r))if(f.classList.remove("expanded","auto-expanded"),l){const s=r.scrollHeight;r.style.maxHeight=s+"px",r.offsetHeight,requestAnimationFrame(()=>{vt.applyStyles(r,{maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"});const d=n.querySelector("svg path");d&&d.setAttribute("d","M8 10l4 4 4-4"),n.title="Expand function details"}),setTimeout(()=>{f.classList.contains("expanded")||(r.style.display="none")},400)}else vt.applyStyles(r,{display:"none",maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"})},scheduleAutoCollapse:(f,l=2e3)=>{const n=f.getAttribute("data-block-id");if(!n)return;const r=`auto-collapse-${n}`;id.cleanupTimeout(r),id.setManagedTimeout(r,()=>{!f.querySelector('[data-streaming="true"]')&&f.classList.contains("auto-expanded")&&Ey.collapseBlock(f,!0)},l)}},Cy={createFunctionNameSection:(f,l,n,r)=>{const s=vt.createElement("div","function-name"),d=vt.createElement("div","function-name-left"),h=vt.createElement("div","function-name-row");vt.applyStyles(h,{display:"flex",alignItems:"center",gap:"8px"});const v=vt.createElement("span","function-name-text");if(v.textContent=f,h.appendChild(v),!n&&!r){const w=vt.createElement("div","spinner");h.appendChild(w)}d.appendChild(h);const S=vt.createElement("div","function-name-right");if(l){const w=vt.createElement("span","call-id");w.textContent=l,S.appendChild(w)}return s.appendChild(d),s.appendChild(S),s},createExpandButton:()=>{const f=vt.createElement("button","expand-button");return f.innerHTML=`
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 10l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    `,f.title="Expand function details",f},createExpandableContent:()=>{const f=vt.createElement("div","expandable-content");return vt.applyStyles(f,{display:"none",overflow:"hidden",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",maxHeight:"0px",opacity:"0"}),f},setupExpandCollapse:(f,l,n)=>{const r=d=>{d.preventDefault(),d.stopPropagation();const h=f.classList.contains("expanded"),v=l.querySelector("svg path");if(h){f.classList.remove("expanded");const S=n.scrollHeight;n.style.maxHeight=S+"px",n.offsetHeight,requestAnimationFrame(()=>{vt.applyStyles(n,{maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"}),v&&v.setAttribute("d","M8 10l4 4 4-4"),l.title="Expand function details"}),setTimeout(()=>{f.classList.contains("expanded")||(n.style.display="none")},250)}else{f.classList.add("expanded"),vt.applyStyles(n,{display:"block",maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"});const S=n.scrollHeight+24;requestAnimationFrame(()=>{vt.applyStyles(n,{maxHeight:S+"px",opacity:"1",paddingTop:"12px",paddingBottom:"12px"}),v&&v.setAttribute("d","M16 14l-4-4-4 4"),l.title="Collapse function details"})}};l.onclick=r;const s=f.querySelector(".function-name");s&&(vt.applyStyles(s,{cursor:"pointer"}),s.onclick=r)}},ad={createParamName:(f,l)=>{const n=vt.createElement("div","param-name",{"data-param-id":l});return n.textContent=f,n},createParamValue:(f,l)=>{const n=vt.createElement("div","param-value",{"data-param-id":f,"data-param-name":l});return vt.applyStyles(n,wy.paramValue),n},createStreamingContent:f=>{f.innerHTML="";const l=vt.createElement("div","content-wrapper");vt.applyStyles(l,wy.contentWrapper);const n=vt.createElement("pre");return vt.applyStyles(n,wy.pre),l.appendChild(n),f.appendChild(l),{preElement:n,contentWrapper:l}},updateContent:(f,l,n)=>{const r=f.textContent||"";r!==l&&(n&&l.length>r.length+50?(f.style.opacity="0.85",setTimeout(()=>{f.textContent=l,f.style.opacity="1"},8)):f.textContent=l)},handleStreamingState:(f,l,n,r)=>{const s=`streaming-timeout-${n}`;id.cleanupTimeout(s),r?(f.classList.contains("streaming-param-name")||f.classList.add("streaming-param-name"),l.setAttribute("data-streaming","true"),l.hasAttribute("data-streaming-styled")||(vt.applyStyles(l,{willChange:"scroll-position, contents",containIntrinsicSize:"auto 1.2em"}),ad.checkAndApplyOverflow(l),l.setAttribute("data-streaming-styled","true"),cg.setupScrollTracking(l)),cg.performStreamingScroll(l),id.setManagedTimeout(s,()=>{f&&document.body.contains(f)&&(f.classList.remove("streaming-param-name"),l&&(l.removeAttribute("data-streaming"),l.removeAttribute("data-streaming-styled"),vt.applyStyles(l,{willChange:"auto",containIntrinsicSize:"auto"})))},nO)):(f.classList.contains("streaming-param-name")&&setTimeout(()=>{f.classList.remove("streaming-param-name"),l.removeAttribute("data-streaming"),l.removeAttribute("data-streaming-styled"),vt.applyStyles(l,{willChange:"auto",containIntrinsicSize:"auto"});const d=l.closest(".function-block");d&&d.classList.contains("auto-expanded")&&(d.querySelector('[data-streaming="true"]')||Ey.scheduleAutoCollapse(d,1200))},100),setTimeout(()=>ad.checkAndApplyOverflow(l),200))},checkAndApplyOverflow:f=>{const l=f.scrollHeight>300,n=f.style.overflow==="auto";l&&!n?vt.applyStyles(f,{overflow:"auto",maxHeight:"300px",scrollBehavior:"smooth",scrollbarWidth:"thin"}):!l&&n&&vt.applyStyles(f,{overflow:"visible",maxHeight:"none"})}},xC={setupOptimizedAutoExecution:(f,l)=>{const n=()=>{const r=ms.incrementAttempts(f);if(r>lg){xn.debug(`Auto-execute: Giving up on block ${f} after ${r-1} attempts`),ms.cleanupBlock(f);return}xn.debug(`Auto-execute attempt ${r}/${lg} for block ${f}`);const s=window.__mcpAutomationState,d=((s==null?void 0:s.autoExecuteDelay)||0)*1e3;xn.debug(`Using delay of ${d}ms for block ${f}`),id.setManagedTimeout(`auto-exec-${f}-${r}`,()=>{let h=document.querySelector(`.function-block[data-block-id="${f}"]`);if(h||(xn.debug(`Auto-execute: Original block ${f} not found. Searching for replacement...`),h=xC.findReplacementBlock(l)),!h){xn.debug(`Auto-execute: Block ${f} not found (attempt ${r}/${lg})`),r<lg?n():(xn.debug(`Auto-execute: Giving up on block ${f} - not found in DOM`),ms.cleanupBlock(f));return}if(vy(l.functionName,l.callId,l.contentSignature)){xn.debug("Auto-execute: Function already executed, skipping."),ms.cleanupBlock(f);return}const S=h.querySelector(".execute-button");S?(xn.debug(`Auto-execute: Executing function ${l.functionName}`),S.click(),ms.cleanupBlock(f)):(xn.debug(`Auto-execute: Execute button not found (attempt ${r}/${lg})`),r<lg?n():(xn.debug(`Auto-execute: Giving up on block ${f} - button not found`),ms.cleanupBlock(f)))},d+500)};n()},findReplacementBlock:f=>{const l=document.querySelectorAll(".function-block");for(const n of l){const r=n.querySelector("pre");if(!(r!=null&&r.textContent))continue;const s=nd.invokeMatch.exec(r.textContent);if(nd.invokeMatch.lastIndex=0,s&&s[1]===f.functionName&&s[2]===f.callId&&!vy(f.functionName,f.callId,f.contentSignature))return xn.debug("Auto-execute: Found replacement block, attempting execution."),n}return null}};typeof window<"u"&&aO();const Ty=(f,l)=>{var De,Ze,Je,ct;oO();const n=LA(f);if(Se.debug&&xn.debug("[Render] containsFunctionCalls result:",{hasFunctionCalls:n.hasFunctionCalls,detectedBlockType:n.detectedBlockType,isComplete:n.isComplete,hasParameters:n.hasParameters,invokeName:n.invokeName}),!n.hasFunctionCalls||f.closest(".function-block")){if(Se.debug&&!n.hasFunctionCalls){const F=((De=f.textContent)==null?void 0:De.trim())||"";F.length===0?xn.debug("[Render] Skipping empty block - waiting for content"):F.length<10?xn.debug("[Render] Skipping very short content - waiting for more data"):xn.debug("[Render] Early exit - no function calls detected")}return!1}const r=((Ze=f.textContent)==null?void 0:Ze.trim())||"";if(r.length<10)return Se.debug&&xn.debug("[Render] Skipping block with insufficient content (length:",r.length,")"),!1;const s=f.getAttribute("data-block-id")||`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;if((Je=window.resyncingBlocks)!=null&&Je.has(s))return Se.debug&&xn.debug(`Skipping render for resyncing block ${s}`),!1;const d=document.querySelector(`.function-block[data-block-id="${s}"]`);if(d&&d.classList.contains("function-complete"))return Se.debug&&xn.debug(`Skipping render for completed block ${s}`),!1;const v=(window.preExistingIncompleteBlocks||new Set).has(s);let S=Tr.get(s),w=!1,M=null;em.has(f)&&(S||(S=document.querySelector(`.function-block[data-block-id="${s}"]`)||void 0,S?Tr.set(s,S):em.delete(f))),S?M=S.classList.contains("function-complete"):(w=!0,em.has(f)||(em.add(f),f.setAttribute("data-block-id",s)));const N=((ct=f.textContent)==null?void 0:ct.trim())||"",{tag:k,content:A}=lC(N),$=n.detectedBlockType==="json";let B,Z,Y,ie=null;if($){const F=cC(N);B=F.functionName||"function",Z=F.callId||`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,ie=F.description,Y=sg(N)}else{const F=yS.parseContentEfficiently(f,N);B=F.functionName,Z=F.callId,Y=F.parameters}const pe=S||vt.createElement("div");if(w&&(pe.className="function-block",pe.setAttribute("data-block-id",s),xS(pe),Tr.set(s,pe),pe.classList.remove("expanded","auto-expanded")),w){if(!n.isComplete&&!v&&pe.classList.add("function-loading"),k||n.languageTag){const F=vt.createElement("div","language-tag");F.textContent=k||n.languageTag,pe.appendChild(F)}}else{const F=M===!1&&n.isComplete,q=M===!0&&!n.isComplete;if(F){pe.classList.remove("function-loading"),pe.classList.add("function-complete");const W=pe.querySelector(".spinner");W&&W.remove()}else q&&!pe.classList.contains("function-complete")&&(pe.classList.remove("function-complete"),pe.classList.add("function-loading"))}const oe=yS.getCachedElements(pe);let me=oe.functionNameElement;if(!me)me=Cy.createFunctionNameSection(B,Z,n.isComplete,v),pe.appendChild(me),oe.functionNameElement=me,ul.set(pe,{...oe,lastCacheTime:Date.now()});else{const F=me.querySelector(".function-name-text");F&&vt.updateTextIfChanged(F,B);const q=me.querySelector(".call-id");if(Z)if(q)vt.updateTextIfChanged(q,Z);else{const W=vt.createElement("span","call-id");W.textContent=Z,me.appendChild(W)}}let J=me==null?void 0:me.querySelector(".expand-button"),he=pe.querySelector(".expandable-content");if(!J&&me){J=Cy.createExpandButton();const F=me.querySelector(".function-name-right");F?F.appendChild(J):me.appendChild(J)}if(he||(he=Cy.createExpandableContent(),pe.appendChild(he),w&&vt.applyStyles(he,{display:"none",maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"})),J&&he&&Cy.setupExpandCollapse(pe,J,he),ie&&me){const F=me.querySelector(".function-name-left");if(F&&!F.querySelector(".function-description")){vt.applyStyles(F,{flexDirection:"column",alignItems:"flex-start"});const q=vt.createElement("div","function-description");q.textContent=ie,vt.applyStyles(q,{fontSize:"12px",color:"inherit",marginTop:"4px",fontStyle:"bold",lineHeight:"1.4",display:"block",opacity:"0.8"}),F.appendChild(q)}}let ne=oe.paramsContainer;ne||(ne=vt.createElement("div","function-params"),vt.applyStyles(ne,wy.paramsContainer),he.appendChild(ne),oe.paramsContainer=ne,ul.set(pe,{...oe,lastCacheTime:Date.now()})),Object.entries(Y).forEach(([F,q])=>{let W;$?W=!n.isComplete:W=!N.includes("</parameter>")||N.indexOf("</parameter>",N.indexOf(`<parameter name="${F}"`))===-1;const Re=`${s}-${F}`;id.batchStreamingUpdate(Re,()=>{rO(ne,F,q,s,w,W)})});let Ce=null;n.isComplete&&($?Ce=sg(N):Ce=hS(N),pe.classList.contains("auto-expanded")&&Ey.scheduleAutoCollapse(pe,1500));let de=null;if(n.isComplete&&Ce&&(de=gC(B,Ce)),w)if(f.parentNode)f.parentNode.insertBefore(pe,f),f.style.display="none";else return Se.debug&&xn.warn("Function call block has no parent element, cannot insert rendered block"),!1;let Ue=oe.buttonContainer;if(Ue||(Ue=vt.createElement("div","function-buttons"),Ue.style.marginTop="12px",pe.appendChild(Ue),oe.buttonContainer=Ue,ul.set(pe,{...oe,lastCacheTime:Date.now()})),n.isComplete&&(pe.querySelector(".raw-toggle")||KA(Ue,N),!pe.querySelector(".execute-button"))){Ce||($?Ce=sg(N):Ce=hS(N)),JA(Ue,N);const q=iO().autoExecute;if(de&&!ms.isFunctionExecuted(Z,de,B)){if(q!==!0)return xn.debug(`Auto-execution disabled by user settings for block ${s} (${B})`),!0;if(ms.isBlockExecuted(s)===!0)return xn.debug(`Auto-execution skipped: Block ${s} (${B}) has already been processed`),!0;ms.markFunctionExecuted(Z,de,B),ms.markBlockExecuted(s),xn.debug(`Setting up auto-execution for block ${s} (${B})`);const W={functionName:B,callId:Z,contentSignature:de,params:Ce||{}};xC.setupOptimizedAutoExecution(s,W)}}return!0},rO=(f,l,n,r,s,d=!1)=>{const h=`${r}-${l}`,S=ul.get(f)||{lastCacheTime:Date.now()};let w=S[`name-${h}`],M=S[`value-${h}`];(!w||!M)&&(w=w||f.querySelector(`.param-name[data-param-id="${h}"]`)||document.querySelector(`.param-name[data-param-id="${h}"]`)||void 0,M=M||f.querySelector(`.param-value[data-param-id="${h}"]`)||document.querySelector(`.param-value[data-param-id="${h}"]`)||void 0,w&&(S[`name-${h}`]=w),M&&(S[`value-${h}`]=M),ul.set(f,S)),w||(w=ad.createParamName(l,h),f.appendChild(w),S[`name-${h}`]=w,ul.set(f,S)),M||(M=ad.createParamValue(h,l),f.appendChild(M),S[`value-${h}`]=M,ul.set(f,S));const N=typeof n=="object"?JSON.stringify(n,null,2):String(n);if(!(M.getAttribute("data-current-value")===N&&!d)){if(M.setAttribute("data-current-value",N),d||M.hasAttribute("data-streaming")){let A=M.querySelector("pre"),$=M.querySelector(".content-wrapper");if(!A||!$){const Z=ad.createStreamingContent(M);A=Z.preElement,$=Z.contentWrapper}const B=()=>{ad.updateContent(A,N,d)};d?requestAnimationFrame(()=>{B(),cg.performStreamingScroll(M)}):B()}else M.textContent!==N&&(M.textContent&&M.textContent.length>0?(M.style.opacity="0.9",setTimeout(()=>{M.textContent=N,M.style.opacity="1"},50)):M.textContent=N);if(M.setAttribute("data-param-value",JSON.stringify(n)),ad.handleStreamingState(w,M,h,d),d){const A=f.closest(".function-block");A&&!A.classList.contains("expanded")&&Ey.expandBlock(A,!0)}}},sO={clearAllCaches:()=>{Tr.clear(),Sc.clear(),hs.forEach(f=>clearTimeout(f)),hs.clear()},clearBlockCache:f=>{Tr.delete(f),Sc.delete(f),Array.from(hs.keys()).filter(n=>n.includes(f)).forEach(n=>{const r=hs.get(n);r&&(clearTimeout(r),hs.delete(n))})},getCacheStats:()=>({contentParsingCacheSize:"WeakMap (size not available - auto-managed)",elementQueryCacheSize:"WeakMap (size not available - auto-managed)",renderedFunctionBlocksSize:Tr.size,pendingDOMUpdatesSize:Sc.size,activeTimeoutsSize:hs.size})};typeof window<"u"&&window.addEventListener("beforeunload",()=>{sO.clearAllCaches()});const lO=nt("ThemeDetector");let It=null,dl={bodyClasses:"",htmlClasses:"",bodyDataTheme:"",htmlDataTheme:"",bodyBgColor:"",isDark:!1};const cO=[];let ky=null;const uO=100;function bt(f,l){Se.debug&&lO.debug(`${f}`,l||"")}function dO(){let f=0,l=0;const n={classNames:8,dataAttributes:8,metaTags:6,backgroundColors:5,cssVariables:4,textColors:3,systemColors:2,urlPatterns:1};try{const h=document.body,v=document.documentElement;if(!h||!v)return{theme:"system",confidence:0,scores:{dark:0,light:0}};const S=h.className.toLowerCase()||"",w=v.className.toLowerCase()||"",M=S+" "+w,N=["dark-theme","theme-dark","dark-mode","dark","night-mode","nightmode","black-theme","theme-black","noir","midnight","shadow","carbon","slate","charcoal","obsidian","dim","dusky","darker","darkened","invert","inverted","contrast-dark","scheme-dark","color-scheme-dark","theme-dark-mode","darktheme","dark_theme","dark_mode"],k=["light-theme","theme-light","light-mode","light","day-mode","daymode","white-theme","theme-white","bright","default-theme","normal","classic","standard","vanilla","clean","minimal","bright-mode","contrast-light","scheme-light","color-scheme-light","theme-light-mode","lighttheme","light_theme","light_mode"],A=N.filter(Ce=>new RegExp(`\\b${Ce}\\b`,"i").test(M)),$=k.filter(Ce=>new RegExp(`\\b${Ce}\\b`,"i").test(M));A.length>0&&(f+=n.classNames*A.length,bt("Dark class patterns found",A)),$.length>0&&(l+=n.classNames*$.length,bt("Light class patterns found",$)),[h.getAttribute("data-theme"),v.getAttribute("data-theme"),h.getAttribute("data-color-scheme"),v.getAttribute("data-color-scheme"),h.getAttribute("data-color-mode"),v.getAttribute("data-color-mode"),h.getAttribute("data-bs-theme"),v.getAttribute("data-bs-theme")].filter(Boolean).forEach(Ce=>{const de=Ce==null?void 0:Ce.toLowerCase();de!=null&&de.includes("dark")&&(f+=n.dataAttributes),de!=null&&de.includes("light")&&(l+=n.dataAttributes)}),document.querySelectorAll('meta[name*="theme"], meta[name*="color-scheme"]').forEach(Ce=>{var Ue;const de=(Ue=Ce.getAttribute("content"))==null?void 0:Ue.toLowerCase();de!=null&&de.includes("dark")&&(f+=n.metaTags),de!=null&&de.includes("light")&&(l+=n.metaTags)});const Y=[h,v,...Array.from(document.querySelectorAll('main, [role="main"], .main-content, #main, #content, .content')).slice(0,3),...Array.from(document.querySelectorAll(".app, #app, .wrapper, .container, .page, .layout")).slice(0,3),...Array.from(document.querySelectorAll("header, nav, .header, .navbar")).slice(0,2)],ie={darkCount:0,lightCount:0,totalAnalyzed:0};for(const Ce of Y)if(Ce)try{const Ue=window.getComputedStyle(Ce).backgroundColor;if(Ue&&Ue!=="rgba(0, 0, 0, 0)"&&Ue!=="transparent"){const De=wc(Ue);De!==null&&(ie.totalAnalyzed++,De<120?ie.darkCount++:De>180&&ie.lightCount++)}}catch{}if(ie.totalAnalyzed>0){const Ce=ie.darkCount/ie.totalAnalyzed,de=ie.lightCount/ie.totalAnalyzed;f+=n.backgroundColors*Ce*3,l+=n.backgroundColors*de*3}const pe=["--background-color","--bg-color","--background","--bg","--color-bg","--color-background","--theme-bg","--primary-bg","--surface","--surface-color","--base-color","--canvas","--page-bg","--body-bg","--main-bg","--content-bg"],oe={darkCount:0,lightCount:0};pe.forEach(Ce=>{const de=getComputedStyle(document.documentElement).getPropertyValue(Ce);if(de){const Ue=wc(de.trim());Ue!==null&&(Ue<120?oe.darkCount++:Ue>180&&oe.lightCount++)}}),oe.darkCount>0&&(f+=n.cssVariables*oe.darkCount),oe.lightCount>0&&(l+=n.cssVariables*oe.lightCount);const me=[document.querySelector("h1, h2, h3"),document.querySelector("p"),document.querySelector("a"),document.querySelector(".content, article, section")].filter(Boolean),J={lightTextCount:0,darkTextCount:0};me.forEach(Ce=>{try{const de=window.getComputedStyle(Ce).color,Ue=wc(de);Ue!==null&&(Ue>180?J.lightTextCount++:Ue<100&&J.darkTextCount++)}catch{}}),J.lightTextCount>J.darkTextCount?f+=n.textColors*J.lightTextCount:J.darkTextCount>J.lightTextCount&&(l+=n.textColors*J.darkTextCount);try{const Ce=document.createElement("div");Ce.style.cssText="position:absolute;top:-9999px;background-color:canvas;color:canvastext;",document.body.appendChild(Ce);const de=window.getComputedStyle(Ce).backgroundColor,Ue=wc(de);document.body.removeChild(Ce),Ue!==null&&(Ue<128?f+=n.systemColors:l+=n.systemColors)}catch{}const he=window.location.hostname.toLowerCase();({dark:["github.com","stackoverflow.com","reddit.com","discord.com","twitter.com"],light:["google.com","wikipedia.org","stackoverflow.com","reddit.com"]}).dark.some(Ce=>he.includes(Ce))&&(window.location.href.toLowerCase().includes("dark")||document.querySelector('[data-theme*="dark"]'))&&(f+=n.urlPatterns)}catch(h){bt("Error in theme scoring",h)}const r=f+l,s=Math.min(r/20,1);let d;return r===0||Math.abs(f-l)<2?d="system":d=f>l?"dark":"light",bt("Theme detection scoring complete",{darkScore:f,lightScore:l,totalScore:r,confidence:s,finalTheme:d}),{theme:d,confidence:s,scores:{dark:f,light:l}}}function wc(f){if(!f)return null;const l=f.trim(),n=l.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(n){const[d,h,v,S]=n.map(Number);return(h*299+v*587+S*114)/1e3}const r=l.match(/#([0-9a-f]{3,6})/i);if(r){const d=r[1];let h,v,S;if(d.length===3?(h=parseInt(d[0]+d[0],16),v=parseInt(d[1]+d[1],16),S=parseInt(d[2]+d[2],16)):(h=parseInt(d.substring(0,2),16),v=parseInt(d.substring(2,4),16),S=parseInt(d.substring(4,6),16)),!isNaN(h)&&!isNaN(v)&&!isNaN(S))return(h*299+v*587+S*114)/1e3}const s=l.match(/hsla?\(\d+,\s*\d+%?,\s*(\d+)%?/i);return s?parseInt(s[1],10)/100*255:null}function fO(){const f=window.location.hostname.toLowerCase();if(window.location.pathname.toLowerCase(),window.location.search.toLowerCase(),f.includes("github.com")){if(document.querySelector('[data-color-mode="dark"]')||document.body.getAttribute("data-color-mode")==="dark"||document.documentElement.getAttribute("data-color-mode")==="dark"||document.querySelector('[data-color-scheme="dark"]')||document.body.getAttribute("data-color-scheme")==="dark"||document.documentElement.getAttribute("data-color-scheme")==="dark")return"dark";if(document.querySelector('[data-color-mode="light"]')||document.body.getAttribute("data-color-mode")==="light"||document.documentElement.getAttribute("data-color-mode")==="light"||document.querySelector('[data-color-scheme="light"]')||document.body.getAttribute("data-color-scheme")==="light"||document.documentElement.getAttribute("data-color-scheme")==="light")return"light"}return f.includes("reddit.com")&&(document.querySelector('[data-theme="dark"]')||document.documentElement.className.includes("theme-dark"))||f.includes("discord.com")&&(document.querySelector('[class*="theme-dark"]')||document.body.className.includes("theme-dark"))||(f.includes("twitter.com")||f.includes("x.com"))&&(document.querySelector('[data-theme="dark"]')||document.documentElement.style.colorScheme==="dark")||f.includes("youtube.com")&&(document.querySelector("[dark]")||document.documentElement.getAttribute("dark")!==null)||f.includes("stackoverflow.com")&&(document.querySelector(".theme-dark")||document.body.className.includes("theme-dark"))?"dark":null}function My(){var f;if(It)return bt("Returning cached theme",It),It;bt("Starting theme detection");try{const l=document.body,n=document.documentElement;if(!l||!n)return bt("Body or HTML element not found, defaulting to system"),It="system",It;const r=fO();if(r)return bt("Theme detected from website-specific patterns",r),It=r,It;const s=dO();if(s.confidence>.3)return bt("Theme detected from scoring mechanism",s),It=s.theme,It;if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return bt("Dark theme detected from prefers-color-scheme"),It="dark",It;const d=[l.getAttribute("data-theme"),n.getAttribute("data-theme"),l.getAttribute("data-color-mode"),n.getAttribute("data-color-mode"),l.getAttribute("data-color-scheme"),n.getAttribute("data-color-scheme"),l.getAttribute("data-bs-theme"),n.getAttribute("data-bs-theme"),l.getAttribute("theme"),n.getAttribute("theme")];bt("Checking data attributes",d);for(const oe of d)if(oe){const me=oe.toLowerCase();if(me.includes("dark")||me==="dark")return bt("Dark theme detected from data attributes",oe),It="dark",It;if(me.includes("light")||me==="light")return bt("Light theme detected from data attributes",oe),It="light",It}const h=document.querySelectorAll('meta[name*="theme"], meta[name*="color-scheme"], meta[name*="theme-color"]');for(const oe of h){const me=(f=oe.getAttribute("content"))==null?void 0:f.toLowerCase();if(me!=null&&me.includes("dark"))return bt("Dark theme detected from meta tags"),It="dark",It;if(me!=null&&me.includes("light"))return bt("Light theme detected from meta tags"),It="light",It}const v=l.className.toLowerCase()||"",S=n.className.toLowerCase()||"",w=`${v} ${S}`;bt("Checking class names",{bodyClasses:v,htmlClasses:S});const M=["dark-theme","theme-dark","dark-mode","dark","night-mode","nightmode","black-theme","theme-black","noir","midnight","shadow","carbon","slate","charcoal","obsidian","dim","dusky","darker","darkened","invert","inverted","contrast-dark","scheme-dark","color-scheme-dark","theme-dark-mode","darktheme","dark_theme","dark_mode","mode-dark","is-dark","has-dark-theme"],N=["light-theme","theme-light","light-mode","light","day-mode","daymode","white-theme","theme-white","bright","default-theme","normal","classic","standard","vanilla","clean","minimal","bright-mode","contrast-light","scheme-light","color-scheme-light","theme-light-mode","lighttheme","light_theme","light_mode","mode-light","is-light","has-light-theme"],k=M.some(oe=>new RegExp(`\\b${oe}\\b`,"i").test(w)),A=N.some(oe=>new RegExp(`\\b${oe}\\b`,"i").test(w));if(k)return bt("Dark theme detected from class names"),It="dark",It;if(A)return bt("Light theme detected from class names"),It="light",It;const $=[{element:l,name:"body"},{element:n,name:"html"},...Array.from(document.querySelectorAll('main, [role="main"], .main-content, #main, #content, .content')).slice(0,3).map((oe,me)=>({element:oe,name:`main-${me}`})),...Array.from(document.querySelectorAll(".app, #app, .wrapper, .container, .page, .layout")).slice(0,2).map((oe,me)=>({element:oe,name:`wrapper-${me}`})),...Array.from(document.querySelectorAll("header, nav, .header, .navbar")).slice(0,2).map((oe,me)=>({element:oe,name:`nav-${me}`}))],B=[];for(const{element:oe,name:me}of $)try{if(!oe)continue;const he=window.getComputedStyle(oe).backgroundColor;if(he&&he!=="rgba(0, 0, 0, 0)"&&he!=="transparent"){const ne=wc(he);if(ne!==null){const Ce=ne<120;B.push({name:me,brightness:ne,isDark:Ce}),bt(`Background analysis for ${me}`,{bgColor:he,brightness:ne,isDark:Ce})}}}catch(J){bt(`Error analyzing background color for ${me}`,J)}if(B.length>0){const oe=B.filter(J=>J.isDark).length,me=B.length-oe;if(bt("Background analysis summary",{total:B.length,dark:oe,light:me,results:B}),oe>me)return bt("Dark theme detected from background color analysis"),It="dark",It;if(me>oe)return bt("Light theme detected from background color analysis"),It="light",It}const Z=["--background-color","--bg-color","--background","--bg","--color-bg","--color-background","--theme-bg","--primary-bg","--surface","--surface-color","--base-color","--canvas","--page-bg","--body-bg","--main-bg","--content-bg","--theme-background","--app-background","--global-background"];bt("Checking CSS variables",Z);for(const oe of Z){const me=getComputedStyle(document.documentElement).getPropertyValue(oe);if(me){const J=me.trim(),he=wc(J);if(he!==null){if(bt(`CSS variable ${oe} brightness`,{colorValue:J,brightness:he}),he<120)return bt("Dark theme detected from CSS variables"),It="dark",It;if(he>180)return bt("Light theme detected from CSS variables"),It="light",It}}}const Y=[document.querySelector("h1, h2, h3"),document.querySelector("p"),document.querySelector("a"),document.querySelector(".content, article, section"),document.querySelector("span"),document.querySelector("div")].filter(Boolean);let ie=0,pe=0;for(const oe of Y.slice(0,5))try{const J=window.getComputedStyle(oe).color;if(J&&J!=="rgba(0, 0, 0, 0)"){const he=wc(J);he!==null&&(he>180?ie++:he<100&&pe++,bt(`Text color analysis for ${oe.tagName}`,{textColor:J,brightness:he,classification:he>180?"light-text":he<100?"dark-text":"neutral"}))}}catch(me){bt(`Error analyzing text color for ${oe.tagName}`,me)}if(bt("Text color analysis summary",{lightTextCount:ie,darkTextCount:pe}),ie>pe&&ie>=2)return bt("Dark theme detected from text color analysis"),It="dark",It;if(pe>ie&&pe>=2)return bt("Light theme detected from text color analysis"),It="light",It;try{const oe=document.createElement("div");oe.style.cssText=`
        position: absolute;
        top: -9999px;
        left: -9999px;
        width: 1px;
        height: 1px;
        background-color: canvas;
        color: canvastext;
      `,document.body.appendChild(oe);const J=window.getComputedStyle(oe).backgroundColor;if(document.body.removeChild(oe),J){const he=wc(J);if(he!==null)return bt("System canvas color analysis",{bgColor:J,brightness:he}),he<128?(bt("Dark theme detected from system canvas colors"),It="dark",It):(bt("Light theme detected from system canvas colors"),It="light",It)}}catch(oe){bt("Error in system color analysis",oe)}}catch(l){bt("Error in theme detection",l)}return bt("Could not determine theme, defaulting to system"),It="system",It}function SC(){const f=document.body,l=document.documentElement;return{bodyClasses:(f==null?void 0:f.className)||"",htmlClasses:(l==null?void 0:l.className)||"",bodyDataTheme:(f==null?void 0:f.getAttribute("data-theme"))||"",htmlDataTheme:(l==null?void 0:l.getAttribute("data-theme"))||"",bodyBgColor:f?window.getComputedStyle(f).backgroundColor:"",isDark:My()==="dark"}}function gO(){if(ky)return;let f;const l=()=>{clearTimeout(f),f=setTimeout(()=>{const d=SC();(d.isDark!==dl.isDark||d.bodyClasses!==dl.bodyClasses||d.htmlClasses!==dl.htmlClasses||d.bodyDataTheme!==dl.bodyDataTheme||d.htmlDataTheme!==dl.htmlDataTheme||d.bodyBgColor!==dl.bodyBgColor)&&(bt("Theme change detected",{old:dl,new:d}),It=null,dl=d,cO.forEach(h=>{try{h(d.isDark)}catch(v){bt("Error in theme change callback",v)}}),hO())},uO)};if(ky=new MutationObserver(d=>{var v;let h=!1;for(const S of d){if(S.type==="attributes"&&(S.attributeName==="class"||(v=S.attributeName)!=null&&v.startsWith("data-"))){h=!0;break}if(S.type==="attributes"&&S.attributeName==="style"){h=!0;break}}h&&l()}),ky.observe(document.documentElement,{attributes:!0,attributeFilter:["class","data-theme","data-color-mode","data-color-scheme","data-bs-theme","style"],subtree:!1}),ky.observe(document.body,{attributes:!0,attributeFilter:["class","data-theme","data-color-mode","data-color-scheme","data-bs-theme","style"],subtree:!1}),window.matchMedia){const d=window.matchMedia("(prefers-color-scheme: dark)"),h=window.matchMedia("(prefers-color-scheme: light)"),v=S=>{bt("Media query change detected",{matches:S.matches,media:S.media}),l()};d.addEventListener("change",v),h.addEventListener("change",v),window._themeMediaQueryListeners={dark:{query:d,handler:v},light:{query:h,handler:v}}}const n=d=>{d.key&&(d.key.includes("theme")||d.key.includes("dark")||d.key.includes("light")||d.key.includes("color"))&&(bt("Storage change detected for theme-related key",{key:d.key,newValue:d.newValue}),l())};window.addEventListener("storage",n),window._themeStorageListener=n;const r=["themechange","theme-change","colorschemechange","color-scheme-change","darkmodechange","dark-mode-change","lightmodechange","light-mode-change"],s=d=>{bt("Custom theme event detected",{type:d.type,detail:d.detail}),l()};if(r.forEach(d=>{document.addEventListener(d,s),window.addEventListener(d,s)}),window._themeCustomEventListeners={handler:s,events:r},window.ResizeObserver){const d=document.createElement("div");d.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      width: 1px;
      height: 1px;
      background: var(--background-color, var(--bg-color, var(--background, transparent)));
      color: var(--text-color, var(--color, inherit));
      pointer-events: none;
    `,document.body.appendChild(d);const h=window.getComputedStyle(d);let v=h.backgroundColor,S=h.color;const w=new ResizeObserver(()=>{const N=window.getComputedStyle(d),k=N.backgroundColor,A=N.color;(k!==v||A!==S)&&(bt("CSS variable change detected",{bgColor:{old:v,new:k},textColor:{old:S,new:A}}),v=k,S=A,l())});setInterval(()=>{d.style.width=d.style.width==="1px"?"2px":"1px"},1e3),w.observe(d),window._themeVariableWatcher={element:d,observer:w}}dl=SC(),bt("Enhanced theme monitoring started with multiple detection methods")}function pO(){return It=null,My()}function Ay(){return My()==="dark"}function xS(f){const l=My();f.classList.remove("theme-light","theme-dark","theme-system"),f.classList.add(`theme-${l}`),f.setAttribute("data-theme",l),bt(`Applied theme class: theme-${l}`,{element:f.className})}function hO(){Tr&&Tr.size>0&&(Tr.forEach((f,l)=>{xS(f)}),bt(`Updated theme for ${Tr.size} function blocks`))}function wC(){gO(),pO(),bt("Theme detection initialized")}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",wC):wC()),Ay();const mO=`
  /* CSS Custom Properties for Performance */
  .function-block {
    /* Light theme variables */
    --light-bg: #ffffff;
    --light-text: #202124;
    --light-text-secondary: #5f6368;
    --light-text-tertiary: #3c4043;
    --light-border: rgba(0,0,0,0.03);
    --light-border-secondary: rgba(0,0,0,0.06);
    --light-border-tertiary: rgba(0,0,0,0.12);
    --light-shadow: 0 3px 12px rgba(0,0,0,0.08), 0 1px 4px rgba(0,0,0,0.05);
    --light-surface: #f1f3f4;
    --light-surface-secondary: #f5f7f9;
    --light-surface-tertiary: #f8f9fa;
    --light-primary: #1a73e8;
    --light-primary-hover: #1967d2;
    --light-primary-surface: #e8f0fe;
    --light-success: #34a853;
    --light-error: #ea4335;
    --light-warning: #fbbc04;
    
    /* Dark theme variables */
    --dark-bg: #1e1e1e;
    --dark-text: #e8eaed;
    --dark-text-secondary: #9aa0a6;
    --dark-text-tertiary: #dadce0;
    --dark-border: rgba(255,255,255,0.03);
    --dark-border-secondary: rgba(255,255,255,0.05);
    --dark-border-tertiary: rgba(255,255,255,0.12);
    --dark-shadow: 0 3px 12px rgba(0,0,0,0.25), 0 1px 4px rgba(0,0,0,0.15);
    --dark-surface: #2d2d2d;
    --dark-surface-secondary: #282828;
    --dark-surface-tertiary: #1e1e1e;
    --dark-primary: #8ab4f8;
    --dark-primary-hover: #7ba9f0;
    --dark-primary-surface: #174ea6;
    --dark-success: #34a853;
    --dark-error: #f28b82;
    --dark-warning: #ffcb6b;
    
    /* Common variables */
    --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    --font-system: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
    --border-radius: 8px;
    --border-radius-sm: 4px;
    --border-radius-lg: 10px;
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 12px;
    --spacing-lg: 16px;
    --spacing-xl: 18px;
    --spacing-xxl: 20px;
    --transition-fast: 0.15s ease;
    --transition-normal: 0.2s ease;
    --transition-slow: 0.25s ease-in-out;
  }

  /* Base styles with CSS variables and GPU acceleration */
  .function-block {
    margin: var(--spacing-xxl) 0;
    padding: var(--spacing-xl);
    border-radius: var(--border-radius-lg);
    font-family: var(--font-system);
    position: relative;
    transition: all var(--transition-slow);
    will-change: transform, opacity, box-shadow;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    perspective: 1000px;
    box-sizing: border-box;
    overflow: hidden;
    width: 100%;
    min-width: 0;
  }
  
  /* Theme-specific styles using CSS variables */
  .function-block.theme-light,
  .function-block:not(.theme-dark) {
    background: var(--light-bg);
    color: var(--light-text);
    box-shadow: var(--light-shadow);
    border: 1px solid var(--light-border);
  }
  
  .function-block.theme-dark {
    background: var(--dark-bg);
    color: var(--dark-text);
    box-shadow: var(--dark-shadow);
    border: 1px solid var(--dark-border);
  }
  
  /* Optimized stabilized blocks */
  .function-block-stabilized {
    position: fixed !important;
    z-index: 1000 !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
    transform: translate3d(0,0,0); /* Hardware acceleration */
  }
  
  /* Optimized function name styles - Always visible header */
  .function-name {
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: var(--spacing-lg);
    position: relative;
    width: 100%;
    max-width: 100%;
    line-height: 1.4;
    padding: 12px;
    margin-bottom: 0;
    transition: all var(--transition-normal);
    cursor: pointer;
    border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
    will-change: transform, opacity, background-color;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    box-sizing: border-box;
    overflow: hidden;
  }
  
  /* Left section of function header (function name) */
  .function-name-left {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex: 1;
    min-width: 0; /* Allow text truncation */
    max-width: 100%;
    overflow: hidden;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
  
  /* Right section of function header (expand button + call-id) */
  .function-name-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-shrink: 0;
    max-width: 40%;
    overflow: hidden;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
  
  /* Collapsed state - rounded corners all around */
  .function-block:not(.expanded) .function-name {
    border-radius: var(--border-radius-md);
    margin-bottom: 0;
  }
  
  /* Expanded state - rounded top corners only */
  .function-block.expanded .function-name {
    border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  /* Optimized expand button styles */
  .expand-button {
    background: none;
    border: 1px solid rgba(0, 0, 0, 0.1);
    cursor: pointer;
    padding: 6px;
    border-radius: var(--border-radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-normal);
    opacity: 0.8;
    will-change: transform, opacity, box-shadow;
    min-width: 28px;
    height: 28px;
    margin-left: var(--spacing-sm);
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
  }
  
  .expand-button:hover {
    opacity: 1;
    transform: scale(1.05) translate3d(0, 0, 0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }
  
  .expand-button:active {
    transform: scale(0.95) translate3d(0, 0, 0);
  }
  
  .expand-button svg {
    transition: transform var(--transition-normal);
    will-change: transform;
  }
  
  /* Consolidated expand button theme styles */
  .function-block.theme-light .expand-button,
  .function-block:not(.theme-dark) .expand-button {
    color: var(--light-text-secondary);
    border-color: rgba(26, 115, 232, 0.2);
    background-color: rgba(26, 115, 232, 0.05);
  }
  
  .function-block.theme-light .expand-button:hover,
  .function-block:not(.theme-dark) .expand-button:hover {
    color: var(--light-primary);
    background-color: rgba(26, 115, 232, 0.1);
    border-color: rgba(26, 115, 232, 0.4);
  }
  
  .function-block.theme-dark .expand-button {
    color: var(--dark-text-secondary);
    border-color: rgba(138, 180, 248, 0.2);
    background-color: rgba(138, 180, 248, 0.05);
  }
  
  .function-block.theme-dark .expand-button:hover {
    color: var(--dark-primary);
    background-color: rgba(138, 180, 248, 0.1);
    border-color: rgba(138, 180, 248, 0.4);
  }
  
  /* Optimized expandable content with smooth animations */
  .expandable-content {
    overflow: hidden;
    width: 100%;
    box-sizing: border-box;
    transition: max-height 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                opacity 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                padding 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                border-color 0.3s ease-out;
    will-change: max-height, opacity, padding;
    border: 1px solid transparent;
    border-top: none;
    border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
    background-color: rgba(0, 0, 0, 0.02);
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    max-height: 0;
    opacity: 0;
    padding: 0 12px;
  }
  
  /* Enhanced auto-expanded state for streaming content */
  .function-block.auto-expanded .expandable-content {
    animation: smoothExpand 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }
  
  @keyframes smoothExpand {
    from {
      max-height: 0;
      opacity: 0;
      padding: 0 12px;
    }
    to {
      max-height: 2000px;
      opacity: 1;
      padding: 12px;
    }
  }
  
  .function-block:not(.expanded) .expandable-content {
    max-height: 0;
    opacity: 0;
    padding: 0 12px;
    border-color: transparent;
  }
  
  .function-block.expanded .expandable-content {
    max-height: 2000px; /* Large enough to accommodate content */
    opacity: 1;
    padding: 12px;
  }
  
  /* Theme styles for expandable content */
  .function-block.theme-light .expandable-content,
  .function-block:not(.theme-dark) .expandable-content {
    background-color: rgba(26, 115, 232, 0.02);
    border-color: rgba(26, 115, 232, 0.2);
  }
  
  .function-block.theme-dark .expandable-content {
    background-color: rgba(138, 180, 248, 0.02);
    border-color: rgba(138, 180, 248, 0.2);
  }
  
  /* Consolidated theme styles for function name */
  .function-block.theme-light .function-name,
  .function-block:not(.theme-dark) .function-name {
    color: var(--light-primary);
    background-color: rgba(26, 115, 232, 0.05);
    border: 1px solid rgba(26, 115, 232, 0.2);
  }
  
  .function-block.theme-dark .function-name {
    color: var(--dark-primary);
    background-color: rgba(138, 180, 248, 0.05);
    border: 1px solid rgba(138, 180, 248, 0.2);
  }
  
  /* Expanded state border styling */
  .function-block.expanded.theme-light .function-name,
  .function-block.expanded:not(.theme-dark) .function-name {
    border-bottom-color: rgba(26, 115, 232, 0.3);
  }
  
  .function-block.expanded.theme-dark .function-name {
    border-bottom-color: rgba(138, 180, 248, 0.3);
  }
  
  /* Hover effect for function name */
  .function-name:hover {
    opacity: 0.8;
    transform: translateY(-1px) translate3d(0, 0, 0);
  }
  
  /* Function name text styling */
  .function-name-text {
    font-weight: inherit;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
  
  /* Call ID styling */
  .call-id {
    font-size: 0.85em;
    opacity: 0.7;
    font-weight: 400;
    background-color: rgba(0, 0, 0, 0.05);
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    font-family: monospace;
    flex-shrink: 0;
    transition: opacity var(--transition-normal);
    will-change: opacity;
    transform: translate3d(0, 0, 0);
  }
  
  /* Consolidated call ID theme styles */
  .function-block.theme-light .call-id,
  .function-block:not(.theme-dark) .call-id {
    background-color: rgba(26, 115, 232, 0.1);
    color: var(--light-text-secondary);
  }
  
  .function-block.theme-dark .call-id {
    background-color: rgba(138, 180, 248, 0.1);
    color: var(--dark-text-secondary);
  }
  
  .function-block:hover .call-id {
    opacity: 1;
    transform: scale(1.02) translate3d(0, 0, 0);
  }
  
  /* Optimized parameter styles */
  .param-name {
    font-weight: 500;
    margin-top: 14px;
    margin-bottom: 6px;
    padding-left: 2px;
    font-size: 14px;
    display: flex;
    align-items: center;
    contain: layout style;
    will-change: opacity;
    transform: translate3d(0, 0, 0);
  }
  
  /* Consolidated parameter name theme styles */
  .function-block.theme-light .param-name,
  .function-block:not(.theme-dark) .param-name {
    color: var(--light-text);
  }
  
  .function-block.theme-dark .param-name {
    color: var(--dark-text);
  }
  
  /* Optimized parameter value with hardware acceleration */
  .param-value {
    padding: var(--spacing-md) 14px;
    border-radius: var(--border-radius);
    font-family: var(--font-mono);
    white-space: pre-wrap;
    overflow-x: hidden;
    overflow-y: auto;
    word-break: break-word;
    overflow-wrap: break-word;
    font-size: 13px;
    line-height: 1.5;
    max-height: 300px;
    scrollbar-width: thin;
    position: relative;
    pointer-events: auto !important;
    transition: background-color var(--transition-normal), border-color var(--transition-normal);
    border: 1px solid transparent;
    contain: layout style;
    transform: translate3d(0,0,0); /* Hardware acceleration for scrolling */
  }

  /* Specific styles for system message content */
  .system-message-content {
    white-space: pre-wrap !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    font-family: var(--font-system) !important;
  }

  /* Specific styles for function result content */
  .function-result-content {
    white-space: pre-wrap !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }

  /* Ensure all text content in function results preserves newlines */
  .function-result-text {
    white-space: pre-wrap !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }
  
  /* Optimized scrollbar styles */
  .param-value::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .param-value::-webkit-scrollbar-track {
    background: transparent;
    margin: var(--spacing-xs);
  }
  
  .param-value::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.15);
    border-radius: 20px;
    transition: background-color var(--transition-normal);
  }
  
  .param-value::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.25);
  }
  
  /* Dark theme scrollbar */
  .function-block.theme-dark .param-value::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.15);
  }
  
  .function-block.theme-dark .param-value::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.25);
  }
  
  /* Consolidated parameter value theme styles */
  .function-block.theme-light .param-value,
  .function-block:not(.theme-dark) .param-value {
    background-color: var(--light-surface-secondary);
    border-color: var(--light-border-secondary);
    color: var(--light-text);
  }
  
  .function-block.theme-dark .param-value {
    background-color: var(--dark-surface-secondary);
    border-color: var(--dark-border-secondary);
    color: var(--dark-text);
  }
  
  /* Optimized large content styles */
  .large-content {
    position: relative;
    contain: layout;
  }
  
  .large-content::after,
  .content-truncated {
    display: none;
  }
  
  /* Optimized streaming parameter styles with hardware acceleration */
  .param-value[data-streaming="true"] {
    padding: 0;
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    max-height: 300px;
    border-color: rgba(26, 115, 232, 0.3);
    animation: subtle-pulse 2s infinite ease-in-out;
    will-change: border-color, transform;
    transform: translate3d(0,0,0);
    scroll-behavior: smooth !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }
  
  /* Fade gradient overlays for smooth streaming effect */
  .param-value[data-streaming="true"]::before,
  .param-value[data-streaming="true"]::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    height: 20px;
    pointer-events: none;
    z-index: 2;
    transition: opacity 0.3s ease;
  }
  
  .param-value[data-streaming="true"]::before {
    top: 0;
    background: linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.9) 0%, 
      rgba(255, 255, 255, 0.7) 50%, 
      transparent 100%);
  }
  
  .param-value[data-streaming="true"]::after {
    bottom: 0;
    background: linear-gradient(to top, 
      rgba(255, 255, 255, 0.9) 0%, 
      rgba(255, 255, 255, 0.7) 50%, 
      transparent 100%);
  }
  
  /* Dark theme fade gradients */
  .function-block.theme-dark .param-value[data-streaming="true"]::before {
    background: linear-gradient(to bottom, 
      rgba(32, 33, 36, 0.9) 0%, 
      rgba(32, 33, 36, 0.7) 50%, 
      transparent 100%);
  }
  
  .function-block.theme-dark .param-value[data-streaming="true"]::after {
    background: linear-gradient(to top, 
      rgba(32, 33, 36, 0.9) 0%, 
      rgba(32, 33, 36, 0.7) 50%, 
      transparent 100%);
  }
  
  /* Enhanced streaming visual feedback */
  .param-value[data-streaming="true"]::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(26, 115, 232, 0.6) 50%, 
      transparent 100%);
    animation: streamingIndicator 2s infinite linear;
    z-index: 1;
  }
  
  @keyframes streamingIndicator {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  
  /* Enhanced streaming content structure */
  .param-value[data-streaming="true"] .content-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
    min-height: 50px;
  }
  
  /* Optimized streaming pre element */
  .param-value[data-streaming="true"] > pre,
  .param-value[data-streaming="true"] .content-wrapper > pre {
    margin: 0;
    padding: var(--spacing-md) 14px;
    overflow-x: hidden;
    overflow-y: auto;
    max-height: 300px;
    flex: 1;
    font-family: var(--font-mono);
    font-size: 13px;
    line-height: 1.5;
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
    background-color: inherit;
    color: inherit !important;
    border: none;
    scroll-behavior: smooth;
    contain: layout style;
    transform: translate3d(0,0,0);
    width: 100%;
    min-height: inherit;
    animation: textFlow 0.3s ease-out;
  }
  
  @keyframes textFlow {
    from { opacity: 0.7; transform: translateY(2px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  /* Enhanced scrollbar for streaming content */
  .param-value[data-streaming="true"]::-webkit-scrollbar,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .param-value[data-streaming="true"]::-webkit-scrollbar-track,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
  }
  
  .param-value[data-streaming="true"]::-webkit-scrollbar-thumb,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb {
    background: rgba(0, 212, 255, 0.5);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  
  .param-value[data-streaming="true"]::-webkit-scrollbar-thumb:hover,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 212, 255, 0.8);
  }
  
  /* Dark theme scrollbar for streaming */
  .function-block.theme-dark .param-value[data-streaming="true"]::-webkit-scrollbar-track,
  .function-block.theme-dark .param-value[data-streaming="true"] pre::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }
  
  .function-block.theme-dark .param-value[data-streaming="true"]::-webkit-scrollbar-thumb,
  .function-block.theme-dark .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb {
    background: rgba(138, 180, 248, 0.5);
  }
  
  .function-block.theme-dark .param-value[data-streaming="true"]::-webkit-scrollbar-thumb:hover,
  .function-block.theme-dark .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb:hover {
    background: rgba(138, 180, 248, 0.8);
  }
  
  /* Optimized streaming indicator */
  .streaming-param-name {
    position: relative;
    display: flex;
    align-items: center;
    contain: layout style;
  }
  
  .streaming-param-name::before {
    content: "";
    margin-right: var(--spacing-sm);
    width: var(--spacing-sm);
    height: var(--spacing-sm);
    border-radius: 50%;
    background-color: var(--light-primary);
    animation: pulse 1.5s infinite ease-in-out;
    pointer-events: none;
    flex-shrink: 0;
    will-change: opacity;
  }
  
  .function-block.theme-dark .streaming-param-name::before {
    background-color: var(--dark-primary);
  }
  
  /* Optimized stalled indicator styles */
  .stalled-indicator {
    margin-top: 10px;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-sm);
    font-size: 14px;
    animation: fadeIn 0.3s ease-in-out;
    contain: layout style;
  }
  
  .stalled-indicator[data-pre-existing="true"] {
    background-color: rgba(180, 180, 180, 0.1);
    border: 1px solid rgba(180, 180, 180, 0.3);
    color: #555;
  }
  
  /* Consolidated stalled indicator theme styles */
  .function-block.theme-light .stalled-indicator,
  .function-block:not(.theme-dark) .stalled-indicator {
    background-color: rgba(255, 200, 0, 0.1);
    border: 1px solid rgba(255, 200, 0, 0.3);
    color: #664d00;
  }
  
  .function-block.theme-dark .stalled-indicator {
    background-color: rgba(255, 200, 0, 0.15);
    border: 1px solid rgba(255, 200, 0, 0.3);
    color: var(--dark-warning);
  }
  
  .stalled-message {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-family: var(--font-system);
  }
  
  .stalled-message svg {
    flex-shrink: 0;
  }
  
  .stalled-retry-button {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-xs) 10px;
    background-color: rgba(255, 200, 0, 0.2);
    border: 1px solid rgba(255, 200, 0, 0.4);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    font-size: var(--spacing-md);
    color: #664d00;
    font-family: var(--font-system);
    transition: background-color var(--transition-normal);
  }
  
  .stalled-retry-button:hover {
    background-color: rgba(255, 200, 0, 0.3);
  }
  
  /* Virtual scrolling container optimizations */
  .virtual-viewport {
    contain: layout style paint;
    will-change: scroll-position;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    -webkit-overflow-scrolling: touch;
  }
  
  .virtual-spacer {
    contain: layout style;
    will-change: height, transform;
  }
  
  .param-value[data-streaming="true"] .virtual-viewport {
    scroll-behavior: auto !important;
  }
  
  .param-value[data-streaming="true"] .virtual-viewport pre {
    will-change: transform, contents;
    contain: layout style paint;
  }
  
  /* Enhanced function block states */
  .function-block.function-loading {
    background: linear-gradient(135deg, 
      rgba(26, 115, 232, 0.02) 0%, 
      rgba(26, 115, 232, 0.01) 100%);
    border-left: 3px solid rgba(26, 115, 232, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .function-block.function-complete {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .function-block.auto-expanded {
    box-shadow: 0 4px 16px rgba(26, 115, 232, 0.15);
    border-color: rgba(26, 115, 232, 0.2);
  }
  
  .function-block.theme-dark.auto-expanded {
    box-shadow: 0 4px 16px rgba(138, 180, 248, 0.15);
    border-color: rgba(138, 180, 248, 0.2);
  }
  
  /* Optimized keyframe animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
  }
  
  @keyframes subtle-pulse {
    0%, 100% { border-color: rgba(26, 115, 232, 0.2); }
    50% { border-color: rgba(26, 115, 232, 0.4); }
  }
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
  }
  
  /* Optimized incomplete tag */
  .incomplete-tag {
    border-left: 3px dashed var(--light-primary) !important;
    background-color: var(--light-primary-surface) !important;
  }
  
  .function-block.theme-dark .incomplete-tag {
    border-left: 3px dashed var(--dark-primary) !important;
    background-color: var(--dark-primary-surface) !important;
  }
  
  /* Optimized button container */
  .function-buttons {
    display: flex;
    gap: var(--spacing-md);
    margin-top: var(--spacing-xl);
    justify-content: flex-start;
    align-items: center;
    contain: layout;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }

  /* Unified button base styles */
  .raw-toggle,
  .execute-button,
  .insert-result-button,
  .attach-file-button {
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-normal);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    will-change: transform, box-shadow;
    contain: layout style;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
  }
  
  /* Optimized active states with hardware acceleration */
  .execute-button:active,
  .insert-result-button:active,
  .attach-file-button:active,
  .raw-toggle:active {
    transform: translateY(1px) translate3d(0,0,0);
    box-shadow: 0 0 1px rgba(0,0,0,0.12);
  }
  
  /* Consolidated raw toggle theme styles */
  .function-block.theme-light .raw-toggle,
  .function-block:not(.theme-dark) .raw-toggle {
    background: var(--light-surface);
    color: var(--light-text-secondary);
    border: 1px solid var(--light-border-tertiary);
  }
  
  .function-block.theme-light .raw-toggle:hover,
  .function-block:not(.theme-dark) .raw-toggle:hover {
    background: #e8eaed;
    color: var(--light-text);
  }
  
  .function-block.theme-dark .raw-toggle {
    background: var(--dark-surface);
    color: var(--dark-text-tertiary);
    border: 1px solid var(--dark-border-tertiary);
  }
  
  .function-block.theme-dark .raw-toggle:hover {
    background: #3c4043;
    color: var(--dark-text);
  }
  
  /* Consolidated primary button styles - light theme */
  .function-block.theme-light .execute-button,
  .function-block:not(.theme-dark) .execute-button,
  .function-block.theme-light .insert-result-button,
  .function-block.theme-light .attach-file-button,
  .function-block:not(.theme-dark) .insert-result-button,
  .function-block:not(.theme-dark) .attach-file-button {
    background: var(--light-primary);
    color: white;
    background-image: linear-gradient(to bottom, var(--light-primary), var(--light-primary-hover));
  }
  
  .function-block.theme-light .execute-button:hover,
  .function-block:not(.theme-dark) .execute-button:hover,
  .function-block.theme-light .insert-result-button:hover,
  .function-block.theme-light .attach-file-button:hover,
  .function-block:not(.theme-dark) .insert-result-button:hover,
  .function-block:not(.theme-dark) .attach-file-button:hover {
    background: var(--light-primary-hover);
    background-image: linear-gradient(to bottom, var(--light-primary-hover), #1765cc);
  }
  
  /* Consolidated primary button styles - dark theme */
  .function-block.theme-dark .execute-button,
  .function-block.theme-dark .insert-result-button,
  .function-block.theme-dark .attach-file-button {
    background: var(--dark-primary);
    color: var(--light-text);
    background-image: linear-gradient(to bottom, var(--dark-primary), var(--dark-primary-hover));
  }
  
  .function-block.theme-dark .execute-button:hover,
  .function-block.theme-dark .insert-result-button:hover,
  .function-block.theme-dark .attach-file-button:hover {
    background: var(--dark-primary-hover);
    background-image: linear-gradient(to bottom, var(--dark-primary-hover), #6ca0e8);
  }
  
  /* Optimized function results panel */
  .mcp-function-results-panel,
  .xml-results-panel {
    border-radius: 6px;
    margin-top: 10px;
    overflow: auto;
    font-family: var(--font-mono);
    font-size: 13px;
    line-height: 1.5;
    contain: layout style;
    transform: translate3d(0,0,0);
    will-change: transform, opacity;
    transition: all var(--transition-normal);
  }
  
  .mcp-function-results-panel:hover,
  .xml-results-panel:hover {
    transform: scale(1.005) translate3d(0, 0, 0);
  }
  
  /* Consolidated results panel theme styles */
  .function-block.theme-light .mcp-function-results-panel,
  .function-block.theme-light .xml-results-panel,
  .function-block:not(.theme-dark) .mcp-function-results-panel,
  .function-block:not(.theme-dark) .xml-results-panel {
    background-color: var(--light-surface-tertiary);
    border: 1px solid #eaecef;
    color: var(--light-text);
    box-shadow: 0 2px 6px rgba(0,0,0,0.04);
    margin-top: var(--spacing-md);
  }
  
  .function-block.theme-dark .mcp-function-results-panel,
  .function-block.theme-dark .xml-results-panel {
    background-color: var(--dark-surface-tertiary);
    border: 1px solid var(--dark-border);
    color: var(--dark-text);
    box-shadow: var(--dark-shadow);
    margin-top: var(--spacing-md);
  }
  
  .function-results-loading {
    padding: 10px;
    color: var(--light-text-secondary);
    font-style: italic;
  }
  
  .function-result-success pre {
    margin: 0;
    padding: 10px;
    white-space: pre-wrap;
    word-break: break-word;
  }
  
  /* Consolidated error theme styles */
  .function-block.theme-light .function-result-error,
  .function-block:not(.theme-dark) .function-result-error {
    padding: 10px;
    color: var(--light-error);
    background-color: rgba(211, 47, 47, 0.05);
    border-radius: var(--border-radius-sm);
  }
  
  .function-block.theme-dark .function-result-error {
    color: var(--dark-error);
    background-color: rgba(242, 139, 130, 0.1);
  }
  
  /* Consolidated language tag theme styles */
  .function-block.theme-light .language-tag,
  .function-block:not(.theme-dark) .language-tag {
    background: var(--light-primary-surface);
    color: var(--light-primary);
  }
  
  .function-block.theme-dark .language-tag {
    background: var(--dark-primary-surface);
    color: var(--dark-text);
  }
  
  .language-tag {
    display: inline-block;
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    font-size: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    font-family: var(--font-system);
    contain: layout style;
    will-change: transform;
    transform: translate3d(0, 0, 0);
    transition: all var(--transition-normal);
  }
  
  .language-tag:hover {
    transform: scale(1.02) translate3d(0, 0, 0);
  }
  
  /* Optimized XML pre element */
  .xml-pre {
    white-space: pre-wrap;
    margin: 0;
    padding: var(--spacing-md);
    font-family: inherit;
    font-size: 13px;
    line-height: 1.5;
    contain: layout style;
  }
  
  /* Optimized spinner with hardware acceleration for function name */
  .spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border: 2px solid rgba(26, 115, 232, 0.3);
    border-top: 2px solid var(--light-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    flex-shrink: 0;
    will-change: transform;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    contain: layout style;
  }
  
  .function-block.theme-dark .spinner {
    border: 2px solid rgba(138, 180, 248, 0.3);
    border-top: 2px solid var(--dark-primary);
  }
  
  /* Optimized mobile layout with efficient media query */
  @media (max-width: 768px) {
    .function-block {
      padding: 14px;
      margin: 15px 0;
    }
    .function-name {
      font-size: 15px;
      padding-bottom: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
    }
    .param-name {
      font-size: 13px;
      margin-top: var(--spacing-md);
      margin-bottom: var(--spacing-xs);
    }
    .param-value {
      max-height: 200px;
      padding: 10px var(--spacing-md);
      font-size: 12.5px;
    }
    .call-id {
      font-size: 0.8em;
      padding: 2px 6px;
    }
  }
  
  /* Optimized spinner with hardware acceleration */
  .function-spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    flex-shrink: 0;
    will-change: transform;
    contain: layout style;
  }
  
  /* Consolidated spinner theme styles */
  .function-block.theme-light .function-spinner,
  .function-block:not(.theme-dark) .function-spinner {
    border: 2px solid rgba(26,115,232,0.3);
    border-top: 2px solid var(--light-primary);
  }
  
  .function-block.theme-dark .function-spinner {
    border: 2px solid rgba(138, 180, 248, 0.3);
    border-top: 2px solid var(--dark-primary);
  }
  
  /* Optimized keyframe with transform3d */
  @keyframes spin {
    0% { transform: rotate(0deg) translate3d(0,0,0); }
    100% { transform: rotate(360deg) translate3d(0,0,0); }
  }
  
  .function-loading .function-name {
    position: relative;
  }
  
  /* Optimized insert button container */
  .insert-button-container {
    margin-top: 10px;
    margin-bottom: 10px;
    display: flex;
    justify-content: flex-end;
    contain: layout;
  }
  
  .insert-result-button {
    padding: var(--spacing-xs) var(--spacing-md);
  }
  
  /* Optimized button state styles */
  .insert-result-button.insert-success,
  .attach-file-button.attach-success {
    background: var(--light-success) !important;
    color: white !important;
  }
  
  .insert-result-button.insert-error,
  .attach-file-button.attach-error {
    background: var(--light-error) !important;
    color: white !important;
  }
  
  .attach-file-button {
    padding: var(--spacing-xs) var(--spacing-md);
    margin-left: 6px;
  }
  
  /* Optimized content transitions with hardware acceleration */
  .function-content-wrapper {
    position: relative;
    width: 100%;
    transition: opacity var(--transition-normal), transform var(--transition-normal);
    will-change: opacity, transform;
    contain: layout;
  }
  
  .function-content-new {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
  }
  
  [data-smooth-updating] {
    position: relative;
  }
  
  /* Optimized function history panel */
  .function-history-panel {
    margin-top: 10px;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-sm);
    font-size: 0.9em;
    contain: layout style;
  }
  
  /* Consolidated history panel theme styles */
  .function-block.theme-light .function-history-panel,
  .function-block:not(.theme-dark) .function-history-panel {
    background-color: var(--light-surface-tertiary);
    border: 1px solid #dadce0;
    color: var(--light-text);
  }
  
  .function-block.theme-dark .function-history-panel {
    background-color: var(--dark-surface);
    border: 1px solid var(--light-text-secondary);
    color: var(--dark-text);
  }
  
  .function-history-header {
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .function-execution-info {
    margin-bottom: var(--spacing-sm);
    line-height: 1.4;
  }
  
  /* Base re-execute button styles */
  .function-reexecute-button {
    border: none;
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-normal);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    will-change: transform, box-shadow;
    contain: layout style;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    min-height: 32px;
    min-width: 80px;
  }

  .function-reexecute-button:active {
    transform: translateY(1px) translate3d(0,0,0);
    box-shadow: 0 0 1px rgba(0,0,0,0.12);
  }

  /* Consolidated re-execute button theme styles */
  .function-block.theme-light .function-reexecute-button,
  .function-block:not(.theme-dark) .function-reexecute-button {
    background: var(--light-primary);
    color: white;
    background-image: linear-gradient(to bottom, var(--light-primary), var(--light-primary-hover));
  }
  
  .function-block.theme-light .function-reexecute-button:hover,
  .function-block:not(.theme-dark) .function-reexecute-button:hover {
    background: var(--light-primary-hover);
    background-image: linear-gradient(to bottom, var(--light-primary-hover), #1765cc);
  }
  
  .function-block.theme-dark .function-reexecute-button {
    background: var(--dark-primary);
    color: var(--light-text);
    background-image: linear-gradient(to bottom, var(--dark-primary), var(--dark-primary-hover));
  }
  
  .function-block.theme-dark .function-reexecute-button:hover {
    background: var(--dark-primary-hover);
    background-image: linear-gradient(to bottom, var(--dark-primary-hover), #6ca0e8);
  }
`,bO=nt("DOMUtils");let SS=null;if(typeof window<"u"&&window.trustedTypes&&window.trustedTypes.createPolicy)try{SS=window.trustedTypes.createPolicy("scriptSanitizerPolicy",{createHTML:f=>f})}catch(f){window.trustedTypes&&window.trustedTypes.policies&&(SS=window.trustedTypes.policies.get("scriptSanitizerPolicy")||null),!SS&&console&&bO.warn('Could not create or retrieve Trusted Types policy "scriptSanitizerPolicy".',f)}const vO=(f,l)=>{let n=null;return(...r)=>{const s=()=>{n=null,f(...r)};n!==null&&clearTimeout(n),n=setTimeout(s,l)}},od=nt("RenderPrescriptUtils");typeof window<"u"&&(window.themeControl={forceLight:()=>{const{forceThemeMode:f,clearCachedTheme:l}=require("./themeDetector");f("light"),od.debug("Forced light theme. Refresh the page to see changes.")},forceDark:()=>{const{forceThemeMode:f,clearCachedTheme:l}=require("./themeDetector");f("dark"),od.debug("Forced dark theme. Refresh the page to see changes.")},useSystem:()=>{const{forceThemeMode:f,clearCachedTheme:l}=require("./themeDetector");f("system"),od.debug("Using system theme preference. Refresh the page to see changes.")},reset:()=>{const{clearCachedTheme:f}=require("./themeDetector");f(),od.debug("Theme detection reset. Refresh the page to see changes.")},detect:()=>{const{detectHostTheme:f,isDarkTheme:l}=require("./themeDetector"),n=f(),r=l();return od.debug(`Detected theme: ${n}`),od.debug(`Using ${r?"dark":"light"} theme`),{theme:n,isDark:r}}},od.debug("[Theme Detector] Global theme control available via window.themeControl"));const wS=nt("FunctionResultRenderer"),ES=new WeakSet,yO=new Map,EC=f=>{const l=document.createElement("div");return l.className=f,l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.wordBreak="break-word",Ay()?(l.style.backgroundColor="#2d2d2d",l.style.border="1px solid rgba(255, 255, 255, 0.1)",l.style.color="#e8eaed"):(l.style.backgroundColor="#f8f9fa",l.style.border="1px solid rgba(0, 0, 0, 0.1)",l.style.color="#202124"),l},CC=()=>{const f=document.createElement("div");return f.className="expandable-content",f.style.overflow="hidden",f.style.maxHeight="0px",f.style.opacity="0",f.style.padding="0 12px",f.style.width="100%",f.style.boxSizing="border-box",f.style.transition="all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",f},TC=f=>{const l=document.createElement("div");l.className=f.className.includes("system")?"function-name system-header":"function-name";const n=document.createElement("div");n.className="function-name-left";const r=document.createElement("div");r.className="function-name-text",r.textContent=f.headerText,n.appendChild(r);const s=document.createElement("div");if(s.className="function-name-right",f.callId){const h=document.createElement("div");h.className="call-id",h.textContent=f.callId,s.appendChild(h)}const d=document.createElement("button");return d.className="expand-button",d.innerHTML=`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M8 10l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `,d.title=f.expandTitle,s.appendChild(d),l.appendChild(n),l.appendChild(s),{header:l,expandButton:d}},kC=(f,l,n,r)=>{n.onclick=s=>{s.preventDefault(),s.stopPropagation();const d=f.classList.contains("expanded"),h=n.querySelector("svg path");if(d){f.classList.remove("expanded");const v=l.scrollHeight;l.style.maxHeight=v+"px",l.offsetHeight,requestAnimationFrame(()=>{l.style.maxHeight="0px",l.style.opacity="0",l.style.paddingTop="0",l.style.paddingBottom="0",h&&h.setAttribute("d","M8 10l4 4 4-4"),n.title=r.expandTitle})}else{f.classList.add("expanded"),l.style.display="block",l.style.maxHeight="0px",l.style.opacity="0",l.style.paddingTop="0",l.style.paddingBottom="0";const v=l.scrollHeight+24;requestAnimationFrame(()=>{l.style.maxHeight=v+"px",l.style.opacity="1",l.style.paddingTop="12px",l.style.paddingBottom="12px",h&&h.setAttribute("d","M16 14l-4-4-4 4"),n.title=r.collapseTitle})}}},MC=(f,l)=>{const n=document.createElement("div");return n.className=f,n.setAttribute("data-block-id",l),n.style.width="100%",n.style.boxSizing="border-box",Se.useHostTheme&&(xS(n),Ay()?n.classList.add("theme-dark"):n.classList.add("theme-light")),n},AC=(f,l)=>{for(;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(l)},xO=(f,l)=>{try{const n=`system-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;f.setAttribute("data-block-id",n);const r=MC("function-block system-message-container",n),s={blockId:n,className:"system-message-container",headerText:"MCP SuperAssistant",expandTitle:"Expand system message",collapseTitle:"Collapse system message"},{header:d,expandButton:h}=TC(s),v=CC(),S=EC("param-value system-message-content");Ay()?S.style.border="solid rgba(255, 255, 255, 0.1)":S.style.border="solid rgba(0, 0, 0, 0.1)",S.style.whiteSpace="pre-wrap",S.style.wordBreak="break-word",S.style.overflowWrap="break-word",S.style.fontFamily='var(--font-system), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',S.textContent=l,v.appendChild(S),kC(r,v,h,s),r.appendChild(d),r.appendChild(v),AC(f,r)}catch(n){wS.error("[renderSystemMessageBox] Error rendering system message:",n)}},SO=(f,l)=>{try{const n=JSON.parse(f);if(n&&n.content&&Array.isArray(n.content))n.content.forEach(r=>{if(r.type==="text"){const s=document.createElement("div");s.className="function-result-text",s.style.margin="0 0 10px 0",s.style.whiteSpace="pre-wrap",s.style.wordBreak="break-word",s.textContent=r.text,l.appendChild(s)}else if(r.type==="image"&&r.url){const s=document.createElement("div");s.className="function-result-image",s.style.margin="10px 0";const d=document.createElement("img");d.src=r.url,d.alt=r.alt||"Image",d.style.maxWidth="100%",d.style.borderRadius="4px",s.appendChild(d),l.appendChild(s)}else if(r.type==="code"&&r.code){const s=document.createElement("div");s.className="function-result-code",s.style.margin="10px 0",s.style.backgroundColor="rgba(0, 0, 0, 0.05)",s.style.borderRadius="4px",s.style.padding="10px";const d=document.createElement("pre");d.style.margin="0",d.style.whiteSpace="pre-wrap",d.style.wordBreak="break-word",d.style.fontFamily="monospace",d.textContent=r.code,s.appendChild(d),l.appendChild(s)}else{const s=document.createElement("div");s.className="function-result-unknown",s.style.margin="5px 0",s.style.fontFamily="monospace",s.style.fontSize="12px",s.textContent=JSON.stringify(r,null,2),l.appendChild(s)}});else{const r=document.createElement("pre");r.style.margin="0",r.style.whiteSpace="pre-wrap",r.style.wordBreak="break-word",r.style.fontFamily="monospace",r.textContent=JSON.stringify(n,null,2),l.appendChild(r)}}catch{l.style.whiteSpace="pre-wrap",l.style.wordBreak="break-word",l.textContent=f}},wO=(f,l)=>{const n=MC("function-block "+f.className,f.blockId),{header:r,expandButton:s}=TC(f),d=CC();return d.appendChild(l),kC(n,d,s,f),n.appendChild(r),n.appendChild(d),n},EO=(f,l)=>{try{if(ES.has(f))return!1;ES.add(f);let n=f.textContent||"";if(n.includes("<SYSTEM>")||n.includes("</SYSTEM>")||n.includes("<system>")||n.includes("</system>")){const d=n;if(d){const h=d.trim();return xO(f,h),!0}}if(!n.includes("<function_result")&&!n.includes("</function_result>"))return!1;const r=`result-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;f.setAttribute("data-block-id",r);let s="";try{const d=n.match(/<function_result[^>]*>([\s\S]*?)<\/function_result>/);d&&d[1]&&(s=d[1].trim());const h=n.match(/call_id="([^"]*)"/),v=h?h[1]:"",S={blockId:r,className:"function-result-container",headerText:"Function Result",expandTitle:"Expand function result",collapseTitle:"Collapse function result",callId:v},w=EC("param-value function-result-content");SO(s,w);const M=wO(S,w);return AC(f,M),yO.set(r,M),!0}catch(d){return wS.error("Error parsing function result:",d),!1}}catch(n){return wS.error("Error rendering function result:",n),!1}finally{l.current=!1}},fl=nt("streamingObservers"),ug=new Map,Oy=new Map,gl=new Map,CO=!1,CS=new Set,Ry=new Set,Iy=new Map,OC={allFunctionPatterns:/(<function_calls>|<\/function_calls>|<invoke[^>]*>|<\/invoke>|<parameter[^>]*>|<\/parameter>)/g},tm=new Map,TO=50;typeof window<"u"&&(window.resyncingBlocks=Ry);const bs={functionStart:/<function_calls>/,invokeStart:/<invoke\s+name="[^"]*"/,parameterStart:/<parameter\s+name="[^"]*">/,anyClosingTag:/<\/(?:function_calls|invoke|parameter)>/,significantChunk:/(<function_calls>|<invoke|<parameter|<\/)/,jsonFunctionStart:/"type"\s*:\s*"function_call_start"/,jsonParameter:/"type"\s*:\s*"parameter"/,jsonDescription:/"type"\s*:\s*"description"/,jsonFunctionEnd:/"type"\s*:\s*"function_call_end"/,jsonSignificant:/"type"\s*:\s*"(?:function_call_start|parameter|description|function_call_end)"/},RC=new Map,kO=(f,l)=>{const n=l.includes('"type"')&&(l.includes("function_call_start")||l.includes("parameter"));let r;if(n){const s=sg(l);r=Object.entries(s).map(([d,h])=>({name:d,value:typeof h=="object"?JSON.stringify(h,null,2):String(h)}))}else r=FA(l);if(r.length>0){const s=RC.get(f)||new Map;r.forEach(d=>{const h=s.get(d.name)||"";d.value.length>h.length&&s.set(d.name,d.value)}),RC.set(f,s),Se.debug&&fl.debug(`Cached ${n?"JSON":"XML"} parameter content for ${f}:`,Array.from(s.entries()))}},MO=(f,l="")=>{const n=f.slice(l.length);return n.length===0?{hasNewChunk:!1,chunkType:null,isSignificant:!1}:bs.jsonFunctionStart.test(n)?{hasNewChunk:!0,chunkType:"function_start",isSignificant:!0}:bs.jsonParameter.test(n)?{hasNewChunk:!0,chunkType:"parameter",isSignificant:!0}:bs.jsonDescription.test(n)?{hasNewChunk:!0,chunkType:"content",isSignificant:!0}:bs.jsonFunctionEnd.test(n)?{hasNewChunk:!0,chunkType:"closing",isSignificant:!0}:bs.functionStart.test(n)?{hasNewChunk:!0,chunkType:"function_start",isSignificant:!0}:bs.invokeStart.test(n)?{hasNewChunk:!0,chunkType:"invoke",isSignificant:!0}:bs.parameterStart.test(n)?{hasNewChunk:!0,chunkType:"parameter",isSignificant:!0}:bs.anyClosingTag.test(n)?{hasNewChunk:!0,chunkType:"closing",isSignificant:!0}:bs.significantChunk.test(n)||bs.jsonSignificant.test(n)||n.length>20?{hasNewChunk:!0,chunkType:"content",isSignificant:n.length>20}:{hasNewChunk:!1,chunkType:null,isSignificant:!1}},IC=new Map,AO=(f,l,n)=>{if(!n.hasNewChunk||!n.isSignificant)return;const r=document.querySelector(`div[data-block-id="${f}"]`);if(!r||Iy.has(f)||Ry.has(f))return;Se.debug&&fl.debug(`Immediate chunk detected for ${f}: ${n.chunkType}, content length: ${l.length}`);let s=25;n.chunkType==="function_start"?s=10:n.chunkType==="parameter"?s=100:n.chunkType==="content"&&(s=150);const d=setTimeout(()=>{!Iy.has(f)&&!Ry.has(f)&&((window._updateQueue||gl).set(f,r),typeof window<"u"&&window._processUpdateQueue&&window._processUpdateQueue())},s),h=tm.get(f);h&&clearTimeout(h),tm.set(f,d)},OO=(f,l)=>{const n=tm.get(f);n&&clearTimeout(n);const r=setTimeout(()=>{tm.delete(f),!Iy.has(f)&&!Ry.has(f)&&((window._updateQueue||gl).set(f,l),typeof window<"u"&&window._processUpdateQueue&&window._processUpdateQueue())},TO);tm.set(f,r)},RO=(f,l)=>{var w,M;if(ug.has(l))return;const n=((w=f.textContent)==null?void 0:w.substring(0,100))||"",r=n.includes('"type"');Se.debug&&(fl.debug(`Setting up monitoring for block: ${l}, element: ${f.tagName}, format: ${r?"JSON":"XML"}`),fl.debug("Content preview:",n)),Oy.set(l,Date.now()),f.setAttribute("data-monitored-node",l);let s=0,d=((M=f.textContent)==null?void 0:M.length)||0,h=!1;const v=setInterval(()=>{if(!document.body.contains(f)){clearInterval(v);return}const N=f.textContent||"",k=N.length,A=N.includes("<function_calls>")&&!N.includes("</function_calls>"),$=N.includes("<invoke")&&!N.includes("</invoke>"),B=(N.match(/<parameter[^>]*>/g)||[]).length>(N.match(/<\/parameter>/g)||[]).length,Z=N.includes('"type"')&&N.includes("function_call_start"),Y=N.includes('"type"')&&(N.includes('"function_call_end"')||N.includes('"type": "function_call_end"'));if((A||$||B||Z&&!Y)&&(h=!0),h&&k===d){if(s++,s>=3){CS.add(l);const pe=document.querySelector(`.function-block[data-block-id="${l}"]`);if(pe&&pe.classList.contains("function-loading")){const oe=new CustomEvent("stream-abruptly-ended",{detail:{blockId:l,element:pe}});document.dispatchEvent(oe),Se.debug&&fl.debug(`Detected abruptly ended stream for block ${l}`),clearInterval(v)}}}else s=0,d=k},1e3),S=new MutationObserver(N=>{var Y;if((window._isProcessing!==void 0?window._isProcessing:CO)||Iy.has(l))return;const A=document.querySelector(`.function-block[data-block-id="${l}"]`);if(A!=null&&A.hasAttribute("data-completing"))return;Se.debug&&fl.debug(`Mutation detected for blockId: ${l}, mutations: ${N.length}`);let $=!1,B=!1,Z=!1;for(const ie of N)if(ie.type==="characterData"||ie.type==="childList"){$=!0;const oe=ie.target.textContent||"";if(!Z){OC.allFunctionPatterns.lastIndex=0;const me=OC.allFunctionPatterns.test(oe),J=oe.includes('"type"')&&(oe.includes("function_call")||oe.includes("parameter"));Z=me||J}if(ie.type==="characterData"){const me=ie.oldValue||"",J=oe,he=IC.get(l)||"",ne=MO(J,he);Se.debug&&ne.hasNewChunk&&fl.debug(`Chunk detected - type: ${ne.chunkType}, significant: ${ne.isSignificant}`),ne.hasNewChunk&&ne.isSignificant?(B=!0,kO(l,J),AO(l,J,ne)):Math.abs(J.length-me.length)>10&&(B=!0),IC.set(l,J)}ie.type==="childList"&&(ie.addedNodes.length>0||ie.removedNodes.length>0)&&(B=!0)}if($){s=0,d=((Y=f.textContent)==null?void 0:Y.length)||0,Oy.set(l,Date.now()),CS.has(l)&&CS.delete(l);let ie=f;for(;ie&&!Se.targetSelectors.includes(ie.tagName.toLowerCase())&&(ie=ie.parentElement,!!ie););ie&&(Se.debug&&(B||Z)&&fl.debug(`Significant content change detected in block ${l}`,{significantChange:B,functionCallPattern:Z}),OO(l,ie))}});S.observe(f,{childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributes:!1}),ug.set(l,S)},DC=()=>{Se.debug&&fl.debug("Checking streaming updates...");const f=[];for(const l of Se.streamingContainerSelectors){const n=document.querySelectorAll(l);f.push(...Array.from(n))}for(const l of f)for(const n of Se.targetSelectors){const r=l.querySelectorAll(n);for(const s of r)s.getAttribute("data-block-id")&&Ty(s)}};let nm=null;const IO=()=>{nm&&clearInterval(nm),nm=setInterval(()=>{if(!document.body.contains(document.querySelector(".large-content"))){clearInterval(nm),nm=null;return}DC()},Se.progressiveUpdateInterval)},DO=nt("StalledStreamHandler"),zO=new Set,TS=new Map,zC=new Set,NC=f=>{const l=document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.setAttribute("width","16"),l.setAttribute("height","16"),l.setAttribute("viewBox","0 0 16 16"),l.setAttribute("fill","none"),f){const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M8 15A7 7 0 108 1a7 7 0 000 14z"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-opacity","0.8"),n.setAttribute("stroke-width","1.5"),n.setAttribute("fill","none");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M8 4v4.5l3 1.5"),r.setAttribute("stroke","currentColor"),r.setAttribute("stroke-opacity","0.8"),r.setAttribute("stroke-width","1.5"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("fill","none"),l.appendChild(n),l.appendChild(r)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M7.5 1.5l-5.6 8.8c-.5.8.1 1.7 1 1.7h11.2c.9 0 1.5-.9 1-1.7l-5.6-8.8c-.5-.7-1.5-.7-2 0z"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1.5"),n.setAttribute("fill","none");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M8 6v2.5"),r.setAttribute("stroke","currentColor"),r.setAttribute("stroke-width","1.5"),r.setAttribute("stroke-linecap","round"),r.setAttribute("fill","none");const s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("cx","8"),s.setAttribute("cy","11"),s.setAttribute("r","0.75"),s.setAttribute("fill","currentColor"),l.appendChild(n),l.appendChild(r),l.appendChild(s)}return l},NO=()=>{if(!document.body)return;const f=document.querySelectorAll(".function-block.function-loading"),l=Array.from(document.querySelectorAll("pre, code")).filter(r=>{const s=r.textContent||"";return s.includes("<function_calls>")||s.includes("<invoke")||s.includes("<parameter")}),n=new Set([...Array.from(f),...l]);for(const r of n){const s=r.getAttribute("data-block-id")||`pre-existing-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;if(r.getAttribute("data-block-id")||r.setAttribute("data-block-id",s),zC.add(s),!r.querySelector('.stalled-indicator[data-pre-existing="true"]')){const h=document.createElement("div");h.className="stalled-indicator",h.setAttribute("data-stalled-for",s),h.setAttribute("data-pre-existing","true");const v=document.createElement("div");v.className="stalled-message";const S=NC(!0),w=document.createElement("span");w.textContent="This function call was incomplete when the page loaded.",v.appendChild(S),v.appendChild(w),h.appendChild(v),r.appendChild(h)}const d=new CustomEvent("render-function-call",{detail:{blockId:s,element:r}});document.dispatchEvent(d)}},UO=(f,l,n=!1)=>{zO.add(f),TS.set(f,0),l.classList.remove("function-loading"),l.classList.add("function-stalled");const r=l.querySelector(`.stalled-indicator[data-stalled-for="${f}"]`);r&&r.remove();const s=document.createElement("div");s.className="stalled-indicator",s.setAttribute("data-stalled-for",f),n&&s.classList.add("abruptly-ended-indicator");const d=document.createElement("div");d.className="stalled-message";const h=document.createElement("span");if(h.textContent=n?"Stream ended abruptly. Function call may be incomplete.":"Stream appears to be stalled. Updates may be incomplete.",!n){const S=NC(!1);d.appendChild(S)}d.appendChild(h);const v=document.createElement("button");v.className="stalled-retry-button",v.textContent="Check for updates",v.onclick=()=>{const S=(TS.get(f)||0)+1;TS.set(f,S),v.textContent=S>1?`Check again (${S})`:"Check again",DC();const w=new CustomEvent("render-function-call",{detail:{blockId:f,element:l}});document.dispatchEvent(w)},s.appendChild(d),s.appendChild(v),l.appendChild(s)},UC=()=>{Se.stalledStreamTimeout>3e3&&(Se.stalledStreamTimeout=3e3),Se.stalledStreamCheckInterval>1e3&&(Se.stalledStreamCheckInterval=1e3)},PC=()=>{Se.enableStalledStreamDetection&&(UC(),typeof window<"u"&&!window.hasOwnProperty("customRenderEvent")&&(window.customRenderEvent=!0,document.addEventListener("render-function-call",f=>{const l=f.detail;l&&l.element&&Ty(l.element)}),document.addEventListener("stream-abruptly-ended",f=>{const l=f.detail;l&&l.element&&l.blockId&&(Se.debug&&DO.debug("Handling abruptly ended stream",l),UO(l.blockId,l.element,!0))})),PO(),NO())},PO=()=>{if(document.getElementById("stalled-stream-styles"))return;const f=document.createElement("style");f.id="stalled-stream-styles",f.textContent=`
        .function-stalled .stalled-indicator {
            background-color: rgba(255, 200, 0, 0.1);
            border-left: 3px solid #ff9800;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .function-stalled .abruptly-ended-indicator {
            /* Optional: Style abruptly ended indicators differently */
            /* background-color: rgba(255, 100, 0, 0.1); */
            /* border-left-color: #e65100; */
            border-top: 1px solid rgba(255, 152, 0, 0.3); /* Add a top border */
            border-left: none; /* Remove left border */
            margin-top: 15px; /* Add some space above */
            padding-top: 15px; /* Add padding above */
        }
        
        .function-stalled .stalled-message {
            display: flex;
            align-items: center;
            color: #e65100;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .function-stalled .stalled-message svg {
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .function-stalled .stalled-retry-button {
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.2s;
        }
        
        .function-stalled .stalled-retry-button:hover {
            background-color: #f57c00;
        }
    `,document.head.appendChild(f)};let Ec=!1,im=null;const rd=nt("MutationObserver"),_O=()=>{const f=new Map;if(gl.forEach((l,n)=>{if(document.body.contains(l)){if(f.set(n,l),Oy.set(n,Date.now()),window._stalledStreams&&window._stalledStreams.has(n)){window._stalledStreams.delete(n);const r=document.querySelector(`.stalled-indicator[data-stalled-for="${n}"]`);r&&r.remove()}}else{Se.debug&&rd.debug(`Node for block ${n} removed, skipping update and cleaning up.`);const r=ug.get(n);r&&(r.disconnect(),ug.delete(n)),Tr.delete(n),Oy.delete(n),window._stalledStreams&&window._stalledStreams.delete(n),Array.from(td.keys()).filter(s=>s.startsWith(`${n}-`)).forEach(s=>td.delete(s))}}),f.size===0){gl.clear(),Ec&&(Ec=!1,window._isProcessing=!1);return}if(gl.clear(),f.forEach((l,n)=>gl.set(n,l)),!Ec){Ec=!0,window._isProcessing=!0;try{gl.forEach((n,r)=>{Se.debug&&rd.debug(`Processing update for block: ${r}`),Ty(n,{current:Ec})}),gl.clear(),Array.from(td.values()).some(n=>n>Se.largeContentThreshold)&&IO()}catch(l){rd.error("Error processing update queue:",l)}finally{Ec=!1,window._isProcessing=!1}}};typeof window<"u"&&(window._isProcessing=Ec,window._updateQueue=gl,window._stalledStreams=window._stalledStreams||new Set,window._stalledStreamRetryCount=window._stalledStreamRetryCount||new Map,window.preExistingIncompleteBlocks=zC,window._processUpdateQueue=_O);const dg=()=>am(),am=()=>{let f=0;const n=(()=>{const r=[];for(const s of Se.targetSelectors){const d=document.querySelectorAll(s);r.push(...Array.from(d))}return r})();for(const r of n)if(!em.has(r)&&!r.closest(".function-block")){const s=r.getAttribute("data-block-id")||`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;Ty(r)&&(f++,RO(r,s))}return f},Dy=()=>{if(!Se.enableDirectMonitoring)return;kS(),dg(),PC();const f=vO(()=>{if(!Ec){const l=am();l>0&&Se.debug&&rd.debug(`Processed ${l} new function blocks`)}},Se.updateThrottle);im=new MutationObserver(l=>{let n=!1,r=!1;for(const s of l){if(s.type==="childList"&&s.addedNodes.length>0){for(const d of Array.from(s.addedNodes))if(d.nodeType===Node.ELEMENT_NODE){const h=d,v=Se.targetSelectors.some(N=>h.matches(N)),S=h.querySelectorAll(Se.targetSelectors.join(",")).length>0,w=Se.streamingContainerSelectors.some(N=>h.matches(N)),M=h.querySelectorAll(Se.streamingContainerSelectors.join(",")).length>0;if(h.textContent){const N=h.textContent.includes("<function_calls>")||h.textContent.includes("<invoke"),k=h.textContent.trim().startsWith("{"),A=h.textContent.includes('"type"')&&(h.textContent.includes("function_call")||h.textContent.includes("parameter"))||k&&h.textContent.length<50;(N||A)&&(r=!0)}if(v||S||w||M||r){n=!0;break}}else if(d.nodeType===Node.TEXT_NODE){const h=d.textContent||"",v=h.includes("<function_calls>")||h.includes("<invoke"),S=h.trim().startsWith("{"),w=h.includes('"type"')&&(h.includes("function_call")||h.includes("parameter"))||S&&h.length<50;if(v||w){r=!0,n=!0;break}}}else if(s.type==="characterData"){const d=s.target.textContent||"",h=d.includes("<function_calls>")||d.includes("<invoke"),v=d.trim().startsWith("{")||d.trim().startsWith("["),S=d.includes('"type"')&&(d.includes("function_call")||d.includes("parameter"))||v&&d.length<50;(h||S)&&(r=!0,n=!0)}if(n)break}n&&(r&&Se.debug&&rd.debug("Potential function call detected, processing DOM changes"),f())}),im.observe(document.body,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),Se.debug&&rd.debug("Direct monitoring started for function calls")},kS=()=>{im&&(im.disconnect(),im=null),ug.forEach(f=>f.disconnect()),ug.clear(),Se.debug&&rd.debug("Direct monitoring stopped for function calls")},$O=()=>{Se.enableDirectMonitoring&&Dy()},pl=nt("FunctionResultObserver"),jO=!1;let fg=null;const MS=()=>!Se.function_result_selector||Se.function_result_selector.length===0?0:LO(),LO=()=>{if(!Se.function_result_selector||Se.function_result_selector.length===0)return 0;const f=BO();let l=0;for(const n of f)ES.has(n)||EO(n,{current:jO})&&l++;return Se.debug&&l>0&&pl.debug(`Processed ${l} function results`),l},BO=()=>{if(!Se.function_result_selector||Se.function_result_selector.length===0)return[];const f=[];for(const l of Se.function_result_selector)try{const n=document.querySelectorAll(l);for(const r of n)r instanceof HTMLElement&&f.push(r);l.includes(".")&&l.includes(" ")?HO(l,f):l.startsWith("div.")&&l.split(".").length>2&&FO(l,f)}catch(n){pl.error(`Invalid selector: ${l}`,n),l.includes(".")&&qO(l,f)}return f},HO=(f,l)=>{const n=f.split(" ");let r=Array.from(document.querySelectorAll(n[0]));for(let s=1;s<n.length;s++){const d=n[s],h=[];for(const v of r)v.querySelectorAll(d).forEach(w=>h.push(w));r=h}for(const s of r)s instanceof HTMLElement&&!l.includes(s)&&l.push(s)},FO=(f,l)=>{const[n,...r]=f.split("."),s=document.querySelectorAll(n);for(const d of s)r.every(h=>d.classList.contains(h))&&d instanceof HTMLElement&&!l.includes(d)&&l.push(d)},qO=(f,l)=>{Se.debug&&pl.debug(`Using fallback method for selector: ${f}`);const n=f.match(/^([a-z]+)\.(.*)/i);if(!n)return;const[,r,s]=n,d=s.split("."),h=document.querySelectorAll(r);for(const v of h)d.some(w=>v.classList.contains(w))&&v instanceof HTMLElement&&!l.includes(v)&&l.push(v)},GO=()=>{setTimeout(()=>{MS()},0)},_C=()=>{if(!Se.function_result_selector||Se.function_result_selector.length===0){Se.debug&&pl.debug("Function result monitoring disabled: no selectors configured");return}fg&&$C(),Se.debug&&pl.debug("Starting function result monitoring"),MS(),fg=new MutationObserver(f=>{var r,s;let l=!1,n=!1;for(const d of f){if(d.type==="childList"){for(const h of Array.from(d.addedNodes))if(h.nodeType===Node.ELEMENT_NODE){const v=h,S=(r=Se.function_result_selector)==null?void 0:r.some(M=>{try{return v.matches(M)}catch{return!1}}),w=(s=Se.function_result_selector)==null?void 0:s.some(M=>{try{return v.querySelectorAll(M).length>0}catch{return!1}});if(v.textContent&&(v.textContent.includes("<function_result")||v.textContent.includes("</function_result>"))&&(n=!0),S||w||n){l=!0;break}}else if(h.nodeType===Node.TEXT_NODE){const v=h.textContent||"";if(v.includes("<function_result")||v.includes("</function_result>")){n=!0,l=!0;break}}}else if(d.type==="characterData"){const h=d.target.textContent||"";(h.includes("<function_result")||h.includes("</function_result>"))&&(n=!0,l=!0)}if(l)break}l&&(n&&Se.debug&&pl.debug("Potential function result detected, processing DOM changes"),GO())}),fg.observe(document.body,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),Se.debug&&pl.debug("Function result monitoring started")},$C=()=>{fg&&(fg.disconnect(),fg=null,Se.debug&&pl.debug("Function result monitoring stopped"))},VO=()=>{if(!Se.function_result_selector||Se.function_result_selector.length===0){Se.debug&&pl.debug("Function result observer not initialized: no selectors configured");return}_C()},Kn=nt("RenderPrescript");let jC=!1;const YO=()=>{if(jC||typeof document>"u")return;const f=document.createElement("style");f.textContent=mO,document.head.appendChild(f),jC=!0};let sd=!1,LC=!1;const ZO=()=>{if(!(sd||LC)&&!(typeof document>"u")){if(LC=!0,document.getElementById("codemirror-accessor-script")||document.getElementById("codemirror-accessor-script-direct")||document.getElementById("codemirror-accessor-page-context")){Se.debug&&Kn.debug("CodeMirror accessor script already present in DOM, skipping injection"),sd=!0;return}if(typeof window.CodeMirrorAccessor<"u"){Se.debug&&Kn.debug("CodeMirrorAccessor already exists on window, skipping injection"),sd=!0;return}try{const f=chrome.runtime.getURL("codemirror-accessor.js");fetch(f).then(l=>l.text()).then(l=>{if(document.getElementById("codemirror-accessor-script")||typeof window.CodeMirrorAccessor<"u"){Se.debug&&Kn.debug("CodeMirror accessor already present, aborting injection"),sd=!0;return}const n=document.createElement("script");n.type="text/javascript",n.id="codemirror-accessor-script",n.textContent=l,(document.head||document.documentElement).appendChild(n),sd=!0,Se.debug&&Kn.debug("CodeMirror accessor script injected successfully"),setTimeout(()=>{typeof window.CodeMirrorAccessor<"u"?Se.debug&&Kn.debug("CodeMirror accessor is active and accessible"):(Kn.debug("CodeMirror accessor script injected but not accessible - may be in wrong context"),document.getElementById("codemirror-accessor-script-direct")||AS())},100)}).catch(l=>{Kn.debug("Failed to fetch CodeMirror accessor script:",l),document.getElementById("codemirror-accessor-script-direct")||AS()})}catch(f){Kn.debug("Error during CodeMirror script injection:",f),document.getElementById("codemirror-accessor-script-direct")||AS()}}},AS=()=>{if(document.getElementById("codemirror-accessor-script-direct")||typeof window.CodeMirrorAccessor<"u"){Se.debug&&Kn.debug("CodeMirror accessor already present, skipping alternative injection");return}try{const f=chrome.runtime.getURL("codemirror-accessor.js"),l=document.createElement("script");l.src=f,l.id="codemirror-accessor-script-direct",l.onload=()=>{Se.debug&&Kn.debug("CodeMirror accessor script loaded via direct method"),setTimeout(()=>{typeof window.CodeMirrorAccessor<"u"?(Se.debug&&Kn.debug("CodeMirror accessor is now active via direct injection"),sd=!0):(Kn.debug("CodeMirror accessor still not accessible - trying page context injection"),document.getElementById("codemirror-accessor-page-context")||OS())},50)},l.onerror=()=>{Kn.error("Failed to load CodeMirror accessor script via direct method"),document.getElementById("codemirror-accessor-page-context")||OS()},(document.head||document.documentElement).appendChild(l)}catch(f){Kn.debug("Alternative injection method failed:",f),document.getElementById("codemirror-accessor-page-context")||OS()}},OS=()=>{if(document.getElementById("codemirror-accessor-page-context")||document.querySelector("script[data-cm-accessor-injector]")||typeof window.CodeMirrorAccessor<"u"){Se.debug&&Kn.debug("CodeMirror accessor already present, skipping page context injection");return}try{const f=chrome.runtime.getURL("codemirror-accessor.js"),l=document.createElement("script");l.setAttribute("data-cm-accessor-injector","true"),l.textContent=`
      (function() {
        // Check if already exists before injecting
        if (typeof window.CodeMirrorAccessor !== 'undefined' || 
            document.getElementById('codemirror-accessor-page-context')) {
          logger.debug('CodeMirror accessor already exists, skipping page context injection');
          return;
        }
        
        fetch('${f}')
          .then(response => response.text())
          .then(scriptContent => {
            const script = document.createElement('script');
            script.textContent = scriptContent;
            script.id = 'codemirror-accessor-page-context';
            document.head.appendChild(script);
            logger.debug('CodeMirror accessor injected into page context');
          })
          .catch(error => {
            logger.error('Failed to inject CodeMirror accessor into page context:', error);
          });
      })();
    `,(document.head||document.documentElement).appendChild(l),setTimeout(()=>{typeof window.CodeMirrorAccessor<"u"&&(sd=!0)},200),Se.debug&&Kn.debug("Attempted page context injection of CodeMirror accessor")}catch(f){Kn.error("Page context injection failed:",f)}};UC();const RS=()=>{if(typeof window>"u"||typeof document>"u"){Kn.debug("Function Call Renderer: Not running in a browser environment.");return}YO(),Se.useCodeMirrorExtraction&&ZO(),dg(),Se.function_result_selector&&Se.function_result_selector.length>0&&MS(),$O(),Dy(),Se.function_result_selector&&Se.function_result_selector.length>0&&VO(),PC(),Kn.debug("Function call renderer initialized with improved parameter extraction and streaming support.")},XO=f=>{var r;let l=!1;const n={...f};if(Se.usePositionFixed=!1,Se.largeContentThreshold=Number.MAX_SAFE_INTEGER,Se.maxContentPreviewLength=Number.MAX_SAFE_INTEGER,n.knownLanguages!==void 0&&(Se.knownLanguages=[...n.knownLanguages]),n.handleLanguageTags!==void 0&&(Se.handleLanguageTags=!!n.handleLanguageTags),n.maxLinesAfterLangTag!==void 0&&(Se.maxLinesAfterLangTag=n.maxLinesAfterLangTag),n.updateThrottle!==void 0&&(Se.updateThrottle=n.updateThrottle,l=!0),n.enableDirectMonitoring!==void 0&&(Se.enableDirectMonitoring=!!n.enableDirectMonitoring,l=!0),n.streamingContainerSelectors!==void 0&&(Se.streamingContainerSelectors=[...n.streamingContainerSelectors]),n.function_result_selector!==void 0){const s=((r=Se.function_result_selector)==null?void 0:r.length)||0;Se.function_result_selector=[...n.function_result_selector],(s===0&&Se.function_result_selector.length>0||s>0&&Se.function_result_selector.length===0)&&(l=!0)}n.streamingMonitoringInterval!==void 0&&(Se.streamingMonitoringInterval=n.streamingMonitoringInterval,l=!0),n.largeContentThreshold!==void 0&&(Se.largeContentThreshold=n.largeContentThreshold),n.maxContentPreviewLength!==void 0&&(Se.maxContentPreviewLength=n.maxContentPreviewLength),n.usePositionFixed!==void 0&&(Se.usePositionFixed=!!n.usePositionFixed),n.progressiveUpdateInterval!==void 0&&(Se.progressiveUpdateInterval=n.progressiveUpdateInterval,l=!0),n.stabilizeTimeout!==void 0&&(Se.stabilizeTimeout=n.stabilizeTimeout),n.debug!==void 0&&(Se.debug=!!n.debug),n.enableStalledStreamDetection!==void 0&&(Se.enableStalledStreamDetection=!!n.enableStalledStreamDetection,l=!0),n.stalledStreamTimeout!==void 0&&(Se.stalledStreamTimeout=n.stalledStreamTimeout),n.stalledStreamCheckInterval!==void 0&&(Se.stalledStreamCheckInterval=n.stalledStreamCheckInterval,l=!0),l&&(kS(),Se.enableDirectMonitoring&&Dy(),$C(),Se.function_result_selector&&Se.function_result_selector.length>0&&_C()),Kn.debug("Function call renderer configuration updated:",Se),dg()};typeof window<"u"&&(window.enableJSONDebug=()=>{window.__DEBUG_JSON_PARSER=!0,Kn.debug("JSON parser debug logging enabled. Refresh or trigger a function call to see logs.")},window.disableJSONDebug=()=>{window.__DEBUG_JSON_PARSER=!1,Kn.debug("JSON parser debug logging disabled.")});const gg=nt("Services Index");async function QO(){gg.debug("[Services] Initializing all application services...");try{const{initializeAutomationService:f}=await Promise.resolve().then(()=>WE);f(),gg.debug("[Services] All services initialized successfully")}catch(f){throw gg.error("[Services] Error initializing services:",f),f}}async function KO(){gg.debug("[Services] Cleaning up all application services...");try{const{cleanupAutomationService:f}=await Promise.resolve().then(()=>WE);f(),gg.debug("[Services] All services cleaned up successfully")}catch(f){gg.error("[Services] Error cleaning up services:",f)}}var JO={CLI_CEB_DEV:"false",CLI_CEB_FIREFOX:"false",CEB_GA_MEASUREMENT_ID:"G-6ENY3Y3H9X",CEB_GA_API_SECRET:"I0PHa_CWTbuTlXSb3T-kXg",CEB_NODE_ENV:"production"};const Ln=nt("content_script");function WO(){const f=setInterval(()=>{try{const l=window.activeSidebarManager;if(!l)return;if(document.documentElement.classList.contains("push-mode-enabled")){const r=l.getShadowHost();r?(r.style.display!=="block"||window.getComputedStyle(r).display==="none"||r.style.opacity!=="1"||parseFloat(window.getComputedStyle(r).opacity)<.9)&&(R("[SidebarRecovery] Detected invisible sidebar with push mode enabled, forcing visibility"),r.style.display="block",r.style.opacity="1",r.classList.add("initialized"),R("[SidebarRecovery] Sidebar visibility restored - skipping re-render to avoid performance issues")):(R("[SidebarRecovery] Push mode enabled but shadow host missing, re-initializing sidebar"),l.initialize().then(()=>{l.show()}))}}catch(l){Ln.error("[SidebarRecovery] Error:",l)}},1e3);window.addEventListener("unload",()=>{clearInterval(f)}),R("[SidebarRecovery] Sidebar recovery mechanism set up")}ZT(),R("Content script loaded - initializing with Session 10 architecture");let zy=window.location.href;const BC=eR();try{chrome.runtime.sendMessage({command:"trackAnalyticsEvent",eventName:"page_view",eventParams:{page_title:document.title,page_location:document.location.href,...BC}}),R("[Analytics] Initial page view tracked with demographic data")}catch(f){Ln.error("[ContentScript] Error sending page view analytics:",f instanceof Error?f.message:String(f))}setInterval(()=>{const f=window.location.href;if(f!==zy){R(`[Analytics] URL changed from ${zy} to ${f}`);try{chrome.runtime.sendMessage({command:"trackAnalyticsEvent",eventName:"url_change",eventParams:{page_title:document.title,page_location:f,previous_page:zy,...BC}}),zy=f}catch(l){Ln.error("[ContentScript] Error sending URL change analytics:",l instanceof Error?l.message:String(l))}}},1e3);try{chrome.runtime.sendMessage({command:"trackAnalyticsEvent",eventName:"content_script_loaded",eventParams:{hostname:window.location.hostname,path:window.location.pathname}})}catch(f){Ln.error("[ContentScript] Error sending analytics tracking message:",f instanceof Error?f.message:String(f))}WO();function eR(){try{const f=navigator.userAgent,l=navigator.language;let n="Unknown",r="Unknown",s="Unknown",d="Unknown";if(f.indexOf("Firefox")>-1){n="Firefox";const k=f.match(/Firefox\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Edg")>-1){n="Edge";const k=f.match(/Edg\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Chrome")>-1){n="Chrome";const k=f.match(/Chrome\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Safari")>-1){n="Safari";const k=f.match(/Version\/(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("MSIE")>-1||f.indexOf("Trident/")>-1){n="Internet Explorer";const k=f.match(/(?:MSIE |rv:)(\d+\.\d+)/);r=k&&k[1]?k[1]:"Unknown"}if(f.indexOf("Windows")>-1){s="Windows";const k=f.match(/Windows NT (\d+\.\d+)/),A=k&&k[1]?k[1]:"Unknown";d={"10.0":"10/11","6.3":"8.1","6.2":"8","6.1":"7","6.0":"Vista","5.2":"XP x64","5.1":"XP"}[A]||A}else if(f.indexOf("Mac")>-1){s="macOS";const k=f.match(/Mac OS X ([\d_]+)/);d=k&&k[1]?k[1].replace(/_/g,"."):"Unknown"}else if(f.indexOf("Linux")>-1){s="Linux";const k=f.match(/Linux ([\w\d\.]+)/);d=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("Android")>-1){s="Android";const k=f.match(/Android ([\d\.]+)/);d=k&&k[1]?k[1]:"Unknown"}else if(f.indexOf("iOS")>-1||f.indexOf("iPhone")>-1||f.indexOf("iPad")>-1){s="iOS";const k=f.match(/OS ([\d_]+)/);d=k&&k[1]?k[1].replace(/_/g,"."):"Unknown"}let h="desktop";/Mobi|Android|iPhone|iPad|iPod/i.test(f)&&(h=/iPad|tablet/i.test(f)?"tablet":"mobile");const v=window.screen.width,S=window.screen.height,w=`${v}x${S}`,M=window.devicePixelRatio||1,N=l.split("-")[1]||l;return{browser:n,browser_version:r,operating_system:s,os_version:d,language:l,region:N,screen_resolution:w,pixel_ratio:M,device_type:h}}catch(f){return Ln.error("[Analytics] Error collecting demographic data:",f),{error:"Failed to collect demographic data"}}}(function(){try{RS(),R("Function call renderer initialized immediately at script load")}catch(l){Ln.error("Error in immediate renderer initialization:",l)}})(),async function(){try{R("Starting comprehensive application initialization...");try{Cr.isReady()?R("MCP client is ready for communication"):R("MCP client not ready, initialization will be handled by the client itself"),window.mcpClient=Cr,R("MCP client exposed on window.mcpClient")}catch(l){Ln.error("MCP client initialization warning:",l)}await sC(),await QO(),R("Application initialized successfully with Session 10 architecture");try{const{pluginRegistry:l}=await Promise.resolve().then(()=>Kh);window.pluginRegistry=l,R("Plugin registry exposed on window.pluginRegistry")}catch(l){Ln.warn("Failed to expose plugin registry globally:",l)}JO.NODE_ENV==="development"&&(window.appInitUtils=NA,R("Initialization utilities exposed on window.appInitUtils"))}catch(l){Ln.error("Failed to initialize application with Session 10 architecture:",l),R("Attempting fallback initialization...");try{RS(),R("Fallback renderer initialization completed")}catch(n){Ln.error("Fallback initialization also failed:",n)}}}(),ue.on("connection:status-changed",({status:f})=>{const l=f==="connected";R(`[Content Script] MCP connection status changed: ${l?"Connected":"Disconnected"}`);const n=po.getState(),r=n.getActiveAdapter();r&&r.instance&&(ue.emit("adapter:connection-status-changed",{isConnected:l,adapterId:n.activeAdapterName}),window.mcpAdapter=r.instance)});let Cc=!1;const Ny=(f=3,l=300)=>{if(!Cc)if(document.readyState==="complete"||document.readyState==="interactive")try{RS(),Cc=!0,R("Function call renderer initialized successfully on retry."),setTimeout(()=>{Cc&&(dg(),am())},500)}catch(n){Ln.error("Error initializing function call renderer:",n),f>0?(R(`Retrying renderer initialization in ${l}ms... (${f} retries left)`),setTimeout(()=>Ny(f-1,l),l)):R("Failed to initialize function call renderer after multiple retries.")}else R("DOM not ready for renderer initialization, retrying..."),setTimeout(()=>Ny(f,l),100)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Cc||Ny()}):Cc||Ny();function tR(f,l){Ln.debug(`Processing Remote Config message: ${f.type}`);try{switch(f.type){case"remote-config:feature-flags-updated":{const{flags:n,timestamp:r}=f.data;Ln.debug(`Received feature flags update: ${Object.keys(n).length} flags`),Wf.getState().updateFeatureFlags(n),ue.emit("feature-flags:updated",{flags:n,timestamp:r}),l({success:!0,timestamp:Date.now()});break}case"remote-config:notifications-received":{const{notifications:n,timestamp:r}=f.data;Ln.debug(`Received notifications: ${n.length} notifications`);const s=ia.getState(),d=Wf.getState();for(const h of n)d.canShowNotification(h)&&s.addRemoteNotification(h);l({success:!0,processed:n.length,timestamp:Date.now()});break}case"remote-config:version-config-updated":{const{config:n,timestamp:r}=f.data;Ln.debug("[Content] Received version-specific config update"),ue.emit("remote-config:updated",{changes:["version_config"],timestamp:r}),l({success:!0,timestamp:Date.now()});break}case"remote-config:adapter-configs-updated":{const{adapterConfigs:n,timestamp:r}=f.data;Ln.debug(`Received adapter configs update: ${Object.keys(n).length} adapters`),ue.emit("remote-config:adapter-configs-updated",{adapterConfigs:n,timestamp:r}),ue.emit("remote-config:updated",{changes:Object.keys(n).map(s=>`${s}_adapter_config`),timestamp:r}),l({success:!0,timestamp:Date.now()});break}default:Ln.warn(`Unknown remote config message type: ${f.type}`),l({success:!1,error:`Unknown message type: ${f.type}`})}}catch(n){const r=n instanceof Error?n.message:String(n);Ln.error("Error handling remote config message:",n),l({success:!1,error:r})}}function nR(f,l){try{const{oldVersion:n,newVersion:r,timestamp:s}=f.data;Ln.debug(`Extension updated from ${n} to ${r}`),Wf.getState().setUserProperties({extensionVersion:r,lastActiveDate:new Date().toISOString()}),ue.emit("app:version-updated",{oldVersion:n,newVersion:r,timestamp:s}),l({success:!0,timestamp:Date.now()})}catch(n){const r=n instanceof Error?n.message:String(n);Ln.error("Error handling version update:",n),l({success:!1,error:r})}}chrome.runtime.onMessage.addListener((f,l,n)=>{R(`Message received in content script: ${JSON.stringify(f)}`);const s=po.getState().getActiveAdapter(),d=s==null?void 0:s.instance;if(f.command==="getStats")n({success:!0,stats:{mcpConnected:Gi.getState().status==="connected",activeSite:(d==null?void 0:d.name)||"Unknown"}});else if(f.command==="toggleSidebar")ue.emit("sidebar:toggle-requested",{}),n({success:!0});else if(f.command==="showSidebarWithToolOutputs")ue.emit("sidebar:show-with-outputs",{}),n({success:!0});else if(f.command==="callMcpTool"){const{toolName:h,args:v}=f;if(h&&v)return Cr.callTool(h,v).then(S=>{n({success:!0,result:S})}).catch(S=>{const w=S instanceof Error?S.message:String(S);n({success:!1,error:w})}),!0;n({success:!1,error:"Invalid tool call request"})}else if(f.command==="refreshSidebarContent")ue.emit("sidebar:refresh-content",{}),n({success:!0});else if(f.command==="setFunctionCallRendering"){const{enabled:h}=f;Cc?(h?(R("Starting function call monitoring."),Dy(),dg(),am()):(R("Stopping function call monitoring."),kS()),n({success:!0})):(R("Cannot toggle function call rendering: Renderer not initialized."),n({success:!1,error:"Renderer not initialized"}))}else if(f.command==="forceRenderFunctionCalls")Cc?(R("Forcing function call render check."),dg(),am(),n({success:!0})):(R("Cannot force render: Renderer not initialized."),n({success:!1,error:"Renderer not initialized"}));else if(f.command==="configureRenderer")Cc?(R(`Configuring function call renderer with options: ${JSON.stringify(f.options)}`),XO(f.options),n({success:!0})):(R("Cannot configure renderer: Not initialized."),n({success:!1,error:"Renderer not initialized"}));else{if(f.type&&f.type.startsWith("remote-config:"))return tR(f,n),!0;if(f.type==="app:version-updated")return nR(f,n),!0}return!0}),window.addEventListener("beforeunload",async()=>{R("Page unloading - starting comprehensive cleanup...");try{await KO(),await hy(),R("Comprehensive cleanup completed")}catch(f){Ln.error("Error during comprehensive cleanup:",f)}}),window.mcpClient=Cr,Ln.debug("[Content Script] mcpClient exposed to window object for renderer use.");const Uy=po.getState().getActiveAdapter();Uy&&Uy.instance?(window.mcpAdapter=Uy.instance,Ln.debug(`Current adapter (${Uy.plugin.name}) exposed to window object as mcpAdapter.`)):Ln.debug("[Content Script] No active adapter found to expose to window object.");var HC=Fx();const iR=({children:f,isOpen:l,triggerRef:n,onMouseEnter:r,onMouseLeave:s})=>{const[d,h]=K.useState(null),[v,S]=K.useState(!1),[w,M]=K.useState({x:0,y:0}),[N,k]=K.useState({x:0,y:0}),A=K.useRef(null);K.useEffect(()=>{if(!d){const Y=document.createElement("div");Y.id="mcp-popover-portal",Y.style.position="absolute",Y.style.zIndex="10000",Y.style.top="0",Y.style.left="0",document.body.appendChild(Y),h(Y)}return()=>{d&&document.body.contains(d)&&document.body.removeChild(d)}},[d]),K.useEffect(()=>{const Y=()=>{var ie;if(l&&d&&n.current&&!v){const pe=n.current.getBoundingClientRect(),oe=window.innerWidth,me=window.innerHeight,J=(ie=d.firstElementChild)==null?void 0:ie.firstElementChild;if(!J)return;const he=J.offsetWidth,ne=J.offsetHeight;let Ce=pe.left+pe.width/2,de=pe.top-10,Ue="center bottom",De="translate(-50%, -100%)";Ce-he/2<10&&(Ce=he/2+10),Ce+he/2>oe-10&&(Ce=oe-he/2-10);const Ze=pe.top,Je=me-pe.bottom;pe.top<ne+30||Ze<ne+20&&Je>=ne+20?(de=pe.bottom+10,De="translate(-50%, 0)",Ue="center top",de+ne>me-10&&(de=Math.min(de,me-ne-10)),J.classList&&(J.classList.remove("position-above"),J.classList.add("position-below"))):(de=pe.top-10,De="translate(-50%, -100%)",Ue="center bottom",de-ne<10&&(de=ne+10),J.classList&&(J.classList.remove("position-below"),J.classList.add("position-above"))),d.style.position="fixed",d.style.left=`${Ce}px`,d.style.top=`${de}px`,d.style.transform=De,k({x:Ce,y:de}),J&&(J.style.transformOrigin=Ue)}};if(l&&d&&n.current)return Y(),window.addEventListener("scroll",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("scroll",Y),window.removeEventListener("resize",Y)}},[l,d,n]);const $=Y=>{if(!d)return;S(!0);const ie=d.getBoundingClientRect();M({x:Y.clientX-ie.left,y:Y.clientY-ie.top}),Y.preventDefault()},B=Y=>{if(!v||!d)return;const ie=Y.clientX-w.x,pe=Y.clientY-w.y;d.style.left=`${ie}px`,d.style.top=`${pe}px`,d.style.transform="none",k({x:ie,y:pe})},Z=()=>{S(!1)};return K.useEffect(()=>(v?(window.addEventListener("mousemove",B),window.addEventListener("mouseup",Z)):(window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",Z)),()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",Z)}),[v]),!d||!l?null:HC.createPortal(T.jsx("div",{onMouseEnter:r,onMouseLeave:s,style:{display:"contents"},children:T.jsxs("div",{className:"mcp-popover-wrapper",style:{position:"relative",opacity:v?.9:1,backdropFilter:v?"blur(12px)":"none",WebkitBackdropFilter:v?"blur(12px)":"none",transition:"opacity 0.15s ease, backdrop-filter 0.15s ease, background-color 0.15s ease"},children:[f,T.jsx("div",{ref:A,className:"mcp-drag-handle",onMouseDown:$,title:"Drag to move"})]})}),d)},Kt=nt("mcpPopover"),FC=()=>{const[f,l]=K.useState(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return K.useEffect(()=>{const n=window.matchMedia("(prefers-color-scheme: dark)"),r=s=>l(s.matches);return n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[]),f},aR=`
.mcp-popover-container {
  position: relative;
  display: inline-block;
}

.mcp-main-button {
  display: flex;
  align-items: center;
  width: max-content;
  height: max-content;
  justify-content: center;
  padding: 4px 8px;
  border-radius: 10px;
  background-color: #e8f0fe;
  border: 1px solid #dadce0;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #202124;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
  font-size: 14px;
  font-weight: 600;
  box-shadow: 0 1px 3px rgba(60,64,67,0.08);
  letter-spacing: 0.3px;
  white-space: nowrap;
}

.mcp-main-button:hover {
  background-color: #aecbfa;
  box-shadow: 0 2px 4px rgba(60,64,67,0.12);
}

.mcp-main-button:active {
  transform: translateY(1px);
  box-shadow: 0 0 1px rgba(60,64,67,0.08);
}

.mcp-main-button.inactive {
  background-color: #f5f7f9;
  border-color: #dadce0;
  color: #5f6368;
}

.mcp-popover {
  width: 650px;
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(60,64,67,0.10), 0 2px 8px rgba(60,64,67,0.06);
  padding: 0;
  z-index: 1000;
  border: 1px solid #dadce0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
  overflow: visible;
  max-height: 90vh;
  position: relative;
}

.mcp-close-button {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  background: transparent;
  border: none;
  color: #5f6368;
  font-size: 18px;
  font-weight: 500;
  z-index: 1002;
  transition: all 0.2s ease;
}

.mcp-close-button:hover {
  background-color: #e8f0fe;
  color: #1a73e8;
}

.mcp-close-button:active {
  transform: scale(0.95);
}

/* Default arrow (positioned at the bottom for popover above trigger) */
.mcp-popover.position-above::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  width: 14px;
  height: 14px;
  background-color: #ffffff;
  border-right: 1px solid #dadce0;
  border-bottom: 1px solid #dadce0;
}

/* Arrow for popover positioned below the trigger */
.mcp-popover.position-below::after {
  content: '';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%) rotate(-135deg);
  width: 14px;
  height: 14px;
  background-color: #ffffff;
  border-right: 1px solid #dadce0;
  border-bottom: 1px solid #dadce0;
}

.mcp-toggle-item {
  display: block;
  margin-bottom: 6px;
  padding: 8px 10px;
  cursor: pointer;
  border-bottom: 1px solid #dadce0;
  transition: background-color 0.15s ease;
  box-sizing: border-box;
  width: 100%;
  background: #ffffff;
}

.mcp-toggle-item:hover {
  background-color: #e8f0fe;
}

.mcp-toggle-item:last-child {
  margin-bottom: 0;
  border-bottom: none;
}

.mcp-toggle-checkbox {
  position: relative;
  width: 36px;
  height: 18px;
  flex-shrink: 0;
  display: inline-block;
  margin-right: 10px;
  vertical-align: middle;
  border-radius: 34px;
  
}

.mcp-toggle-checkbox input {
  opacity: 0;
  width: 0;
  height: 0;
  margin: 0;
  padding: 0;
}

.mcp-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #dadce0;
  transition: .3s;
  border-radius: 34px;
  box-sizing: border-box;
  overflow: hidden;
}

.mcp-toggle-slider:before {
  position: absolute;
  content: "";
  height: 12px;
  width: 12px;
  left: 3px;
  bottom: 3px;
  background-color: #ffffff;
  transition: .3s;
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(60,64,67,0.08);
  z-index: 1;
}

input:checked + .mcp-toggle-slider {
  background-color: #1a73e8;
}

input:checked + .mcp-toggle-slider:before {
  transform: translateX(18px);
}

.mcp-toggle-label {
  font-size: 13px;
  color: #202124;
  font-weight: 500;
  letter-spacing: 0.2px;
  white-space: nowrap;
  vertical-align: middle;
}

.mcp-toggle-item.disabled {
  opacity: 0.65;
  cursor: not-allowed;
  background-color: #f5f7f9;
}

.mcp-toggle-item.disabled .mcp-toggle-slider {
  background-color: #dadce0;
  cursor: not-allowed;
  border-radius: 34px;
  overflow: hidden;
}

.mcp-instruction-btn {
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 1px 2px rgba(60,64,67,0.05);
}

.mcp-instruction-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(60,64,67,0.10);
}

.mcp-instruction-btn:active {
  transform: translateY(0);
}

.mcp-instructions-container {
  background-color: #f8f9fa;
  border: 1px solid #eaecef;
  border-radius: 10px;
  padding: 16px;
  font-family: monospace;
  font-size: 13px;
  line-height: 1.5;
  color: #3c4043;
  box-shadow: inset 0 1px 2px rgba(60,64,67,0.03);
  width: 100%;
  box-sizing: border-box;
  overflow-wrap: break-word;
}

.mcp-popover {
  position: relative;
}

.mcp-drag-handle {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 6px;
  cursor: move;
  z-index: 1001;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  background-color: #dadce0;
  border-bottom-left-radius: 3px;
  border-bottom-right-radius: 3px;
  border: none;
}

.mcp-drag-handle:hover {
  background-color: #e8f0fe;
}

.mcp-drag-handle:hover .mcp-drag-handle-bar {
  background-color: #1a73e8;
}

.mcp-drag-handle-bar {
  width: 12px;
  height: 3px;
  background-color: #5f6368;
  border-radius: 1.5px;
  margin: 0 1px;
  transition: background-color 0.2s ease;
}

@media (prefers-color-scheme: dark) {
  .mcp-main-button {
    background-color: #174ea6;
    border-color: #8ab4f8;
    color: #e8eaed;
  }

  .mcp-main-button:hover {
    background-color: #8ab4f8;
    color: #202124;
  }

  .mcp-main-button.inactive {
    background-color: #2d2d2d;
    border-color: #444;
    color: #9aa0a6;
  }

  .mcp-popover {
    background-color: #2d2d2d;
    box-shadow: 0 4px 20px rgba(20,20,20,0.25), 0 2px 8px rgba(20,20,20,0.15);
    border: 1px solid #444;
    overflow: visible;
  }

  .mcp-popover.position-above::after,
  .mcp-popover.position-below::after {
    background-color: #2d2d2d;
    border-right: 1px solid #444;
    border-bottom: 1px solid #444;
  }

  .mcp-toggle-item {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    border-bottom: 1px solid #444;
    background: #2d2d2d;
  }

  .mcp-toggle-item:hover {
    background-color: #174ea6;
  }

  .mcp-toggle-slider {
    background-color: #444;
  }

  input:checked + .mcp-toggle-slider {
    background-color: #8ab4f8;
  }

  .mcp-toggle-label {
    color: #e8eaed;
  }

  .mcp-toggle-item.disabled {
    background-color: #282828;
  }

  .mcp-toggle-item.disabled .mcp-toggle-slider {
    background-color: #444;
    border-radius: 34px;
    overflow: hidden;
  }

  .mcp-instructions-container {
    background-color: #2d2d2d;
    border: 1px solid #444;
    color: #e8eaed;
    box-shadow: inset 0 1px 2px rgba(20,20,20,0.10);
  }

  .mcp-close-button {
    color: #9aa0a6;
  }

  .mcp-close-button:hover {
    background-color: #174ea6;
    color: #8ab4f8;
  }
  
  .mcp-drag-handle {
    background-color: #444;
    border: none;
  }

  .mcp-drag-handle-bar {
    background-color: #9aa0a6;
  }
  
  .mcp-drag-handle:hover {
    background-color: #174ea6;
  }

  .mcp-drag-handle:hover .mcp-drag-handle-bar {
    background-color: #8ab4f8;
  }
}

/* Hover overlay styles */
.mcp-hover-overlay {
  position: fixed !important;
  background: #ffffff !important;
  border: 1px solid #e1e5e9 !important;
  border-radius: 10px !important;
  box-shadow: 0 6px 20px rgba(60,64,67,0.12), 0 2px 8px rgba(60,64,67,0.06) !important;
  padding: 8px !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 4px !important;
  align-items: stretch !important;
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateY(-8px) scale(0.95) !important;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
  z-index: 2147483647 !important;
  white-space: nowrap !important;
  pointer-events: none !important;
  width: 150px !important;
  min-width: 150px !important;
  max-width: 150px !important;
  box-sizing: border-box !important;
  font-family: inherit !important;
  font-synthesis: none !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

.mcp-hover-overlay.visible {
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateY(0) scale(1) !important;
  pointer-events: auto !important;
}

.mcp-hover-button {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 8px !important;
  padding: 10px 12px !important;
  border-radius: 6px !important;
  border: none !important;
  background: #f8f9fa !important;
  color: #374151 !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  width: 100% !important;
  min-width: 110px !important;
  max-width: none !important;
  box-sizing: border-box !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;
  text-align: left !important;
  letter-spacing: -0.01em !important;
  white-space: nowrap !important;
  overflow: hidden !important;
}

.mcp-hover-button:hover {
  background: #e3f2fd !important;
  color: #1565c0 !important;
  transform: scale(1.02) !important;
  box-shadow: 0 2px 8px rgba(21, 101, 192, 0.15) !important;
}

.mcp-hover-button:active {
  transform: scale(0.98) !important;
  box-shadow: 0 1px 3px rgba(21, 101, 192, 0.2) !important;
}

@media (prefers-color-scheme: dark) {
  .mcp-hover-overlay {
    background: #1f2937 !important;
    border-color: #374151 !important;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3), 0 3px 10px rgba(0,0,0,0.2) !important;
  }

  .mcp-hover-button {
    background: #374151 !important;
    color: #d1d5db !important;
  }

  .mcp-hover-button:hover {
    background: #1e3a8a !important;
    color: #93c5fd !important;
    box-shadow: 0 2px 8px rgba(147, 197, 253, 0.2) !important;
  }
}
`;function oR(){K.useEffect(()=>{if(!document.getElementById("mcp-popover-styles")){const f=document.createElement("style");f.id="mcp-popover-styles",f.textContent=aR,document.head.appendChild(f)}},[])}const Py=({id:f,label:l,checked:n,disabled:r,onChange:s})=>{const d=FC(),h={itemBackground:d?"#2d2d2d":"#ffffff",itemBorderColor:d?"#444":"#dadce0",labelColor:d?"#e8eaed":"#202124",toggleBackground:d?"#444":"#dadce0",toggleBackgroundChecked:d?"#8ab4f8":"#1a73e8",toggleBackgroundDisabled:d?"#444":"#dadce0"};return T.jsx("div",{className:`mcp-toggle-item${r?" disabled":""}`,style:{borderBottom:`1px solid ${h.itemBorderColor}`,backgroundColor:h.itemBackground},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[T.jsx("div",{style:{width:"36px",marginRight:"10px"},children:T.jsxs("label",{className:"mcp-toggle-checkbox",style:{display:"block"},children:[T.jsx("input",{type:"checkbox",id:f,checked:n,disabled:r,onChange:v=>s(v.target.checked)}),T.jsx("span",{className:"mcp-toggle-slider",style:{backgroundColor:r?h.toggleBackgroundDisabled:n?h.toggleBackgroundChecked:h.toggleBackground}})]})}),T.jsx("label",{htmlFor:f,className:"mcp-toggle-label",style:{cursor:r?"not-allowed":"pointer",color:h.labelColor},children:l})]})})},vo=Object.freeze(Object.defineProperty({__proto__:null,MCPPopover:({toggleStateManager:f,adapterButtonConfig:l,adapterName:n})=>{const r=FC(),{plugin:s,insertText:d,attachFile:h,isReady:v}=RE(),{preferences:S,updatePreferences:w}=ly(),{mcpEnabled:M,setMCPEnabled:N}=Wk();K.useEffect(()=>{Kt.debug("Adapter state changed:",{isAdapterActive:v,hasActivePlugin:!!s,pluginName:s==null?void 0:s.name,hasInsertText:!!d,hasAttachFile:!!h,capabilities:s==null?void 0:s.capabilities,adapterName:n,hasAdapterButtonConfig:!!l})},[v,s,d,h,n,l]),K.useEffect(()=>{Kt.debug("Instructions state:",{hasInstructions:!!yn.instructions,instructionsLength:yn.instructions.length,preferences:S})},[yn.instructions,S]);const k={mainBackground:r?"#2d2d2d":"#ffffff",secondaryBackground:r?"#2d2d2d":"#f8f9fa",buttonBackground:r?"#174ea6":"#e8f0fe",primaryText:r?"#e8eaed":"#202124",secondaryText:r?"#9aa0a6":"#5f6368",borderColor:r?"#444":"#dadce0",dividerColor:r?"#444":"#dadce0",boxShadow:r?"0 6px 24px rgba(20,20,20,0.25), 0 2px 8px rgba(20,20,20,0.15)":"0 6px 24px rgba(60,64,67,0.10), 0 2px 8px rgba(60,64,67,0.06)",innerShadow:r?"inset 0 1px 2px rgba(20,20,20,0.10)":"inset 0 1px 2px rgba(60,64,67,0.03)"};oR();const[A,$]=K.useState(()=>({...f.getState(),mcpEnabled:M})),[B,Z]=K.useState(yn.instructions||""),[Y,ie]=K.useState("Copy"),[pe,oe]=K.useState("Insert"),[me,J]=K.useState("Attach"),[he,ne]=K.useState(!1),[Ce,de]=K.useState(!1),[Ue,De]=K.useState({x:0,y:0}),[Ze,Je]=K.useState(!0),ct=K.useRef(null),F=K.useRef(null),q=K.useRef(null),W=K.useRef(null),Re=K.useCallback(()=>{const Ne=f.getState();$(Gt=>({...Ne,mcpEnabled:M}))},[f,M]);K.useEffect(()=>{Kt.debug(`MCP state changed to: ${M}, updating MCP toggle UI`),$(Ne=>{const Gt={...Ne,mcpEnabled:M};return Kt.debug("State updated:",Gt),Gt})},[M]),K.useEffect(()=>{Z(yn.instructions||"");const Ne=yn.subscribe(Gt=>{Z(Gt)});return()=>{Ne()}},[]),K.useEffect(()=>{const Ne=f.getState();Kt.debug(`Initial state sync - toggleManager: ${Ne.mcpEnabled}, store MCP: ${M}`);const Gt={...Ne,mcpEnabled:M,autoInsert:S.autoInsert||!1,autoSubmit:S.autoSubmit||!1,autoExecute:S.autoExecute||!1};$(Gt),f.setAutoInsert(S.autoInsert||!1),f.setAutoSubmit(S.autoSubmit||!1),f.setAutoExecute(S.autoExecute||!1)},[f,M,S.autoInsert,S.autoSubmit,S.autoExecute]),K.useEffect(()=>{const Ne=st=>{const{visible:kt}=st.detail;Kt.debug(`Sidebar visibility changed to: ${kt}`),Je(kt)};window.addEventListener("ui:sidebar-toggle",Ne);const Gt=()=>{const st=window.activeSidebarManager;st&&st._isVisible!==void 0&&Je(st._isVisible)};Gt();const Ae=setInterval(Gt,1e3);return()=>{window.removeEventListener("ui:sidebar-toggle",Ne),clearInterval(Ae)}},[]);const _=Ne=>{Kt.debug(`MCP toggle changed to: ${Ne}`),N(Ne,"mcp-popover-user-toggle"),f.setMCPEnabled(Ne)},P=Ne=>{Kt.debug(`Auto Insert toggle changed to: ${Ne}`),w({autoInsert:Ne}),f.setAutoInsert(Ne),Re(),yc.getInstance().updateAutomationStateOnWindow().catch(console.error)},ge=Ne=>{Kt.debug(`Auto Submit toggle changed to: ${Ne}`),w({autoSubmit:Ne}),f.setAutoSubmit(Ne),Re(),yc.getInstance().updateAutomationStateOnWindow().catch(console.error)},re=Ne=>{Kt.debug(`Auto Execute toggle changed to: ${Ne}`),w({autoExecute:Ne}),f.setAutoExecute(Ne),Re(),yc.getInstance().updateAutomationStateOnWindow().catch(console.error)},Oe=async()=>{try{await navigator.clipboard.writeText(B),ie("Copied!"),setTimeout(()=>ie("Copy"),1200)}catch{ie("Error"),setTimeout(()=>ie("Copy"),1200)}},He=async()=>{if(!B.trim()){oe("No Content"),setTimeout(()=>oe("Insert"),1200);return}if(Kt.debug(`handleInsert called - isAdapterActive: ${v}, activePlugin: ${!!s}, insertText: ${!!d}`),s&&Kt.debug("Active plugin details:",{name:s.name,capabilities:s.capabilities,hasInsertText:!!s.insertText}),(!v||!s||!d)&&(Kt.debug("Adapter not immediately ready, waiting 100ms and retrying..."),await new Promise(Ne=>setTimeout(Ne,100))),v&&s&&d)try{Kt.debug(`Attempting to insert text using ${s.name} adapter`),await d(B)?(oe("Inserted!"),Kt.debug(`Text inserted successfully using ${s.name} adapter`)):(oe("Failed"),Kt.warn(`Text insertion failed using ${s.name} adapter`))}catch(Ne){Kt.error("Error inserting text:",Ne),oe("Failed")}else oe("No Adapter"),Kt.warn(`No active adapter available for text insertion. isAdapterActive: ${v}, activePlugin: ${!!s}, insertText: ${!!d}`),s&&Kt.warn("Active plugin details:",{name:s.name,capabilities:s.capabilities,hasInsertTextMethod:!!s.insertText});setTimeout(()=>oe("Insert"),1200)},ke=async()=>{Kt.debug(`Toggle sidebar requested. Current state: ${Ze}`);try{const Ne=window.activeSidebarManager;if(Ne)Ze?(Kt.debug("[MCPPopover] Hiding sidebar via activeSidebarManager"),await Ne.hide()):(Kt.debug("[MCPPopover] Showing sidebar via activeSidebarManager"),await Ne.show());else{Kt.warn("[MCPPopover] activeSidebarManager not available, using fallback");const{useUIStore:Gt}=await Promise.resolve().then(()=>sE);Gt.getState().setSidebarVisibility(!Ze,"mcp-popover-toggle")}Je(!Ze)}catch(Ne){Kt.error("[MCPPopover] Error toggling sidebar:",Ne)}},Pe=async()=>{if(Kt.debug(`handleAttach called - isAdapterActive: ${v}, activePlugin: ${!!s}, attachFile: ${!!h}`),s&&Kt.debug("Active plugin details for attach:",{name:s.name,capabilities:s.capabilities,hasAttachFile:!!s.attachFile,supportsFileAttachment:s.capabilities.includes("file-attachment")}),!B.trim()){J("No File"),setTimeout(()=>J("Attach"),1200);return}if((!v||!s||!h)&&(Kt.debug("Adapter not immediately ready for attachment, waiting 100ms and retrying..."),await new Promise(Ne=>setTimeout(Ne,100))),v&&s&&h){if(!s.capabilities.includes("file-attachment")){J("Not Supported"),Kt.warn(`File attachment not supported by ${s.name} adapter`);return}const Ne=s.name==="Perplexity",Gt=s.name==="Gemini";let Ae=Ne||Gt?"text/plain":"text/markdown";const kt=`mcp_superassistant_instructions${Ae==="text/plain"?".txt":".md"}`,Be=new File([B],kt,{type:Ae});try{Kt.debug(`Attempting to attach file using ${s.name} adapter`),await h(Be)?(J("Attached!"),Kt.debug(`File attached successfully using ${s.name} adapter`)):(J("Error"),Kt.warn(`File attachment failed using ${s.name} adapter`))}catch(it){Kt.error("Error attaching file:",it),J("Error")}}else J("No File"),Kt.warn(`Cannot attach file. isAdapterActive: ${v}, activePlugin: ${!!s}, attachFile: ${!!h}`),s&&Kt.warn("Active plugin details:",{name:s.name,capabilities:s.capabilities,hasAttachFileMethod:!!s.attachFile});setTimeout(()=>J("Attach"),1200)},Me=K.useCallback(()=>{if(F.current){const Ne=F.current.getBoundingClientRect(),Gt=150,Ae=180;let st=Ne.right-Gt+10,kt=Ne.top-Ae-10;const Be=window.innerWidth;st<10?st=10:st+Gt>Be-10&&(st=Be-Gt-10),kt<10&&(kt=Ne.bottom+10),De({x:st,y:kt})}},[]),_e=K.useCallback(()=>{q.current&&clearTimeout(q.current),Me(),de(!0)},[Me]),at=K.useCallback(()=>{q.current=setTimeout(()=>{de(!1)},200)},[]),Xe=()=>{q.current&&clearTimeout(q.current)},ft=()=>{de(!1)},yt=K.useRef(null);K.useEffect(()=>{const Ne=Gt=>{var Be;const Ae=F.current&&F.current.contains(Gt.target),st=ct.current&&ct.current.contains(Gt.target),kt=(Be=document.getElementById("mcp-popover-portal"))==null?void 0:Be.contains(Gt.target);!Ae&&!st&&!kt&&ne(!1)};return he?setTimeout(()=>{document.addEventListener("mousedown",Ne)},10):document.removeEventListener("mousedown",Ne),()=>{document.removeEventListener("mousedown",Ne)}},[he]),K.useEffect(()=>{if(Ce){Me();const Ne=()=>{Me()};return window.addEventListener("scroll",Ne,!0),window.addEventListener("resize",Ne),()=>{window.removeEventListener("scroll",Ne,!0),window.removeEventListener("resize",Ne)}}},[Ce,Me]),K.useEffect(()=>()=>{q.current&&clearTimeout(q.current)},[]);const nn=!A.mcpEnabled,Ei=!A.mcpEnabled||!A.autoInsert,Un=!A.mcpEnabled,Tt=l!=null&&l.className?`${l.className}${A.mcpEnabled&&l.activeClassName?` ${l.activeClassName}`:""}`:`mcp-main-button${A.mcpEnabled?"":" inactive"}`,En=l!=null&&l.contentClassName?T.jsxs("span",{className:l.contentClassName,children:[T.jsx("img",{src:chrome.runtime.getURL("icon-34.png"),alt:"MCP Logo",className:l.iconClassName||"",style:{width:"20px",height:"20px",borderRadius:"50%"}}),T.jsx("span",{className:l.textClassName||"",children:"MCP"})]}):T.jsxs(T.Fragment,{children:[T.jsx("img",{src:chrome.runtime.getURL("icon-34.png"),alt:"MCP Logo",style:{width:"20px",height:"20px",marginRight:"1px",verticalAlign:"middle",borderRadius:"50%"}}),"MCP"]});return T.jsxs("div",{className:"mcp-popover-container",id:"mcp-popover-container",ref:yt,children:[T.jsx("div",{style:{position:"relative",display:"inline-block"},onMouseEnter:_e,onMouseLeave:at,children:T.jsx("button",{className:Tt,"aria-label":`MCP Settings - ${A.mcpEnabled?"Active":"Inactive"}`,title:`MCP Settings - ${A.mcpEnabled?"Sidebar Visible":"Sidebar Hidden"}`,type:"button",ref:F,onClick:()=>ne(!he),children:En})}),Ce&&HC.createPortal(T.jsxs("div",{className:`mcp-hover-overlay ${Ce?"visible":""}`,ref:W,onMouseEnter:Xe,onMouseLeave:ft,style:{left:`${Ue.x}px`,top:`${Ue.y}px`},children:[T.jsxs("button",{className:"mcp-hover-button",onClick:He,title:"Insert instructions",type:"button",children:[T.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:T.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Insert"]}),T.jsxs("button",{className:"mcp-hover-button",onClick:Pe,title:"Attach instructions as file",type:"button",children:[T.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:T.jsx("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"})}),"Attach"]}),T.jsxs("button",{className:"mcp-hover-button",onClick:ke,title:Ze?"Hide sidebar":"Show sidebar",type:"button",children:[T.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:Ze?T.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}):T.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),Ze?"Hide Sidebar":"Show Sidebar"]}),T.jsxs("button",{className:"mcp-hover-button",onClick:()=>ne(!he),title:"Configure MCP settings",type:"button",children:[T.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:T.jsx("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})}),"Configure"]})]}),document.body),T.jsx(iR,{isOpen:he,triggerRef:F,children:T.jsxs("div",{className:"mcp-popover position-above",ref:ct,style:{display:"flex",flexDirection:"row",minHeight:280,padding:0,width:"650px",position:"relative",borderRadius:"16px",boxShadow:k.boxShadow,overflow:"hidden",backgroundColor:k.mainBackground,border:`1px solid ${k.borderColor}`},children:[T.jsx("button",{className:"mcp-close-button",onClick:()=>ne(!1),"aria-label":"Close",title:"Close",type:"button",style:{color:k.secondaryText},children:""}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",width:160,padding:"20px 12px",gap:12,borderRight:`1px solid ${k.dividerColor}`,background:k.mainBackground,boxSizing:"border-box"},children:[T.jsx(Py,{id:"mcp-toggle",label:"MCP",checked:A.mcpEnabled,disabled:!1,onChange:_}),T.jsx(Py,{id:"auto-insert-toggle",label:"Auto Insert",checked:A.autoInsert,disabled:nn,onChange:P}),T.jsx(Py,{id:"auto-submit-toggle",label:"Auto Submit",checked:A.autoSubmit,disabled:Ei,onChange:ge}),T.jsx(Py,{id:"auto-execute-toggle",label:"Auto Execute",checked:A.autoExecute,disabled:Un,onChange:re})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,padding:"20px 20px 16px 20px",background:k.mainBackground,boxSizing:"border-box",overflow:"auto"},children:[T.jsx("div",{style:{fontWeight:"600",fontSize:16,marginBottom:16,letterSpacing:.5,color:k.primaryText,paddingBottom:4,borderBottom:`1px solid ${k.dividerColor}`},children:"Instructions"}),T.jsx("div",{className:"mcp-instructions-container",style:{flex:1,minHeight:180,maxHeight:320,overflowY:"auto",overflowX:"auto",margin:"0 0 20px 0",whiteSpace:"pre-wrap",width:"100%",boxSizing:"border-box",backgroundColor:k.secondaryBackground,color:k.primaryText,border:`1px solid ${k.borderColor}`,boxShadow:k.innerShadow},children:B||T.jsx("div",{style:{color:k.secondaryText,fontStyle:"italic",padding:"10px",textAlign:"center"},children:yn.instructions?"Generating instructions...":"Loading instructions..."})}),T.jsxs("div",{style:{display:"flex",gap:20,justifyContent:"space-between",width:"100%",marginTop:0,marginBottom:16,paddingRight:16},children:[T.jsx("button",{className:"mcp-instruction-btn",style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:500,borderRadius:8,border:`1px solid ${k.borderColor}`,background:k.secondaryBackground,cursor:"pointer",color:k.primaryText},onClick:Oe,onMouseEnter:Ne=>Ne.currentTarget.style.background=k.buttonBackground,onMouseLeave:Ne=>Ne.currentTarget.style.background=k.secondaryBackground,type:"button",children:Y}),T.jsx("button",{className:"mcp-instruction-btn",style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:500,borderRadius:8,border:`1px solid ${k.borderColor}`,background:k.secondaryBackground,cursor:"pointer",color:k.primaryText},onClick:He,onMouseEnter:Ne=>Ne.currentTarget.style.background=k.buttonBackground,onMouseLeave:Ne=>Ne.currentTarget.style.background=k.secondaryBackground,type:"button",children:pe}),T.jsx("button",{className:"mcp-instruction-btn",style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:500,borderRadius:8,border:`1px solid ${k.borderColor}`,background:k.secondaryBackground,cursor:"pointer",color:k.primaryText},onClick:Pe,onMouseEnter:Ne=>Ne.currentTarget.style.background=k.buttonBackground,onMouseLeave:Ne=>Ne.currentTarget.style.background=k.secondaryBackground,type:"button",children:me})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}))})();
